global.connect = global.connect || {};
const currentWebsocketManager = connect.WebSocketManager;
!function(e){var n={};function t(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:r})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(t.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var o in e)t.d(r,o,function(n){return e[n]}.bind(null,o));return r},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},t.p="",t(t.s=2)}([function(e,n,t){"use strict";var r=t(1);function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var i={assertTrue:function(e,n){if(!e)throw new Error(n)},assertNotNull:function(e,n){return i.assertTrue(null!==e&&void 0!==o(e),Object(r.sprintf)("%s must be provided",n||"A value")),e},isNonEmptyString:function(e){return"string"==typeof e&&e.length>0},assertIsList:function(e,n){if(!Array.isArray(e))throw new Error(n+" is not an array")},isFunction:function(e){return!!(e&&e.constructor&&e.call&&e.apply)},isObject:function(e){return!("object"!==o(e)||null===e)},isString:function(e){return"string"==typeof e},isNumber:function(e){return"number"==typeof e}},a=new RegExp("^(wss://)\\w*");i.validWSUrl=function(e){return a.test(e)},i.assertIsObject=function(e,n){if(!i.isObject(e))throw new Error(n+" is not an object!")};var c=i,s="NULL",u="CLIENT_LOGGER",l="DEBUG",f="aws/subscribe",p="aws/unsubscribe",g="aws/heartbeat";function d(e){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function b(e,n){return!n||"object"!==d(n)&&"function"!=typeof n?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):n}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function m(e,n){return(m=Object.setPrototypeOf||function(e,n){return e.__proto__=n,e})(e,n)}function h(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function v(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function w(e,n,t){return n&&v(e.prototype,n),t&&v(e,t),e}var S=function(){function e(){h(this,e)}return w(e,[{key:"debug",value:function(e){}},{key:"info",value:function(e){}},{key:"warn",value:function(e){}},{key:"error",value:function(e){}}]),e}(),k={DEBUG:10,INFO:20,WARN:30,ERROR:40},T=function(){function e(){h(this,e),this.updateLoggerConfig(),this.consoleLoggerWrapper=x()}return w(e,[{key:"writeToClientLogger",value:function(e,n){if(this.hasClientLogger())switch(e){case k.DEBUG:return this._clientLogger.debug(n);case k.INFO:return this._clientLogger.info(n);case k.WARN:return this._clientLogger.warn(n);case k.ERROR:return this._clientLogger.error(n)}}},{key:"isLevelEnabled",value:function(e){return e>=this._level}},{key:"hasClientLogger",value:function(){return null!==this._clientLogger}},{key:"getLogger",value:function(e){var n=e.prefix||"";return this._logsDestination===l?this.consoleLoggerWrapper:new C(n)}},{key:"updateLoggerConfig",value:function(e){var n=e||{};this._level=n.level||k.INFO,this._clientLogger=n.logger||null,this._logsDestination=s,n.debug&&(this._logsDestination=l),n.logger&&(this._logsDestination=u)}}]),e}(),_=function(){function e(){h(this,e)}return w(e,[{key:"debug",value:function(){}},{key:"info",value:function(){}},{key:"warn",value:function(){}},{key:"error",value:function(){}}]),e}(),C=function(e){function n(e){var t;return h(this,n),(t=b(this,y(n).call(this))).prefix=e||"",t}return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),n&&m(e,n)}(n,_),w(n,[{key:"debug",value:function(){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];this._log(k.DEBUG,n)}},{key:"info",value:function(){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];this._log(k.INFO,n)}},{key:"warn",value:function(){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];this._log(k.WARN,n)}},{key:"error",value:function(){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];this._log(k.ERROR,n)}},{key:"_shouldLog",value:function(e){return O.hasClientLogger()&&O.isLevelEnabled(e)}},{key:"_writeToClientLogger",value:function(e,n){O.writeToClientLogger(e,n)}},{key:"_log",value:function(e,n){if(this._shouldLog(e)){var t=this._convertToSingleStatement(n);this._writeToClientLogger(e,t)}}},{key:"_convertToSingleStatement",value:function(e){var n="";this.prefix&&(n+=this.prefix+" ");for(var t=0;t<e.length;t++){var r=e[t];n+=this._convertToString(r)+" "}return n}},{key:"_convertToString",value:function(e){try{if(!e)return"";if(c.isString(e))return e;if(c.isObject(e)&&c.isFunction(e.toString)){var n=e.toString();if("[object Object]"!==n)return n}return JSON.stringify(e)}catch(n){return console.error("Error while converting argument to string",e,n),""}}}]),n}(),x=function(){var e=new _;return e.debug=console.debug,e.info=console.info,e.warn=console.warn,e.error=console.error,e},O=new T;t.d(n,"a",function(){return E});var L=function(){var e=O.getLogger({}),n=null,t={reconnectWebSocket:!1,websocketInitFailed:!1,linearConnectAttempt:0,exponentialConnectAttempt:0,exponentialBackOffTime:1e3,linearTimeoutHandle:null,exponentialTimeoutHandle:null,lifeTimeTimeoutHandle:null},r={pendingResponse:!1,intervalHandle:null},o={initFailure:new Set,getWebSocketTransport:null,subscriptionUpdate:new Set,subscriptionFailure:new Set,topic:new Map,allMessage:new Set,connectionGain:new Set,connectionLost:new Set},i={connConfig:null,promiseHandle:null,promiseCompleted:!1},a={subscribed:new Set,pending:new Set},s=new Set([f,p,g]),u=navigator.onLine,l=setInterval(function(){u!==navigator.onLine&&(u=navigator.onLine)&&(!n||n.readyState>1)&&(e.info("Network online, Connecting to websocket"),x())},250),d=function(e,n){e.forEach(function(e){e(n)})},b=function(){if(r.pendingResponse)return e.warn("Heartbeat response not received"),clearInterval(r.intervalHandle),r.pendingResponse=!1,void k();e.debug("Sending heartbeat"),n.send(_(g)),r.pendingResponse=!0},y=function(){t.linearConnectAttempt=0,t.exponentialConnectAttempt=0,t.exponentialBackOffTime=1e3,r.pendingResponse=!1,t.reconnectWebSocket=!1,clearTimeout(t.lifeTimeTimeoutHandle),clearInterval(r.intervalHandle),clearTimeout(t.linearTimeoutHandle),clearTimeout(t.exponentialTimeoutHandle)},m=function(){try{if(e.info("WebSocket connection established!"),d(o.connectionGain),y(),a.subscribed.size>0||a.pending.size>0){var c=Array.from(a.subscribed.values());c=c.concat(Array.from(a.pending.values())),a.subscribed.clear(),n.send(_(f,{topics:c}))}b(),r.intervalHandle=setInterval(b,1e4),t.lifeTimeTimeoutHandle=setTimeout(function(){e.debug("Starting scheduled WebSocket manager reconnect"),k()},Date.parse(i.connConfig.webSocketTransport.expiry)-Date.now())}catch(n){e.error("Error after establishing web socket connection, error: ",n)}},h=function(n){t.linearConnectAttempt<=1&&d(o.connectionLost),e.info("Socket connection is closed. event: ",n),t.reconnectWebSocket&&L()},v=function(n){e.error("WebSocketManager Error, error_event: ",n),k()},w=function(n){var t=JSON.parse(n.data);switch(t.topic){case f:e.info("Subscription Message received from webSocket server",n.data),"success"===t.content.status?(t.content.topics.forEach(function(e){a.subscribed.add(e),a.pending.delete(e)}),d(o.subscriptionUpdate,t)):d(o.subscriptionFailure,t);break;case g:e.debug("Heartbeat response received"),r.pendingResponse=!1;break;default:if(t.topic){if(0===o.allMessage.size&&0===o.topic.size)return void e.warn("No registered callback listener for Topic",t);d(o.allMessage,t),o.topic.has(t.topic)&&d(o.topic.get(t.topic),t)}else t.message?e.warn("WebSocketManager Message Error",t):e.warn("Invalid incoming message",t)}},S=function(e){return!(!n||n.readyState===WebSocket.CLOSED)&&(n.close(1e3,e),!0)},k=function(){if(u)if(clearTimeout(t.lifeTimeTimeoutHandle),clearInterval(r.intervalHandle),t.linearConnectAttempt<3){t.linearConnectAttempt++;var n=Math.floor(2e3*(1+Math.random()));e.debug("Starting Linear WebSocket reconnect, Attempt : #"+t.linearConnectAttempt+" with delay "+n+" ms"),t.linearTimeoutHandle=setTimeout(function(){t.reconnectWebSocket=!0,x()},n)}else if(t.exponentialConnectAttempt<3){t.exponentialConnectAttempt++,t.exponentialBackOffTime*=2;var o=Math.floor(t.exponentialBackOffTime*(1+Math.random()));e.debug("Starting Exponential WebSocket reconnect, Attempt : #"+t.exponentialConnectAttempt+" with delay "+o+" sec."),i.promiseCompleted=!1,i.connConfig=null,t.exponentialTimeoutHandle=setTimeout(function(){t.reconnectWebSocket=!0,x()},o)}else i.promiseCompleted&&(e.error("Could not connect to WebSocket after several attempts"),T());else S("Network Offline, Closing WebSocket Manager")},T=function(){y(),S("Terminating WebSocket Manager"),e.error("WebSocket Initialization failed"),t.websocketInitFailed=!0,clearInterval(l),d(o.initFailure)},_=function(e,n){return JSON.stringify({topic:e,content:n})},C=function(n){return!!(c.isObject(n)&&c.isObject(n.webSocketTransport)&&c.isNonEmptyString(n.webSocketTransport.url)&&c.validWSUrl(n.webSocketTransport.url)&&c.isNonEmptyString(n.webSocketTransport.expiry)&&Date.parse(n.webSocketTransport.expiry)-Date.now()>=36e5)||(e.error("Invalid WebSocket Connection Configuration",n),!1)},x=function(){t.websocketInitFailed||(i.connConfig=null,i.promiseCompleted=!1,i.promiseHandle=o.getWebSocketTransport(),i.promiseHandle.then(function(n){i.promiseCompleted=!0,e.debug("Successfully fetched webSocket connection configuration"),C(n)?(i.connConfig=n,u&&(S("Restarting WebSocket Manager")||L())):T()},function(n){i.promiseCompleted=!0,e.error("Failed to fetch webSocket connection configuration",n),k()}))},L=function(){if(!t.websocketInitFailed){e.debug("Initializing Websocket Manager");try{C(i.connConfig)?((n=new WebSocket(i.connConfig.webSocketTransport.url)).addEventListener("open",m),n.addEventListener("message",w),n.addEventListener("error",v),n.addEventListener("close",h)):i.promiseCompleted&&T()}catch(n){e.error("Error Initializing web-socket-manager",n),T()}}};this.init=function(n){c.assertTrue(c.isFunction(n),"transportHandle must be a function"),null===o.getWebSocketTransport?(o.getWebSocketTransport=n,x()):e.warn("Web Socket Manager was already initialized")},this.onInitFailure=function(e){return c.assertTrue(c.isFunction(e),"cb must be a function"),o.initFailure.add(e),t.websocketInitFailed&&e(),function(){return o.initFailure.delete(e)}},this.onConnectionGain=function(e){return c.assertTrue(c.isFunction(e),"cb must be a function"),o.connectionGain.add(e),n&&n.readyState===WebSocket.OPEN&&e(),function(){return o.connectionGain.delete(e)}},this.onConnectionLost=function(e){return c.assertTrue(c.isFunction(e),"cb must be a function"),o.connectionLost.add(e),n&&n.readyState===WebSocket.CLOSED&&e(),function(){return o.connectionLost.delete(e)}},this.onSubscriptionUpdate=function(e){return c.assertTrue(c.isFunction(e),"cb must be a function"),o.subscriptionUpdate.add(e),function(){return o.subscriptionUpdate.delete(e)}},this.onSubscriptionFailure=function(e){return c.assertTrue(c.isFunction(e),"cb must be a function"),o.subscriptionFailure.add(e),function(){return o.subscriptionFailure.delete(e)}},this.onMessage=function(e,n){return c.assertNotNull(e,"topicName"),c.assertTrue(c.isFunction(n),"cb must be a function"),o.topic.has(e)?o.topic.get(e).add(n):o.topic.set(e,new Set([n])),function(){return o.topic.get(e).delete(n)}},this.onAllMessage=function(e){return c.assertTrue(c.isFunction(e),"cb must be a function"),o.allMessage.add(e),function(){return o.allMessage.delete(e)}},this.subscribeTopics=function(e){c.assertNotNull(e,"topics"),c.assertIsList(e),e.forEach(function(e){a.pending.add(e)}),n&&n.readyState===WebSocket.OPEN&&n.send(_(f,{topics:e}))},this.sendMessage=function(t){if(c.assertIsObject(t,"payload"),void 0===t.topic||s.has(t.topic))e.warn("Cannot send message, Invalid topic",t);else{try{t=JSON.stringify(t)}catch(n){return void e.warn("Error stringify message",t)}n&&n.readyState===WebSocket.OPEN?n.send(t):e.warn("Cannot send message, web socket connection is not open")}},this.closeWebSocket=function(){y(),clearInterval(l),S("User request to close WebSocket")}},E={create:function(){return new L},setGlobalConfig:function(e){var n=e.loggerConfig;O.updateLoggerConfig(n)},LogLevel:k,Logger:S}},function(e,n,t){var r;!function(){"use strict";var o={not_string:/[^s]/,not_bool:/[^t]/,not_type:/[^T]/,not_primitive:/[^v]/,number:/[diefg]/,numeric_arg:/[bcdiefguxX]/,json:/[j]/,not_json:/[^j]/,text:/^[^\x25]+/,modulo:/^\x25{2}/,placeholder:/^\x25(?:([1-9]\d*)\$|\(([^)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-gijostTuvxX])/,key:/^([a-z_][a-z_\d]*)/i,key_access:/^\.([a-z_][a-z_\d]*)/i,index_access:/^\[(\d+)\]/,sign:/^[+-]/};function i(e){return function(e,n){var t,r,a,c,s,u,l,f,p,g=1,d=e.length,b="";for(r=0;r<d;r++)if("string"==typeof e[r])b+=e[r];else if("object"==typeof e[r]){if((c=e[r]).keys)for(t=n[g],a=0;a<c.keys.length;a++){if(null==t)throw new Error(i('[sprintf] Cannot access property "%s" of undefined value "%s"',c.keys[a],c.keys[a-1]));t=t[c.keys[a]]}else t=c.param_no?n[c.param_no]:n[g++];if(o.not_type.test(c.type)&&o.not_primitive.test(c.type)&&t instanceof Function&&(t=t()),o.numeric_arg.test(c.type)&&"number"!=typeof t&&isNaN(t))throw new TypeError(i("[sprintf] expecting number but found %T",t));switch(o.number.test(c.type)&&(f=t>=0),c.type){case"b":t=parseInt(t,10).toString(2);break;case"c":t=String.fromCharCode(parseInt(t,10));break;case"d":case"i":t=parseInt(t,10);break;case"j":t=JSON.stringify(t,null,c.width?parseInt(c.width):0);break;case"e":t=c.precision?parseFloat(t).toExponential(c.precision):parseFloat(t).toExponential();break;case"f":t=c.precision?parseFloat(t).toFixed(c.precision):parseFloat(t);break;case"g":t=c.precision?String(Number(t.toPrecision(c.precision))):parseFloat(t);break;case"o":t=(parseInt(t,10)>>>0).toString(8);break;case"s":t=String(t),t=c.precision?t.substring(0,c.precision):t;break;case"t":t=String(!!t),t=c.precision?t.substring(0,c.precision):t;break;case"T":t=Object.prototype.toString.call(t).slice(8,-1).toLowerCase(),t=c.precision?t.substring(0,c.precision):t;break;case"u":t=parseInt(t,10)>>>0;break;case"v":t=t.valueOf(),t=c.precision?t.substring(0,c.precision):t;break;case"x":t=(parseInt(t,10)>>>0).toString(16);break;case"X":t=(parseInt(t,10)>>>0).toString(16).toUpperCase()}o.json.test(c.type)?b+=t:(!o.number.test(c.type)||f&&!c.sign?p="":(p=f?"+":"-",t=t.toString().replace(o.sign,"")),u=c.pad_char?"0"===c.pad_char?"0":c.pad_char.charAt(1):" ",l=c.width-(p+t).length,s=c.width&&l>0?u.repeat(l):"",b+=c.align?p+t+s:"0"===u?p+s+t:s+p+t)}return b}(function(e){if(c[e])return c[e];var n,t=e,r=[],i=0;for(;t;){if(null!==(n=o.text.exec(t)))r.push(n[0]);else if(null!==(n=o.modulo.exec(t)))r.push("%");else{if(null===(n=o.placeholder.exec(t)))throw new SyntaxError("[sprintf] unexpected placeholder");if(n[2]){i|=1;var a=[],s=n[2],u=[];if(null===(u=o.key.exec(s)))throw new SyntaxError("[sprintf] failed to parse named argument key");for(a.push(u[1]);""!==(s=s.substring(u[0].length));)if(null!==(u=o.key_access.exec(s)))a.push(u[1]);else{if(null===(u=o.index_access.exec(s)))throw new SyntaxError("[sprintf] failed to parse named argument key");a.push(u[1])}n[2]=a}else i|=2;if(3===i)throw new Error("[sprintf] mixing positional and named placeholders is not (yet) supported");r.push({placeholder:n[0],param_no:n[1],keys:n[2],sign:n[3],pad_char:n[4],align:n[5],width:n[6],precision:n[7],type:n[8]})}t=t.substring(n[0].length)}return c[e]=r}(e),arguments)}function a(e,n){return i.apply(null,[e].concat(n||[]))}var c=Object.create(null);n.sprintf=i,n.vsprintf=a,"undefined"!=typeof window&&(window.sprintf=i,window.vsprintf=a,void 0===(r=function(){return{sprintf:i,vsprintf:a}}.call(n,t,n,e))||(e.exports=r))}()},function(e,n,t){"use strict";t.r(n),function(e){t.d(n,"WebSocketManager",function(){return o});var r=t(0);e.connect=e.connect||{},connect.WebSocketManager=r.a,connect.testnum=1;var o=r.a}.call(this,t(3))},function(e,n){var t;t=function(){return this}();try{t=t||new Function("return this")()}catch(e){"object"==typeof window&&(t=window)}e.exports=t}]);
const WebSocketManager = connect.WebSocketManager;
connect.WebSocketManager = currentWebsocketManager || WebSocketManager;
export default WebSocketManager;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL3V0aWxzLmpzIiwid2VicGFjazovLy8uL3NyYy9jb25zdGFudHMuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2xvZy5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvd2ViU29ja2V0TWFuYWdlci5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvc3ByaW50Zi1qcy9zcmMvc3ByaW50Zi5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vLyh3ZWJwYWNrKS9idWlsZGluL2dsb2JhbC5qcyJdLCJuYW1lcyI6WyJpbnN0YWxsZWRNb2R1bGVzIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiZXhwb3J0cyIsIm1vZHVsZSIsImkiLCJsIiwibW9kdWxlcyIsImNhbGwiLCJtIiwiYyIsImQiLCJuYW1lIiwiZ2V0dGVyIiwibyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImdldCIsInIiLCJTeW1ib2wiLCJ0b1N0cmluZ1RhZyIsInZhbHVlIiwidCIsIm1vZGUiLCJfX2VzTW9kdWxlIiwibnMiLCJjcmVhdGUiLCJrZXkiLCJiaW5kIiwibiIsIm9iamVjdCIsInByb3BlcnR5IiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJwIiwicyIsIlV0aWxzIiwicHJlbWlzZSIsIm1lc3NhZ2UiLCJFcnJvciIsImFzc2VydFRydWUiLCJ1bmRlZmluZWQiLCJfdHlwZW9mIiwic3ByaW50ZiIsImxlbmd0aCIsIkFycmF5IiwiaXNBcnJheSIsIm9iaiIsImNvbnN0cnVjdG9yIiwiYXBwbHkiLCJ3c1JlZ2V4IiwiUmVnRXhwIiwidmFsaWRXU1VybCIsIndzVXJsIiwidGVzdCIsImFzc2VydElzT2JqZWN0IiwiaXNPYmplY3QiLCJMT0dTX0RFU1RJTkFUSU9OIiwiUk9VVEVfS0VZIiwiTG9nZ2VyIiwiZGF0YSIsIkxvZ0xldmVsIiwiREVCVUciLCJJTkZPIiwiV0FSTiIsIkVSUk9SIiwiTG9nTWFuYWdlckltcGwiLCJfY2xhc3NDYWxsQ2hlY2siLCJ0aGlzIiwidXBkYXRlTG9nZ2VyQ29uZmlnIiwiY29uc29sZUxvZ2dlcldyYXBwZXIiLCJjcmVhdGVDb25zb2xlTG9nZ2VyIiwibGV2ZWwiLCJsb2dTdGF0ZW1lbnQiLCJoYXNDbGllbnRMb2dnZXIiLCJfY2xpZW50TG9nZ2VyIiwiZGVidWciLCJpbmZvIiwid2FybiIsImVycm9yIiwiX2xldmVsIiwib3B0aW9ucyIsInByZWZpeCIsIl9sb2dzRGVzdGluYXRpb24iLCJMb2dnZXJXcmFwcGVySW1wbCIsImlucHV0Q29uZmlnIiwiY29uZmlnIiwibG9nZ2VyIiwiTG9nZ2VyV3JhcHBlciIsIl90aGlzIiwiX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4iLCJfZ2V0UHJvdG90eXBlT2YiLCJfbGVuIiwiYXJndW1lbnRzIiwiYXJncyIsIl9rZXkiLCJfbG9nIiwiX2xlbjIiLCJfa2V5MiIsIl9sZW4zIiwiX2tleTMiLCJfbGVuNCIsIl9rZXk0IiwiTG9nTWFuYWdlciIsImlzTGV2ZWxFbmFibGVkIiwid3JpdGVUb0NsaWVudExvZ2dlciIsIl9zaG91bGRMb2ciLCJfY29udmVydFRvU2luZ2xlU3RhdGVtZW50IiwiX3dyaXRlVG9DbGllbnRMb2dnZXIiLCJpbmRleCIsImFyZyIsIl9jb252ZXJ0VG9TdHJpbmciLCJpc1N0cmluZyIsImlzRnVuY3Rpb24iLCJ0b1N0cmluZyIsInRvU3RyaW5nUmVzdWx0IiwiSlNPTiIsInN0cmluZ2lmeSIsImNvbnNvbGUiLCJfX3dlYnBhY2tfZXhwb3J0c19fIiwiV2ViU29ja2V0TWFuYWdlck9iamVjdCIsIldlYlNvY2tldE1hbmFnZXIiLCJnZXRMb2dnZXIiLCJ3ZWJTb2NrZXQiLCJyZWNvbm5lY3RDb25maWciLCJyZWNvbm5lY3RXZWJTb2NrZXQiLCJ3ZWJzb2NrZXRJbml0RmFpbGVkIiwibGluZWFyQ29ubmVjdEF0dGVtcHQiLCJleHBvbmVudGlhbENvbm5lY3RBdHRlbXB0IiwiZXhwb25lbnRpYWxCYWNrT2ZmVGltZSIsImxpbmVhclRpbWVvdXRIYW5kbGUiLCJleHBvbmVudGlhbFRpbWVvdXRIYW5kbGUiLCJsaWZlVGltZVRpbWVvdXRIYW5kbGUiLCJoZWFydGJlYXRDb25maWciLCJwZW5kaW5nUmVzcG9uc2UiLCJpbnRlcnZhbEhhbmRsZSIsImNhbGxiYWNrcyIsImluaXRGYWlsdXJlIiwiU2V0IiwiZ2V0V2ViU29ja2V0VHJhbnNwb3J0Iiwic3Vic2NyaXB0aW9uVXBkYXRlIiwic3Vic2NyaXB0aW9uRmFpbHVyZSIsInRvcGljIiwiTWFwIiwiYWxsTWVzc2FnZSIsImNvbm5lY3Rpb25HYWluIiwiY29ubmVjdGlvbkxvc3QiLCJ3ZWJTb2NrZXRDb25maWciLCJjb25uQ29uZmlnIiwicHJvbWlzZUhhbmRsZSIsInByb21pc2VDb21wbGV0ZWQiLCJ0b3BpY1N1YnNjcmlwdGlvbiIsInN1YnNjcmliZWQiLCJwZW5kaW5nIiwiaW52YWxpZFNlbmRNZXNzYWdlUm91dGVLZXlzIiwib25saW5lIiwibmF2aWdhdG9yIiwib25MaW5lIiwibmV0d29ya0Nvbm5lY3Rpdml0eUNoZWNrZXIiLCJzZXRJbnRlcnZhbCIsInJlYWR5U3RhdGUiLCJnZXRXZWJTb2NrZXRDb25uQ29uZmlnIiwiaW52b2tlQ2FsbGJhY2tzIiwicmVzcG9uc2UiLCJmb3JFYWNoIiwiY2FsbGJhY2siLCJzZW5kSGVhcnRCZWF0IiwiY2xlYXJJbnRlcnZhbCIsInJlZnJlc2hXZWJTb2NrZXRDb25uZWN0aW9uIiwic2VuZCIsImNyZWF0ZVdlYlNvY2tldFBheWxvYWQiLCJyZXNldFN0YXRlIiwiY2xlYXJUaW1lb3V0Iiwid2ViU29ja2V0T25PcGVuIiwic2l6ZSIsInRvcGljcyIsImZyb20iLCJ2YWx1ZXMiLCJjb25jYXQiLCJjbGVhciIsInNldFRpbWVvdXQiLCJEYXRlIiwicGFyc2UiLCJ3ZWJTb2NrZXRUcmFuc3BvcnQiLCJleHBpcnkiLCJub3ciLCJ3ZWJTb2NrZXRPbkNsb3NlIiwiZXZlbnQiLCJpbml0V2ViU29ja2V0Iiwid2ViU29ja2V0T25FcnJvciIsIndlYlNvY2tldE9uTWVzc2FnZSIsImNvbnRlbnQiLCJzdGF0dXMiLCJ0b3BpY05hbWUiLCJhZGQiLCJoYXMiLCJjbG9zZVdlYlNvY2tldCIsInJlYXNvbiIsIldlYlNvY2tldCIsIkNMT1NFRCIsImNsb3NlIiwidGltZU91dCIsIk1hdGgiLCJmbG9vciIsInJhbmRvbSIsIndhaXRUaW1lIiwidGVybWluYXRlV2ViU29ja2V0TWFuYWdlciIsInZhbGlkV2ViU29ja2V0Q29ubkNvbmZpZyIsImlzTm9uRW1wdHlTdHJpbmciLCJ1cmwiLCJ0aGVuIiwiYWRkRXZlbnRMaXN0ZW5lciIsImluaXQiLCJ0cmFuc3BvcnRIYW5kbGUiLCJvbkluaXRGYWlsdXJlIiwiY2IiLCJvbkNvbm5lY3Rpb25HYWluIiwiT1BFTiIsIm9uQ29ubmVjdGlvbkxvc3QiLCJvblN1YnNjcmlwdGlvblVwZGF0ZSIsIm9uU3Vic2NyaXB0aW9uRmFpbHVyZSIsIm9uTWVzc2FnZSIsImFzc2VydE5vdE51bGwiLCJzZXQiLCJvbkFsbE1lc3NhZ2UiLCJzdWJzY3JpYmVUb3BpY3MiLCJhc3NlcnRJc0xpc3QiLCJzZW5kTWVzc2FnZSIsInBheWxvYWQiLCJzZXRHbG9iYWxDb25maWciLCJsb2dnZXJDb25maWciLCJfX1dFQlBBQ0tfQU1EX0RFRklORV9SRVNVTFRfXyIsInJlIiwibm90X3N0cmluZyIsIm5vdF9ib29sIiwibm90X3R5cGUiLCJub3RfcHJpbWl0aXZlIiwibnVtYmVyIiwibnVtZXJpY19hcmciLCJqc29uIiwibm90X2pzb24iLCJ0ZXh0IiwibW9kdWxvIiwicGxhY2Vob2xkZXIiLCJrZXlfYWNjZXNzIiwiaW5kZXhfYWNjZXNzIiwic2lnbiIsInBhcnNlX3RyZWUiLCJhcmd2IiwiayIsInBoIiwicGFkIiwicGFkX2NoYXJhY3RlciIsInBhZF9sZW5ndGgiLCJpc19wb3NpdGl2ZSIsImN1cnNvciIsInRyZWVfbGVuZ3RoIiwib3V0cHV0Iiwia2V5cyIsInBhcmFtX25vIiwidHlwZSIsIkZ1bmN0aW9uIiwiaXNOYU4iLCJUeXBlRXJyb3IiLCJwYXJzZUludCIsIlN0cmluZyIsImZyb21DaGFyQ29kZSIsIndpZHRoIiwicHJlY2lzaW9uIiwicGFyc2VGbG9hdCIsInRvRXhwb25lbnRpYWwiLCJ0b0ZpeGVkIiwiTnVtYmVyIiwidG9QcmVjaXNpb24iLCJzdWJzdHJpbmciLCJzbGljZSIsInRvTG93ZXJDYXNlIiwidmFsdWVPZiIsInRvVXBwZXJDYXNlIiwicmVwbGFjZSIsInBhZF9jaGFyIiwiY2hhckF0IiwicmVwZWF0IiwiYWxpZ24iLCJzcHJpbnRmX2Zvcm1hdCIsImZtdCIsInNwcmludGZfY2FjaGUiLCJtYXRjaCIsIl9mbXQiLCJhcmdfbmFtZXMiLCJleGVjIiwicHVzaCIsIlN5bnRheEVycm9yIiwiZmllbGRfbGlzdCIsInJlcGxhY2VtZW50X2ZpZWxkIiwiZmllbGRfbWF0Y2giLCJzcHJpbnRmX3BhcnNlIiwidnNwcmludGYiLCJ3aW5kb3ciLCJnbG9iYWwiLCJfd2ViU29ja2V0TWFuYWdlcl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fIiwiY29ubmVjdCIsInRlc3RudW0iLCJnIiwiZSJdLCJtYXBwaW5ncyI6ImFBQ0UsSUFBSUEsRUFBbUIsR0FHdkIsU0FBU0MsRUFBb0JDLEdBRzVCLEdBQUdGLEVBQWlCRSxHQUNuQixPQUFPRixFQUFpQkUsR0FBVUMsUUFHbkMsSUFBSUMsRUFBU0osRUFBaUJFLEdBQVksQ0FDekNHLEVBQUdILEVBQ0hJLEdBQUcsRUFDSEgsUUFBUyxJQVVWLE9BTkFJLEVBQVFMLEdBQVVNLEtBQUtKLEVBQU9ELFFBQVNDLEVBQVFBLEVBQU9ELFFBQVNGLEdBRy9ERyxFQUFPRSxHQUFJLEVBR0pGLEVBQU9ELFFBS2ZGLEVBQW9CUSxFQUFJRixFQUd4Qk4sRUFBb0JTLEVBQUlWLEVBR3hCQyxFQUFvQlUsRUFBSSxTQUFTUixFQUFTUyxFQUFNQyxHQUMzQ1osRUFBb0JhLEVBQUVYLEVBQVNTLElBQ2xDRyxPQUFPQyxlQUFl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UyxFQUFPRSxRQUFVRixFQUFPRSxTQUFXLEdBQ25DQSxRQUFRcEwsaUJBQW1CRCxJQUMzQnFMLFFBQVFDLFFBQVUsRUFDWCxJQUFNckwsRUFBbUJELEssK0JDTmhDLElBQUl1TCxFQUdKQSxFQUFJLFdBQ0gsT0FBTzNPLEtBREosR0FJSixJQUVDMk8sRUFBSUEsR0FBSyxJQUFJMUMsU0FBUyxjQUFiLEdBQ1IsTUFBTzJDLEdBRWMsaUJBQVhOLFNBQXFCSyxFQUFJTCxRQU9yQ3ZTLEVBQU9ELFFBQVU2UyIsImZpbGUiOiJhbWF6b24tY29ubmVjdC13ZWJzb2NrZXQtbWFuYWdlci5qcyIsInNvdXJjZXNDb250ZW50IjpbIiBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKSB7XG4gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4gXHRcdH1cbiBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbiBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuIFx0XHRcdGk6IG1vZHVsZUlkLFxuIFx0XHRcdGw6IGZhbHNlLFxuIFx0XHRcdGV4cG9ydHM6IHt9XG4gXHRcdH07XG5cbiBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG4gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbiBcdFx0bW9kdWxlLmwgPSB0cnVlO1xuXG4gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiBcdH1cblxuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb24gZm9yIGhhcm1vbnkgZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7XG4gXHRcdGlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywgbmFtZSkpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgbmFtZSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGdldHRlciB9KTtcbiBcdFx0fVxuIFx0fTtcblxuIFx0Ly8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yID0gZnVuY3Rpb24oZXhwb3J0cykge1xuIFx0XHRpZih0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wudG9TdHJpbmdUYWcpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiAnTW9kdWxlJyB9KTtcbiBcdFx0fVxuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xuIFx0fTtcblxuIFx0Ly8gY3JlYXRlIGEgZmFrZSBuYW1lc3BhY2Ugb2JqZWN0XG4gXHQvLyBtb2RlICYgMTogdmFsdWUgaXMgYSBtb2R1bGUgaWQsIHJlcXVpcmUgaXRcbiBcdC8vIG1vZGUgJiAyOiBtZXJnZSBhbGwgcHJvcGVydGllcyBvZiB2YWx1ZSBpbnRvIHRoZSBuc1xuIFx0Ly8gbW9kZSAmIDQ6IHJldHVybiB2YWx1ZSB3aGVuIGFscmVhZHkgbnMgb2JqZWN0XG4gXHQvLyBtb2RlICYgOHwxOiBiZWhhdmUgbGlrZSByZXF1aXJlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnQgPSBmdW5jdGlvbih2YWx1ZSwgbW9kZSkge1xuIFx0XHRpZihtb2RlICYgMSkgdmFsdWUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKHZhbHVlKTtcbiBcdFx0aWYobW9kZSAmIDgpIHJldHVybiB2YWx1ZTtcbiBcdFx0aWYoKG1vZGUgJiA0KSAmJiB0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnICYmIHZhbHVlICYmIHZhbHVlLl9fZXNNb2R1bGUpIHJldHVybiB2YWx1ZTtcbiBcdFx0dmFyIG5zID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yKG5zKTtcbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KG5zLCAnZGVmYXVsdCcsIHsgZW51bWVyYWJsZTogdHJ1ZSwgdmFsdWU6IHZhbHVlIH0pO1xuIFx0XHRpZihtb2RlICYgMiAmJiB0eXBlb2YgdmFsdWUgIT0gJ3N0cmluZycpIGZvcih2YXIga2V5IGluIHZhbHVlKSBfX3dlYnBhY2tfcmVxdWlyZV9fLmQobnMsIGtleSwgZnVuY3Rpb24oa2V5KSB7IHJldHVybiB2YWx1ZVtrZXldOyB9LmJpbmQobnVsbCwga2V5KSk7XG4gXHRcdHJldHVybiBucztcbiBcdH07XG5cbiBcdC8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSBmdW5jdGlvbihtb2R1bGUpIHtcbiBcdFx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0RGVmYXVsdCgpIHsgcmV0dXJuIG1vZHVsZVsnZGVmYXVsdCddOyB9IDpcbiBcdFx0XHRmdW5jdGlvbiBnZXRNb2R1bGVFeHBvcnRzKCkgeyByZXR1cm4gbW9kdWxlOyB9O1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCAnYScsIGdldHRlcik7XG4gXHRcdHJldHVybiBnZXR0ZXI7XG4gXHR9O1xuXG4gXHQvLyBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGxcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iamVjdCwgcHJvcGVydHkpIHsgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KTsgfTtcblxuIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbiBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7XG5cblxuIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXyhfX3dlYnBhY2tfcmVxdWlyZV9fLnMgPSAyKTtcbiIsImltcG9ydCB7IHNwcmludGYgfSBmcm9tIFwic3ByaW50Zi1qc1wiO1xuY29uc3QgVXRpbHMgPSB7fTtcblxuLyoqXG4gKiBBc3NlcnRzIHRoYXQgYSBwcmVtaXNlIGlzIHRydWUuXG4gKi9cblV0aWxzLmFzc2VydFRydWUgPSBmdW5jdGlvbihwcmVtaXNlLCBtZXNzYWdlKSB7XG4gIGlmICghcHJlbWlzZSkge1xuICAgIHRocm93IG5ldyBFcnJvcihtZXNzYWdlKTtcbiAgfVxufTtcblxuLyoqXG4gKiBBc3NlcnRzIHRoYXQgYSB2YWx1ZSBpcyBub3QgbnVsbCBvciB1bmRlZmluZWQuXG4gKi9cblV0aWxzLmFzc2VydE5vdE51bGwgPSBmdW5jdGlvbih2YWx1ZSwgbmFtZSkge1xuICBVdGlscy5hc3NlcnRUcnVlKFxuICAgIHZhbHVlICE9PSBudWxsICYmIHR5cGVvZiB2YWx1ZSAhPT0gdW5kZWZpbmVkLFxuICAgIHNwcmludGYoXCIlcyBtdXN0IGJlIHByb3ZpZGVkXCIsIG5hbWUgfHwgXCJBIHZhbHVlXCIpXG4gICk7XG4gIHJldHVybiB2YWx1ZTtcbn07XG5cblV0aWxzLmlzTm9uRW1wdHlTdHJpbmcgPSBmdW5jdGlvbih2YWx1ZSkge1xuICByZXR1cm4gdHlwZW9mIHZhbHVlID09PSBcInN0cmluZ1wiICYmIHZhbHVlLmxlbmd0aCA+IDA7XG59O1xuXG5VdGlscy5hc3NlcnRJc0xpc3QgPSBmdW5jdGlvbih2YWx1ZSwga2V5KSB7XG4gIGlmICghQXJyYXkuaXNBcnJheSh2YWx1ZSkpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3Ioa2V5ICsgXCIgaXMgbm90IGFuIGFycmF5XCIpO1xuICB9XG59O1xuXG4vKipcbiAqIERldGVybWluZSBpZiB0aGUgZ2l2ZW4gdmFsdWUgaXMgYSBjYWxsYWJsZSBmdW5jdGlvbiB0eXBlLlxuICogQm9ycm93ZWQgZnJvbSBVbmRlcnNjb3JlLmpzLlxuICovXG5VdGlscy5pc0Z1bmN0aW9uID0gZnVuY3Rpb24ob2JqKSB7XG4gIHJldHVybiAhIShvYmogJiYgb2JqLmNvbnN0cnVjdG9yICYmIG9iai5jYWxsICYmIG9iai5hcHBseSk7XG59O1xuXG5VdGlscy5pc09iamVjdCA9IGZ1bmN0aW9uKHZhbHVlKSB7XG4gIHJldHVybiAhKHR5cGVvZiB2YWx1ZSAhPT0gXCJvYmplY3RcIiB8fCB2YWx1ZSA9PT0gbnVsbCk7XG59O1xuXG5VdGlscy5pc1N0cmluZyA9IGZ1bmN0aW9uKHZhbHVlKSB7XG4gIHJldHVybiB0eXBlb2YgdmFsdWUgPT09IFwic3RyaW5nXCI7XG59O1xuXG5VdGlscy5pc051bWJlciA9IGZ1bmN0aW9uKHZhbHVlKSB7XG4gIHJldHVybiB0eXBlb2YgdmFsdWUgPT09IFwibnVtYmVyXCI7XG59O1xuXG5jb25zdCB3c1JlZ2V4ID0gbmV3IFJlZ0V4cChcIl4od3NzOi8vKVxcXFx3KlwiKTtcblV0aWxzLnZhbGlkV1NVcmwgPSBmdW5jdGlvbiAod3NVcmwpIHtcbiAgcmV0dXJuIHdzUmVnZXgudGVzdCh3c1VybCk7XG59O1xuXG5VdGlscy5hc3NlcnRJc09iamVjdCA9IGZ1bmN0aW9uKHZhbHVlLCBrZXkpIHtcbiAgaWYgKCFVdGlscy5pc09iamVjdCh2YWx1ZSkpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3Ioa2V5ICsgXCIgaXMgbm90IGFuIG9iamVjdCFcIik7XG4gIH1cbn07XG5cbmV4cG9ydCBkZWZhdWx0IFV0aWxzO1xuXG4iLCJcbmV4cG9ydCBjb25zdCBMT0dTX0RFU1RJTkFUSU9OID0ge1xuICBOVUxMOiBcIk5VTExcIixcbiAgQ0xJRU5UX0xPR0dFUjogXCJDTElFTlRfTE9HR0VSXCIsXG4gIERFQlVHOiBcIkRFQlVHXCJcbn07XG5cbmV4cG9ydCBjb25zdCBNSU5fV0VCU09DS0VUX0xJRkVUSU1FID0gMzYwMDAwMDtcbmV4cG9ydCBjb25zdCBNQVhfTElORUFSX0NPTk5FQ1RfQVRURU1QVFMgPSAzO1xuZXhwb3J0IGNvbnN0IE1BWF9FWFBPTkVOVElBTF9DT05ORUNUX0FUVEVNUFRTID0gMztcbmV4cG9ydCBjb25zdCBIRUFSVEJFQVRfSU5URVJWQUwgPSAxMDAwMDtcblxuZXhwb3J0IGNvbnN0IFJPVVRFX0tFWSA9IHtcbiAgU1VCU0NSSUJFOiBcImF3cy9zdWJzY3JpYmVcIixcbiAgVU5TVUJTQ1JJQkU6IFwiYXdzL3Vuc3Vic2NyaWJlXCIsXG4gIEhFQVJUQkVBVDogXCJhd3MvaGVhcnRiZWF0XCJcbn07XG4iLCJpbXBvcnQgVXRpbHMgZnJvbSBcIi4vdXRpbHNcIjtcbmltcG9ydCB7IExPR1NfREVTVElOQVRJT04gfSBmcm9tIFwiLi9jb25zdGFudHNcIjtcblxuLyplc2xpbnQtZGlzYWJsZSBuby11bnVzZWQtdmFycyovXG5jbGFzcyBMb2dnZXIge1xuICBkZWJ1ZyhkYXRhKSB7fVxuXG4gIGluZm8oZGF0YSkge31cblxuICB3YXJuKGRhdGEpIHt9XG5cbiAgZXJyb3IoZGF0YSkge31cbn1cbi8qZXNsaW50LWVuYWJsZSBuby11bnVzZWQtdmFycyovXG5cbmNvbnN0IExvZ0xldmVsID0ge1xuICBERUJVRzogMTAsXG4gIElORk86IDIwLFxuICBXQVJOOiAzMCxcbiAgRVJST1I6IDQwXG59O1xuXG5jbGFzcyBMb2dNYW5hZ2VySW1wbCB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHRoaXMudXBkYXRlTG9nZ2VyQ29uZmlnKCk7XG4gICAgdGhpcy5jb25zb2xlTG9nZ2VyV3JhcHBlciA9IGNyZWF0ZUNvbnNvbGVMb2dnZXIoKTtcbiAgfVxuXG4gIHdyaXRlVG9DbGllbnRMb2dnZXIobGV2ZWwsIGxvZ1N0YXRlbWVudCkge1xuICAgIGlmICghdGhpcy5oYXNDbGllbnRMb2dnZXIoKSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBzd2l0Y2ggKGxldmVsKSB7XG4gICAgICBjYXNlIExvZ0xldmVsLkRFQlVHOlxuICAgICAgICByZXR1cm4gdGhpcy5fY2xpZW50TG9nZ2VyLmRlYnVnKGxvZ1N0YXRlbWVudCk7XG4gICAgICBjYXNlIExvZ0xldmVsLklORk86XG4gICAgICAgIHJldHVybiB0aGlzLl9jbGllbnRMb2dnZXIuaW5mbyhsb2dTdGF0ZW1lbnQpO1xuICAgICAgY2FzZSBMb2dMZXZlbC5XQVJOOlxuICAgICAgICByZXR1cm4gdGhpcy5fY2xpZW50TG9nZ2VyLndhcm4obG9nU3RhdGVtZW50KTtcbiAgICAgIGNhc2UgTG9nTGV2ZWwuRVJST1I6XG4gICAgICAgIHJldHVybiB0aGlzLl9jbGllbnRMb2dnZXIuZXJyb3IobG9nU3RhdGVtZW50KTtcbiAgICB9XG4gIH1cblxuICBpc0xldmVsRW5hYmxlZChsZXZlbCkge1xuICAgIHJldHVybiBsZXZlbCA+PSB0aGlzLl9sZXZlbDtcbiAgfVxuXG4gIGhhc0NsaWVudExvZ2dlcigpIHtcbiAgICByZXR1cm4gdGhpcy5fY2xpZW50TG9nZ2VyICE9PSBudWxsO1xuICB9XG5cbiAgZ2V0TG9nZ2VyKG9wdGlvbnMpIHtcbiAgICB2YXIgcHJlZml4ID0gb3B0aW9ucy5wcmVmaXggfHwgXCJcIjtcbiAgICBpZiAodGhpcy5fbG9nc0Rlc3RpbmF0aW9uID09PSBMT0dTX0RFU1RJTkFUSU9OLkRFQlVHKSB7XG4gICAgICByZXR1cm4gdGhpcy5jb25zb2xlTG9nZ2VyV3JhcHBlcjtcbiAgICB9XG4gICAgcmV0dXJuIG5ldyBMb2dnZXJXcmFwcGVySW1wbChwcmVmaXgpO1xuICB9XG5cbiAgdXBkYXRlTG9nZ2VyQ29uZmlnKGlucHV0Q29uZmlnKSB7XG4gICAgdmFyIGNvbmZpZyA9IGlucHV0Q29uZmlnIHx8IHt9O1xuICAgIHRoaXMuX2xldmVsID0gY29uZmlnLmxldmVsIHx8IExvZ0xldmVsLklORk87XG4gICAgdGhpcy5fY2xpZW50TG9nZ2VyID0gY29uZmlnLmxvZ2dlciB8fCBudWxsO1xuICAgIHRoaXMuX2xvZ3NEZXN0aW5hdGlvbiA9IExPR1NfREVTVElOQVRJT04uTlVMTDtcbiAgICBpZiAoY29uZmlnLmRlYnVnKSB7XG4gICAgICB0aGlzLl9sb2dzRGVzdGluYXRpb24gPSBMT0dTX0RFU1RJTkFUSU9OLkRFQlVHO1xuICAgIH1cbiAgICBpZiAoY29uZmlnLmxvZ2dlcikge1xuICAgICAgdGhpcy5fbG9nc0Rlc3RpbmF0aW9uID0gTE9HU19ERVNUSU5BVElPTi5DTElFTlRfTE9HR0VSO1xuICAgIH1cbiAgfVxufVxuXG5jbGFzcyBMb2dnZXJXcmFwcGVyIHtcbiAgZGVidWcoKSB7fVxuXG4gIGluZm8oKSB7fVxuXG4gIHdhcm4oKSB7fVxuXG4gIGVycm9yKCkge31cbn1cblxuY2xhc3MgTG9nZ2VyV3JhcHBlckltcGwgZXh0ZW5kcyBMb2dnZXJXcmFwcGVyIHtcbiAgY29uc3RydWN0b3IocHJlZml4KSB7XG4gICAgc3VwZXIoKTtcbiAgICB0aGlzLnByZWZpeCA9IHByZWZpeCB8fCBcIlwiO1xuICB9XG5cbiAgZGVidWcoLi4uYXJncykge1xuICAgIHRoaXMuX2xvZyhMb2dMZXZlbC5ERUJVRywgYXJncyk7XG4gIH1cblxuICBpbmZvKC4uLmFyZ3MpIHtcbiAgICB0aGlzLl9sb2coTG9nTGV2ZWwuSU5GTywgYXJncyk7XG4gIH1cblxuICB3YXJuKC4uLmFyZ3MpIHtcbiAgICB0aGlzLl9sb2coTG9nTGV2ZWwuV0FSTiwgYXJncyk7XG4gIH1cblxuICBlcnJvciguLi5hcmdzKSB7XG4gICAgdGhpcy5fbG9nKExvZ0xldmVsLkVSUk9SLCBhcmdzKTtcbiAgfVxuXG4gIF9zaG91bGRMb2cobGV2ZWwpIHtcbiAgICByZXR1cm4gTG9nTWFuYWdlci5oYXNDbGllbnRMb2dnZXIoKSAmJiBMb2dNYW5hZ2VyLmlzTGV2ZWxFbmFibGVkKGxldmVsKTtcbiAgfVxuXG4gIF93cml0ZVRvQ2xpZW50TG9nZ2VyKGxldmVsLCBsb2dTdGF0ZW1lbnQpIHtcbiAgICBMb2dNYW5hZ2VyLndyaXRlVG9DbGllbnRMb2dnZXIobGV2ZWwsIGxvZ1N0YXRlbWVudCk7XG4gIH1cblxuICBfbG9nKGxldmVsLCBhcmdzKSB7XG4gICAgaWYgKHRoaXMuX3Nob3VsZExvZyhsZXZlbCkpIHtcbiAgICAgIHZhciBsb2dTdGF0ZW1lbnQgPSB0aGlzLl9jb252ZXJ0VG9TaW5nbGVTdGF0ZW1lbnQoYXJncyk7XG4gICAgICB0aGlzLl93cml0ZVRvQ2xpZW50TG9nZ2VyKGxldmVsLCBsb2dTdGF0ZW1lbnQpO1xuICAgIH1cbiAgfVxuXG4gIF9jb252ZXJ0VG9TaW5nbGVTdGF0ZW1lbnQoYXJncykge1xuICAgIHZhciBsb2dTdGF0ZW1lbnQgPSBcIlwiO1xuICAgIGlmICh0aGlzLnByZWZpeCkge1xuICAgICAgbG9nU3RhdGVtZW50ICs9IHRoaXMucHJlZml4ICsgXCIgXCI7XG4gICAgfVxuICAgIGZvciAodmFyIGluZGV4ID0gMDsgaW5kZXggPCBhcmdzLmxlbmd0aDsgaW5kZXgrKykge1xuICAgICAgdmFyIGFyZyA9IGFyZ3NbaW5kZXhdO1xuICAgICAgbG9nU3RhdGVtZW50ICs9IHRoaXMuX2NvbnZlcnRUb1N0cmluZyhhcmcpICsgXCIgXCI7XG4gICAgfVxuICAgIHJldHVybiBsb2dTdGF0ZW1lbnQ7XG4gIH1cblxuICBfY29udmVydFRvU3RyaW5nKGFyZykge1xuICAgIHRyeSB7XG4gICAgICBpZiAoIWFyZykge1xuICAgICAgICByZXR1cm4gXCJcIjtcbiAgICAgIH1cbiAgICAgIGlmIChVdGlscy5pc1N0cmluZyhhcmcpKSB7XG4gICAgICAgIHJldHVybiBhcmc7XG4gICAgICB9XG4gICAgICBpZiAoVXRpbHMuaXNPYmplY3QoYXJnKSAmJiBVdGlscy5pc0Z1bmN0aW9uKGFyZy50b1N0cmluZykpIHtcbiAgICAgICAgdmFyIHRvU3RyaW5nUmVzdWx0ID0gYXJnLnRvU3RyaW5nKCk7XG4gICAgICAgIGlmICh0b1N0cmluZ1Jlc3VsdCAhPT0gXCJbb2JqZWN0IE9iamVjdF1cIikge1xuICAgICAgICAgIHJldHVybiB0b1N0cmluZ1Jlc3VsdDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KGFyZyk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciB3aGlsZSBjb252ZXJ0aW5nIGFyZ3VtZW50IHRvIHN0cmluZ1wiLCBhcmcsIGVycm9yKTtcbiAgICAgIHJldHVybiBcIlwiO1xuICAgIH1cbiAgfVxufVxuXG52YXIgY3JlYXRlQ29uc29sZUxvZ2dlciA9ICgpID0+IHtcbiAgdmFyIGxvZ2dlciA9IG5ldyBMb2dnZXJXcmFwcGVyKCk7XG4gIGxvZ2dlci5kZWJ1ZyA9IGNvbnNvbGUuZGVidWc7XG4gIGxvZ2dlci5pbmZvID0gY29uc29sZS5pbmZvO1xuICBsb2dnZXIud2FybiA9IGNvbnNvbGUud2FybjtcbiAgbG9nZ2VyLmVycm9yID0gY29uc29sZS5lcnJvcjtcbiAgcmV0dXJuIGxvZ2dlcjtcbn07XG5cbmNvbnN0IExvZ01hbmFnZXIgPSBuZXcgTG9nTWFuYWdlckltcGwoKTtcblxuZXhwb3J0IHsgTG9nTWFuYWdlciwgTG9nZ2VyLCBMb2dMZXZlbCB9O1xuIiwiaW1wb3J0IFV0aWxzIGZyb20gXCIuL3V0aWxzXCI7XG5pbXBvcnQgeyBMb2dNYW5hZ2VyLCBMb2dMZXZlbCwgTG9nZ2VyIH0gZnJvbSBcIi4vbG9nXCI7XG5pbXBvcnQge1xuICAgIE1JTl9XRUJTT0NLRVRfTElGRVRJTUUsXG4gICAgTUFYX0xJTkVBUl9DT05ORUNUX0FUVEVNUFRTLFxuICAgIE1BWF9FWFBPTkVOVElBTF9DT05ORUNUX0FUVEVNUFRTLFxuICAgIEhFQVJUQkVBVF9JTlRFUlZBTCxcbiAgICBST1VURV9LRVlcbn0gZnJvbSBcIi4vY29uc3RhbnRzXCI7XG5cblxuY29uc3QgV2ViU29ja2V0TWFuYWdlciA9IGZ1bmN0aW9uKCkge1xuXG4gICAgY29uc3QgbG9nZ2VyID0gTG9nTWFuYWdlci5nZXRMb2dnZXIoe30pO1xuXG4gICAgbGV0IHdlYlNvY2tldCA9IG51bGw7XG5cbiAgICBsZXQgcmVjb25uZWN0Q29uZmlnID0ge1xuICAgICAgICByZWNvbm5lY3RXZWJTb2NrZXQ6IGZhbHNlLFxuICAgICAgICB3ZWJzb2NrZXRJbml0RmFpbGVkOiBmYWxzZSxcbiAgICAgICAgbGluZWFyQ29ubmVjdEF0dGVtcHQ6IDAsXG4gICAgICAgIGV4cG9uZW50aWFsQ29ubmVjdEF0dGVtcHQ6IDAsXG4gICAgICAgIGV4cG9uZW50aWFsQmFja09mZlRpbWU6IDEwMDAsXG4gICAgICAgIGxpbmVhclRpbWVvdXRIYW5kbGU6IG51bGwsXG4gICAgICAgIGV4cG9uZW50aWFsVGltZW91dEhhbmRsZTogbnVsbCxcbiAgICAgICAgbGlmZVRpbWVUaW1lb3V0SGFuZGxlOiBudWxsXG4gICAgfTtcblxuICAgIGxldCBoZWFydGJlYXRDb25maWcgPSB7XG4gICAgICAgIHBlbmRpbmdSZXNwb25zZTogZmFsc2UsXG4gICAgICAgIGludGVydmFsSGFuZGxlOiBudWxsXG4gICAgfTtcblxuICAgIGxldCBjYWxsYmFja3MgPSB7XG4gICAgICAgIGluaXRGYWlsdXJlOiBuZXcgU2V0KCksXG4gICAgICAgIGdldFdlYlNvY2tldFRyYW5zcG9ydDogbnVsbCxcbiAgICAgICAgc3Vic2NyaXB0aW9uVXBkYXRlOiBuZXcgU2V0KCksXG4gICAgICAgIHN1YnNjcmlwdGlvbkZhaWx1cmU6IG5ldyBTZXQoKSxcbiAgICAgICAgdG9waWM6IG5ldyBNYXAoKSxcbiAgICAgICAgYWxsTWVzc2FnZTogbmV3IFNldCgpLFxuICAgICAgICBjb25uZWN0aW9uR2FpbjogbmV3IFNldCgpLFxuICAgICAgICBjb25uZWN0aW9uTG9zdDogbmV3IFNldCgpXG4gICAgfTtcblxuICAgIGxldCB3ZWJTb2NrZXRDb25maWcgPSB7XG4gICAgICAgIGNvbm5Db25maWc6IG51bGwsXG4gICAgICAgIHByb21pc2VIYW5kbGU6IG51bGwsXG4gICAgICAgIHByb21pc2VDb21wbGV0ZWQ6IGZhbHNlXG4gICAgfTtcblxuICAgIGxldCB0b3BpY1N1YnNjcmlwdGlvbiA9IHtcbiAgICAgICAgc3Vic2NyaWJlZDogbmV3IFNldCgpLFxuICAgICAgICBwZW5kaW5nOiBuZXcgU2V0KClcbiAgICB9O1xuXG4gICAgY29uc3QgaW52YWxpZFNlbmRNZXNzYWdlUm91dGVLZXlzID0gbmV3IFNldChbUk9VVEVfS0VZLlNVQlNDUklCRSwgUk9VVEVfS0VZLlVOU1VCU0NSSUJFLCBST1VURV9LRVkuSEVBUlRCRUFUXSk7XG5cbiAgICBsZXQgb25saW5lID0gbmF2aWdhdG9yLm9uTGluZTtcbiAgICBjb25zdCBuZXR3b3JrQ29ubmVjdGl2aXR5Q2hlY2tlciA9IHNldEludGVydmFsKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKG9ubGluZSAhPT0gbmF2aWdhdG9yLm9uTGluZSkge1xuICAgICAgICAgICAgb25saW5lID0gbmF2aWdhdG9yLm9uTGluZTtcbiAgICAgICAgICAgIGlmIChvbmxpbmUgJiYgKCF3ZWJTb2NrZXQgfHwgd2ViU29ja2V0LnJlYWR5U3RhdGUgPiAxKSkge1xuICAgICAgICAgICAgICAgIGxvZ2dlci5pbmZvKFwiTmV0d29yayBvbmxpbmUsIENvbm5lY3RpbmcgdG8gd2Vic29ja2V0XCIpO1xuICAgICAgICAgICAgICAgIGdldFdlYlNvY2tldENvbm5Db25maWcoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0sIDI1MCk7XG5cbiAgICBjb25zdCBpbnZva2VDYWxsYmFja3MgPSBmdW5jdGlvbihjYWxsYmFja3MsIHJlc3BvbnNlKSB7XG4gICAgICAgIGNhbGxiYWNrcy5mb3JFYWNoKGZ1bmN0aW9uIChjYWxsYmFjaykge1xuICAgICAgICAgICAgY2FsbGJhY2socmVzcG9uc2UpO1xuICAgICAgICB9KTtcbiAgICB9O1xuXG4gICAgY29uc3Qgc2VuZEhlYXJ0QmVhdCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICBpZiAoaGVhcnRiZWF0Q29uZmlnLnBlbmRpbmdSZXNwb25zZSkge1xuICAgICAgICAgICAgbG9nZ2VyLndhcm4oXCJIZWFydGJlYXQgcmVzcG9uc2Ugbm90IHJlY2VpdmVkXCIpO1xuICAgICAgICAgICAgY2xlYXJJbnRlcnZhbChoZWFydGJlYXRDb25maWcuaW50ZXJ2YWxIYW5kbGUpO1xuICAgICAgICAgICAgaGVhcnRiZWF0Q29uZmlnLnBlbmRpbmdSZXNwb25zZSA9IGZhbHNlO1xuICAgICAgICAgICAgcmVmcmVzaFdlYlNvY2tldENvbm5lY3Rpb24oKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBsb2dnZXIuZGVidWcoXCJTZW5kaW5nIGhlYXJ0YmVhdFwiKTtcbiAgICAgICAgd2ViU29ja2V0LnNlbmQoY3JlYXRlV2ViU29ja2V0UGF5bG9hZChST1VURV9LRVkuSEVBUlRCRUFUKSk7XG4gICAgICAgIGhlYXJ0YmVhdENvbmZpZy5wZW5kaW5nUmVzcG9uc2UgPSB0cnVlO1xuICAgIH07XG5cbiAgICBjb25zdCByZXNldFN0YXRlID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJlY29ubmVjdENvbmZpZy5saW5lYXJDb25uZWN0QXR0ZW1wdCA9IDA7XG4gICAgICAgIHJlY29ubmVjdENvbmZpZy5leHBvbmVudGlhbENvbm5lY3RBdHRlbXB0ID0gMDtcbiAgICAgICAgcmVjb25uZWN0Q29uZmlnLmV4cG9uZW50aWFsQmFja09mZlRpbWUgPSAxMDAwO1xuICAgICAgICBoZWFydGJlYXRDb25maWcucGVuZGluZ1Jlc3BvbnNlID0gZmFsc2U7XG4gICAgICAgIHJlY29ubmVjdENvbmZpZy5yZWNvbm5lY3RXZWJTb2NrZXQgPSBmYWxzZTtcblxuICAgICAgICBjbGVhclRpbWVvdXQocmVjb25uZWN0Q29uZmlnLmxpZmVUaW1lVGltZW91dEhhbmRsZSk7XG4gICAgICAgIGNsZWFySW50ZXJ2YWwoaGVhcnRiZWF0Q29uZmlnLmludGVydmFsSGFuZGxlKTtcbiAgICAgICAgY2xlYXJUaW1lb3V0KHJlY29ubmVjdENvbmZpZy5saW5lYXJUaW1lb3V0SGFuZGxlKTtcbiAgICAgICAgY2xlYXJUaW1lb3V0KHJlY29ubmVjdENvbmZpZy5leHBvbmVudGlhbFRpbWVvdXRIYW5kbGUpO1xuICAgIH07XG5cbiAgICBjb25zdCB3ZWJTb2NrZXRPbk9wZW4gPSBmdW5jdGlvbigpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGxvZ2dlci5pbmZvKFwiV2ViU29ja2V0IGNvbm5lY3Rpb24gZXN0YWJsaXNoZWQhXCIpO1xuICAgICAgICAgICAgaW52b2tlQ2FsbGJhY2tzKGNhbGxiYWNrcy5jb25uZWN0aW9uR2Fpbik7XG5cbiAgICAgICAgICAgIHJlc2V0U3RhdGUoKTtcblxuICAgICAgICAgICAgaWYgKHRvcGljU3Vic2NyaXB0aW9uLnN1YnNjcmliZWQuc2l6ZSA+IDAgfHwgdG9waWNTdWJzY3JpcHRpb24ucGVuZGluZy5zaXplID4gMCkge1xuICAgICAgICAgICAgICAgIGxldCB0b3BpY3MgPSBBcnJheS5mcm9tKHRvcGljU3Vic2NyaXB0aW9uLnN1YnNjcmliZWQudmFsdWVzKCkpO1xuICAgICAgICAgICAgICAgIHRvcGljcyA9IHRvcGljcy5jb25jYXQoQXJyYXkuZnJvbSh0b3BpY1N1YnNjcmlwdGlvbi5wZW5kaW5nLnZhbHVlcygpKSk7XG4gICAgICAgICAgICAgICAgdG9waWNTdWJzY3JpcHRpb24uc3Vic2NyaWJlZC5jbGVhcigpO1xuICAgICAgICAgICAgICAgIHdlYlNvY2tldC5zZW5kKGNyZWF0ZVdlYlNvY2tldFBheWxvYWQoUk9VVEVfS0VZLlNVQlNDUklCRSwge1widG9waWNzXCI6IHRvcGljc30pKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgc2VuZEhlYXJ0QmVhdCgpO1xuICAgICAgICAgICAgaGVhcnRiZWF0Q29uZmlnLmludGVydmFsSGFuZGxlID0gc2V0SW50ZXJ2YWwoc2VuZEhlYXJ0QmVhdCwgSEVBUlRCRUFUX0lOVEVSVkFMKTtcblxuICAgICAgICAgICAgcmVjb25uZWN0Q29uZmlnLmxpZmVUaW1lVGltZW91dEhhbmRsZSA9IHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgbG9nZ2VyLmRlYnVnKFwiU3RhcnRpbmcgc2NoZWR1bGVkIFdlYlNvY2tldCBtYW5hZ2VyIHJlY29ubmVjdFwiKTtcbiAgICAgICAgICAgICAgICByZWZyZXNoV2ViU29ja2V0Q29ubmVjdGlvbigpO1xuICAgICAgICAgICAgfSwgKERhdGUucGFyc2Uod2ViU29ja2V0Q29uZmlnLmNvbm5Db25maWcud2ViU29ja2V0VHJhbnNwb3J0LmV4cGlyeSkgLSBEYXRlLm5vdygpKSk7XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBsb2dnZXIuZXJyb3IoXCJFcnJvciBhZnRlciBlc3RhYmxpc2hpbmcgd2ViIHNvY2tldCBjb25uZWN0aW9uLCBlcnJvcjogXCIsIGVycm9yKTtcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICBjb25zdCB3ZWJTb2NrZXRPbkNsb3NlID0gZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgICAgaWYgKHJlY29ubmVjdENvbmZpZy5saW5lYXJDb25uZWN0QXR0ZW1wdCA8PSAxKSB7XG4gICAgICAgICAgICBpbnZva2VDYWxsYmFja3MoY2FsbGJhY2tzLmNvbm5lY3Rpb25Mb3N0KTtcbiAgICAgICAgfVxuICAgICAgICBsb2dnZXIuaW5mbyhcIlNvY2tldCBjb25uZWN0aW9uIGlzIGNsb3NlZC4gZXZlbnQ6IFwiLCBldmVudCk7XG4gICAgICAgIGlmIChyZWNvbm5lY3RDb25maWcucmVjb25uZWN0V2ViU29ja2V0KSB7XG4gICAgICAgICAgICBpbml0V2ViU29ja2V0KCk7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgY29uc3Qgd2ViU29ja2V0T25FcnJvciA9IGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICAgIGxvZ2dlci5lcnJvcihcIldlYlNvY2tldE1hbmFnZXIgRXJyb3IsIGVycm9yX2V2ZW50OiBcIiwgZXZlbnQpO1xuICAgICAgICByZWZyZXNoV2ViU29ja2V0Q29ubmVjdGlvbigpO1xuICAgIH07XG5cbiAgICBjb25zdCB3ZWJTb2NrZXRPbk1lc3NhZ2UgPSBmdW5jdGlvbihldmVudCkge1xuICAgICAgICBjb25zdCByZXNwb25zZSA9IEpTT04ucGFyc2UoZXZlbnQuZGF0YSk7XG4gICAgICAgIHN3aXRjaCAocmVzcG9uc2UudG9waWMpIHtcbiAgICAgICAgICAgIGNhc2UgUk9VVEVfS0VZLlNVQlNDUklCRTpcbiAgICAgICAgICAgICAgICBsb2dnZXIuaW5mbyhcIlN1YnNjcmlwdGlvbiBNZXNzYWdlIHJlY2VpdmVkIGZyb20gd2ViU29ja2V0IHNlcnZlclwiLCBldmVudC5kYXRhKTtcbiAgICAgICAgICAgICAgICBpZiAocmVzcG9uc2UuY29udGVudC5zdGF0dXMgPT09IFwic3VjY2Vzc1wiKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlLmNvbnRlbnQudG9waWNzLmZvckVhY2goKGZ1bmN0aW9uICh0b3BpY05hbWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRvcGljU3Vic2NyaXB0aW9uLnN1YnNjcmliZWQuYWRkKHRvcGljTmFtZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0b3BpY1N1YnNjcmlwdGlvbi5wZW5kaW5nLmRlbGV0ZSh0b3BpY05hbWUpO1xuICAgICAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICAgICAgICAgIGludm9rZUNhbGxiYWNrcyhjYWxsYmFja3Muc3Vic2NyaXB0aW9uVXBkYXRlLCByZXNwb25zZSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgaW52b2tlQ2FsbGJhY2tzKGNhbGxiYWNrcy5zdWJzY3JpcHRpb25GYWlsdXJlLCByZXNwb25zZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBST1VURV9LRVkuSEVBUlRCRUFUOlxuICAgICAgICAgICAgICAgIGxvZ2dlci5kZWJ1ZyhcIkhlYXJ0YmVhdCByZXNwb25zZSByZWNlaXZlZFwiKTtcbiAgICAgICAgICAgICAgICBoZWFydGJlYXRDb25maWcucGVuZGluZ1Jlc3BvbnNlID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIGlmIChyZXNwb25zZS50b3BpYykge1xuICAgICAgICAgICAgICAgICAgICBpZiAoY2FsbGJhY2tzLmFsbE1lc3NhZ2Uuc2l6ZSA9PT0gMCAmJiBjYWxsYmFja3MudG9waWMuc2l6ZSA9PT0gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgbG9nZ2VyLndhcm4oJ05vIHJlZ2lzdGVyZWQgY2FsbGJhY2sgbGlzdGVuZXIgZm9yIFRvcGljJywgcmVzcG9uc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGludm9rZUNhbGxiYWNrcyhjYWxsYmFja3MuYWxsTWVzc2FnZSwgcmVzcG9uc2UpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoY2FsbGJhY2tzLnRvcGljLmhhcyhyZXNwb25zZS50b3BpYykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGludm9rZUNhbGxiYWNrcyhjYWxsYmFja3MudG9waWMuZ2V0KHJlc3BvbnNlLnRvcGljKSwgcmVzcG9uc2UpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChyZXNwb25zZS5tZXNzYWdlKSB7XG4gICAgICAgICAgICAgICAgICAgIGxvZ2dlci53YXJuKFwiV2ViU29ja2V0TWFuYWdlciBNZXNzYWdlIEVycm9yXCIsIHJlc3BvbnNlKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBsb2dnZXIud2FybihcIkludmFsaWQgaW5jb21pbmcgbWVzc2FnZVwiLCByZXNwb25zZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcblxuICAgIGNvbnN0IGNsb3NlV2ViU29ja2V0ID0gZnVuY3Rpb24ocmVhc29uKSB7XG4gICAgICAgIGlmICh3ZWJTb2NrZXQgJiYgd2ViU29ja2V0LnJlYWR5U3RhdGUgIT09IFdlYlNvY2tldC5DTE9TRUQpIHtcbiAgICAgICAgICAgIHdlYlNvY2tldC5jbG9zZSgxMDAwLCByZWFzb24pO1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH07XG5cbiAgICBjb25zdCByZWZyZXNoV2ViU29ja2V0Q29ubmVjdGlvbiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKCFvbmxpbmUpIHtcbiAgICAgICAgICAgIGNsb3NlV2ViU29ja2V0KFwiTmV0d29yayBPZmZsaW5lLCBDbG9zaW5nIFdlYlNvY2tldCBNYW5hZ2VyXCIpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGNsZWFyVGltZW91dChyZWNvbm5lY3RDb25maWcubGlmZVRpbWVUaW1lb3V0SGFuZGxlKTtcbiAgICAgICAgY2xlYXJJbnRlcnZhbChoZWFydGJlYXRDb25maWcuaW50ZXJ2YWxIYW5kbGUpO1xuXG4gICAgICAgIGlmIChyZWNvbm5lY3RDb25maWcubGluZWFyQ29ubmVjdEF0dGVtcHQgPCBNQVhfTElORUFSX0NPTk5FQ1RfQVRURU1QVFMpIHtcbiAgICAgICAgICAgIHJlY29ubmVjdENvbmZpZy5saW5lYXJDb25uZWN0QXR0ZW1wdCsrO1xuICAgICAgICAgICAgY29uc3QgdGltZU91dCA9IE1hdGguZmxvb3IoMjAwMCAqICgxICsgTWF0aC5yYW5kb20oKSkpO1xuICAgICAgICAgICAgbG9nZ2VyLmRlYnVnKFwiU3RhcnRpbmcgTGluZWFyIFdlYlNvY2tldCByZWNvbm5lY3QsIEF0dGVtcHQgOiAjXCJcbiAgICAgICAgICAgICAgICArIHJlY29ubmVjdENvbmZpZy5saW5lYXJDb25uZWN0QXR0ZW1wdCArIFwiIHdpdGggZGVsYXkgXCIgKyB0aW1lT3V0ICsgXCIgbXNcIik7XG5cbiAgICAgICAgICAgIHJlY29ubmVjdENvbmZpZy5saW5lYXJUaW1lb3V0SGFuZGxlID0gc2V0VGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICByZWNvbm5lY3RDb25maWcucmVjb25uZWN0V2ViU29ja2V0ID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBnZXRXZWJTb2NrZXRDb25uQ29uZmlnKCk7XG4gICAgICAgICAgICB9LCB0aW1lT3V0KTtcblxuICAgICAgICB9IGVsc2UgaWYgKHJlY29ubmVjdENvbmZpZy5leHBvbmVudGlhbENvbm5lY3RBdHRlbXB0IDwgTUFYX0VYUE9ORU5USUFMX0NPTk5FQ1RfQVRURU1QVFMpIHtcbiAgICAgICAgICAgIHJlY29ubmVjdENvbmZpZy5leHBvbmVudGlhbENvbm5lY3RBdHRlbXB0Kys7XG4gICAgICAgICAgICByZWNvbm5lY3RDb25maWcuZXhwb25lbnRpYWxCYWNrT2ZmVGltZSAqPSAyO1xuICAgICAgICAgICAgY29uc3Qgd2FpdFRpbWUgPSBNYXRoLmZsb29yKHJlY29ubmVjdENvbmZpZy5leHBvbmVudGlhbEJhY2tPZmZUaW1lICogKDEgKyBNYXRoLnJhbmRvbSgpKSk7XG4gICAgICAgICAgICBsb2dnZXIuZGVidWcoXCJTdGFydGluZyBFeHBvbmVudGlhbCBXZWJTb2NrZXQgcmVjb25uZWN0LCBBdHRlbXB0IDogI1wiXG4gICAgICAgICAgICAgICAgKyByZWNvbm5lY3RDb25maWcuZXhwb25lbnRpYWxDb25uZWN0QXR0ZW1wdCArIFwiIHdpdGggZGVsYXkgXCIgKyB3YWl0VGltZSArIFwiIHNlYy5cIik7XG5cbiAgICAgICAgICAgIC8vIHJlcXVpcmVkIGZvciBzY2VuYXJpb3Mgd2hlbiBlcnJvciBhbmQgY2xvc2UgZXZlbnRzIGFyZSBmaXJlZCBiYWNrIHRvIGJhY2tcbiAgICAgICAgICAgIHdlYlNvY2tldENvbmZpZy5wcm9taXNlQ29tcGxldGVkID0gZmFsc2U7XG4gICAgICAgICAgICB3ZWJTb2NrZXRDb25maWcuY29ubkNvbmZpZyA9IG51bGw7XG5cbiAgICAgICAgICAgIHJlY29ubmVjdENvbmZpZy5leHBvbmVudGlhbFRpbWVvdXRIYW5kbGUgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIHJlY29ubmVjdENvbmZpZy5yZWNvbm5lY3RXZWJTb2NrZXQgPSB0cnVlO1xuICAgICAgICAgICAgICAgIGdldFdlYlNvY2tldENvbm5Db25maWcoKTtcbiAgICAgICAgICAgIH0sIHdhaXRUaW1lKTtcbiAgICAgICAgfSBlbHNlIGlmICh3ZWJTb2NrZXRDb25maWcucHJvbWlzZUNvbXBsZXRlZCkge1xuICAgICAgICAgICAgbG9nZ2VyLmVycm9yKFwiQ291bGQgbm90IGNvbm5lY3QgdG8gV2ViU29ja2V0IGFmdGVyIHNldmVyYWwgYXR0ZW1wdHNcIik7XG4gICAgICAgICAgICB0ZXJtaW5hdGVXZWJTb2NrZXRNYW5hZ2VyKCk7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgY29uc3QgdGVybWluYXRlV2ViU29ja2V0TWFuYWdlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmVzZXRTdGF0ZSgpO1xuICAgICAgICBjbG9zZVdlYlNvY2tldChcIlRlcm1pbmF0aW5nIFdlYlNvY2tldCBNYW5hZ2VyXCIpO1xuICAgICAgICBsb2dnZXIuZXJyb3IoXCJXZWJTb2NrZXQgSW5pdGlhbGl6YXRpb24gZmFpbGVkXCIpO1xuICAgICAgICByZWNvbm5lY3RDb25maWcud2Vic29ja2V0SW5pdEZhaWxlZCA9IHRydWU7XG4gICAgICAgIGNsZWFySW50ZXJ2YWwobmV0d29ya0Nvbm5lY3Rpdml0eUNoZWNrZXIpO1xuICAgICAgICBpbnZva2VDYWxsYmFja3MoY2FsbGJhY2tzLmluaXRGYWlsdXJlKTtcbiAgICB9O1xuXG4gICAgY29uc3QgY3JlYXRlV2ViU29ja2V0UGF5bG9hZCA9IGZ1bmN0aW9uIChrZXksIGNvbnRlbnQpIHtcbiAgICAgICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICAgIFwidG9waWNcIjoga2V5LFxuICAgICAgICAgICAgXCJjb250ZW50XCI6IGNvbnRlbnRcbiAgICAgICAgfSk7XG4gICAgfTtcblxuICAgIGNvbnN0IHNlbmRNZXNzYWdlID0gZnVuY3Rpb24ocGF5bG9hZCkge1xuICAgICAgICBVdGlscy5hc3NlcnRJc09iamVjdChwYXlsb2FkLCBcInBheWxvYWRcIik7XG4gICAgICAgIGlmIChwYXlsb2FkLnRvcGljID09PSB1bmRlZmluZWQgfHwgaW52YWxpZFNlbmRNZXNzYWdlUm91dGVLZXlzLmhhcyhwYXlsb2FkLnRvcGljKSkge1xuICAgICAgICAgICAgbG9nZ2VyLndhcm4oXCJDYW5ub3Qgc2VuZCBtZXNzYWdlLCBJbnZhbGlkIHRvcGljXCIsIHBheWxvYWQpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBwYXlsb2FkID0gSlNPTi5zdHJpbmdpZnkocGF5bG9hZCk7XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBsb2dnZXIud2FybihcIkVycm9yIHN0cmluZ2lmeSBtZXNzYWdlXCIsIHBheWxvYWQpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmICh3ZWJTb2NrZXQgJiYgd2ViU29ja2V0LnJlYWR5U3RhdGUgPT09IFdlYlNvY2tldC5PUEVOKSB7XG4gICAgICAgICAgICB3ZWJTb2NrZXQuc2VuZChwYXlsb2FkKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGxvZ2dlci53YXJuKFwiQ2Fubm90IHNlbmQgbWVzc2FnZSwgd2ViIHNvY2tldCBjb25uZWN0aW9uIGlzIG5vdCBvcGVuXCIpO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIGNvbnN0IHN1YnNjcmliZVRvcGljcyA9IGZ1bmN0aW9uKHRvcGljcykge1xuICAgICAgICBVdGlscy5hc3NlcnROb3ROdWxsKHRvcGljcywgJ3RvcGljcycpO1xuICAgICAgICBVdGlscy5hc3NlcnRJc0xpc3QodG9waWNzKTtcblxuICAgICAgICB0b3BpY3MuZm9yRWFjaChmdW5jdGlvbiAodG9waWMpIHtcbiAgICAgICAgICAgIHRvcGljU3Vic2NyaXB0aW9uLnBlbmRpbmcuYWRkKHRvcGljKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaWYgKHdlYlNvY2tldCAmJiB3ZWJTb2NrZXQucmVhZHlTdGF0ZSA9PT0gV2ViU29ja2V0Lk9QRU4pIHtcbiAgICAgICAgICAgIHdlYlNvY2tldC5zZW5kKGNyZWF0ZVdlYlNvY2tldFBheWxvYWQoUk9VVEVfS0VZLlNVQlNDUklCRSwge1widG9waWNzXCI6IHRvcGljc30pKTtcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICBjb25zdCB2YWxpZFdlYlNvY2tldENvbm5Db25maWcgPSBmdW5jdGlvbiAoY29ubkNvbmZpZykge1xuICAgICAgICBpZiAoVXRpbHMuaXNPYmplY3QoY29ubkNvbmZpZykgJiYgVXRpbHMuaXNPYmplY3QoY29ubkNvbmZpZy53ZWJTb2NrZXRUcmFuc3BvcnQpXG4gICAgICAgICAgICAmJiBVdGlscy5pc05vbkVtcHR5U3RyaW5nKGNvbm5Db25maWcud2ViU29ja2V0VHJhbnNwb3J0LnVybClcbiAgICAgICAgICAgICYmIFV0aWxzLnZhbGlkV1NVcmwoY29ubkNvbmZpZy53ZWJTb2NrZXRUcmFuc3BvcnQudXJsKVxuICAgICAgICAgICAgJiYgVXRpbHMuaXNOb25FbXB0eVN0cmluZyhjb25uQ29uZmlnLndlYlNvY2tldFRyYW5zcG9ydC5leHBpcnkpICYmXG4gICAgICAgICAgICAoRGF0ZS5wYXJzZShjb25uQ29uZmlnLndlYlNvY2tldFRyYW5zcG9ydC5leHBpcnkpIC0gRGF0ZS5ub3coKSkgPj0gTUlOX1dFQlNPQ0tFVF9MSUZFVElNRSkge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgbG9nZ2VyLmVycm9yKFwiSW52YWxpZCBXZWJTb2NrZXQgQ29ubmVjdGlvbiBDb25maWd1cmF0aW9uXCIsIGNvbm5Db25maWcpO1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfTtcblxuICAgIGNvbnN0IGdldFdlYlNvY2tldENvbm5Db25maWcgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmIChyZWNvbm5lY3RDb25maWcud2Vic29ja2V0SW5pdEZhaWxlZCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHdlYlNvY2tldENvbmZpZy5jb25uQ29uZmlnID0gbnVsbDtcbiAgICAgICAgd2ViU29ja2V0Q29uZmlnLnByb21pc2VDb21wbGV0ZWQgPSBmYWxzZTtcbiAgICAgICAgd2ViU29ja2V0Q29uZmlnLnByb21pc2VIYW5kbGUgPSBjYWxsYmFja3MuZ2V0V2ViU29ja2V0VHJhbnNwb3J0KCk7XG4gICAgICAgIHdlYlNvY2tldENvbmZpZy5wcm9taXNlSGFuZGxlXG4gICAgICAgICAgICAudGhlbihmdW5jdGlvbihyZXNwb25zZSkge1xuICAgICAgICAgICAgICAgICAgICB3ZWJTb2NrZXRDb25maWcucHJvbWlzZUNvbXBsZXRlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIGxvZ2dlci5kZWJ1ZyhcIlN1Y2Nlc3NmdWxseSBmZXRjaGVkIHdlYlNvY2tldCBjb25uZWN0aW9uIGNvbmZpZ3VyYXRpb25cIik7XG4gICAgICAgICAgICAgICAgICAgIGlmICghdmFsaWRXZWJTb2NrZXRDb25uQ29uZmlnKHJlc3BvbnNlKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGVybWluYXRlV2ViU29ja2V0TWFuYWdlcigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHdlYlNvY2tldENvbmZpZy5jb25uQ29uZmlnID0gcmVzcG9uc2U7XG4gICAgICAgICAgICAgICAgICAgIGlmICghb25saW5lKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKGNsb3NlV2ViU29ja2V0KFwiUmVzdGFydGluZyBXZWJTb2NrZXQgTWFuYWdlclwiKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGluaXRXZWJTb2NrZXQoKTtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uKHJlYXNvbikge1xuICAgICAgICAgICAgICAgICAgICB3ZWJTb2NrZXRDb25maWcucHJvbWlzZUNvbXBsZXRlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIGxvZ2dlci5lcnJvcihcIkZhaWxlZCB0byBmZXRjaCB3ZWJTb2NrZXQgY29ubmVjdGlvbiBjb25maWd1cmF0aW9uXCIsIHJlYXNvbik7XG4gICAgICAgICAgICAgICAgICAgIHJlZnJlc2hXZWJTb2NrZXRDb25uZWN0aW9uKCk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgfTtcblxuICAgIGNvbnN0IGluaXRXZWJTb2NrZXQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgaWYgKHJlY29ubmVjdENvbmZpZy53ZWJzb2NrZXRJbml0RmFpbGVkKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgbG9nZ2VyLmRlYnVnKFwiSW5pdGlhbGl6aW5nIFdlYnNvY2tldCBNYW5hZ2VyXCIpO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgaWYgKHZhbGlkV2ViU29ja2V0Q29ubkNvbmZpZyh3ZWJTb2NrZXRDb25maWcuY29ubkNvbmZpZykpIHtcbiAgICAgICAgICAgICAgICB3ZWJTb2NrZXQgPSBuZXcgV2ViU29ja2V0KHdlYlNvY2tldENvbmZpZy5jb25uQ29uZmlnLndlYlNvY2tldFRyYW5zcG9ydC51cmwpO1xuICAgICAgICAgICAgICAgIHdlYlNvY2tldC5hZGRFdmVudExpc3RlbmVyKFwib3BlblwiLCB3ZWJTb2NrZXRPbk9wZW4pO1xuICAgICAgICAgICAgICAgIHdlYlNvY2tldC5hZGRFdmVudExpc3RlbmVyKFwibWVzc2FnZVwiLCB3ZWJTb2NrZXRPbk1lc3NhZ2UpO1xuICAgICAgICAgICAgICAgIHdlYlNvY2tldC5hZGRFdmVudExpc3RlbmVyKFwiZXJyb3JcIiwgd2ViU29ja2V0T25FcnJvcik7XG4gICAgICAgICAgICAgICAgd2ViU29ja2V0LmFkZEV2ZW50TGlzdGVuZXIoXCJjbG9zZVwiLCB3ZWJTb2NrZXRPbkNsb3NlKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgaWYgKHdlYlNvY2tldENvbmZpZy5wcm9taXNlQ29tcGxldGVkKSB7XG4gICAgICAgICAgICAgICAgICAgIHRlcm1pbmF0ZVdlYlNvY2tldE1hbmFnZXIoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBsb2dnZXIuZXJyb3IoXCJFcnJvciBJbml0aWFsaXppbmcgd2ViLXNvY2tldC1tYW5hZ2VyXCIsIGVycm9yKTtcbiAgICAgICAgICAgIHRlcm1pbmF0ZVdlYlNvY2tldE1hbmFnZXIoKTtcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICBjb25zdCBvbkNvbm5lY3Rpb25HYWluID0gZnVuY3Rpb24oY2IpIHtcbiAgICAgICAgVXRpbHMuYXNzZXJ0VHJ1ZShVdGlscy5pc0Z1bmN0aW9uKGNiKSwgJ2NiIG11c3QgYmUgYSBmdW5jdGlvbicpO1xuICAgICAgICBjYWxsYmFja3MuY29ubmVjdGlvbkdhaW4uYWRkKGNiKTtcbiAgICAgICAgaWYgKHdlYlNvY2tldCAmJiB3ZWJTb2NrZXQucmVhZHlTdGF0ZSA9PT0gV2ViU29ja2V0Lk9QRU4pIHtcbiAgICAgICAgICAgIGNiKCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuICgpID0+IGNhbGxiYWNrcy5jb25uZWN0aW9uR2Fpbi5kZWxldGUoY2IpO1xuICAgIH07XG5cbiAgICBjb25zdCBvbkNvbm5lY3Rpb25Mb3N0ID0gZnVuY3Rpb24oY2IpIHtcbiAgICAgICAgVXRpbHMuYXNzZXJ0VHJ1ZShVdGlscy5pc0Z1bmN0aW9uKGNiKSwgJ2NiIG11c3QgYmUgYSBmdW5jdGlvbicpO1xuICAgICAgICBjYWxsYmFja3MuY29ubmVjdGlvbkxvc3QuYWRkKGNiKTtcbiAgICAgICAgaWYgKHdlYlNvY2tldCAmJiB3ZWJTb2NrZXQucmVhZHlTdGF0ZSA9PT0gV2ViU29ja2V0LkNMT1NFRCkge1xuICAgICAgICAgICAgY2IoKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gKCkgPT4gY2FsbGJhY2tzLmNvbm5lY3Rpb25Mb3N0LmRlbGV0ZShjYik7XG4gICAgfTtcblxuICAgIGNvbnN0IG9uSW5pdEZhaWx1cmUgPSBmdW5jdGlvbihjYikge1xuICAgICAgICBVdGlscy5hc3NlcnRUcnVlKFV0aWxzLmlzRnVuY3Rpb24oY2IpLCAnY2IgbXVzdCBiZSBhIGZ1bmN0aW9uJyk7XG4gICAgICAgIGNhbGxiYWNrcy5pbml0RmFpbHVyZS5hZGQoY2IpO1xuICAgICAgICBpZiAocmVjb25uZWN0Q29uZmlnLndlYnNvY2tldEluaXRGYWlsZWQpIHtcbiAgICAgICAgICAgIGNiKCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuICgpID0+IGNhbGxiYWNrcy5pbml0RmFpbHVyZS5kZWxldGUoY2IpO1xuICAgIH07XG5cbiAgICBjb25zdCBpbml0ID0gZnVuY3Rpb24odHJhbnNwb3J0SGFuZGxlKSB7XG4gICAgICAgIFV0aWxzLmFzc2VydFRydWUoVXRpbHMuaXNGdW5jdGlvbih0cmFuc3BvcnRIYW5kbGUpLCAndHJhbnNwb3J0SGFuZGxlIG11c3QgYmUgYSBmdW5jdGlvbicpO1xuICAgICAgICBpZiAoY2FsbGJhY2tzLmdldFdlYlNvY2tldFRyYW5zcG9ydCAhPT0gbnVsbCkge1xuICAgICAgICAgICAgbG9nZ2VyLndhcm4oXCJXZWIgU29ja2V0IE1hbmFnZXIgd2FzIGFscmVhZHkgaW5pdGlhbGl6ZWRcIik7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgY2FsbGJhY2tzLmdldFdlYlNvY2tldFRyYW5zcG9ydCA9IHRyYW5zcG9ydEhhbmRsZTtcblxuICAgICAgICBnZXRXZWJTb2NrZXRDb25uQ29uZmlnKCk7XG4gICAgfTtcblxuICAgIGNvbnN0IG9uU3Vic2NyaXB0aW9uVXBkYXRlID0gZnVuY3Rpb24oY2IpIHtcbiAgICAgICAgVXRpbHMuYXNzZXJ0VHJ1ZShVdGlscy5pc0Z1bmN0aW9uKGNiKSwgJ2NiIG11c3QgYmUgYSBmdW5jdGlvbicpO1xuICAgICAgICBjYWxsYmFja3Muc3Vic2NyaXB0aW9uVXBkYXRlLmFkZChjYik7XG4gICAgICAgIHJldHVybiAoKSA9PiBjYWxsYmFja3Muc3Vic2NyaXB0aW9uVXBkYXRlLmRlbGV0ZShjYik7XG4gICAgfTtcblxuICAgIGNvbnN0IG9uU3Vic2NyaXB0aW9uRmFpbHVyZSA9IGZ1bmN0aW9uKGNiKSB7XG4gICAgICAgIFV0aWxzLmFzc2VydFRydWUoVXRpbHMuaXNGdW5jdGlvbihjYiksICdjYiBtdXN0IGJlIGEgZnVuY3Rpb24nKTtcbiAgICAgICAgY2FsbGJhY2tzLnN1YnNjcmlwdGlvbkZhaWx1cmUuYWRkKGNiKTtcbiAgICAgICAgcmV0dXJuICgpID0+IGNhbGxiYWNrcy5zdWJzY3JpcHRpb25GYWlsdXJlLmRlbGV0ZShjYik7XG4gICAgfTtcblxuICAgIGNvbnN0IG9uTWVzc2FnZSA9IGZ1bmN0aW9uKHRvcGljTmFtZSwgY2IpIHtcbiAgICAgICAgVXRpbHMuYXNzZXJ0Tm90TnVsbCh0b3BpY05hbWUsICd0b3BpY05hbWUnKTtcbiAgICAgICAgVXRpbHMuYXNzZXJ0VHJ1ZShVdGlscy5pc0Z1bmN0aW9uKGNiKSwgJ2NiIG11c3QgYmUgYSBmdW5jdGlvbicpO1xuICAgICAgICBpZiAoY2FsbGJhY2tzLnRvcGljLmhhcyh0b3BpY05hbWUpKSB7XG4gICAgICAgICAgICBjYWxsYmFja3MudG9waWMuZ2V0KHRvcGljTmFtZSkuYWRkKGNiKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNhbGxiYWNrcy50b3BpYy5zZXQodG9waWNOYW1lLCBuZXcgU2V0KFtjYl0pKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gKCkgPT4gY2FsbGJhY2tzLnRvcGljLmdldCh0b3BpY05hbWUpLmRlbGV0ZShjYik7XG4gICAgfTtcblxuICAgIGNvbnN0IG9uQWxsTWVzc2FnZSA9IGZ1bmN0aW9uIChjYikge1xuICAgICAgICBVdGlscy5hc3NlcnRUcnVlKFV0aWxzLmlzRnVuY3Rpb24oY2IpLCAnY2IgbXVzdCBiZSBhIGZ1bmN0aW9uJyk7XG4gICAgICAgIGNhbGxiYWNrcy5hbGxNZXNzYWdlLmFkZChjYik7XG4gICAgICAgIHJldHVybiAoKSA9PiBjYWxsYmFja3MuYWxsTWVzc2FnZS5kZWxldGUoY2IpO1xuICAgIH07XG5cbiAgICB0aGlzLmluaXQgPSBpbml0O1xuICAgIHRoaXMub25Jbml0RmFpbHVyZSA9IG9uSW5pdEZhaWx1cmU7XG4gICAgdGhpcy5vbkNvbm5lY3Rpb25HYWluID0gb25Db25uZWN0aW9uR2FpbjtcbiAgICB0aGlzLm9uQ29ubmVjdGlvbkxvc3QgPSBvbkNvbm5lY3Rpb25Mb3N0O1xuICAgIHRoaXMub25TdWJzY3JpcHRpb25VcGRhdGUgPSBvblN1YnNjcmlwdGlvblVwZGF0ZTtcbiAgICB0aGlzLm9uU3Vic2NyaXB0aW9uRmFpbHVyZSA9IG9uU3Vic2NyaXB0aW9uRmFpbHVyZTtcbiAgICB0aGlzLm9uTWVzc2FnZSA9IG9uTWVzc2FnZTtcbiAgICB0aGlzLm9uQWxsTWVzc2FnZSA9IG9uQWxsTWVzc2FnZTtcbiAgICB0aGlzLnN1YnNjcmliZVRvcGljcyA9IHN1YnNjcmliZVRvcGljcztcbiAgICB0aGlzLnNlbmRNZXNzYWdlID0gc2VuZE1lc3NhZ2U7XG5cbiAgICB0aGlzLmNsb3NlV2ViU29ja2V0ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJlc2V0U3RhdGUoKTtcbiAgICAgICAgY2xlYXJJbnRlcnZhbChuZXR3b3JrQ29ubmVjdGl2aXR5Q2hlY2tlcik7XG4gICAgICAgIGNsb3NlV2ViU29ja2V0KFwiVXNlciByZXF1ZXN0IHRvIGNsb3NlIFdlYlNvY2tldFwiKTtcbiAgICB9O1xufTtcblxuY29uc3QgV2ViU29ja2V0TWFuYWdlckNvbnN0cnVjdG9yID0gKCkgPT4ge1xuICAgIHJldHVybiBuZXcgV2ViU29ja2V0TWFuYWdlcigpO1xufTtcblxuY29uc3Qgc2V0R2xvYmFsQ29uZmlnID0gY29uZmlnID0+IHtcbiAgICBjb25zdCBsb2dnZXJDb25maWcgPSBjb25maWcubG9nZ2VyQ29uZmlnO1xuICAgIExvZ01hbmFnZXIudXBkYXRlTG9nZ2VyQ29uZmlnKGxvZ2dlckNvbmZpZyk7XG59O1xuXG5jb25zdCBXZWJTb2NrZXRNYW5hZ2VyT2JqZWN0ID0ge1xuICAgIGNyZWF0ZTogV2ViU29ja2V0TWFuYWdlckNvbnN0cnVjdG9yLFxuICAgIHNldEdsb2JhbENvbmZpZzogc2V0R2xvYmFsQ29uZmlnLFxuICAgIExvZ0xldmVsOiBMb2dMZXZlbCxcbiAgICBMb2dnZXI6IExvZ2dlclxufTtcblxuZXhwb3J0IHsgV2ViU29ja2V0TWFuYWdlck9iamVjdCB9OyIsIi8qIGdsb2JhbCB3aW5kb3csIGV4cG9ydHMsIGRlZmluZSAqL1xuXG4hZnVuY3Rpb24oKSB7XG4gICAgJ3VzZSBzdHJpY3QnXG5cbiAgICB2YXIgcmUgPSB7XG4gICAgICAgIG5vdF9zdHJpbmc6IC9bXnNdLyxcbiAgICAgICAgbm90X2Jvb2w6IC9bXnRdLyxcbiAgICAgICAgbm90X3R5cGU6IC9bXlRdLyxcbiAgICAgICAgbm90X3ByaW1pdGl2ZTogL1tedl0vLFxuICAgICAgICBudW1iZXI6IC9bZGllZmddLyxcbiAgICAgICAgbnVtZXJpY19hcmc6IC9bYmNkaWVmZ3V4WF0vLFxuICAgICAgICBqc29uOiAvW2pdLyxcbiAgICAgICAgbm90X2pzb246IC9bXmpdLyxcbiAgICAgICAgdGV4dDogL15bXlxceDI1XSsvLFxuICAgICAgICBtb2R1bG86IC9eXFx4MjV7Mn0vLFxuICAgICAgICBwbGFjZWhvbGRlcjogL15cXHgyNSg/OihbMS05XVxcZCopXFwkfFxcKChbXildKylcXCkpPyhcXCspPygwfCdbXiRdKT8oLSk/KFxcZCspPyg/OlxcLihcXGQrKSk/KFtiLWdpam9zdFR1dnhYXSkvLFxuICAgICAgICBrZXk6IC9eKFthLXpfXVthLXpfXFxkXSopL2ksXG4gICAgICAgIGtleV9hY2Nlc3M6IC9eXFwuKFthLXpfXVthLXpfXFxkXSopL2ksXG4gICAgICAgIGluZGV4X2FjY2VzczogL15cXFsoXFxkKylcXF0vLFxuICAgICAgICBzaWduOiAvXlsrLV0vXG4gICAgfVxuXG4gICAgZnVuY3Rpb24gc3ByaW50ZihrZXkpIHtcbiAgICAgICAgLy8gYGFyZ3VtZW50c2AgaXMgbm90IGFuIGFycmF5LCBidXQgc2hvdWxkIGJlIGZpbmUgZm9yIHRoaXMgY2FsbFxuICAgICAgICByZXR1cm4gc3ByaW50Zl9mb3JtYXQoc3ByaW50Zl9wYXJzZShrZXkpLCBhcmd1bWVudHMpXG4gICAgfVxuXG4gICAgZnVuY3Rpb24gdnNwcmludGYoZm10LCBhcmd2KSB7XG4gICAgICAgIHJldHVybiBzcHJpbnRmLmFwcGx5KG51bGwsIFtmbXRdLmNvbmNhdChhcmd2IHx8IFtdKSlcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBzcHJpbnRmX2Zvcm1hdChwYXJzZV90cmVlLCBhcmd2KSB7XG4gICAgICAgIHZhciBjdXJzb3IgPSAxLCB0cmVlX2xlbmd0aCA9IHBhcnNlX3RyZWUubGVuZ3RoLCBhcmcsIG91dHB1dCA9ICcnLCBpLCBrLCBwaCwgcGFkLCBwYWRfY2hhcmFjdGVyLCBwYWRfbGVuZ3RoLCBpc19wb3NpdGl2ZSwgc2lnblxuICAgICAgICBmb3IgKGkgPSAwOyBpIDwgdHJlZV9sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBwYXJzZV90cmVlW2ldID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICAgIG91dHB1dCArPSBwYXJzZV90cmVlW2ldXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmICh0eXBlb2YgcGFyc2VfdHJlZVtpXSA9PT0gJ29iamVjdCcpIHtcbiAgICAgICAgICAgICAgICBwaCA9IHBhcnNlX3RyZWVbaV0gLy8gY29udmVuaWVuY2UgcHVycG9zZXMgb25seVxuICAgICAgICAgICAgICAgIGlmIChwaC5rZXlzKSB7IC8vIGtleXdvcmQgYXJndW1lbnRcbiAgICAgICAgICAgICAgICAgICAgYXJnID0gYXJndltjdXJzb3JdXG4gICAgICAgICAgICAgICAgICAgIGZvciAoayA9IDA7IGsgPCBwaC5rZXlzLmxlbmd0aDsgaysrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoYXJnID09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihzcHJpbnRmKCdbc3ByaW50Zl0gQ2Fubm90IGFjY2VzcyBwcm9wZXJ0eSBcIiVzXCIgb2YgdW5kZWZpbmVkIHZhbHVlIFwiJXNcIicsIHBoLmtleXNba10sIHBoLmtleXNbay0xXSkpXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBhcmcgPSBhcmdbcGgua2V5c1trXV1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmIChwaC5wYXJhbV9ubykgeyAvLyBwb3NpdGlvbmFsIGFyZ3VtZW50IChleHBsaWNpdClcbiAgICAgICAgICAgICAgICAgICAgYXJnID0gYXJndltwaC5wYXJhbV9ub11cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7IC8vIHBvc2l0aW9uYWwgYXJndW1lbnQgKGltcGxpY2l0KVxuICAgICAgICAgICAgICAgICAgICBhcmcgPSBhcmd2W2N1cnNvcisrXVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmIChyZS5ub3RfdHlwZS50ZXN0KHBoLnR5cGUpICYmIHJlLm5vdF9wcmltaXRpdmUudGVzdChwaC50eXBlKSAmJiBhcmcgaW5zdGFuY2VvZiBGdW5jdGlvbikge1xuICAgICAgICAgICAgICAgICAgICBhcmcgPSBhcmcoKVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmIChyZS5udW1lcmljX2FyZy50ZXN0KHBoLnR5cGUpICYmICh0eXBlb2YgYXJnICE9PSAnbnVtYmVyJyAmJiBpc05hTihhcmcpKSkge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKHNwcmludGYoJ1tzcHJpbnRmXSBleHBlY3RpbmcgbnVtYmVyIGJ1dCBmb3VuZCAlVCcsIGFyZykpXG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYgKHJlLm51bWJlci50ZXN0KHBoLnR5cGUpKSB7XG4gICAgICAgICAgICAgICAgICAgIGlzX3Bvc2l0aXZlID0gYXJnID49IDBcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBzd2l0Y2ggKHBoLnR5cGUpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnYic6XG4gICAgICAgICAgICAgICAgICAgICAgICBhcmcgPSBwYXJzZUludChhcmcsIDEwKS50b1N0cmluZygyKVxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnYyc6XG4gICAgICAgICAgICAgICAgICAgICAgICBhcmcgPSBTdHJpbmcuZnJvbUNoYXJDb2RlKHBhcnNlSW50KGFyZywgMTApKVxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnZCc6XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ2knOlxuICAgICAgICAgICAgICAgICAgICAgICAgYXJnID0gcGFyc2VJbnQoYXJnLCAxMClcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ2onOlxuICAgICAgICAgICAgICAgICAgICAgICAgYXJnID0gSlNPTi5zdHJpbmdpZnkoYXJnLCBudWxsLCBwaC53aWR0aCA/IHBhcnNlSW50KHBoLndpZHRoKSA6IDApXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVha1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdlJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIGFyZyA9IHBoLnByZWNpc2lvbiA/IHBhcnNlRmxvYXQoYXJnKS50b0V4cG9uZW50aWFsKHBoLnByZWNpc2lvbikgOiBwYXJzZUZsb2F0KGFyZykudG9FeHBvbmVudGlhbCgpXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVha1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdmJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIGFyZyA9IHBoLnByZWNpc2lvbiA/IHBhcnNlRmxvYXQoYXJnKS50b0ZpeGVkKHBoLnByZWNpc2lvbikgOiBwYXJzZUZsb2F0KGFyZylcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ2cnOlxuICAgICAgICAgICAgICAgICAgICAgICAgYXJnID0gcGgucHJlY2lzaW9uID8gU3RyaW5nKE51bWJlcihhcmcudG9QcmVjaXNpb24ocGgucHJlY2lzaW9uKSkpIDogcGFyc2VGbG9hdChhcmcpXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVha1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdvJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIGFyZyA9IChwYXJzZUludChhcmcsIDEwKSA+Pj4gMCkudG9TdHJpbmcoOClcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ3MnOlxuICAgICAgICAgICAgICAgICAgICAgICAgYXJnID0gU3RyaW5nKGFyZylcbiAgICAgICAgICAgICAgICAgICAgICAgIGFyZyA9IChwaC5wcmVjaXNpb24gPyBhcmcuc3Vic3RyaW5nKDAsIHBoLnByZWNpc2lvbikgOiBhcmcpXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVha1xuICAgICAgICAgICAgICAgICAgICBjYXNlICd0JzpcbiAgICAgICAgICAgICAgICAgICAgICAgIGFyZyA9IFN0cmluZyghIWFyZylcbiAgICAgICAgICAgICAgICAgICAgICAgIGFyZyA9IChwaC5wcmVjaXNpb24gPyBhcmcuc3Vic3RyaW5nKDAsIHBoLnByZWNpc2lvbikgOiBhcmcpXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVha1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdUJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIGFyZyA9IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChhcmcpLnNsaWNlKDgsIC0xKS50b0xvd2VyQ2FzZSgpXG4gICAgICAgICAgICAgICAgICAgICAgICBhcmcgPSAocGgucHJlY2lzaW9uID8gYXJnLnN1YnN0cmluZygwLCBwaC5wcmVjaXNpb24pIDogYXJnKVxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAndSc6XG4gICAgICAgICAgICAgICAgICAgICAgICBhcmcgPSBwYXJzZUludChhcmcsIDEwKSA+Pj4gMFxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAndic6XG4gICAgICAgICAgICAgICAgICAgICAgICBhcmcgPSBhcmcudmFsdWVPZigpXG4gICAgICAgICAgICAgICAgICAgICAgICBhcmcgPSAocGgucHJlY2lzaW9uID8gYXJnLnN1YnN0cmluZygwLCBwaC5wcmVjaXNpb24pIDogYXJnKVxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAneCc6XG4gICAgICAgICAgICAgICAgICAgICAgICBhcmcgPSAocGFyc2VJbnQoYXJnLCAxMCkgPj4+IDApLnRvU3RyaW5nKDE2KVxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnWCc6XG4gICAgICAgICAgICAgICAgICAgICAgICBhcmcgPSAocGFyc2VJbnQoYXJnLCAxMCkgPj4+IDApLnRvU3RyaW5nKDE2KS50b1VwcGVyQ2FzZSgpXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVha1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAocmUuanNvbi50ZXN0KHBoLnR5cGUpKSB7XG4gICAgICAgICAgICAgICAgICAgIG91dHB1dCArPSBhcmdcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChyZS5udW1iZXIudGVzdChwaC50eXBlKSAmJiAoIWlzX3Bvc2l0aXZlIHx8IHBoLnNpZ24pKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzaWduID0gaXNfcG9zaXRpdmUgPyAnKycgOiAnLSdcbiAgICAgICAgICAgICAgICAgICAgICAgIGFyZyA9IGFyZy50b1N0cmluZygpLnJlcGxhY2UocmUuc2lnbiwgJycpXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzaWduID0gJydcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBwYWRfY2hhcmFjdGVyID0gcGgucGFkX2NoYXIgPyBwaC5wYWRfY2hhciA9PT0gJzAnID8gJzAnIDogcGgucGFkX2NoYXIuY2hhckF0KDEpIDogJyAnXG4gICAgICAgICAgICAgICAgICAgIHBhZF9sZW5ndGggPSBwaC53aWR0aCAtIChzaWduICsgYXJnKS5sZW5ndGhcbiAgICAgICAgICAgICAgICAgICAgcGFkID0gcGgud2lkdGggPyAocGFkX2xlbmd0aCA+IDAgPyBwYWRfY2hhcmFjdGVyLnJlcGVhdChwYWRfbGVuZ3RoKSA6ICcnKSA6ICcnXG4gICAgICAgICAgICAgICAgICAgIG91dHB1dCArPSBwaC5hbGlnbiA/IHNpZ24gKyBhcmcgKyBwYWQgOiAocGFkX2NoYXJhY3RlciA9PT0gJzAnID8gc2lnbiArIHBhZCArIGFyZyA6IHBhZCArIHNpZ24gKyBhcmcpXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBvdXRwdXRcbiAgICB9XG5cbiAgICB2YXIgc3ByaW50Zl9jYWNoZSA9IE9iamVjdC5jcmVhdGUobnVsbClcblxuICAgIGZ1bmN0aW9uIHNwcmludGZfcGFyc2UoZm10KSB7XG4gICAgICAgIGlmIChzcHJpbnRmX2NhY2hlW2ZtdF0pIHtcbiAgICAgICAgICAgIHJldHVybiBzcHJpbnRmX2NhY2hlW2ZtdF1cbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBfZm10ID0gZm10LCBtYXRjaCwgcGFyc2VfdHJlZSA9IFtdLCBhcmdfbmFtZXMgPSAwXG4gICAgICAgIHdoaWxlIChfZm10KSB7XG4gICAgICAgICAgICBpZiAoKG1hdGNoID0gcmUudGV4dC5leGVjKF9mbXQpKSAhPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIHBhcnNlX3RyZWUucHVzaChtYXRjaFswXSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKChtYXRjaCA9IHJlLm1vZHVsby5leGVjKF9mbXQpKSAhPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIHBhcnNlX3RyZWUucHVzaCgnJScpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmICgobWF0Y2ggPSByZS5wbGFjZWhvbGRlci5leGVjKF9mbXQpKSAhPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIGlmIChtYXRjaFsyXSkge1xuICAgICAgICAgICAgICAgICAgICBhcmdfbmFtZXMgfD0gMVxuICAgICAgICAgICAgICAgICAgICB2YXIgZmllbGRfbGlzdCA9IFtdLCByZXBsYWNlbWVudF9maWVsZCA9IG1hdGNoWzJdLCBmaWVsZF9tYXRjaCA9IFtdXG4gICAgICAgICAgICAgICAgICAgIGlmICgoZmllbGRfbWF0Y2ggPSByZS5rZXkuZXhlYyhyZXBsYWNlbWVudF9maWVsZCkpICE9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBmaWVsZF9saXN0LnB1c2goZmllbGRfbWF0Y2hbMV0pXG4gICAgICAgICAgICAgICAgICAgICAgICB3aGlsZSAoKHJlcGxhY2VtZW50X2ZpZWxkID0gcmVwbGFjZW1lbnRfZmllbGQuc3Vic3RyaW5nKGZpZWxkX21hdGNoWzBdLmxlbmd0aCkpICE9PSAnJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgoZmllbGRfbWF0Y2ggPSByZS5rZXlfYWNjZXNzLmV4ZWMocmVwbGFjZW1lbnRfZmllbGQpKSAhPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWVsZF9saXN0LnB1c2goZmllbGRfbWF0Y2hbMV0pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKChmaWVsZF9tYXRjaCA9IHJlLmluZGV4X2FjY2Vzcy5leGVjKHJlcGxhY2VtZW50X2ZpZWxkKSkgIT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmllbGRfbGlzdC5wdXNoKGZpZWxkX21hdGNoWzFdKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IFN5bnRheEVycm9yKCdbc3ByaW50Zl0gZmFpbGVkIHRvIHBhcnNlIG5hbWVkIGFyZ3VtZW50IGtleScpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IFN5bnRheEVycm9yKCdbc3ByaW50Zl0gZmFpbGVkIHRvIHBhcnNlIG5hbWVkIGFyZ3VtZW50IGtleScpXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgbWF0Y2hbMl0gPSBmaWVsZF9saXN0XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBhcmdfbmFtZXMgfD0gMlxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoYXJnX25hbWVzID09PSAzKSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignW3NwcmludGZdIG1peGluZyBwb3NpdGlvbmFsIGFuZCBuYW1lZCBwbGFjZWhvbGRlcnMgaXMgbm90ICh5ZXQpIHN1cHBvcnRlZCcpXG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgcGFyc2VfdHJlZS5wdXNoKFxuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcjogbWF0Y2hbMF0sXG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJhbV9ubzogICAgbWF0Y2hbMV0sXG4gICAgICAgICAgICAgICAgICAgICAgICBrZXlzOiAgICAgICAgbWF0Y2hbMl0sXG4gICAgICAgICAgICAgICAgICAgICAgICBzaWduOiAgICAgICAgbWF0Y2hbM10sXG4gICAgICAgICAgICAgICAgICAgICAgICBwYWRfY2hhcjogICAgbWF0Y2hbNF0sXG4gICAgICAgICAgICAgICAgICAgICAgICBhbGlnbjogICAgICAgbWF0Y2hbNV0sXG4gICAgICAgICAgICAgICAgICAgICAgICB3aWR0aDogICAgICAgbWF0Y2hbNl0sXG4gICAgICAgICAgICAgICAgICAgICAgICBwcmVjaXNpb246ICAgbWF0Y2hbN10sXG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAgICAgICAgbWF0Y2hbOF1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBTeW50YXhFcnJvcignW3NwcmludGZdIHVuZXhwZWN0ZWQgcGxhY2Vob2xkZXInKVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgX2ZtdCA9IF9mbXQuc3Vic3RyaW5nKG1hdGNoWzBdLmxlbmd0aClcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gc3ByaW50Zl9jYWNoZVtmbXRdID0gcGFyc2VfdHJlZVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIGV4cG9ydCB0byBlaXRoZXIgYnJvd3NlciBvciBub2RlLmpzXG4gICAgICovXG4gICAgLyogZXNsaW50LWRpc2FibGUgcXVvdGUtcHJvcHMgKi9cbiAgICBpZiAodHlwZW9mIGV4cG9ydHMgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIGV4cG9ydHNbJ3NwcmludGYnXSA9IHNwcmludGZcbiAgICAgICAgZXhwb3J0c1sndnNwcmludGYnXSA9IHZzcHJpbnRmXG4gICAgfVxuICAgIGlmICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICB3aW5kb3dbJ3NwcmludGYnXSA9IHNwcmludGZcbiAgICAgICAgd2luZG93Wyd2c3ByaW50ZiddID0gdnNwcmludGZcblxuICAgICAgICBpZiAodHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmVbJ2FtZCddKSB7XG4gICAgICAgICAgICBkZWZpbmUoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgJ3NwcmludGYnOiBzcHJpbnRmLFxuICAgICAgICAgICAgICAgICAgICAndnNwcmludGYnOiB2c3ByaW50ZlxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICB9XG4gICAgLyogZXNsaW50LWVuYWJsZSBxdW90ZS1wcm9wcyAqL1xufSgpOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lXG4iLCIvKmVzbGludCBuby11bnVzZWQtdmFyczogXCJvZmZcIiovXG5pbXBvcnQgeyBXZWJTb2NrZXRNYW5hZ2VyT2JqZWN0IH0gZnJvbSBcIi4vd2ViU29ja2V0TWFuYWdlclwiO1xuXG5nbG9iYWwuY29ubmVjdCA9IGdsb2JhbC5jb25uZWN0IHx8IHt9O1xuY29ubmVjdC5XZWJTb2NrZXRNYW5hZ2VyID0gV2ViU29ja2V0TWFuYWdlck9iamVjdDtcbmNvbm5lY3QudGVzdG51bSA9IDE7XG5leHBvcnQgY29uc3QgV2ViU29ja2V0TWFuYWdlciA9IFdlYlNvY2tldE1hbmFnZXJPYmplY3Q7IiwidmFyIGc7XG5cbi8vIFRoaXMgd29ya3MgaW4gbm9uLXN0cmljdCBtb2RlXG5nID0gKGZ1bmN0aW9uKCkge1xuXHRyZXR1cm4gdGhpcztcbn0pKCk7XG5cbnRyeSB7XG5cdC8vIFRoaXMgd29ya3MgaWYgZXZhbCBpcyBhbGxvd2VkIChzZWUgQ1NQKVxuXHRnID0gZyB8fCBuZXcgRnVuY3Rpb24oXCJyZXR1cm4gdGhpc1wiKSgpO1xufSBjYXRjaCAoZSkge1xuXHQvLyBUaGlzIHdvcmtzIGlmIHRoZSB3aW5kb3cgcmVmZXJlbmNlIGlzIGF2YWlsYWJsZVxuXHRpZiAodHlwZW9mIHdpbmRvdyA9PT0gXCJvYmplY3RcIikgZyA9IHdpbmRvdztcbn1cblxuLy8gZyBjYW4gc3RpbGwgYmUgdW5kZWZpbmVkLCBidXQgbm90aGluZyB0byBkbyBhYm91dCBpdC4uLlxuLy8gV2UgcmV0dXJuIHVuZGVmaW5lZCwgaW5zdGVhZCBvZiBub3RoaW5nIGhlcmUsIHNvIGl0J3Ncbi8vIGVhc2llciB0byBoYW5kbGUgdGhpcyBjYXNlLiBpZighZ2xvYmFsKSB7IC4uLn1cblxubW9kdWxlLmV4cG9ydHMgPSBnO1xuIl0sInNvdXJjZVJvb3QiOiIifQ==