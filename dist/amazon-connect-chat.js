!function(e){var t={};function n(o){if(t[o])return t[o].exports;var i=t[o]={i:o,l:!1,exports:{}};return e[o].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(o,i,function(t){return e[t]}.bind(null,i));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=2)}([function(e,t,n){"use strict";function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}function c(e){var t="function"==typeof Map?new Map:void 0;return(c=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,o)}function o(){return a(e,arguments,l(this).constructor)}return o.prototype=Object.create(e.prototype,{constructor:{value:o,enumerable:!1,writable:!0,configurable:!0}}),u(o,e)})(e)}function a(e,t,n){return(a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}()?Reflect.construct:function(e,t,n){var o=[null];o.push.apply(o,t);var i=new(Function.bind.apply(e,o));return n&&u(i,n.prototype),i}).apply(null,arguments)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var h=function(e){function t(e){var n;return i(this,t),(n=r(this,l(t).call(this,e))).name="ValueError",console.log("EXCEPTION: "+n.name+" MESSAGE: "+n.message),n}return s(t,c(Error)),t}(),f=function(e){function t(e){var n;return i(this,t),(n=r(this,l(t).call(this,e))).name="UnImplementedMethod",console.log("EXCEPTION: "+n.name+" MESSAGE: "+n.message),n}return s(t,c(Error)),t}(),p=function(e){function t(e,n){var o;return i(this,t),(o=r(this,l(t).call(this,e))).name="IllegalArgument",o.argument=n,console.log("EXCEPTION: "+o.name+" MESSAGE: "+o.message),o}return s(t,c(Error)),t}(),d=function(e){function t(e){var n;return i(this,t),(n=r(this,l(t).call(this,e))).name="IllegalState",console.log("EXCEPTION: "+n.name+" MESSAGE: "+n.message),n}return s(t,c(Error)),t}(),y=function(e,t,n){var o=new XMLHttpRequest;o.open(e.method||"GET",e.url),e.headers&&Object.keys(e.headers).forEach(function(t){o.setRequestHeader(t,e.headers[t])}),o.onload=function(){o.status>=200&&o.status<300?t(o):n(o)},o.onerror=function(){return n(o)},o.send(e.body)},v=function e(){return e.cache.hasOwnProperty(arguments[0])||(e.cache[arguments[0]]=e.parse(arguments[0])),e.format.call(null,e.cache[arguments[0]],arguments)};v.format=function(e,t){var n,o,i,r,s,c,a,u=1,l=e.length,h="",f=[];for(o=0;o<l;o++)if("string"===(h=g(e[o])))f.push(e[o]);else if("array"===h){if((r=e[o])[2])for(n=t[u],i=0;i<r[2].length;i++){if(!n.hasOwnProperty(r[2][i]))throw v('[sprintf] property "%s" does not exist',r[2][i]);n=n[r[2][i]]}else n=r[1]?t[r[1]]:t[u++];if(/[^s]/.test(r[8])&&"number"!=g(n))throw v("[sprintf] expecting number but found %s",g(n));switch(r[8]){case"b":n=n.toString(2);break;case"c":n=String.fromCharCode(n);break;case"d":n=parseInt(n,10);break;case"e":n=r[7]?n.toExponential(r[7]):n.toExponential();break;case"f":n=r[7]?parseFloat(n).toFixed(r[7]):parseFloat(n);break;case"o":n=n.toString(8);break;case"s":n=(n=String(n))&&r[7]?n.substring(0,r[7]):n;break;case"u":n>>>=0;break;case"x":n=n.toString(16);break;case"X":n=n.toString(16).toUpperCase()}n=/[def]/.test(r[8])&&r[3]&&n>=0?"+"+n:n,c=r[4]?"0"==r[4]?"0":r[4].charAt(1):" ",a=r[6]-String(n).length,s=r[6]?_(c,a):"",f.push(r[5]?n+s:s+n)}return f.join("")},v.cache={},v.parse=function(e){for(var t=e,n=[],o=[],i=0;t;){if(null!==(n=/^[^\x25]+/.exec(t)))o.push(n[0]);else if(null!==(n=/^\x25{2}/.exec(t)))o.push("%");else{if(null===(n=/^\x25(?:([1-9]\d*)\$|\(([^\)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-fosuxX])/.exec(t)))throw"[sprintf] huh?";if(n[2]){i|=1;var r=[],s=n[2],c=[];if(null===(c=/^([a-z_][a-z_\d]*)/i.exec(s)))throw"[sprintf] huh?";for(r.push(c[1]);""!==(s=s.substring(c[0].length));)if(null!==(c=/^\.([a-z_][a-z_\d]*)/i.exec(s)))r.push(c[1]);else{if(null===(c=/^\[(\d+)\]/.exec(s)))throw"[sprintf] huh?";r.push(c[1])}n[2]=r}else i|=2;if(3===i)throw"[sprintf] mixing positional and named placeholders is not (yet) supported";o.push(n)}t=t.substring(n[0].length)}return o};function g(e){return Object.prototype.toString.call(e).slice(8,-1).toLowerCase()}function _(e,t){for(var n=[];t>0;n[--t]=e);return n.join("")}function b(e){return(b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var C={assertTrue:function(e,t){if(!e)throw new h(t)},assertNotNull:function(e,t){return C.assertTrue(null!==e&&void 0!==b(e),v("%s must be provided",t||"A value")),e},now:function(){return(new Date).getTime()},isString:function(e){return"string"==typeof e},randomId:function(){return v("%s-%s",C.now(),Math.random().toString(36).slice(2))},makeEnum:function(e){var t={};return e.forEach(function(e){var n=e.replace(/\.?([a-z]+)_?/g,function(e,t){return t.toUpperCase()+"_"}).replace(/_$/,"");t[n]=e}),t},contains:function(e,t){return e instanceof Array?null!==C.find(e,function(e){return e===t}):t in e},find:function(e,t){for(var n=0;n<e.length;n++)if(t(e[n]))return e[n];return null},containsValue:function(e,t){return e instanceof Array?null!==C.find(e,function(e){return e===t}):null!==C.find(C.values(e),function(e){return e===t})},isFunction:function(e){return!!(e&&e.constructor&&e.call&&e.apply)},values:function(e){var t=[];for(var n in C.assertNotNull(e,"map"),e)t.push(e[n]);return t},wrapPromise:function(e,t,n){return new Promise(function(o,i){e.then(t(o)).catch(n(i))})}},E=C,w="/contact/chat/participant/message",S="/contact/chat/participant/transcript",m="/contact/chat/participant/event",I="/contact/chat/participant/disconnect",T="/contact/chat/participant/connection-details",N="post",k="PERSISTED",O={textPlain:"text/plain"},M=E.makeEnum(["ALL","MANAGER","AGENT","CUSTOMER","THIRDPARTY"]),A=E.makeEnum(["PERSISTED","NON_PERSISTED"]),P={PROD:{invokeUrl:"https://vxgh3tfytg.execute-api.us-west-2.amazonaws.com/Stage"}},D=30,R=60,U="AGENT",x="CUSTOMER",L="INCOMING_MESSAGE",B="INCOMING_TYPING",q="CONNECTION_ESTABLISHED",j="CONNECTION_BROKEN";function V(e){return(V="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function F(e,t){return!t||"object"!==V(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function G(e){return(G=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function H(e,t){return(H=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function K(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Q(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function J(e,t,n){return t&&Q(e.prototype,t),n&&Q(e,n),e}var Y=function(){function e(){K(this,e)}return J(e,[{key:"getClient",value:function(e){if("PROD"===e)return new W({stageConfig:P.PROD});throw new p("unrecognized stage in ChatClientFactoryImpl")}}]),e}(),z=function(){function e(){K(this,e)}return J(e,[{key:"sendMessage",value:function(e,t,n){throw new f("sendTextMessage in ChatClient")}},{key:"disconnectChat",value:function(e){throw new f("disconnectChat in ChatClient")}},{key:"sendEvent",value:function(e,t,n,o){throw new f("sendEvent in ChatClient")}},{key:"createConnectionDetails",value:function(e){throw new f("reconnectChat in ChatClient")}}]),e}(),W=function(e){function t(e){var n;return K(this,t),(n=F(this,G(t).call(this))).invokeUrl=e.stageConfig.invokeUrl,n.callHttpClient=y,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&H(e,t)}(t,z),J(t,[{key:"sendMessage",value:function(e,t,n){console.log(n);var o={Message:{ContentType:O.textPlain,Content:t,Persistence:k}},i={method:N,headers:{ConnectionToken:e},url:this.invokeUrl+w,body:o};return this._callHttpClient(i)}},{key:"getTranscript",value:function(e,t){var n={method:N,headers:{ConnectionToken:e},url:this.invokeUrl+S,body:t};return this._callHttpClient(n)}},{key:"sendEvent",value:function(e,t,n,o,i){console.log(n),console.log(i);var r={ParticipantEvent:{Visibility:o,ParticipantEventType:t}},s={method:N,headers:{ConnectionToken:e},url:this.invokeUrl+m,body:r};return this._callHttpClient(s)}},{key:"disconnectChat",value:function(e){var t={method:N,headers:{ConnectionToken:e},url:this.invokeUrl+I,body:{}};return this._callHttpClient(t)}},{key:"createConnectionDetails",value:function(e){var t={method:N,headers:{ParticipantToken:e},url:this.invokeUrl+T,body:{}};return this._callHttpClient(t)}},{key:"_callHttpClient",value:function(e){var t=this;return e.headers=Object.assign(e.headers,{"Content-Type":"application/json",Accept:"application/json"}),e.body=JSON.stringify(e.body),new Promise(function(n,o){t.callHttpClient(e,function(e){var t={};t.data=JSON.parse(e.responseText),n(t)},function(e){var t={};t.statusText=e.statusText,o(t)})})}}]),t}(),X=new Y;function $(e,t){return!t||"object"!==te(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Z(e){return(Z=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ee(e,t){return(ee=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function te(e){return(te="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ne(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function oe(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function ie(e,t,n){return t&&oe(e.prototype,t),n&&oe(e,n),e}var re=function(){function e(){ne(this,e)}return ie(e,[{key:"_assertIsNonEmptyString",value:function(e,t){if(!e||"string"!=typeof e)throw new p(t+" is not a non-empty string!")}},{key:"_assertIsList",value:function(e,t){if(!Array.isArray(e))throw new p(t+" is not an array")}},{key:"_assertIsEnum",value:function(e,t,n){var o;for(o=0;o<t.length;o++)if(t[o]===e)return;throw new p(n+" passed is not valid. Allowed values are: "+t)}},{key:"_assertIsObject",value:function(e,t){if("object"!==te(e))throw new p(t+" is not an object!")}},{key:"validateNewControllerDetails",value:function(e){return!0}},{key:"validateSendMessage",value:function(e,t){E.isString(e)||this._assertIsObject(e,"message"),this._assertIsEnum(t,Object.values(O),"type")}},{key:"validateConnectChat",value:function(e){return!0}},{key:"validateSendEvent",value:function(e){this._assertIsNonEmptyString(e.eventType,"eventType"),void 0!==e.messageIds&&this._assertIsList(e.messageIds),void 0!==e.visibility&&this._assertIsEnum(e.visibility,Object.values(M),"visibility"),void 0!==e.persistence&&this._assertIsEnum(e.persistence,Object.values(A),"persistence")}},{key:"validateGetMessages",value:function(e){return!0}}]),e}(),se=function(e){function t(){return ne(this,t),$(this,Z(t).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ee(e,t)}(t,re),ie(t,[{key:"validateChatDetails",value:function(e){this._assertIsObject(e,"chatDetails"),this._assertIsNonEmptyString(e.initialContactId,"chatDetails.initialContactId"),this._assertIsNonEmptyString(e.contactId,"chatDetails.contactId"),this._assertIsNonEmptyString(e.participantId,"chatDetails.participantId"),e.connectionDetails?(this._assertIsObject(e.connectionDetails,"chatDetails.connectionDetails"),this._assertIsNonEmptyString(e.connectionDetails.PreSignedConnectionUrl,"chatDetails.connectionDetails.PreSignedConnectionUrl"),this._assertIsNonEmptyString(e.connectionDetails.ConnectionId,"chatDetails.connectionDetails.ConnectionId"),this._assertIsNonEmptyString(e.connectionDetails.connectionToken,"chatDetails.connectionDetails.connectionToken")):this._assertIsNonEmptyString(e.participantToken,"chatDetails.participantToken")}},{key:"validateInitiateChatResponse",value:function(){return!0}}]),t}();function ce(e){return(ce="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ae(e){return(ae=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ue(e,t){return(ue=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function le(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function he(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function fe(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function pe(e,t,n){return t&&fe(e.prototype,t),n&&fe(e,n),e}var de=function(){function e(){he(this,e)}return pe(e,[{key:"createNewMqttConnectionProvider",value:function(e,t){switch(t){case"PahoMqttConnection":return function(t){return e.callback=t,new be(e)}}throw new p("type in ChatConnectionManager.createNewMqttConnectionProvider",t)}}]),e}(),ye=function(){function e(){he(this,e)}return pe(e,[{key:"connect",value:function(e){throw new f("connect in IotClient")}},{key:"disconnect",value:function(){throw new f("connect in IotClient")}},{key:"subscribe",value:function(e,t){throw new f("connect in IotClient")}},{key:"unsubscribe",value:function(e,t){throw new f("connect in IotClient")}}]),e}(),ve=Object.freeze({NeverConnected:"NeverConnected",Connecting:"Connecting",Connected:"Connected",DisconnectedRetrying:"DisconnectedRetrying",Disconnected:"Disconnected",Reconnecting:"Reconnecting"}),ge=Object.freeze({MESSAGE:"Message",DISCONNECTED_RETRYING:"DisconnectedRetrying",DISCONNECTED:"Disconnected",RECONNECTED:"ReconnectSuccess"}),_e=n(3),be=function(e){function t(e){var n;he(this,t),(n=function(e,t){return!t||"object"!==ce(t)&&"function"!=typeof t?le(e):t}(this,ae(t).call(this))).preSignedUrl=e.preSignedUrl,n.connectionId=e.connectionId,n.status=ve.NeverConnected,n.pahoClient=new _e.Client(n.preSignedUrl,n.connectionId);var o=le(le(n));return n.pahoClient.onMessageArrived=function(e){o._messageArrivedCallback(e)},n.pahoClient.onConnectionLost=function(e){o._connectionLostCallBack(e)},n.pahoClient.onMessageArrived=function(e){o._messageArrivedCallback(e)},n.debug=e.debug,e.debug&&(n.pahoClient.trace=function(e){console.log("trace paho: "),console.log(e)}),n.callback=e.callback,n.killReconnect=null,n.maxRetryTime=e.maxRetryTime,n.neverConnected=!0,n._subscribedTopics=[],n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ue(e,t)}(t,ye),pe(t,[{key:"connect",value:function(e){var t=this;return new Promise(function(n,o){e.onSuccess=function(e){t.neverConnected=!1;var o=t.status;t._onConnectSuccess(e),n({}),o===ve.DisconnectedRetrying&&t.callback(ge.RECONNECTED,{})},e.onFailure=function(e){var n={reason:e};t._onConnectFailure(n),o(n)},t.status=ve.Connecting,t.pahoClient.connect(e)})}},{key:"_connectionLostCallBack",value:function(e){var t={reason:e};if(this._subscribedTopics=[],this.status!==ve.Disconnected)return t.reason.reconnect?(this.status=ve.DisconnectedRetrying,this.callback(ge.DISCONNECTED_RETRYING,t),void(this.killReconnect=this._scheduleReconnectKilling())):(this.status=ve.Disconnected,void this.callback(ge.DISCONNECTED,t))}},{key:"_messageArrivedCallback",value:function(e){var t={topic:e.topic,qos:e.qos,payloadString:e.payloadString};this.callback(ge.MESSAGE,t)}},{key:"_onConnectSuccess",value:function(e){null!==this.killReconnect&&(clearTimeout(this.killReconnect),this.killReconnect=null),this.status=ve.Connected}},{key:"_onConnectFailure",value:function(e){this.neverConnected?this.status=ve.NeverConnected:this.status=ve.Disconnected}},{key:"_scheduleReconnectKilling",value:function(){var e=this;return setTimeout(function(){e.disconnect(),e.callback(ge.DISCONNECTED,{reason:"TimeoutInReconnect"})},1e3*e.maxRetryTime)}},{key:"disconnect",value:function(){this._subscribedTopics=[],this.status=ve.Disconnected,this.pahoClient.disconnect()}},{key:"subscribe",value:function(e,t){var n=this;return new Promise(function(o,i){t.onSuccess=function(t){n._subscribeSuccess(e,t);var i={topic:e,qos:t.grantedQos};o(i)},t.onFailure=function(t){i({topic:e,error:t})},n.pahoClient.subscribe(e,t)})}},{key:"_addToTopics",value:function(e){var t;for(t in this._subscribedTopics)if(t===e)return;this._subscribedTopics.push(e)}},{key:"_subscribeSuccess",value:function(e,t){this._addToTopics(e)}},{key:"getSubscribedTopics",value:function(){return this._subscribedTopics.slice(0)}},{key:"unsubscribe",value:function(e,t){var n=this;return new Promise(function(o,i){t.onSuccess=function(t){var i={topic:e,response:t};n._unsubscribeSuccess(e,i),o(i)},t.onFailure=function(t){i({topic:e,error:t})},n.pahoClient.unsubscribe(e,t)})}},{key:"_unsubscribeSuccess",value:function(e,t){this._subscribedTopics=this._subscribedTopics.filter(function(t){return t!==e})}},{key:"getStatus",value:function(){return this.status}},{key:"_logit",value:function(e){this.debug&&console.log(e)}}]),t}();function Ce(e){return(Ce="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ee(e,t){return!t||"object"!==Ce(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function we(e){return(we=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Se(e,t){return(Se=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function me(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ie(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Te(e,t,n){return t&&Ie(e.prototype,t),n&&Ie(e,n),e}var Ne=function(){function e(){me(this,e)}return Te(e,[{key:"start",value:function(e){throw new f("start in ConnectionHelper")}},{key:"end",value:function(){throw new f("end in ConnectionHelper")}}]),e}(),ke={NeverStarted:"NeverStarted",Starting:"Starting",Connected:"Connected",DisconnectedReconnecting:"DisconnectedReconnecting",Ended:"Ended"},Oe="Ended",Me="DisconnectedReconnecting",Ae="Reconnected",Pe="IncomingMessage",De=function(e){function t(e){var n;if(me(this,t),(n=Ee(this,we(t).call(this))).preSignedUrl=e.connectionDetails.preSignedUrl,n.topic=e.connectionDetails.connectionId,n.iotConnection=e.mqttConnectionProvider(function(e,t){return n._handleIotEvent(e,t)}),n.iotConnection.getStatus()!==ve.NeverConnected)throw new p("iotConnection is expected to be in NeverConnected state but is not")();return n.chatControllerCallback=e.callback,n.status=ke.NeverStarted,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Se(e,t)}(t,Ne),Te(t,[{key:"start",value:function(){if(this.status!==ke.NeverStarted)throw new d("Connection helper started twice!!");return this.status=ke.Starting,new Promise(this._createStartPromise())}},{key:"_createStartPromise",value:function(){var e=this;return function(t,n){e._connect(t,n)}}},{key:"_connect",value:function(e,t){var n=this,o={useSSL:!0,keepAliveInterval:D,reconnect:!1,mqttVersion:4,timeout:R};n.iotConnection.connect(o).then(function(o){n._postConnect(e,t,o)}).catch(function(e){n._connectFailed(t,e)})}},{key:"_postConnect",value:function(e,t,n){this._subscribe(e,t,n)}},{key:"_connectFailed",value:function(e,t){var n={connectSuccess:!1,reason:"ConnectionToBrokerFailed",details:t};self.status=ke.Ended,e(n)}},{key:"_subscribe",value:function(e,t,n){var o=this;o.iotConnection.subscribe(o.topic,{qos:1}).then(function(t){o._postSubscribe(e,t)}).catch(function(e){o._subscribeFailed(t,e)})}},{key:"_postSubscribe",value:function(e,t){var n={details:t,connectSuccess:!0};this.status=ke.Connected,e(n)}},{key:"_subscribeFailed",value:function(e,t){var n={connectSuccess:!1,details:t,reason:"SubscribtionToTopicFailed"};this.status=ke.Ended,this.iotConnection.disconnect(),e(n)}},{key:"_handleIotEvent",value:function(e,t){switch(e){case ge.MESSAGE:this.chatControllerCallback(Pe,t);break;case ge.DISCONNECTED_RETRYING:console.log("ERROR. Received unexpected event DISCONNECTED_RETRYING");break;case ge.DISCONNECTED:this.status=ke.Ended,this.chatControllerCallback(Oe,t);break;case ge.RECONNECTED:console.log("ERROR. Received unexpected event DISCONNECTED_RETRYING")}}},{key:"end",value:function(){this.status=ke.Ended,this.iotConnection.disconnect()}},{key:"getStatus",value:function(){return this.status}}]),t}();function Re(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var Ue=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,o;return t=e,(n=[{key:"fromConnectionHelperEvent",value:function(e,t,n){var o={data:t,chatDetails:n},i={type:null,data:o};switch(e){case Oe:o.retrying=!1,i.type=j;break;case Me:o.retrying=!0,i.type=j;break;case Ae:o.connectCalled=!1,i.type=q;break;case Pe:return this._fromIncomingData(t,n)}}},{key:"_fromIncomingData",value:function(e,t){var n=JSON.parse(e.payloadString),o={type:null,data:{data:n,chatDetails:t}};switch(n.Data.Type){case"TYPING":return o.type=B,o}return o.type=L,o}}])&&Re(t.prototype,n),o&&Re(t,o),e}(),xe=function(e,t,n){this.subMap=e,this.id=E.randomId(),this.eventName=t,this.f=n};xe.prototype.unsubscribe=function(){this.subMap.unsubscribe(this.eventName,this.id)};var Le=function(){this.subIdMap={},this.subEventNameMap={}};Le.prototype.subscribe=function(e,t){var n=new xe(this,e,t);this.subIdMap[n.id]=n;var o=this.subEventNameMap[e]||[];o.push(n),this.subEventNameMap[e]=o},Le.prototype.unsubscribe=function(e,t){E.contains(this.subEventNameMap,e)&&(this.subEventNameMap[e]=this.subEventNameMap[e].filter(function(e){return e.id!==t}),this.subEventNameMap[e].length<1&&delete this.subEventNameMap[e]),E.contains(this.subIdMap,t)&&delete this.subIdMap[t]},Le.prototype.getAllSubscriptions=function(){return E.values(this.subEventNameMap).reduce(function(e,t){return e.concat(t)},[])},Le.prototype.getSubscriptions=function(e){return this.subEventNameMap[e]||[]};var Be=function(e){var t=e||{};this.subMap=new Le,this.logEvents=t.logEvents||!1};function qe(e){return(qe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function je(e,t){return!t||"object"!==qe(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ve(e){return(Ve=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Fe(e,t){return(Fe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ge(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function He(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Ke(e,t,n){return t&&He(e.prototype,t),n&&He(e,n),e}Be.prototype.subscribe=function(e,t){return E.assertNotNull(e,"eventName"),E.assertNotNull(t,"f"),E.assertTrue(E.isFunction(t),"f must be a function"),this.subMap.subscribe(e,t)},Be.prototype.subscribeAll=function(e){return E.assertNotNull(e,"f"),E.assertTrue(E.isFunction(e),"f must be a function"),this.subMap.subscribe("<<all>>",e)},Be.prototype.getSubscriptions=function(e){return this.subMap.getSubscriptions(e)},Be.prototype.trigger=function(e,t){E.assertNotNull(e,"eventName");var n=this,o=this.subMap.getSubscriptions("<<all>>"),i=this.subMap.getSubscriptions(e);o.concat(i).forEach(function(o){try{o.f(t||null,e,n)}catch(e){}})},Be.prototype.triggerAsync=function(e,t){var n=this;setTimeout(function(){return n.trigger(e,t)},0)},Be.prototype.bridge=function(){var e=this;return function(t,n){e.trigger(n,t)}},Be.prototype.unsubscribeAll=function(){this.subMap.getAllSubscriptions().forEach(function(e){e.unsubscribe()})};var Qe="NeverEstablished",Je="Establishing",Ye="Established",ze="BrokenRetrying",We="Broken",Xe=function(){function e(){Ge(this,e)}return Ke(e,[{key:"sendTextMessage",value:function(e){throw new f("sendTextMessage in ChatController")}},{key:"establishNetworkLink",value:function(e){throw new f("connectChat in ChatController")}},{key:"disconnectParticipant",value:function(){throw new f("endChat in ChatController")}},{key:"sendEvent",value:function(e){throw new f("sendEvent in ChatController")}},{key:"getTranscript",value:function(e){throw new f("getTranscript in ChatController")}},{key:"getConnectionStatus",value:function(){throw new f("getStatus in ChatController")}}]),e}(),$e=function(e){function t(e){var n;return Ge(this,t),(n=je(this,Ve(t).call(this))).setArguments(e),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Fe(e,t)}(t,Xe),Ke(t,[{key:"setArguments",value:function(e){var t=this;this.argsValidator=e.argsValidator,this.chatEventConstructor=e.chatEventConstructor,this.connectionDetails=e.chatDetails.connectionDetails,this.intialContactId=e.chatDetails.initialContactId,this.contactId=e.chatDetails.contactId,this.participantId=e.chatDetails.participantId,this.acpsClient=e.acpsClient,this.participantToken=e.chatDetails.participantToken,this.connectionHelperCallback=function(e,n){return t._handleConnectionHelperEvents(e,n)},this._hasConnectionDetails=e.hasConnectionDetails,this.chatControllerFactory=e.chatControllerFactory,e.hasConnectionDetails&&this._setConnectionHelper(e.chatDetails.connectionDetails),this._connectCalledAtleastOnce=!1,this._everConnected=!1,this.pubsub=e.pubsub,this.continuousSuccessFetchConnections=0,this._chatEnded=!1}},{key:"_setConnectionHelper",value:function(e){var t=this.chatControllerFactory.createConnectionHelperProvider(e);this.connectionHelper=t(this.connectionHelperCallback)}},{key:"subscribe",value:function(e,t){this.pubsub.subscribe(e,t)}},{key:"_createPromiseWrapperFromContext",value:function(e,t){return E.wrapPromise(e,function(e){return function(n){n.requestContext=t,e(n)}},function(e){return function(n){n.requestContext=t,e(n)}})}},{key:"sendMessage",value:function(e,t,n){var o=(n||{}).requestContext;this.argsValidator.validateSendMessage(e,t);var i,r=this.connectionDetails.connectionToken;i=E.isString(e)?e:e.message;var s=this.acpsClient.sendMessage(r,i,t);return this._createPromiseWrapperFromContext(s,o)}},{key:"sendEvent",value:function(e,t){var n=t||{};this.argsValidator.validateSendEvent(e);var o=this.connectionDetails.connectionToken,i=e.persistence||A.PERSISTED,r=e.visibility||M.ALL,s=n.requestContext,c=this.acpsClient.sendEvent(o,e.eventType,e.messageIds,r,i);return this._createPromiseWrapperFromContext(c,s)}},{key:"getTranscript",value:function(e,t){var n=t||{},o={};o.IntialContactId=this.intialContactId,o.StartKey=e.StartKey||{},o.ScanDirection=e.ScanDirection||"BACKWARD",o.SortKey=e.SortKey||"ASCENDING",o.MaxResults=e.MaxResults||15,e.NextToken&&(o.NextToken=e.NextToken);var i=this.connectionDetails.connectionToken,r=n.requestContext,s=this.acpsClient.getTranscript(i,o);return this._createPromiseWrapperFromContext(s,r)}},{key:"_handleConnectionHelperEvents",value:function(e,t){try{var n=this.chatEventConstructor.fromConnectionHelperEvent(e,t,this.getChatDetails())}catch(e){throw console.log(e),e}this.pubsub.triggerAsync(n.type,n.data)}},{key:"connect",value:function(e){var t=this;if(this.argsValidator.validateConnectChat(e),t.getConnectionStatus()!==We&&t.getConnectionStatus()!==Qe)throw new d("Can call establishNetworkLink only when getConnectionStatus is Broken or NeverEstablished");return new Promise(function(n,o){var i=t._createConnectCallbacksWrapper(n,o,e);t._hasConnectionDetails?t._startConnectionHelper(i):t._fetchConnectionDetails().then(function(e){t._setConnectionHelper(e),t.connectionDetails=e,t._hasConnectionDetails=!0,t._startConnectionHelper(i)}).catch(function(e){i.reject(e)}),t._connectCalledAtleastOnce=!0})}},{key:"_createConnectCallbacksWrapper",value:function(e,t,n){var o=this,i=this;return{resolve:function(t){var r={_debug:t,connectSuccess:!0,connectCalled:!0},s=Object.assign({chatDetails:i.getChatDetails()},r);o.pubsub.triggerAsync(q,s),e(r,n)},reject:function(e){t({_debug:e,connectSuccess:!1,connectCalled:!0},n)}}}},{key:"_fetchConnectionDetails",value:function(){var e=this;return new Promise(function(t,n){e.acpsClient.createConnectionDetails(e.participantToken).then(function(e){var n={};n.ConnectionId=e.data.ConnectionDetails.ConnectionId,n.PreSignedConnectionUrl=e.data.ConnectionDetails.PreSignedConnectionUrl,n.connectionToken=e.data.ParticipantCredentials.Token,t(n)}).catch(function(e){n({reason:"Failed to fetch connectionDetails",_debug:e})})})}},{key:"disconnectParticipant",value:function(){var e=this;e._chatEnded=!0;var t=e.connectionDetails.connectionToken;setTimeout(function(){e.acpsClient.disconnectChat(t),e.connectionHelper.end()},0)}},{key:"_startConnectionHelper",value:function(e){var t=this;this.connectionHelper.start().then(function(n){t._everConnected=!0,e.resolve(n.details)}).catch(function(){e.reject({})})}},{key:"getChatDetails",value:function(){return{intialContactId:this.intialContactId,contactId:this.contactId,participantId:this.participantId,participantToken:this.participantToken,connectionDetails:this.connectionDetails}}},{key:"_convertConnectionHelperStatus",value:function(e){switch(e){case ke.NeverStarted:return Qe;case ke.Starting:return Je;case ke.Ended:return We;case ke.Connected:return Ye;case ke.DisconnectedReconnecting:return ze}}},{key:"getConnectionStatus",value:function(){return this._hasConnectionDetails?this._convertConnectionHelperStatus(this.connectionHelper.getStatus()):Qe}}]),t}();function Ze(e){return(Ze="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function et(e,t){return!t||"object"!==Ze(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function tt(e){return(tt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function nt(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ot(e,t)}function ot(e,t){return(ot=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function it(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function rt(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function st(e,t,n){return t&&rt(e.prototype,t),n&&rt(e,n),e}n.d(t,"a",function(){return pt});var ct=function(){function e(){it(this,e)}return st(e,[{key:"createAgentChatController",value:function(e,t){throw new f("createAgentChatController in ChatControllerFactory.")}},{key:"createCustomerChatController",value:function(e,t){throw new f("createCustomerChatController in ChatControllerFactory.")}},{key:"createConnectionHelperProvider",value:function(e){throw new f("createIncomingChatController in ChatControllerFactory")}}]),e}(),at=function(e){function t(){var e;return it(this,t),(e=et(this,tt(t).call(this))).argsValidator=new se,e.chatConnectionManager=new de,e.acpsClient=X.getClient("PROD"),e.chatEventConstructor=new Ue,e}return nt(t,ct),st(t,[{key:"createAgentChatSession",value:function(e){var t=this._createChatSession(e);return new lt(t)}},{key:"createCustomerChatSession",value:function(e){var t=this._createChatSession(e);return new ht(t)}},{key:"_createChatSession",value:function(e){var t=this._normalizeChatDetails(e),n=!1;t.connectionDetails&&(n=!0);var o={chatDetails:t,chatControllerFactory:this,chatEventConstructor:this.chatEventConstructor,pubsub:new Be,acpsClient:this.acpsClient,argsValidator:this.argsValidator,hasConnectionDetails:n};return new $e(o)}},{key:"_normalizeChatDetails",value:function(e){if(e.ParticipantCredentials&&e.ParticipantCredentials.Token){this.argsValidator.validateInitiateChatResponse(e);var t={},n={};return n.connectionToken=e.ParticipantCredentials.Token,n.ConnectionId=e.ConnectionDetails.ConnectionId,n.PreSignedConnectionUrl=e.ConnectionDetails.PreSignedConnectionUrl,t.connectionDetails=n,t.participantId=e.ParticipantId,t.contactId=e.ContactId,t.initialContactId=e.ContactId,t}return this.argsValidator.validateChatDetails(e),e}},{key:"createConnectionHelperProvider",value:function(e){var t={preSignedUrl:e.PreSignedConnectionUrl,connectionId:e.ConnectionId,maxRetryTime:120,debug:!0},n={mqttConnectionProvider:this.chatConnectionManager.createNewMqttConnectionProvider(t,"PahoMqttConnection"),connectionDetails:{preSignedUrl:e.PreSignedConnectionUrl,connectionId:e.ConnectionId}};return function(e){return n.callback=e,new De(n)}}}]),t}(),ut=function(){function e(t){it(this,e),this.controller=t}return st(e,[{key:"onMessage",value:function(e){this.controller.subscribe(L,e)}},{key:"onTyping",value:function(e){this.controller.subscribe(B,e)}},{key:"onConnectionBroken",value:function(e){this.controller.subscribe(j,e)}},{key:"onConnectionEstablished",value:function(e){this.controller.subscribe(q,e)}},{key:"sendMessage",value:function(e,t,n){return this.controller.sendMessage(e,t,n)}},{key:"connect",value:function(e,t){return this.controller.connect(e,t)}},{key:"sendEvent",value:function(e,t){return this.controller.sendEvent(e,t)}},{key:"getTranscript",value:function(e,t){return this.controller.getTranscript(e,t)}},{key:"getConnectionStatus",value:function(){return this.controller.getConnectionStatus()}},{key:"getChatDetails",value:function(){return this.controller.getChatDetails()}}]),e}(),lt=function(e){function t(e){return it(this,t),et(this,tt(t).call(this,e))}return nt(t,ut),t}(),ht=function(e){function t(e){return it(this,t),et(this,tt(t).call(this,e))}return nt(t,ut),st(t,[{key:"disconnectParticipant",value:function(){return this.controller.disconnectParticipant()}}]),t}(),ft=new at,pt=function(e,t){var n=t||U;if(n===U)return ft.createAgentChatSession(e);if(n===x)return ft.createCustomerChatSession(e);throw new p("Unkown value for session type",t)}},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){"use strict";n.r(t),function(e){n.d(t,"chatSession",function(){return i});var o=n(0);connect=e.connect||{},e.connect=connect,connect.ChatSession=o.a;var i=o.a}.call(this,n(1))},function(e,t,n){(function(t){var n;n=function(){return function(e){var t,n=e.localStorage||(t={},{setItem:function(e,n){t[e]=n},getItem:function(e){return t[e]},removeItem:function(e){delete t[e]}}),o={CONNECT:1,CONNACK:2,PUBLISH:3,PUBACK:4,PUBREC:5,PUBREL:6,PUBCOMP:7,SUBSCRIBE:8,SUBACK:9,UNSUBSCRIBE:10,UNSUBACK:11,PINGREQ:12,PINGRESP:13,DISCONNECT:14},i=function(e,t){for(var n in e)if(e.hasOwnProperty(n)){if(!t.hasOwnProperty(n)){var o="Unknown property, "+n+". Valid properties are:";for(var i in t)t.hasOwnProperty(i)&&(o=o+" "+i);throw new Error(o)}if(typeof e[n]!==t[n])throw new Error(a(s.INVALID_TYPE,[typeof e[n],n]))}},r=function(e,t){return function(){return e.apply(t,arguments)}},s={OK:{code:0,text:"AMQJSC0000I OK."},CONNECT_TIMEOUT:{code:1,text:"AMQJSC0001E Connect timed out."},SUBSCRIBE_TIMEOUT:{code:2,text:"AMQJS0002E Subscribe timed out."},UNSUBSCRIBE_TIMEOUT:{code:3,text:"AMQJS0003E Unsubscribe timed out."},PING_TIMEOUT:{code:4,text:"AMQJS0004E Ping timed out."},INTERNAL_ERROR:{code:5,text:"AMQJS0005E Internal error. Error Message: {0}, Stack trace: {1}"},CONNACK_RETURNCODE:{code:6,text:"AMQJS0006E Bad Connack return code:{0} {1}."},SOCKET_ERROR:{code:7,text:"AMQJS0007E Socket error:{0}."},SOCKET_CLOSE:{code:8,text:"AMQJS0008I Socket closed."},MALFORMED_UTF:{code:9,text:"AMQJS0009E Malformed UTF data:{0} {1} {2}."},UNSUPPORTED:{code:10,text:"AMQJS0010E {0} is not supported by this browser."},INVALID_STATE:{code:11,text:"AMQJS0011E Invalid state {0}."},INVALID_TYPE:{code:12,text:"AMQJS0012E Invalid type {0} for {1}."},INVALID_ARGUMENT:{code:13,text:"AMQJS0013E Invalid argument {0} for {1}."},UNSUPPORTED_OPERATION:{code:14,text:"AMQJS0014E Unsupported operation."},INVALID_STORED_DATA:{code:15,text:"AMQJS0015E Invalid data in local storage key={0} value={1}."},INVALID_MQTT_MESSAGE_TYPE:{code:16,text:"AMQJS0016E Invalid MQTT message type {0}."},MALFORMED_UNICODE:{code:17,text:"AMQJS0017E Malformed Unicode string:{0} {1}."},BUFFER_FULL:{code:18,text:"AMQJS0018E Message buffer is full, maximum buffer size: {0}."}},c={0:"Connection Accepted",1:"Connection Refused: unacceptable protocol version",2:"Connection Refused: identifier rejected",3:"Connection Refused: server unavailable",4:"Connection Refused: bad user name or password",5:"Connection Refused: not authorized"},a=function(e,t){var n=e.text;if(t)for(var o,i,r=0;r<t.length;r++)if(o="{"+r+"}",(i=n.indexOf(o))>0){var s=n.substring(0,i),c=n.substring(i+o.length);n=s+t[r]+c}return n},u=[0,6,77,81,73,115,100,112,3],l=[0,4,77,81,84,84,4],h=function(e,t){for(var n in this.type=e,t)t.hasOwnProperty(n)&&(this[n]=t[n])};function f(e,t){var n,i=t,r=e[t],s=r>>4,c=r&=15;t+=1;var a=0,u=1;do{if(t==e.length)return[null,i];a+=(127&(n=e[t++]))*u,u*=128}while(0!=(128&n));var l=t+a;if(l>e.length)return[null,i];var f=new h(s);switch(s){case o.CONNACK:1&e[t++]&&(f.sessionPresent=!0),f.returnCode=e[t++];break;case o.PUBLISH:var p=c>>1&3,d=y(e,t),v=_(e,t+=2,d);t+=d,p>0&&(f.messageIdentifier=y(e,t),t+=2);var g=new w(e.subarray(t,l));1==(1&c)&&(g.retained=!0),8==(8&c)&&(g.duplicate=!0),g.qos=p,g.destinationName=v,f.payloadMessage=g;break;case o.PUBACK:case o.PUBREC:case o.PUBREL:case o.PUBCOMP:case o.UNSUBACK:f.messageIdentifier=y(e,t);break;case o.SUBACK:f.messageIdentifier=y(e,t),t+=2,f.returnCode=e.subarray(t,l)}return[f,l]}function p(e,t,n){return t[n++]=e>>8,t[n++]=e%256,n}function d(e,t,n,o){return g(e,n,o=p(t,n,o)),o+t}function y(e,t){return 256*e[t]+e[t+1]}function v(e){for(var t=0,n=0;n<e.length;n++){var o=e.charCodeAt(n);o>2047?(55296<=o&&o<=56319&&(n++,t++),t+=3):o>127?t+=2:t++}return t}function g(e,t,n){for(var o=n,i=0;i<e.length;i++){var r=e.charCodeAt(i);if(55296<=r&&r<=56319){var c=e.charCodeAt(++i);if(isNaN(c))throw new Error(a(s.MALFORMED_UNICODE,[r,c]));r=c-56320+(r-55296<<10)+65536}r<=127?t[o++]=r:r<=2047?(t[o++]=r>>6&31|192,t[o++]=63&r|128):r<=65535?(t[o++]=r>>12&15|224,t[o++]=r>>6&63|128,t[o++]=63&r|128):(t[o++]=r>>18&7|240,t[o++]=r>>12&63|128,t[o++]=r>>6&63|128,t[o++]=63&r|128)}return t}function _(e,t,n){for(var o,i="",r=t;r<t+n;){var c=e[r++];if(c<128)o=c;else{var u=e[r++]-128;if(u<0)throw new Error(a(s.MALFORMED_UTF,[c.toString(16),u.toString(16),""]));if(c<224)o=64*(c-192)+u;else{var l=e[r++]-128;if(l<0)throw new Error(a(s.MALFORMED_UTF,[c.toString(16),u.toString(16),l.toString(16)]));if(c<240)o=4096*(c-224)+64*u+l;else{var h=e[r++]-128;if(h<0)throw new Error(a(s.MALFORMED_UTF,[c.toString(16),u.toString(16),l.toString(16),h.toString(16)]));if(!(c<248))throw new Error(a(s.MALFORMED_UTF,[c.toString(16),u.toString(16),l.toString(16),h.toString(16)]));o=262144*(c-240)+4096*u+64*l+h}}}o>65535&&(o-=65536,i+=String.fromCharCode(55296+(o>>10)),o=56320+(1023&o)),i+=String.fromCharCode(o)}return i}h.prototype.encode=function(){var e,t=(15&this.type)<<4,n=0,i=[],r=0;switch(void 0!==this.messageIdentifier&&(n+=2),this.type){case o.CONNECT:switch(this.mqttVersion){case 3:n+=u.length+3;break;case 4:n+=l.length+3}n+=v(this.clientId)+2,void 0!==this.willMessage&&(n+=v(this.willMessage.destinationName)+2,(e=this.willMessage.payloadBytes)instanceof Uint8Array||(e=new Uint8Array(c)),n+=e.byteLength+2),void 0!==this.userName&&(n+=v(this.userName)+2),void 0!==this.password&&(n+=v(this.password)+2);break;case o.SUBSCRIBE:t|=2;for(var s=0;s<this.topics.length;s++)i[s]=v(this.topics[s]),n+=i[s]+2;n+=this.requestedQos.length;break;case o.UNSUBSCRIBE:t|=2;for(s=0;s<this.topics.length;s++)i[s]=v(this.topics[s]),n+=i[s]+2;break;case o.PUBREL:t|=2;break;case o.PUBLISH:this.payloadMessage.duplicate&&(t|=8),t=t|=this.payloadMessage.qos<<1,this.payloadMessage.retained&&(t|=1),n+=(r=v(this.payloadMessage.destinationName))+2;var c=this.payloadMessage.payloadBytes;n+=c.byteLength,c instanceof ArrayBuffer?c=new Uint8Array(c):c instanceof Uint8Array||(c=new Uint8Array(c.buffer));break;case o.DISCONNECT:}var a=function(e){var t=new Array(1),n=0;do{var o=e%128;(e>>=7)>0&&(o|=128),t[n++]=o}while(e>0&&n<4);return t}(n),h=a.length+1,f=new ArrayBuffer(n+h),y=new Uint8Array(f);if(y[0]=t,y.set(a,1),this.type==o.PUBLISH)h=d(this.payloadMessage.destinationName,r,y,h);else if(this.type==o.CONNECT){switch(this.mqttVersion){case 3:y.set(u,h),h+=u.length;break;case 4:y.set(l,h),h+=l.length}var g=0;this.cleanSession&&(g=2),void 0!==this.willMessage&&(g|=4,g|=this.willMessage.qos<<3,this.willMessage.retained&&(g|=32)),void 0!==this.userName&&(g|=128),void 0!==this.password&&(g|=64),y[h++]=g,h=p(this.keepAliveInterval,y,h)}switch(void 0!==this.messageIdentifier&&(h=p(this.messageIdentifier,y,h)),this.type){case o.CONNECT:h=d(this.clientId,v(this.clientId),y,h),void 0!==this.willMessage&&(h=d(this.willMessage.destinationName,v(this.willMessage.destinationName),y,h),h=p(e.byteLength,y,h),y.set(e,h),h+=e.byteLength),void 0!==this.userName&&(h=d(this.userName,v(this.userName),y,h)),void 0!==this.password&&(h=d(this.password,v(this.password),y,h));break;case o.PUBLISH:y.set(c,h);break;case o.SUBSCRIBE:for(s=0;s<this.topics.length;s++)h=d(this.topics[s],i[s],y,h),y[h++]=this.requestedQos[s];break;case o.UNSUBSCRIBE:for(s=0;s<this.topics.length;s++)h=d(this.topics[s],i[s],y,h)}return f};var b=function(e,t){this._client=e,this._keepAliveInterval=1e3*t,this.isReset=!1;var n=new h(o.PINGREQ).encode(),i=function(e){return function(){return r.apply(e)}},r=function(){this.isReset?(this.isReset=!1,this._client._trace("Pinger.doPing","send PINGREQ"),this._client.socket.send(n),this.timeout=setTimeout(i(this),this._keepAliveInterval)):(this._client._trace("Pinger.doPing","Timed out"),this._client._disconnected(s.PING_TIMEOUT.code,a(s.PING_TIMEOUT)))};this.reset=function(){this.isReset=!0,clearTimeout(this.timeout),this._keepAliveInterval>0&&(this.timeout=setTimeout(i(this),this._keepAliveInterval))},this.cancel=function(){clearTimeout(this.timeout)}},C=function(e,t,n,o){t||(t=30);this.timeout=setTimeout(function(e,t,n){return function(){return e.apply(t,n)}}(n,e,o),1e3*t),this.cancel=function(){clearTimeout(this.timeout)}},E=function(t,o,i,r,c){if(!("WebSocket"in e&&null!==e.WebSocket))throw new Error(a(s.UNSUPPORTED,["WebSocket"]));if(!("ArrayBuffer"in e&&null!==e.ArrayBuffer))throw new Error(a(s.UNSUPPORTED,["ArrayBuffer"]));for(var u in this._trace("Paho.Client",t,o,i,r,c),this.host=o,this.port=i,this.path=r,this.uri=t,this.clientId=c,this._wsuri=null,this._localKey=o+":"+i+("/mqtt"!=r?":"+r:"")+":"+c+":",this._msg_queue=[],this._buffered_msg_queue=[],this._sentMessages={},this._receivedMessages={},this._notify_msg_sent={},this._message_identifier=1,this._sequence=0,n)0!==u.indexOf("Sent:"+this._localKey)&&0!==u.indexOf("Received:"+this._localKey)||this.restore(u)};E.prototype.host=null,E.prototype.port=null,E.prototype.path=null,E.prototype.uri=null,E.prototype.clientId=null,E.prototype.socket=null,E.prototype.connected=!1,E.prototype.maxMessageIdentifier=65536,E.prototype.connectOptions=null,E.prototype.hostIndex=null,E.prototype.onConnected=null,E.prototype.onConnectionLost=null,E.prototype.onMessageDelivered=null,E.prototype.onMessageArrived=null,E.prototype.traceFunction=null,E.prototype._msg_queue=null,E.prototype._buffered_msg_queue=null,E.prototype._connectTimeout=null,E.prototype.sendPinger=null,E.prototype.receivePinger=null,E.prototype._reconnectInterval=1,E.prototype._reconnecting=!1,E.prototype._reconnectTimeout=null,E.prototype.disconnectedPublishing=!1,E.prototype.disconnectedBufferSize=5e3,E.prototype.receiveBuffer=null,E.prototype._traceBuffer=null,E.prototype._MAX_TRACE_ENTRIES=100,E.prototype.connect=function(e){var t=this._traceMask(e,"password");if(this._trace("Client.connect",t,this.socket,this.connected),this.connected)throw new Error(a(s.INVALID_STATE,["already connected"]));if(this.socket)throw new Error(a(s.INVALID_STATE,["already connected"]));this._reconnecting&&(this._reconnectTimeout.cancel(),this._reconnectTimeout=null,this._reconnecting=!1),this.connectOptions=e,this._reconnectInterval=1,this._reconnecting=!1,e.uris?(this.hostIndex=0,this._doConnect(e.uris[0])):this._doConnect(this.uri)},E.prototype.subscribe=function(e,t){if(this._trace("Client.subscribe",e,t),!this.connected)throw new Error(a(s.INVALID_STATE,["not connected"]));var n=new h(o.SUBSCRIBE);n.topics=e.constructor===Array?e:[e],void 0===t.qos&&(t.qos=0),n.requestedQos=[];for(var i=0;i<n.topics.length;i++)n.requestedQos[i]=t.qos;t.onSuccess&&(n.onSuccess=function(e){t.onSuccess({invocationContext:t.invocationContext,grantedQos:e})}),t.onFailure&&(n.onFailure=function(e){t.onFailure({invocationContext:t.invocationContext,errorCode:e,errorMessage:a(e)})}),t.timeout&&(n.timeOut=new C(this,t.timeout,t.onFailure,[{invocationContext:t.invocationContext,errorCode:s.SUBSCRIBE_TIMEOUT.code,errorMessage:a(s.SUBSCRIBE_TIMEOUT)}])),this._requires_ack(n),this._schedule_message(n)},E.prototype.unsubscribe=function(e,t){if(this._trace("Client.unsubscribe",e,t),!this.connected)throw new Error(a(s.INVALID_STATE,["not connected"]));var n=new h(o.UNSUBSCRIBE);n.topics=e.constructor===Array?e:[e],t.onSuccess&&(n.callback=function(){t.onSuccess({invocationContext:t.invocationContext})}),t.timeout&&(n.timeOut=new C(this,t.timeout,t.onFailure,[{invocationContext:t.invocationContext,errorCode:s.UNSUBSCRIBE_TIMEOUT.code,errorMessage:a(s.UNSUBSCRIBE_TIMEOUT)}])),this._requires_ack(n),this._schedule_message(n)},E.prototype.send=function(e){this._trace("Client.send",e);var t=new h(o.PUBLISH);if(t.payloadMessage=e,this.connected)e.qos>0?this._requires_ack(t):this.onMessageDelivered&&(this._notify_msg_sent[t]=this.onMessageDelivered(t.payloadMessage)),this._schedule_message(t);else{if(!this._reconnecting||!this.disconnectedPublishing)throw new Error(a(s.INVALID_STATE,["not connected"]));if(Object.keys(this._sentMessages).length+this._buffered_msg_queue.length>this.disconnectedBufferSize)throw new Error(a(s.BUFFER_FULL,[this.disconnectedBufferSize]));e.qos>0?this._requires_ack(t):(t.sequence=++this._sequence,this._buffered_msg_queue.unshift(t))}},E.prototype.disconnect=function(){if(this._trace("Client.disconnect"),this._reconnecting&&(this._reconnectTimeout.cancel(),this._reconnectTimeout=null,this._reconnecting=!1),!this.socket)throw new Error(a(s.INVALID_STATE,["not connecting or connected"]));var e=new h(o.DISCONNECT);this._notify_msg_sent[e]=r(this._disconnected,this),this._schedule_message(e)},E.prototype.getTraceLog=function(){if(null!==this._traceBuffer){for(var e in this._trace("Client.getTraceLog",new Date),this._trace("Client.getTraceLog in flight messages",this._sentMessages.length),this._sentMessages)this._trace("_sentMessages ",e,this._sentMessages[e]);for(var e in this._receivedMessages)this._trace("_receivedMessages ",e,this._receivedMessages[e]);return this._traceBuffer}},E.prototype.startTrace=function(){null===this._traceBuffer&&(this._traceBuffer=[]),this._trace("Client.startTrace",new Date,"@VERSION@-@BUILDLEVEL@")},E.prototype.stopTrace=function(){delete this._traceBuffer},E.prototype._doConnect=function(e){if(this.connectOptions.useSSL){var t=e.split(":");t[0]="wss",e=t.join(":")}this._wsuri=e,this.connected=!1,this.connectOptions.mqttVersion<4?this.socket=new WebSocket(e,["mqttv3.1"]):this.socket=new WebSocket(e,["mqtt"]),this.socket.binaryType="arraybuffer",this.socket.onopen=r(this._on_socket_open,this),this.socket.onmessage=r(this._on_socket_message,this),this.socket.onerror=r(this._on_socket_error,this),this.socket.onclose=r(this._on_socket_close,this),this.sendPinger=new b(this,this.connectOptions.keepAliveInterval),this.receivePinger=new b(this,this.connectOptions.keepAliveInterval),this._connectTimeout&&(this._connectTimeout.cancel(),this._connectTimeout=null),this._connectTimeout=new C(this,this.connectOptions.timeout,this._disconnected,[s.CONNECT_TIMEOUT.code,a(s.CONNECT_TIMEOUT)])},E.prototype._schedule_message=function(e){this._msg_queue.unshift(e),this.connected&&this._process_queue()},E.prototype.store=function(e,t){var i={type:t.type,messageIdentifier:t.messageIdentifier,version:1};switch(t.type){case o.PUBLISH:t.pubRecReceived&&(i.pubRecReceived=!0),i.payloadMessage={};for(var r="",c=t.payloadMessage.payloadBytes,u=0;u<c.length;u++)c[u]<=15?r=r+"0"+c[u].toString(16):r+=c[u].toString(16);i.payloadMessage.payloadHex=r,i.payloadMessage.qos=t.payloadMessage.qos,i.payloadMessage.destinationName=t.payloadMessage.destinationName,t.payloadMessage.duplicate&&(i.payloadMessage.duplicate=!0),t.payloadMessage.retained&&(i.payloadMessage.retained=!0),0===e.indexOf("Sent:")&&(void 0===t.sequence&&(t.sequence=++this._sequence),i.sequence=t.sequence);break;default:throw Error(a(s.INVALID_STORED_DATA,[e+this._localKey+t.messageIdentifier,i]))}n.setItem(e+this._localKey+t.messageIdentifier,JSON.stringify(i))},E.prototype.restore=function(e){var t=n.getItem(e),i=JSON.parse(t),r=new h(i.type,i);switch(i.type){case o.PUBLISH:for(var c=i.payloadMessage.payloadHex,u=new ArrayBuffer(c.length/2),l=new Uint8Array(u),f=0;c.length>=2;){var p=parseInt(c.substring(0,2),16);c=c.substring(2,c.length),l[f++]=p}var d=new w(l);d.qos=i.payloadMessage.qos,d.destinationName=i.payloadMessage.destinationName,i.payloadMessage.duplicate&&(d.duplicate=!0),i.payloadMessage.retained&&(d.retained=!0),r.payloadMessage=d;break;default:throw Error(a(s.INVALID_STORED_DATA,[e,t]))}0===e.indexOf("Sent:"+this._localKey)?(r.payloadMessage.duplicate=!0,this._sentMessages[r.messageIdentifier]=r):0===e.indexOf("Received:"+this._localKey)&&(this._receivedMessages[r.messageIdentifier]=r)},E.prototype._process_queue=function(){for(var e=null;e=this._msg_queue.pop();)this._socket_send(e),this._notify_msg_sent[e]&&(this._notify_msg_sent[e](),delete this._notify_msg_sent[e])},E.prototype._requires_ack=function(e){var t=Object.keys(this._sentMessages).length;if(t>this.maxMessageIdentifier)throw Error("Too many messages:"+t);for(;void 0!==this._sentMessages[this._message_identifier];)this._message_identifier++;e.messageIdentifier=this._message_identifier,this._sentMessages[e.messageIdentifier]=e,e.type===o.PUBLISH&&this.store("Sent:",e),this._message_identifier===this.maxMessageIdentifier&&(this._message_identifier=1)},E.prototype._on_socket_open=function(){var e=new h(o.CONNECT,this.connectOptions);e.clientId=this.clientId,this._socket_send(e)},E.prototype._on_socket_message=function(e){this._trace("Client._on_socket_message",e.data);for(var t=this._deframeMessages(e.data),n=0;n<t.length;n+=1)this._handleMessage(t[n])},E.prototype._deframeMessages=function(e){var t=new Uint8Array(e),n=[];if(this.receiveBuffer){var o=new Uint8Array(this.receiveBuffer.length+t.length);o.set(this.receiveBuffer),o.set(t,this.receiveBuffer.length),t=o,delete this.receiveBuffer}try{for(var i=0;i<t.length;){var r=f(t,i),c=r[0];if(i=r[1],null===c)break;n.push(c)}i<t.length&&(this.receiveBuffer=t.subarray(i))}catch(e){var u="undefined"==e.hasOwnProperty("stack")?e.stack.toString():"No Error Stack Available";return void this._disconnected(s.INTERNAL_ERROR.code,a(s.INTERNAL_ERROR,[e.message,u]))}return n},E.prototype._handleMessage=function(e){this._trace("Client._handleMessage",e);try{switch(e.type){case o.CONNACK:if(this._connectTimeout.cancel(),this._reconnectTimeout&&this._reconnectTimeout.cancel(),this.connectOptions.cleanSession){for(var t in this._sentMessages){var i=this._sentMessages[t];n.removeItem("Sent:"+this._localKey+i.messageIdentifier)}for(var t in this._sentMessages={},this._receivedMessages){var r=this._receivedMessages[t];n.removeItem("Received:"+this._localKey+r.messageIdentifier)}this._receivedMessages={}}if(0!==e.returnCode){this._disconnected(s.CONNACK_RETURNCODE.code,a(s.CONNACK_RETURNCODE,[e.returnCode,c[e.returnCode]]));break}this.connected=!0,this.connectOptions.uris&&(this.hostIndex=this.connectOptions.uris.length);var u=[];for(var l in this._sentMessages)this._sentMessages.hasOwnProperty(l)&&u.push(this._sentMessages[l]);if(this._buffered_msg_queue.length>0)for(var f=null;f=this._buffered_msg_queue.pop();)u.push(f),this.onMessageDelivered&&(this._notify_msg_sent[f]=this.onMessageDelivered(f.payloadMessage));u=u.sort(function(e,t){return e.sequence-t.sequence});for(var p=0,d=u.length;p<d;p++){if((i=u[p]).type==o.PUBLISH&&i.pubRecReceived){var y=new h(o.PUBREL,{messageIdentifier:i.messageIdentifier});this._schedule_message(y)}else this._schedule_message(i)}this.connectOptions.onSuccess&&this.connectOptions.onSuccess({invocationContext:this.connectOptions.invocationContext});var v=!1;this._reconnecting&&(v=!0,this._reconnectInterval=1,this._reconnecting=!1),this._connected(v,this._wsuri),this._process_queue();break;case o.PUBLISH:this._receivePublish(e);break;case o.PUBACK:(i=this._sentMessages[e.messageIdentifier])&&(delete this._sentMessages[e.messageIdentifier],n.removeItem("Sent:"+this._localKey+e.messageIdentifier),this.onMessageDelivered&&this.onMessageDelivered(i.payloadMessage));break;case o.PUBREC:if(i=this._sentMessages[e.messageIdentifier]){i.pubRecReceived=!0;y=new h(o.PUBREL,{messageIdentifier:e.messageIdentifier});this.store("Sent:",i),this._schedule_message(y)}break;case o.PUBREL:r=this._receivedMessages[e.messageIdentifier];n.removeItem("Received:"+this._localKey+e.messageIdentifier),r&&(this._receiveMessage(r),delete this._receivedMessages[e.messageIdentifier]);var g=new h(o.PUBCOMP,{messageIdentifier:e.messageIdentifier});this._schedule_message(g);break;case o.PUBCOMP:i=this._sentMessages[e.messageIdentifier];delete this._sentMessages[e.messageIdentifier],n.removeItem("Sent:"+this._localKey+e.messageIdentifier),this.onMessageDelivered&&this.onMessageDelivered(i.payloadMessage);break;case o.SUBACK:(i=this._sentMessages[e.messageIdentifier])&&(i.timeOut&&i.timeOut.cancel(),128===e.returnCode[0]?i.onFailure&&i.onFailure(e.returnCode):i.onSuccess&&i.onSuccess(e.returnCode),delete this._sentMessages[e.messageIdentifier]);break;case o.UNSUBACK:(i=this._sentMessages[e.messageIdentifier])&&(i.timeOut&&i.timeOut.cancel(),i.callback&&i.callback(),delete this._sentMessages[e.messageIdentifier]);break;case o.PINGRESP:this.sendPinger.reset();break;case o.DISCONNECT:this._disconnected(s.INVALID_MQTT_MESSAGE_TYPE.code,a(s.INVALID_MQTT_MESSAGE_TYPE,[e.type]));break;default:this._disconnected(s.INVALID_MQTT_MESSAGE_TYPE.code,a(s.INVALID_MQTT_MESSAGE_TYPE,[e.type]))}}catch(e){var _="undefined"==e.hasOwnProperty("stack")?e.stack.toString():"No Error Stack Available";return void this._disconnected(s.INTERNAL_ERROR.code,a(s.INTERNAL_ERROR,[e.message,_]))}},E.prototype._on_socket_error=function(e){this._reconnecting||this._disconnected(s.SOCKET_ERROR.code,a(s.SOCKET_ERROR,[e.data]))},E.prototype._on_socket_close=function(){this._reconnecting||this._disconnected(s.SOCKET_CLOSE.code,a(s.SOCKET_CLOSE))},E.prototype._socket_send=function(e){if(1==e.type){var t=this._traceMask(e,"password");this._trace("Client._socket_send",t)}else this._trace("Client._socket_send",e);this.socket.send(e.encode()),this.sendPinger.reset()},E.prototype._receivePublish=function(e){switch(e.payloadMessage.qos){case"undefined":case 0:this._receiveMessage(e);break;case 1:var t=new h(o.PUBACK,{messageIdentifier:e.messageIdentifier});this._schedule_message(t),this._receiveMessage(e);break;case 2:this._receivedMessages[e.messageIdentifier]=e,this.store("Received:",e);var n=new h(o.PUBREC,{messageIdentifier:e.messageIdentifier});this._schedule_message(n);break;default:throw Error("Invaild qos="+e.payloadMessage.qos)}},E.prototype._receiveMessage=function(e){this.onMessageArrived&&this.onMessageArrived(e.payloadMessage)},E.prototype._connected=function(e,t){this.onConnected&&this.onConnected(e,t)},E.prototype._reconnect=function(){this._trace("Client._reconnect"),this.connected||(this._reconnecting=!0,this.sendPinger.cancel(),this.receivePinger.cancel(),this._reconnectInterval<128&&(this._reconnectInterval=2*this._reconnectInterval),this.connectOptions.uris?(this.hostIndex=0,this._doConnect(this.connectOptions.uris[0])):this._doConnect(this.uri))},E.prototype._disconnected=function(e,t){if(this._trace("Client._disconnected",e,t),void 0!==e&&this._reconnecting)this._reconnectTimeout=new C(this,this._reconnectInterval,this._reconnect);else if(this.sendPinger.cancel(),this.receivePinger.cancel(),this._connectTimeout&&(this._connectTimeout.cancel(),this._connectTimeout=null),this._msg_queue=[],this._buffered_msg_queue=[],this._notify_msg_sent={},this.socket&&(this.socket.onopen=null,this.socket.onmessage=null,this.socket.onerror=null,this.socket.onclose=null,1===this.socket.readyState&&this.socket.close(),delete this.socket),this.connectOptions.uris&&this.hostIndex<this.connectOptions.uris.length-1)this.hostIndex++,this._doConnect(this.connectOptions.uris[this.hostIndex]);else if(void 0===e&&(e=s.OK.code,t=a(s.OK)),this.connected){if(this.connected=!1,this.onConnectionLost&&this.onConnectionLost({errorCode:e,errorMessage:t,reconnect:this.connectOptions.reconnect,uri:this._wsuri}),e!==s.OK.code&&this.connectOptions.reconnect)return this._reconnectInterval=1,void this._reconnect()}else 4===this.connectOptions.mqttVersion&&!1===this.connectOptions.mqttVersionExplicit?(this._trace("Failed to connect V4, dropping back to V3"),this.connectOptions.mqttVersion=3,this.connectOptions.uris?(this.hostIndex=0,this._doConnect(this.connectOptions.uris[0])):this._doConnect(this.uri)):this.connectOptions.onFailure&&this.connectOptions.onFailure({invocationContext:this.connectOptions.invocationContext,errorCode:e,errorMessage:t})},E.prototype._trace=function(){if(this.traceFunction){var e=Array.prototype.slice.call(arguments);for(var t in e)void 0!==e[t]&&e.splice(t,1,JSON.stringify(e[t]));var n=e.join("");this.traceFunction({severity:"Debug",message:n})}if(null!==this._traceBuffer){t=0;for(var o=arguments.length;t<o;t++)this._traceBuffer.length==this._MAX_TRACE_ENTRIES&&this._traceBuffer.shift(),0===t?this._traceBuffer.push(arguments[t]):void 0===arguments[t]?this._traceBuffer.push(arguments[t]):this._traceBuffer.push("  "+JSON.stringify(arguments[t]))}},E.prototype._traceMask=function(e,t){var n={};for(var o in e)e.hasOwnProperty(o)&&(n[o]=o==t?"******":e[o]);return n};var w=function(e){var t,n;if(!("string"==typeof e||e instanceof ArrayBuffer||ArrayBuffer.isView(e)&&!(e instanceof DataView)))throw a(s.INVALID_ARGUMENT,[e,"newPayload"]);t=e;var o=0,i=!1,r=!1;Object.defineProperties(this,{payloadString:{enumerable:!0,get:function(){return"string"==typeof t?t:_(t,0,t.length)}},payloadBytes:{enumerable:!0,get:function(){if("string"==typeof t){var e=new ArrayBuffer(v(t)),n=new Uint8Array(e);return g(t,n,0),n}return t}},destinationName:{enumerable:!0,get:function(){return n},set:function(e){if("string"!=typeof e)throw new Error(a(s.INVALID_ARGUMENT,[e,"newDestinationName"]));n=e}},qos:{enumerable:!0,get:function(){return o},set:function(e){if(0!==e&&1!==e&&2!==e)throw new Error("Invalid argument:"+e);o=e}},retained:{enumerable:!0,get:function(){return i},set:function(e){if("boolean"!=typeof e)throw new Error(a(s.INVALID_ARGUMENT,[e,"newRetained"]));i=e}},topic:{enumerable:!0,get:function(){return n},set:function(e){n=e}},duplicate:{enumerable:!0,get:function(){return r},set:function(e){r=e}}})};return{Client:function(e,t,n,o){var r;if("string"!=typeof e)throw new Error(a(s.INVALID_TYPE,[typeof e,"host"]));if(2==arguments.length){o=t;var c=(r=e).match(/^(wss?):\/\/((\[(.+)\])|([^\/]+?))(:(\d+))?(\/.*)$/);if(!c)throw new Error(a(s.INVALID_ARGUMENT,[e,"host"]));e=c[4]||c[2],t=parseInt(c[7]),n=c[8]}else{if(3==arguments.length&&(o=n,n="/mqtt"),"number"!=typeof t||t<0)throw new Error(a(s.INVALID_TYPE,[typeof t,"port"]));if("string"!=typeof n)throw new Error(a(s.INVALID_TYPE,[typeof n,"path"]));var u=-1!==e.indexOf(":")&&"["!==e.slice(0,1)&&"]"!==e.slice(-1);r="ws://"+(u?"["+e+"]":e)+":"+t+n}for(var l=0,h=0;h<o.length;h++){var f=o.charCodeAt(h);55296<=f&&f<=56319&&h++,l++}if("string"!=typeof o||l>65535)throw new Error(a(s.INVALID_ARGUMENT,[o,"clientId"]));var p=new E(r,e,t,n,o);Object.defineProperties(this,{host:{get:function(){return e},set:function(){throw new Error(a(s.UNSUPPORTED_OPERATION))}},port:{get:function(){return t},set:function(){throw new Error(a(s.UNSUPPORTED_OPERATION))}},path:{get:function(){return n},set:function(){throw new Error(a(s.UNSUPPORTED_OPERATION))}},uri:{get:function(){return r},set:function(){throw new Error(a(s.UNSUPPORTED_OPERATION))}},clientId:{get:function(){return p.clientId},set:function(){throw new Error(a(s.UNSUPPORTED_OPERATION))}},onConnected:{get:function(){return p.onConnected},set:function(e){if("function"!=typeof e)throw new Error(a(s.INVALID_TYPE,[typeof e,"onConnected"]));p.onConnected=e}},disconnectedPublishing:{get:function(){return p.disconnectedPublishing},set:function(e){p.disconnectedPublishing=e}},disconnectedBufferSize:{get:function(){return p.disconnectedBufferSize},set:function(e){p.disconnectedBufferSize=e}},onConnectionLost:{get:function(){return p.onConnectionLost},set:function(e){if("function"!=typeof e)throw new Error(a(s.INVALID_TYPE,[typeof e,"onConnectionLost"]));p.onConnectionLost=e}},onMessageDelivered:{get:function(){return p.onMessageDelivered},set:function(e){if("function"!=typeof e)throw new Error(a(s.INVALID_TYPE,[typeof e,"onMessageDelivered"]));p.onMessageDelivered=e}},onMessageArrived:{get:function(){return p.onMessageArrived},set:function(e){if("function"!=typeof e)throw new Error(a(s.INVALID_TYPE,[typeof e,"onMessageArrived"]));p.onMessageArrived=e}},trace:{get:function(){return p.traceFunction},set:function(e){if("function"!=typeof e)throw new Error(a(s.INVALID_TYPE,[typeof e,"onTrace"]));p.traceFunction=e}}}),this.connect=function(e){if(i(e=e||{},{timeout:"number",userName:"string",password:"string",willMessage:"object",keepAliveInterval:"number",cleanSession:"boolean",useSSL:"boolean",invocationContext:"object",onSuccess:"function",onFailure:"function",hosts:"object",ports:"object",reconnect:"boolean",mqttVersion:"number",mqttVersionExplicit:"boolean",uris:"object"}),void 0===e.keepAliveInterval&&(e.keepAliveInterval=60),e.mqttVersion>4||e.mqttVersion<3)throw new Error(a(s.INVALID_ARGUMENT,[e.mqttVersion,"connectOptions.mqttVersion"]));if(void 0===e.mqttVersion?(e.mqttVersionExplicit=!1,e.mqttVersion=4):e.mqttVersionExplicit=!0,void 0!==e.password&&void 0===e.userName)throw new Error(a(s.INVALID_ARGUMENT,[e.password,"connectOptions.password"]));if(e.willMessage){if(!(e.willMessage instanceof w))throw new Error(a(s.INVALID_TYPE,[e.willMessage,"connectOptions.willMessage"]));if(e.willMessage.stringPayload=null,void 0===e.willMessage.destinationName)throw new Error(a(s.INVALID_TYPE,[typeof e.willMessage.destinationName,"connectOptions.willMessage.destinationName"]))}if(void 0===e.cleanSession&&(e.cleanSession=!0),e.hosts){if(!(e.hosts instanceof Array))throw new Error(a(s.INVALID_ARGUMENT,[e.hosts,"connectOptions.hosts"]));if(e.hosts.length<1)throw new Error(a(s.INVALID_ARGUMENT,[e.hosts,"connectOptions.hosts"]));for(var t=!1,o=0;o<e.hosts.length;o++){if("string"!=typeof e.hosts[o])throw new Error(a(s.INVALID_TYPE,[typeof e.hosts[o],"connectOptions.hosts["+o+"]"]));if(/^(wss?):\/\/((\[(.+)\])|([^\/]+?))(:(\d+))?(\/.*)$/.test(e.hosts[o])){if(0===o)t=!0;else if(!t)throw new Error(a(s.INVALID_ARGUMENT,[e.hosts[o],"connectOptions.hosts["+o+"]"]))}else if(t)throw new Error(a(s.INVALID_ARGUMENT,[e.hosts[o],"connectOptions.hosts["+o+"]"]))}if(t)e.uris=e.hosts;else{if(!e.ports)throw new Error(a(s.INVALID_ARGUMENT,[e.ports,"connectOptions.ports"]));if(!(e.ports instanceof Array))throw new Error(a(s.INVALID_ARGUMENT,[e.ports,"connectOptions.ports"]));if(e.hosts.length!==e.ports.length)throw new Error(a(s.INVALID_ARGUMENT,[e.ports,"connectOptions.ports"]));for(e.uris=[],o=0;o<e.hosts.length;o++){if("number"!=typeof e.ports[o]||e.ports[o]<0)throw new Error(a(s.INVALID_TYPE,[typeof e.ports[o],"connectOptions.ports["+o+"]"]));var c=e.hosts[o],u=e.ports[o],l=-1!==c.indexOf(":");r="ws://"+(l?"["+c+"]":c)+":"+u+n,e.uris.push(r)}}}p.connect(e)},this.subscribe=function(e,t){if("string"!=typeof e&&e.constructor!==Array)throw new Error("Invalid argument:"+e);if(i(t=t||{},{qos:"number",invocationContext:"object",onSuccess:"function",onFailure:"function",timeout:"number"}),t.timeout&&!t.onFailure)throw new Error("subscribeOptions.timeout specified with no onFailure callback.");if(void 0!==t.qos&&0!==t.qos&&1!==t.qos&&2!==t.qos)throw new Error(a(s.INVALID_ARGUMENT,[t.qos,"subscribeOptions.qos"]));p.subscribe(e,t)},this.unsubscribe=function(e,t){if("string"!=typeof e&&e.constructor!==Array)throw new Error("Invalid argument:"+e);if(i(t=t||{},{invocationContext:"object",onSuccess:"function",onFailure:"function",timeout:"number"}),t.timeout&&!t.onFailure)throw new Error("unsubscribeOptions.timeout specified with no onFailure callback.");p.unsubscribe(e,t)},this.send=function(e,t,n,o){var i;if(0===arguments.length)throw new Error("Invalid argument.length");if(1==arguments.length){if(!(e instanceof w)&&"string"!=typeof e)throw new Error("Invalid argument:"+typeof e);if(void 0===(i=e).destinationName)throw new Error(a(s.INVALID_ARGUMENT,[i.destinationName,"Message.destinationName"]));p.send(i)}else(i=new w(t)).destinationName=e,arguments.length>=3&&(i.qos=n),arguments.length>=4&&(i.retained=o),p.send(i)},this.publish=function(e,t,n,o){var i;if(0===arguments.length)throw new Error("Invalid argument.length");if(1==arguments.length){if(!(e instanceof w)&&"string"!=typeof e)throw new Error("Invalid argument:"+typeof e);if(void 0===(i=e).destinationName)throw new Error(a(s.INVALID_ARGUMENT,[i.destinationName,"Message.destinationName"]));p.send(i)}else(i=new w(t)).destinationName=e,arguments.length>=3&&(i.qos=n),arguments.length>=4&&(i.retained=o),p.send(i)},this.disconnect=function(){p.disconnect()},this.getTraceLog=function(){return p.getTraceLog()},this.startTrace=function(){p.startTrace()},this.stopTrace=function(){p.stopTrace()},this.isConnected=function(){return p.connected}},Message:w}}(void 0!==t?t:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},e.exports=n()}).call(this,n(1))}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvcmUvZXhjZXB0aW9ucy5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvY2xpZW50L1htbEh0dHBDbGllbnQuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3NwcmludGYuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3V0aWxzLmpzIiwid2VicGFjazovLy8uL3NyYy9jb25zdGFudHMuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NsaWVudC9jbGllbnQuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvcmUvY2hhdEFyZ3NWYWxpZGF0b3IuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvcmUvY29ubmVjdGlvbk1hbmFnZXIuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvcmUvY29ubmVjdGlvbkhlbHBlci5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvY29yZS9ldmVudENvbnN0cnVjdG9yLmpzIiwid2VicGFjazovLy8uL3NyYy9jb3JlL2V2ZW50YnVzLmpzIiwid2VicGFjazovLy8uL3NyYy9jb3JlL2NoYXRDb250cm9sbGVyLmpzIiwid2VicGFjazovLy8uL3NyYy9jb3JlL2NoYXRTZXNzaW9uLmpzIiwid2VicGFjazovLy8od2VicGFjaykvYnVpbGRpbi9nbG9iYWwuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2luZGV4LmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9wYWhvLWNsaWVudC9zcmMvcGFoby1tcXR0LmpzIl0sIm5hbWVzIjpbImluc3RhbGxlZE1vZHVsZXMiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJleHBvcnRzIiwibW9kdWxlIiwiaSIsImwiLCJtb2R1bGVzIiwiY2FsbCIsIm0iLCJjIiwiZCIsIm5hbWUiLCJnZXR0ZXIiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0IiwiciIsIlN5bWJvbCIsInRvU3RyaW5nVGFnIiwidmFsdWUiLCJ0IiwibW9kZSIsIl9fZXNNb2R1bGUiLCJucyIsImNyZWF0ZSIsImtleSIsImJpbmQiLCJuIiwib2JqZWN0IiwicHJvcGVydHkiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsInAiLCJzIiwiVmFsdWVFcnJvciIsIm1lc3NhZ2UiLCJfdGhpcyIsIl9jbGFzc0NhbGxDaGVjayIsInRoaXMiLCJfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybiIsIl9nZXRQcm90b3R5cGVPZiIsImNvbnNvbGUiLCJsb2ciLCJFcnJvciIsIlVuSW1wbGVtZW50ZWRNZXRob2RFeGNlcHRpb24iLCJfdGhpczIiLCJJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24iLCJhcmd1bWVudCIsIl90aGlzMyIsIklsbGVnYWxTdGF0ZUV4Y2VwdGlvbiIsIl90aGlzNCIsIm1ha2VIdHRwUmVxdWVzdCIsIm9iaiIsInN1Y2Nlc3MiLCJmYWlsdXJlIiwieGhyIiwiWE1MSHR0cFJlcXVlc3QiLCJvcGVuIiwibWV0aG9kIiwidXJsIiwiaGVhZGVycyIsImtleXMiLCJmb3JFYWNoIiwic2V0UmVxdWVzdEhlYWRlciIsIm9ubG9hZCIsInN0YXR1cyIsIm9uZXJyb3IiLCJzZW5kIiwiYm9keSIsInNwcmludGYiLCJjYWNoZSIsImFyZ3VtZW50cyIsInBhcnNlIiwiZm9ybWF0IiwicGFyc2VfdHJlZSIsImFyZ3YiLCJhcmciLCJrIiwibWF0Y2giLCJwYWQiLCJwYWRfY2hhcmFjdGVyIiwicGFkX2xlbmd0aCIsImN1cnNvciIsInRyZWVfbGVuZ3RoIiwibGVuZ3RoIiwibm9kZV90eXBlIiwib3V0cHV0IiwiZ2V0X3R5cGUiLCJwdXNoIiwidGVzdCIsInRvU3RyaW5nIiwiU3RyaW5nIiwiZnJvbUNoYXJDb2RlIiwicGFyc2VJbnQiLCJ0b0V4cG9uZW50aWFsIiwicGFyc2VGbG9hdCIsInRvRml4ZWQiLCJzdWJzdHJpbmciLCJ0b1VwcGVyQ2FzZSIsImNoYXJBdCIsInN0cl9yZXBlYXQiLCJqb2luIiwiZm10IiwiX2ZtdCIsImFyZ19uYW1lcyIsImV4ZWMiLCJmaWVsZF9saXN0IiwicmVwbGFjZW1lbnRfZmllbGQiLCJmaWVsZF9tYXRjaCIsInZhcmlhYmxlIiwic2xpY2UiLCJ0b0xvd2VyQ2FzZSIsImlucHV0IiwibXVsdGlwbGllciIsIlV0aWxzIiwicHJlbWlzZSIsImFzc2VydFRydWUiLCJ1bmRlZmluZWQiLCJ1dGlsc190eXBlb2YiLCJEYXRlIiwiZ2V0VGltZSIsIm5vdyIsIk1hdGgiLCJyYW5kb20iLCJ2YWx1ZXMiLCJlbnVtT2JqIiwicmVwbGFjZSIsIngiLCJ5IiwiQXJyYXkiLCJmaW5kIiwidiIsImFycmF5IiwicHJlZGljYXRlIiwiY29uc3RydWN0b3IiLCJhcHBseSIsIm1hcCIsImFzc2VydE5vdE51bGwiLCJwcm9taXNlIiwiY3JlYXRlUmVzb2x2ZSIsImNyZWF0ZVJlamVjdCIsIlByb21pc2UiLCJyZXNvbHZlIiwicmVqZWN0IiwidGhlbiIsImNhdGNoIiwiUkVTT1VSQ0VfUEFUSCIsIkhUVFBfTUVUSE9EUyIsIk1FU1NBR0VfUEVSU0lTVEVOQ0UiLCJDT05URU5UX1RZUEUiLCJ0ZXh0UGxhaW4iLCJWSVNJQklMSVRZIiwibWFrZUVudW0iLCJQRVJTSVNURU5DRSIsIlNUQUdFX0NPTkZJRyIsIlBST0QiLCJpbnZva2VVcmwiLCJNUVRUX0NPTlNUQU5UUyIsIlNFU1NJT05fVFlQRVMiLCJDSEFUX0VWRU5UUyIsIkNoYXRDbGllbnRGYWN0b3J5SW1wbCIsInN0YWdlIiwiSHR0cENoYXRDbGllbnQiLCJzdGFnZUNvbmZpZyIsIkNoYXRDbGllbnQiLCJwYXJ0aWNpcGFudFRva2VuIiwidHlwZSIsImV2ZW50VHlwZSIsIm1lc3NhZ2VJZHMiLCJ2aXNpYmlsaXR5IiwicGVyc2lzdGVuY2UiLCJhcmdzIiwiY2xpZW50X2NsYXNzQ2FsbENoZWNrIiwiY2xpZW50X3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4iLCJjbGllbnRfZ2V0UHJvdG90eXBlT2YiLCJjYWxsSHR0cENsaWVudCIsImNvbm5lY3Rpb25Ub2tlbiIsIk1lc3NhZ2UiLCJDb250ZW50VHlwZSIsIkNvbnRlbnQiLCJQZXJzaXN0ZW5jZSIsInJlcXVlc3RJbnB1dCIsIkNvbm5lY3Rpb25Ub2tlbiIsIl9jYWxsSHR0cENsaWVudCIsIlBhcnRpY2lwYW50RXZlbnQiLCJWaXNpYmlsaXR5IiwiUGFydGljaXBhbnRFdmVudFR5cGUiLCJQYXJ0aWNpcGFudFRva2VuIiwic2VsZiIsImFzc2lnbiIsIkNvbnRlbnQtVHlwZSIsIkFjY2VwdCIsIkpTT04iLCJzdHJpbmdpZnkiLCJyZXF1ZXN0IiwicmVzcG9uc2VPYmplY3QiLCJkYXRhIiwicmVzcG9uc2VUZXh0IiwiZXJyb3JPYmplY3QiLCJzdGF0dXNUZXh0IiwiQ2hhdENsaWVudEZhY3RvcnkiLCJDaGF0Q29udHJvbGxlckFyZ3NWYWxpZGF0b3IiLCJpc0FycmF5IiwiYWxsb3dlZFZhbHVlcyIsImNoYXRBcmdzVmFsaWRhdG9yX3R5cGVvZiIsImNoYXREZXRhaWxzIiwiaXNTdHJpbmciLCJfYXNzZXJ0SXNPYmplY3QiLCJfYXNzZXJ0SXNFbnVtIiwiX2Fzc2VydElzTm9uRW1wdHlTdHJpbmciLCJfYXNzZXJ0SXNMaXN0IiwiQ2hhdFNlcnZpY2VBcmdzVmFsaWRhdG9yIiwiaW5pdGlhbENvbnRhY3RJZCIsImNvbnRhY3RJZCIsInBhcnRpY2lwYW50SWQiLCJjb25uZWN0aW9uRGV0YWlscyIsIlByZVNpZ25lZENvbm5lY3Rpb25VcmwiLCJDb25uZWN0aW9uSWQiLCJDaGF0Q29ubmVjdGlvbk1hbmFnZXIiLCJjb25uZWN0aW9uQXJncyIsImNhbGxiYWNrIiwiUGFob01xdHRDb25uZWN0aW9uIiwiTVFUVENsaWVudCIsImNvbm5lY3RPcHRpb25zIiwidG9waWMiLCJzdWJzY3JpYmVPcHRpb25zIiwidW5zdWJzY3JpYmVPcHRpb25zIiwiTXF0dENvbm5lY3Rpb25TdGF0dXMiLCJmcmVlemUiLCJOZXZlckNvbm5lY3RlZCIsIkNvbm5lY3RpbmciLCJDb25uZWN0ZWQiLCJEaXNjb25uZWN0ZWRSZXRyeWluZyIsIkRpc2Nvbm5lY3RlZCIsIlJlY29ubmVjdGluZyIsIk1xdHRFdmVudHMiLCJNRVNTQUdFIiwiRElTQ09OTkVDVEVEX1JFVFJZSU5HIiwiRElTQ09OTkVDVEVEIiwiUkVDT05ORUNURUQiLCJQYWhvQ2xpZW50IiwicmVxdWlyZSIsImNvbm5lY3Rpb25NYW5hZ2VyX2NsYXNzQ2FsbENoZWNrIiwiY29ubmVjdGlvbk1hbmFnZXJfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybiIsImNvbm5lY3Rpb25NYW5hZ2VyX2dldFByb3RvdHlwZU9mIiwicHJlU2lnbmVkVXJsIiwiY29ubmVjdGlvbklkIiwicGFob0NsaWVudCIsIkNsaWVudCIsImNvbm5lY3Rpb25NYW5hZ2VyX2Fzc2VydFRoaXNJbml0aWFsaXplZCIsIm9uTWVzc2FnZUFycml2ZWQiLCJfbWVzc2FnZUFycml2ZWRDYWxsYmFjayIsIm9uQ29ubmVjdGlvbkxvc3QiLCJfY29ubmVjdGlvbkxvc3RDYWxsQmFjayIsImRlYnVnIiwidHJhY2UiLCJraWxsUmVjb25uZWN0IiwibWF4UmV0cnlUaW1lIiwibmV2ZXJDb25uZWN0ZWQiLCJfc3Vic2NyaWJlZFRvcGljcyIsIm9uU3VjY2VzcyIsInJlc3BvbnNlIiwib2xkU3RhdHVzIiwiX29uQ29ubmVjdFN1Y2Nlc3MiLCJvbkZhaWx1cmUiLCJlcnJvciIsImVycm9yRGV0YWlscyIsInJlYXNvbiIsIl9vbkNvbm5lY3RGYWlsdXJlIiwiY29ubmVjdCIsInJlY29ubmVjdCIsIl9zY2hlZHVsZVJlY29ubmVjdEtpbGxpbmciLCJpbmNvbWluZ01lc3NhZ2UiLCJxb3MiLCJwYXlsb2FkU3RyaW5nIiwiY2xlYXJUaW1lb3V0Iiwic2V0VGltZW91dCIsImRpc2Nvbm5lY3QiLCJfc3Vic2NyaWJlU3VjY2VzcyIsImdyYW50ZWRRb3MiLCJzdWJzY3JpYmUiLCJfYWRkVG9Ub3BpY3MiLCJfdW5zdWJzY3JpYmVTdWNjZXNzIiwidW5zdWJzY3JpYmUiLCJmaWx0ZXIiLCJDb25uZWN0aW9uSGVscGVyIiwiQ29ubmVjdGlvbkhlbHBlclN0YXR1cyIsIk5ldmVyU3RhcnRlZCIsIlN0YXJ0aW5nIiwiRGlzY29ubmVjdGVkUmVjb25uZWN0aW5nIiwiRW5kZWQiLCJDb25uZWN0aW9uSGVscGVyRXZlbnRzIiwiU29sb0NoYXRDb25uZWN0aW9uTXF0dEhlbHBlciIsImNvbm5lY3Rpb25IZWxwZXJfY2xhc3NDYWxsQ2hlY2siLCJjb25uZWN0aW9uSGVscGVyX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4iLCJjb25uZWN0aW9uSGVscGVyX2dldFByb3RvdHlwZU9mIiwiaW90Q29ubmVjdGlvbiIsIm1xdHRDb25uZWN0aW9uUHJvdmlkZXIiLCJldmVudERhdGEiLCJfaGFuZGxlSW90RXZlbnQiLCJnZXRTdGF0dXMiLCJjaGF0Q29udHJvbGxlckNhbGxiYWNrIiwiX2NyZWF0ZVN0YXJ0UHJvbWlzZSIsInJlc292bGUiLCJfY29ubmVjdCIsInVzZVNTTCIsImtlZXBBbGl2ZUludGVydmFsIiwibXF0dFZlcnNpb24iLCJ0aW1lb3V0IiwiX3Bvc3RDb25uZWN0IiwiX2Nvbm5lY3RGYWlsZWQiLCJjb25uZWN0UmVzcG9uc2UiLCJfc3Vic2NyaWJlIiwiY29ubmVjdEVycm9yIiwiY29ubmVjdFN1Y2Nlc3MiLCJkZXRhaWxzIiwiX3Bvc3RTdWJzY3JpYmUiLCJfc3Vic2NyaWJlRmFpbGVkIiwic3Vic2NyaWJlUmVzcG9uc2UiLCJzdWJzY3JpYmVFcnJvciIsIkV2ZW50Q29uc3RydWN0b3IiLCJyZXR1cm5PYmplY3QiLCJyZXRyeWluZyIsImNvbm5lY3RDYWxsZWQiLCJfZnJvbUluY29taW5nRGF0YSIsImluY29taW5nRGF0YSIsIkRhdGEiLCJUeXBlIiwiU3Vic2NyaXB0aW9uIiwic3ViTWFwIiwiZXZlbnROYW1lIiwiZiIsImlkIiwicmFuZG9tSWQiLCJTdWJzY3JpcHRpb25NYXAiLCJzdWJJZE1hcCIsInN1YkV2ZW50TmFtZU1hcCIsInN1YiIsInN1Ykxpc3QiLCJzdWJJZCIsImNvbnRhaW5zIiwiZ2V0QWxsU3Vic2NyaXB0aW9ucyIsInJlZHVjZSIsImEiLCJiIiwiY29uY2F0IiwiZ2V0U3Vic2NyaXB0aW9ucyIsIkV2ZW50QnVzIiwicGFyYW1zSW4iLCJwYXJhbXMiLCJsb2dFdmVudHMiLCJpc0Z1bmN0aW9uIiwic3Vic2NyaWJlQWxsIiwidHJpZ2dlciIsImFsbEV2ZW50U3VicyIsImV2ZW50U3VicyIsImUiLCJ0cmlnZ2VyQXN5bmMiLCJicmlkZ2UiLCJldmVudCIsInVuc3Vic2NyaWJlQWxsIiwiTmV0d29ya0xpbmtTdGF0dXMiLCJDaGF0Q29udHJvbGxlciIsInRleHRNZXNzYWdlIiwiUGVyc2lzdGVudENvbm5lY3Rpb25BbmRDaGF0U2VydmljZUNvbnRyb2xsZXIiLCJjaGF0Q29udHJvbGxlcl9jbGFzc0NhbGxDaGVjayIsImNoYXRDb250cm9sbGVyX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4iLCJjaGF0Q29udHJvbGxlcl9nZXRQcm90b3R5cGVPZiIsInNldEFyZ3VtZW50cyIsImFyZ3NWYWxpZGF0b3IiLCJjaGF0RXZlbnRDb25zdHJ1Y3RvciIsImludGlhbENvbnRhY3RJZCIsImFjcHNDbGllbnQiLCJjb25uZWN0aW9uSGVscGVyQ2FsbGJhY2siLCJfaGFuZGxlQ29ubmVjdGlvbkhlbHBlckV2ZW50cyIsIl9oYXNDb25uZWN0aW9uRGV0YWlscyIsImhhc0Nvbm5lY3Rpb25EZXRhaWxzIiwiY2hhdENvbnRyb2xsZXJGYWN0b3J5IiwiX3NldENvbm5lY3Rpb25IZWxwZXIiLCJfY29ubmVjdENhbGxlZEF0bGVhc3RPbmNlIiwiX2V2ZXJDb25uZWN0ZWQiLCJwdWJzdWIiLCJjb250aW51b3VzU3VjY2Vzc0ZldGNoQ29ubmVjdGlvbnMiLCJfY2hhdEVuZGVkIiwiY29ubmVjdGlvbkhlbHBlclByb3ZpZGVyIiwiY3JlYXRlQ29ubmVjdGlvbkhlbHBlclByb3ZpZGVyIiwiY29ubmVjdGlvbkhlbHBlciIsInJlcXVlc3RDb250ZXh0Iiwid3JhcFByb21pc2UiLCJtZXNzYWdlSW5wdXQiLCJvcHRpb25hbFBhcmFtcyIsInZhbGlkYXRlU2VuZE1lc3NhZ2UiLCJzZW5kTWVzc2FnZSIsIl9jcmVhdGVQcm9taXNlV3JhcHBlckZyb21Db250ZXh0Iiwib3B0aW9ucyIsInZhbGlkYXRlU2VuZEV2ZW50IiwicGVyc2lzdGVuY2VBcmd1bWVudCIsIlBFUlNJU1RFRCIsInZpc2liaWxpdHlBcmd1bWVudCIsIkFMTCIsInNlbmRFdmVudCIsImlucHV0QXJncyIsIkludGlhbENvbnRhY3RJZCIsIlN0YXJ0S2V5IiwiU2NhbkRpcmVjdGlvbiIsIlNvcnRLZXkiLCJNYXhSZXN1bHRzIiwiTmV4dFRva2VuIiwiZ2V0VHJhbnNjcmlwdCIsImNoYXRFdmVudCIsImZyb21Db25uZWN0aW9uSGVscGVyRXZlbnQiLCJnZXRDaGF0RGV0YWlscyIsImV4YyIsInZhbGlkYXRlQ29ubmVjdENoYXQiLCJnZXRDb25uZWN0aW9uU3RhdHVzIiwiY2FsbGJhY2tzIiwiX2NyZWF0ZUNvbm5lY3RDYWxsYmFja3NXcmFwcGVyIiwiX3N0YXJ0Q29ubmVjdGlvbkhlbHBlciIsIl9mZXRjaENvbm5lY3Rpb25EZXRhaWxzIiwicmVzb2x2ZUNhbGxiYWNrIiwicmVqZWN0Q2FsbGJhY2siLCJfZGVidWciLCJjcmVhdGVDb25uZWN0aW9uRGV0YWlscyIsIkNvbm5lY3Rpb25EZXRhaWxzIiwiUGFydGljaXBhbnRDcmVkZW50aWFscyIsIlRva2VuIiwiZGlzY29ubmVjdENoYXQiLCJlbmQiLCJzdGFydCIsImNvbm5lY3Rpb25IZWxwZXJTdGF0dXMiLCJfY29udmVydENvbm5lY3Rpb25IZWxwZXJTdGF0dXMiLCJDaGF0U2Vzc2lvbkZhY3RvcnkiLCJwYXJ0aWNpcGFudFR5cGUiLCJQZXJzaXN0ZW50Q29ubmVjdGlvbkFuZENoYXRTZXJ2aWNlU2Vzc2lvbkZhY3RvcnkiLCJjaGF0U2Vzc2lvbl9jbGFzc0NhbGxDaGVjayIsImNoYXRTZXNzaW9uX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4iLCJjaGF0U2Vzc2lvbl9nZXRQcm90b3R5cGVPZiIsImNoYXRDb25uZWN0aW9uTWFuYWdlciIsImdldENsaWVudCIsImNoYXRDb250cm9sbGVyIiwiX2NyZWF0ZUNoYXRTZXNzaW9uIiwiQWdlbnRDaGF0U2Vzc2lvbiIsIkN1c3RvbWVyQ2hhdFNlc3Npb24iLCJjaGF0RGV0YWlsc0lucHV0IiwiX25vcm1hbGl6ZUNoYXREZXRhaWxzIiwidmFsaWRhdGVJbml0aWF0ZUNoYXRSZXNwb25zZSIsIlBhcnRpY2lwYW50SWQiLCJDb250YWN0SWQiLCJ2YWxpZGF0ZUNoYXREZXRhaWxzIiwiY3JlYXRlTmV3TXF0dENvbm5lY3Rpb25Qcm92aWRlciIsIkNoYXRTZXNzaW9uIiwiY29udHJvbGxlciIsImRpc2Nvbm5lY3RQYXJ0aWNpcGFudCIsIkNIQVRfU0VTU0lPTl9GQUNUT1JZIiwiQ2hhdFNlc3Npb25Db25zdHJ1Y3RvciIsInR5cGVQYXJhbSIsImNyZWF0ZUFnZW50Q2hhdFNlc3Npb24iLCJjcmVhdGVDdXN0b21lckNoYXRTZXNzaW9uIiwiZyIsIkZ1bmN0aW9uIiwid2luZG93IiwiX193ZWJwYWNrX2V4cG9ydHNfXyIsImdsb2JhbCIsImNoYXRTZXNzaW9uIiwiX2NvcmVfY2hhdFNlc3Npb25fX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXyIsImZhY3RvcnkiLCJsb2NhbFN0b3JhZ2UiLCJzZXRJdGVtIiwiaXRlbSIsImdldEl0ZW0iLCJyZW1vdmVJdGVtIiwiTUVTU0FHRV9UWVBFIiwiQ09OTkVDVCIsIkNPTk5BQ0siLCJQVUJMSVNIIiwiUFVCQUNLIiwiUFVCUkVDIiwiUFVCUkVMIiwiUFVCQ09NUCIsIlNVQlNDUklCRSIsIlNVQkFDSyIsIlVOU1VCU0NSSUJFIiwiVU5TVUJBQ0siLCJQSU5HUkVRIiwiUElOR1JFU1AiLCJESVNDT05ORUNUIiwidmFsaWRhdGUiLCJlcnJvclN0ciIsInZhbGlkS2V5IiwiRVJST1IiLCJJTlZBTElEX1RZUEUiLCJzY29wZSIsIk9LIiwiY29kZSIsInRleHQiLCJDT05ORUNUX1RJTUVPVVQiLCJTVUJTQ1JJQkVfVElNRU9VVCIsIlVOU1VCU0NSSUJFX1RJTUVPVVQiLCJQSU5HX1RJTUVPVVQiLCJJTlRFUk5BTF9FUlJPUiIsIkNPTk5BQ0tfUkVUVVJOQ09ERSIsIlNPQ0tFVF9FUlJPUiIsIlNPQ0tFVF9DTE9TRSIsIk1BTEZPUk1FRF9VVEYiLCJVTlNVUFBPUlRFRCIsIklOVkFMSURfU1RBVEUiLCJJTlZBTElEX0FSR1VNRU5UIiwiVU5TVVBQT1JURURfT1BFUkFUSU9OIiwiSU5WQUxJRF9TVE9SRURfREFUQSIsIklOVkFMSURfTVFUVF9NRVNTQUdFX1RZUEUiLCJNQUxGT1JNRURfVU5JQ09ERSIsIkJVRkZFUl9GVUxMIiwiQ09OTkFDS19SQyIsIjAiLCIxIiwiMiIsIjMiLCI0IiwiNSIsInN1YnN0aXR1dGlvbnMiLCJmaWVsZCIsImluZGV4T2YiLCJwYXJ0MSIsInBhcnQyIiwiTXF0dFByb3RvSWRlbnRpZmllcnYzIiwiTXF0dFByb3RvSWRlbnRpZmllcnY0IiwiV2lyZU1lc3NhZ2UiLCJkZWNvZGVNZXNzYWdlIiwicG9zIiwiZGlnaXQiLCJzdGFydGluZ1BvcyIsImZpcnN0IiwibWVzc2FnZUluZm8iLCJyZW1MZW5ndGgiLCJlbmRQb3MiLCJ3aXJlTWVzc2FnZSIsInNlc3Npb25QcmVzZW50IiwicmV0dXJuQ29kZSIsImxlbiIsInJlYWRVaW50MTYiLCJ0b3BpY05hbWUiLCJwYXJzZVVURjgiLCJtZXNzYWdlSWRlbnRpZmllciIsInN1YmFycmF5IiwicmV0YWluZWQiLCJkdXBsaWNhdGUiLCJkZXN0aW5hdGlvbk5hbWUiLCJwYXlsb2FkTWVzc2FnZSIsIndyaXRlVWludDE2IiwiYnVmZmVyIiwib2Zmc2V0Iiwid3JpdGVTdHJpbmciLCJ1dGY4TGVuZ3RoIiwic3RyaW5nVG9VVEY4IiwiVVRGOExlbmd0aCIsImNoYXJDb2RlIiwiY2hhckNvZGVBdCIsImxvd0NoYXJDb2RlIiwiaXNOYU4iLCJ1dGYxNiIsImJ5dGUxIiwiYnl0ZTIiLCJieXRlMyIsImJ5dGU0IiwiZW5jb2RlIiwid2lsbE1lc3NhZ2VQYXlsb2FkQnl0ZXMiLCJ0b3BpY1N0ckxlbmd0aCIsImRlc3RpbmF0aW9uTmFtZUxlbmd0aCIsImNsaWVudElkIiwid2lsbE1lc3NhZ2UiLCJwYXlsb2FkQnl0ZXMiLCJVaW50OEFycmF5IiwiYnl0ZUxlbmd0aCIsInVzZXJOYW1lIiwicGFzc3dvcmQiLCJ0b3BpY3MiLCJyZXF1ZXN0ZWRRb3MiLCJBcnJheUJ1ZmZlciIsIm1iaSIsIm51bWJlciIsIm51bUJ5dGVzIiwiZW5jb2RlTUJJIiwiYnl0ZVN0cmVhbSIsInNldCIsImNvbm5lY3RGbGFncyIsImNsZWFuU2Vzc2lvbiIsIlBpbmdlciIsImNsaWVudCIsIl9jbGllbnQiLCJfa2VlcEFsaXZlSW50ZXJ2YWwiLCJpc1Jlc2V0IiwicGluZ1JlcSIsImRvVGltZW91dCIsInBpbmdlciIsImRvUGluZyIsIl90cmFjZSIsInNvY2tldCIsIl9kaXNjb25uZWN0ZWQiLCJyZXNldCIsImNhbmNlbCIsIlRpbWVvdXQiLCJ0aW1lb3V0U2Vjb25kcyIsImFjdGlvbiIsIkNsaWVudEltcGwiLCJ1cmkiLCJob3N0IiwicG9ydCIsInBhdGgiLCJXZWJTb2NrZXQiLCJfd3N1cmkiLCJfbG9jYWxLZXkiLCJfbXNnX3F1ZXVlIiwiX2J1ZmZlcmVkX21zZ19xdWV1ZSIsIl9zZW50TWVzc2FnZXMiLCJfcmVjZWl2ZWRNZXNzYWdlcyIsIl9ub3RpZnlfbXNnX3NlbnQiLCJfbWVzc2FnZV9pZGVudGlmaWVyIiwiX3NlcXVlbmNlIiwicmVzdG9yZSIsImNvbm5lY3RlZCIsIm1heE1lc3NhZ2VJZGVudGlmaWVyIiwiaG9zdEluZGV4Iiwib25Db25uZWN0ZWQiLCJvbk1lc3NhZ2VEZWxpdmVyZWQiLCJ0cmFjZUZ1bmN0aW9uIiwiX2Nvbm5lY3RUaW1lb3V0Iiwic2VuZFBpbmdlciIsInJlY2VpdmVQaW5nZXIiLCJfcmVjb25uZWN0SW50ZXJ2YWwiLCJfcmVjb25uZWN0aW5nIiwiX3JlY29ubmVjdFRpbWVvdXQiLCJkaXNjb25uZWN0ZWRQdWJsaXNoaW5nIiwiZGlzY29ubmVjdGVkQnVmZmVyU2l6ZSIsInJlY2VpdmVCdWZmZXIiLCJfdHJhY2VCdWZmZXIiLCJfTUFYX1RSQUNFX0VOVFJJRVMiLCJjb25uZWN0T3B0aW9uc01hc2tlZCIsIl90cmFjZU1hc2siLCJ1cmlzIiwiX2RvQ29ubmVjdCIsImludm9jYXRpb25Db250ZXh0IiwiZXJyb3JDb2RlIiwiZXJyb3JNZXNzYWdlIiwidGltZU91dCIsIl9yZXF1aXJlc19hY2siLCJfc2NoZWR1bGVfbWVzc2FnZSIsInNlcXVlbmNlIiwidW5zaGlmdCIsImdldFRyYWNlTG9nIiwic3RhcnRUcmFjZSIsInN0b3BUcmFjZSIsIndzdXJsIiwidXJpUGFydHMiLCJzcGxpdCIsImJpbmFyeVR5cGUiLCJvbm9wZW4iLCJfb25fc29ja2V0X29wZW4iLCJvbm1lc3NhZ2UiLCJfb25fc29ja2V0X21lc3NhZ2UiLCJfb25fc29ja2V0X2Vycm9yIiwib25jbG9zZSIsIl9vbl9zb2NrZXRfY2xvc2UiLCJfcHJvY2Vzc19xdWV1ZSIsInN0b3JlIiwicHJlZml4Iiwic3RvcmVkTWVzc2FnZSIsInZlcnNpb24iLCJwdWJSZWNSZWNlaXZlZCIsImhleCIsIm1lc3NhZ2VCeXRlcyIsInBheWxvYWRIZXgiLCJwb3AiLCJfc29ja2V0X3NlbmQiLCJtZXNzYWdlQ291bnQiLCJtZXNzYWdlcyIsIl9kZWZyYW1lTWVzc2FnZXMiLCJfaGFuZGxlTWVzc2FnZSIsImJ5dGVBcnJheSIsIm5ld0RhdGEiLCJyZXN1bHQiLCJlcnJvclN0YWNrIiwic3RhY2siLCJzZW50TWVzc2FnZSIsInJlY2VpdmVkTWVzc2FnZSIsInNlcXVlbmNlZE1lc3NhZ2VzIiwibXNnSWQiLCJtc2ciLCJzb3J0IiwicHViUmVsTWVzc2FnZSIsInJlY29ubmVjdGVkIiwiX2Nvbm5lY3RlZCIsIl9yZWNlaXZlUHVibGlzaCIsIl9yZWNlaXZlTWVzc2FnZSIsInB1YkNvbXBNZXNzYWdlIiwid2lyZU1lc3NhZ2VNYXNrZWQiLCJwdWJBY2tNZXNzYWdlIiwicHViUmVjTWVzc2FnZSIsIl9yZWNvbm5lY3QiLCJlcnJvclRleHQiLCJyZWFkeVN0YXRlIiwiY2xvc2UiLCJtcXR0VmVyc2lvbkV4cGxpY2l0Iiwic3BsaWNlIiwicmVjb3JkIiwic2V2ZXJpdHkiLCJtYXgiLCJzaGlmdCIsInRyYWNlT2JqZWN0IiwibWFza2VkIiwidHJhY2VPYmplY3RNYXNrZWQiLCJhdHRyIiwibmV3UGF5bG9hZCIsInBheWxvYWQiLCJpc1ZpZXciLCJEYXRhVmlldyIsImRlZmluZVByb3BlcnRpZXMiLCJuZXdEZXN0aW5hdGlvbk5hbWUiLCJuZXdRb3MiLCJuZXdSZXRhaW5lZCIsIm5ld1RvcGljIiwibmV3RHVwbGljYXRlIiwiaXB2NkFkZFNCcmFja2V0IiwiY2xpZW50SWRMZW5ndGgiLCJuZXdPbkNvbm5lY3RlZCIsIm5ld0Rpc2Nvbm5lY3RlZFB1Ymxpc2hpbmciLCJuZXdEaXNjb25uZWN0ZWRCdWZmZXJTaXplIiwibmV3T25Db25uZWN0aW9uTG9zdCIsIm5ld09uTWVzc2FnZURlbGl2ZXJlZCIsIm5ld09uTWVzc2FnZUFycml2ZWQiLCJob3N0cyIsInBvcnRzIiwic3RyaW5nUGF5bG9hZCIsInVzaW5nVVJJcyIsImlwdjYiLCJwdWJsaXNoIiwiaXNDb25uZWN0ZWQiXSwibWFwcGluZ3MiOiJhQUNBLElBQUFBLEVBQUEsR0FHQSxTQUFBQyxFQUFBQyxHQUdBLEdBQUFGLEVBQUFFLEdBQ0EsT0FBQUYsRUFBQUUsR0FBQUMsUUFHQSxJQUFBQyxFQUFBSixFQUFBRSxHQUFBLENBQ0FHLEVBQUFILEVBQ0FJLEdBQUEsRUFDQUgsUUFBQSxJQVVBLE9BTkFJLEVBQUFMLEdBQUFNLEtBQUFKLEVBQUFELFFBQUFDLElBQUFELFFBQUFGLEdBR0FHLEVBQUFFLEdBQUEsRUFHQUYsRUFBQUQsUUFLQUYsRUFBQVEsRUFBQUYsRUFHQU4sRUFBQVMsRUFBQVYsRUFHQUMsRUFBQVUsRUFBQSxTQUFBUixFQUFBUyxFQUFBQyxHQUNBWixFQUFBYSxFQUFBWCxFQUFBUyxJQUNBRyxPQUFBQyxlQUFBYixFQUFBUyxFQUFBLENBQTBDSyxZQUFBLEVBQUFDLElBQUFMLEtBSzFDWixFQUFBa0IsRUFBQSxTQUFBaEIsR0FDQSxvQkFBQWlCLGVBQUFDLGFB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cG1CLEtBQUF5ckIsWUFBQSxXQUNBLE9BQUFwSixFQUFBZ0MsWUE0SEExYixXQWx2RUEsTUFxdkVFLElBQUE2UixJQUFBLG9CQUFBbFIsVUFBQSxvQkFBQWdSLGNBQUEsS0Fud0VGM2MsRUFBQUQsUUFBQWlkIiwiZmlsZSI6ImFtYXpvbi1jb25uZWN0LWNoYXQuanMiLCJzb3VyY2VzQ29udGVudCI6WyIgXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSkge1xuIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuIFx0XHR9XG4gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbiBcdFx0XHRpOiBtb2R1bGVJZCxcbiBcdFx0XHRsOiBmYWxzZSxcbiBcdFx0XHRleHBvcnRzOiB7fVxuIFx0XHR9O1xuXG4gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4gXHRcdG1vZHVsZS5sID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9uIGZvciBoYXJtb255IGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIG5hbWUsIGdldHRlcikge1xuIFx0XHRpZighX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIG5hbWUpKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIG5hbWUsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBnZXR0ZXIgfSk7XG4gXHRcdH1cbiBcdH07XG5cbiBcdC8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uciA9IGZ1bmN0aW9uKGV4cG9ydHMpIHtcbiBcdFx0aWYodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnRvU3RyaW5nVGFnKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogJ01vZHVsZScgfSk7XG4gXHRcdH1cbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbiBcdH07XG5cbiBcdC8vIGNyZWF0ZSBhIGZha2UgbmFtZXNwYWNlIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDE6IHZhbHVlIGlzIGEgbW9kdWxlIGlkLCByZXF1aXJlIGl0XG4gXHQvLyBtb2RlICYgMjogbWVyZ2UgYWxsIHByb3BlcnRpZXMgb2YgdmFsdWUgaW50byB0aGUgbnNcbiBcdC8vIG1vZGUgJiA0OiByZXR1cm4gdmFsdWUgd2hlbiBhbHJlYWR5IG5zIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDh8MTogYmVoYXZlIGxpa2UgcmVxdWlyZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy50ID0gZnVuY3Rpb24odmFsdWUsIG1vZGUpIHtcbiBcdFx0aWYobW9kZSAmIDEpIHZhbHVlID0gX193ZWJwYWNrX3JlcXVpcmVfXyh2YWx1ZSk7XG4gXHRcdGlmKG1vZGUgJiA4KSByZXR1cm4gdmFsdWU7XG4gXHRcdGlmKChtb2RlICYgNCkgJiYgdHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyAmJiB2YWx1ZSAmJiB2YWx1ZS5fX2VzTW9kdWxlKSByZXR1cm4gdmFsdWU7XG4gXHRcdHZhciBucyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18ucihucyk7XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShucywgJ2RlZmF1bHQnLCB7IGVudW1lcmFibGU6IHRydWUsIHZhbHVlOiB2YWx1ZSB9KTtcbiBcdFx0aWYobW9kZSAmIDIgJiYgdHlwZW9mIHZhbHVlICE9ICdzdHJpbmcnKSBmb3IodmFyIGtleSBpbiB2YWx1ZSkgX193ZWJwYWNrX3JlcXVpcmVfXy5kKG5zLCBrZXksIGZ1bmN0aW9uKGtleSkgeyByZXR1cm4gdmFsdWVba2V5XTsgfS5iaW5kKG51bGwsIGtleSkpO1xuIFx0XHRyZXR1cm4gbnM7XG4gXHR9O1xuXG4gXHQvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24obW9kdWxlKSB7XG4gXHRcdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuIFx0XHRcdGZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0TW9kdWxlRXhwb3J0cygpIHsgcmV0dXJuIG1vZHVsZTsgfTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpO1xuIFx0XHRyZXR1cm4gZ2V0dGVyO1xuIFx0fTtcblxuIFx0Ly8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7IH07XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuXG5cbiBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zID0gMik7XG4iLCJjbGFzcyBWYWx1ZUVycm9yIGV4dGVuZHMgRXJyb3Ige1xuICBjb25zdHJ1Y3RvcihtZXNzYWdlKSB7XG4gICAgc3VwZXIobWVzc2FnZSk7XG4gICAgdGhpcy5uYW1lID0gXCJWYWx1ZUVycm9yXCI7XG4gICAgY29uc29sZS5sb2coXCJFWENFUFRJT046IFwiICsgdGhpcy5uYW1lICsgXCIgTUVTU0FHRTogXCIgKyB0aGlzLm1lc3NhZ2UpO1xuICB9XG59XG5cbmNsYXNzIFVuSW1wbGVtZW50ZWRNZXRob2RFeGNlcHRpb24gZXh0ZW5kcyBFcnJvciB7XG4gIGNvbnN0cnVjdG9yKG1lc3NhZ2UpIHtcbiAgICBzdXBlcihtZXNzYWdlKTtcbiAgICB0aGlzLm5hbWUgPSBcIlVuSW1wbGVtZW50ZWRNZXRob2RcIjtcbiAgICBjb25zb2xlLmxvZyhcIkVYQ0VQVElPTjogXCIgKyB0aGlzLm5hbWUgKyBcIiBNRVNTQUdFOiBcIiArIHRoaXMubWVzc2FnZSk7XG4gIH1cbn1cblxuY2xhc3MgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uIGV4dGVuZHMgRXJyb3Ige1xuICBjb25zdHJ1Y3RvcihtZXNzYWdlLCBhcmd1bWVudCkge1xuICAgIHN1cGVyKG1lc3NhZ2UpO1xuICAgIHRoaXMubmFtZSA9IFwiSWxsZWdhbEFyZ3VtZW50XCI7XG4gICAgdGhpcy5hcmd1bWVudCA9IGFyZ3VtZW50O1xuICAgIGNvbnNvbGUubG9nKFwiRVhDRVBUSU9OOiBcIiArIHRoaXMubmFtZSArIFwiIE1FU1NBR0U6IFwiICsgdGhpcy5tZXNzYWdlKTtcbiAgfVxufVxuXG5jbGFzcyBJbGxlZ2FsU3RhdGVFeGNlcHRpb24gZXh0ZW5kcyBFcnJvciB7XG4gIGNvbnN0cnVjdG9yKG1lc3NhZ2UpIHtcbiAgICBzdXBlcihtZXNzYWdlKTtcbiAgICB0aGlzLm5hbWUgPSBcIklsbGVnYWxTdGF0ZVwiO1xuICAgIGNvbnNvbGUubG9nKFwiRVhDRVBUSU9OOiBcIiArIHRoaXMubmFtZSArIFwiIE1FU1NBR0U6IFwiICsgdGhpcy5tZXNzYWdlKTtcbiAgfVxufVxuXG5jbGFzcyBJbGxlZ2FsSnNvbkV4Y2VwdGlvbiBleHRlbmRzIEVycm9yIHtcbiAgY29uc3RydWN0b3IobWVzc2FnZSwgYXJncykge1xuICAgIHN1cGVyKG1lc3NhZ2UpO1xuICAgIHRoaXMubmFtZSA9IFwiSWxsZWdhbFN0YXRlXCI7XG4gICAgdGhpcy5jYXVzZUV4Y2VwdGlvbiA9IGFyZ3MuY2F1c2VFeGNlcHRpb247XG4gICAgdGhpcy5vcmlnaW5hbEpzb25TdHJpbmcgPSBhcmdzLm9yaWdpbmFsSnNvblN0cmluZztcbiAgICBjb25zb2xlLmxvZyhcbiAgICAgIFwiRVhDRVBUSU9OOiBcIiArXG4gICAgICAgIHRoaXMubmFtZSArXG4gICAgICAgIFwiIE1FU1NBR0U6IFwiICtcbiAgICAgICAgdGhpcy5tZXNzYWdlICtcbiAgICAgICAgXCIgY2F1c2U6IFwiICtcbiAgICAgICAgdGhpcy5jYXVzZUV4Y2VwdGlvblxuICAgICk7XG4gIH1cbn1cblxuZXhwb3J0IHtcbiAgVW5JbXBsZW1lbnRlZE1ldGhvZEV4Y2VwdGlvbixcbiAgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uLFxuICBJbGxlZ2FsU3RhdGVFeGNlcHRpb24sXG4gIElsbGVnYWxKc29uRXhjZXB0aW9uLFxuICBWYWx1ZUVycm9yXG59O1xuIiwidmFyIG1ha2VIdHRwUmVxdWVzdCA9IChvYmosIHN1Y2Nlc3MsIGZhaWx1cmUpID0+IHtcbiAgbGV0IHhociA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xuICB4aHIub3BlbihvYmoubWV0aG9kIHx8IFwiR0VUXCIsIG9iai51cmwpO1xuICBpZiAob2JqLmhlYWRlcnMpIHtcbiAgICBPYmplY3Qua2V5cyhvYmouaGVhZGVycykuZm9yRWFjaChrZXkgPT4ge1xuICAgICAgeGhyLnNldFJlcXVlc3RIZWFkZXIoa2V5LCBvYmouaGVhZGVyc1trZXldKTtcbiAgICB9KTtcbiAgfVxuICB4aHIub25sb2FkID0gKCkgPT4ge1xuICAgIGlmICh4aHIuc3RhdHVzID49IDIwMCAmJiB4aHIuc3RhdHVzIDwgMzAwKSB7XG4gICAgICBzdWNjZXNzKHhocik7XG4gICAgfSBlbHNlIHtcbiAgICAgIGZhaWx1cmUoeGhyKTtcbiAgICB9XG4gIH07XG4gIHhoci5vbmVycm9yID0gKCkgPT4gZmFpbHVyZSh4aHIpO1xuICB4aHIuc2VuZChvYmouYm9keSk7XG59O1xuXG5leHBvcnQgeyBtYWtlSHR0cFJlcXVlc3QgfTtcbiIsIi8qIGVzbGludC1kaXNhYmxlICovXG4vKiEgQGxpY2Vuc2Ugc3ByaW50Zi5qcyB8IENvcHlyaWdodCAoYykgMjAwNy0yMDEzIEFsZXhhbmRydSBNYXJhc3RlYW51IDxoZWxsbyBhdCBhbGV4ZWkgZG90IHJvPiB8IDMgY2xhdXNlIEJTRCBsaWNlbnNlICovXG5cbnZhciBzcHJpbnRmID0gZnVuY3Rpb24oKSB7XG4gIGlmICghc3ByaW50Zi5jYWNoZS5oYXNPd25Qcm9wZXJ0eShhcmd1bWVudHNbMF0pKSB7XG4gICAgc3ByaW50Zi5jYWNoZVthcmd1bWVudHNbMF1dID0gc3ByaW50Zi5wYXJzZShhcmd1bWVudHNbMF0pO1xuICB9XG4gIHJldHVybiBzcHJpbnRmLmZvcm1hdC5jYWxsKG51bGwsIHNwcmludGYuY2FjaGVbYXJndW1lbnRzWzBdXSwgYXJndW1lbnRzKTtcbn07XG5cbnNwcmludGYuZm9ybWF0ID0gZnVuY3Rpb24ocGFyc2VfdHJlZSwgYXJndikge1xuICB2YXIgY3Vyc29yID0gMSxcbiAgICB0cmVlX2xlbmd0aCA9IHBhcnNlX3RyZWUubGVuZ3RoLFxuICAgIG5vZGVfdHlwZSA9IFwiXCIsXG4gICAgYXJnLFxuICAgIG91dHB1dCA9IFtdLFxuICAgIGksXG4gICAgayxcbiAgICBtYXRjaCxcbiAgICBwYWQsXG4gICAgcGFkX2NoYXJhY3RlcixcbiAgICBwYWRfbGVuZ3RoO1xuICBmb3IgKGkgPSAwOyBpIDwgdHJlZV9sZW5ndGg7IGkrKykge1xuICAgIG5vZGVfdHlwZSA9IGdldF90eXBlKHBhcnNlX3RyZWVbaV0pO1xuICAgIGlmIChub2RlX3R5cGUgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgIG91dHB1dC5wdXNoKHBhcnNlX3RyZWVbaV0pO1xuICAgIH0gZWxzZSBpZiAobm9kZV90eXBlID09PSBcImFycmF5XCIpIHtcbiAgICAgIG1hdGNoID0gcGFyc2VfdHJlZVtpXTsgLy8gY29udmVuaWVuY2UgcHVycG9zZXMgb25seVxuICAgICAgaWYgKG1hdGNoWzJdKSB7XG4gICAgICAgIC8vIGtleXdvcmQgYXJndW1lbnRcbiAgICAgICAgYXJnID0gYXJndltjdXJzb3JdO1xuICAgICAgICBmb3IgKGsgPSAwOyBrIDwgbWF0Y2hbMl0ubGVuZ3RoOyBrKyspIHtcbiAgICAgICAgICBpZiAoIWFyZy5oYXNPd25Qcm9wZXJ0eShtYXRjaFsyXVtrXSkpIHtcbiAgICAgICAgICAgIHRocm93IHNwcmludGYoXG4gICAgICAgICAgICAgICdbc3ByaW50Zl0gcHJvcGVydHkgXCIlc1wiIGRvZXMgbm90IGV4aXN0JyxcbiAgICAgICAgICAgICAgbWF0Y2hbMl1ba11cbiAgICAgICAgICAgICk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGFyZyA9IGFyZ1ttYXRjaFsyXVtrXV07XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAobWF0Y2hbMV0pIHtcbiAgICAgICAgLy8gcG9zaXRpb25hbCBhcmd1bWVudCAoZXhwbGljaXQpXG4gICAgICAgIGFyZyA9IGFyZ3ZbbWF0Y2hbMV1dO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gcG9zaXRpb25hbCBhcmd1bWVudCAoaW1wbGljaXQpXG4gICAgICAgIGFyZyA9IGFyZ3ZbY3Vyc29yKytdO1xuICAgICAgfVxuXG4gICAgICBpZiAoL1tec10vLnRlc3QobWF0Y2hbOF0pICYmIGdldF90eXBlKGFyZykgIT0gXCJudW1iZXJcIikge1xuICAgICAgICB0aHJvdyBzcHJpbnRmKFwiW3NwcmludGZdIGV4cGVjdGluZyBudW1iZXIgYnV0IGZvdW5kICVzXCIsIGdldF90eXBlKGFyZykpO1xuICAgICAgfVxuICAgICAgc3dpdGNoIChtYXRjaFs4XSkge1xuICAgICAgICBjYXNlIFwiYlwiOlxuICAgICAgICAgIGFyZyA9IGFyZy50b1N0cmluZygyKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBcImNcIjpcbiAgICAgICAgICBhcmcgPSBTdHJpbmcuZnJvbUNoYXJDb2RlKGFyZyk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgXCJkXCI6XG4gICAgICAgICAgYXJnID0gcGFyc2VJbnQoYXJnLCAxMCk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgXCJlXCI6XG4gICAgICAgICAgYXJnID0gbWF0Y2hbN10gPyBhcmcudG9FeHBvbmVudGlhbChtYXRjaFs3XSkgOiBhcmcudG9FeHBvbmVudGlhbCgpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFwiZlwiOlxuICAgICAgICAgIGFyZyA9IG1hdGNoWzddID8gcGFyc2VGbG9hdChhcmcpLnRvRml4ZWQobWF0Y2hbN10pIDogcGFyc2VGbG9hdChhcmcpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFwib1wiOlxuICAgICAgICAgIGFyZyA9IGFyZy50b1N0cmluZyg4KTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBcInNcIjpcbiAgICAgICAgICBhcmcgPVxuICAgICAgICAgICAgKGFyZyA9IFN0cmluZyhhcmcpKSAmJiBtYXRjaFs3XSA/IGFyZy5zdWJzdHJpbmcoMCwgbWF0Y2hbN10pIDogYXJnO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFwidVwiOlxuICAgICAgICAgIGFyZyA9IGFyZyA+Pj4gMDtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBcInhcIjpcbiAgICAgICAgICBhcmcgPSBhcmcudG9TdHJpbmcoMTYpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFwiWFwiOlxuICAgICAgICAgIGFyZyA9IGFyZy50b1N0cmluZygxNikudG9VcHBlckNhc2UoKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICAgIGFyZyA9IC9bZGVmXS8udGVzdChtYXRjaFs4XSkgJiYgbWF0Y2hbM10gJiYgYXJnID49IDAgPyBcIitcIiArIGFyZyA6IGFyZztcbiAgICAgIHBhZF9jaGFyYWN0ZXIgPSBtYXRjaFs0XVxuICAgICAgICA/IG1hdGNoWzRdID09IFwiMFwiXG4gICAgICAgICAgPyBcIjBcIlxuICAgICAgICAgIDogbWF0Y2hbNF0uY2hhckF0KDEpXG4gICAgICAgIDogXCIgXCI7XG4gICAgICBwYWRfbGVuZ3RoID0gbWF0Y2hbNl0gLSBTdHJpbmcoYXJnKS5sZW5ndGg7XG4gICAgICBwYWQgPSBtYXRjaFs2XSA/IHN0cl9yZXBlYXQocGFkX2NoYXJhY3RlciwgcGFkX2xlbmd0aCkgOiBcIlwiO1xuICAgICAgb3V0cHV0LnB1c2gobWF0Y2hbNV0gPyBhcmcgKyBwYWQgOiBwYWQgKyBhcmcpO1xuICAgIH1cbiAgfVxuICByZXR1cm4gb3V0cHV0LmpvaW4oXCJcIik7XG59O1xuXG5zcHJpbnRmLmNhY2hlID0ge307XG5cbnNwcmludGYucGFyc2UgPSBmdW5jdGlvbihmbXQpIHtcbiAgdmFyIF9mbXQgPSBmbXQsXG4gICAgbWF0Y2ggPSBbXSxcbiAgICBwYXJzZV90cmVlID0gW10sXG4gICAgYXJnX25hbWVzID0gMDtcbiAgd2hpbGUgKF9mbXQpIHtcbiAgICBpZiAoKG1hdGNoID0gL15bXlxceDI1XSsvLmV4ZWMoX2ZtdCkpICE9PSBudWxsKSB7XG4gICAgICBwYXJzZV90cmVlLnB1c2gobWF0Y2hbMF0pO1xuICAgIH0gZWxzZSBpZiAoKG1hdGNoID0gL15cXHgyNXsyfS8uZXhlYyhfZm10KSkgIT09IG51bGwpIHtcbiAgICAgIHBhcnNlX3RyZWUucHVzaChcIiVcIik7XG4gICAgfSBlbHNlIGlmIChcbiAgICAgIChtYXRjaCA9IC9eXFx4MjUoPzooWzEtOV1cXGQqKVxcJHxcXCgoW15cXCldKylcXCkpPyhcXCspPygwfCdbXiRdKT8oLSk/KFxcZCspPyg/OlxcLihcXGQrKSk/KFtiLWZvc3V4WF0pLy5leGVjKFxuICAgICAgICBfZm10XG4gICAgICApKSAhPT0gbnVsbFxuICAgICkge1xuICAgICAgaWYgKG1hdGNoWzJdKSB7XG4gICAgICAgIGFyZ19uYW1lcyB8PSAxO1xuICAgICAgICB2YXIgZmllbGRfbGlzdCA9IFtdLFxuICAgICAgICAgIHJlcGxhY2VtZW50X2ZpZWxkID0gbWF0Y2hbMl0sXG4gICAgICAgICAgZmllbGRfbWF0Y2ggPSBbXTtcbiAgICAgICAgaWYgKFxuICAgICAgICAgIChmaWVsZF9tYXRjaCA9IC9eKFthLXpfXVthLXpfXFxkXSopL2kuZXhlYyhyZXBsYWNlbWVudF9maWVsZCkpICE9PSBudWxsXG4gICAgICAgICkge1xuICAgICAgICAgIGZpZWxkX2xpc3QucHVzaChmaWVsZF9tYXRjaFsxXSk7XG4gICAgICAgICAgd2hpbGUgKFxuICAgICAgICAgICAgKHJlcGxhY2VtZW50X2ZpZWxkID0gcmVwbGFjZW1lbnRfZmllbGQuc3Vic3RyaW5nKFxuICAgICAgICAgICAgICBmaWVsZF9tYXRjaFswXS5sZW5ndGhcbiAgICAgICAgICAgICkpICE9PSBcIlwiXG4gICAgICAgICAgKSB7XG4gICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgIChmaWVsZF9tYXRjaCA9IC9eXFwuKFthLXpfXVthLXpfXFxkXSopL2kuZXhlYyhcbiAgICAgICAgICAgICAgICByZXBsYWNlbWVudF9maWVsZFxuICAgICAgICAgICAgICApKSAhPT0gbnVsbFxuICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgIGZpZWxkX2xpc3QucHVzaChmaWVsZF9tYXRjaFsxXSk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKFxuICAgICAgICAgICAgICAoZmllbGRfbWF0Y2ggPSAvXlxcWyhcXGQrKVxcXS8uZXhlYyhyZXBsYWNlbWVudF9maWVsZCkpICE9PSBudWxsXG4gICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgZmllbGRfbGlzdC5wdXNoKGZpZWxkX21hdGNoWzFdKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIHRocm93IFwiW3NwcmludGZdIGh1aD9cIjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhyb3cgXCJbc3ByaW50Zl0gaHVoP1wiO1xuICAgICAgICB9XG4gICAgICAgIG1hdGNoWzJdID0gZmllbGRfbGlzdDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGFyZ19uYW1lcyB8PSAyO1xuICAgICAgfVxuICAgICAgaWYgKGFyZ19uYW1lcyA9PT0gMykge1xuICAgICAgICB0aHJvdyBcIltzcHJpbnRmXSBtaXhpbmcgcG9zaXRpb25hbCBhbmQgbmFtZWQgcGxhY2Vob2xkZXJzIGlzIG5vdCAoeWV0KSBzdXBwb3J0ZWRcIjtcbiAgICAgIH1cbiAgICAgIHBhcnNlX3RyZWUucHVzaChtYXRjaCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRocm93IFwiW3NwcmludGZdIGh1aD9cIjtcbiAgICB9XG4gICAgX2ZtdCA9IF9mbXQuc3Vic3RyaW5nKG1hdGNoWzBdLmxlbmd0aCk7XG4gIH1cbiAgcmV0dXJuIHBhcnNlX3RyZWU7XG59O1xuXG52YXIgdnNwcmludGYgPSBmdW5jdGlvbihmbXQsIGFyZ3YsIF9hcmd2KSB7XG4gIF9hcmd2ID0gYXJndi5zbGljZSgwKTtcbiAgX2FyZ3Yuc3BsaWNlKDAsIDAsIGZtdCk7XG4gIHJldHVybiBzcHJpbnRmLmFwcGx5KG51bGwsIF9hcmd2KTtcbn07XG5cbi8qKlxuICogaGVscGVyc1xuICovXG5mdW5jdGlvbiBnZXRfdHlwZSh2YXJpYWJsZSkge1xuICByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZ1xuICAgIC5jYWxsKHZhcmlhYmxlKVxuICAgIC5zbGljZSg4LCAtMSlcbiAgICAudG9Mb3dlckNhc2UoKTtcbn1cblxuZnVuY3Rpb24gc3RyX3JlcGVhdChpbnB1dCwgbXVsdGlwbGllcikge1xuICBmb3IgKHZhciBvdXRwdXQgPSBbXTsgbXVsdGlwbGllciA+IDA7IG91dHB1dFstLW11bHRpcGxpZXJdID0gaW5wdXQpIHtcbiAgICAvKiBkbyBub3RoaW5nICovXG4gIH1cbiAgcmV0dXJuIG91dHB1dC5qb2luKFwiXCIpO1xufVxuXG5leHBvcnQgeyBzcHJpbnRmLCB2c3ByaW50ZiB9O1xuIiwiaW1wb3J0IHsgVmFsdWVFcnJvciB9IGZyb20gXCIuL2NvcmUvZXhjZXB0aW9uc1wiO1xuaW1wb3J0IHsgc3ByaW50ZiB9IGZyb20gXCIuL3NwcmludGZcIjtcbmNvbnN0IFV0aWxzID0ge307XG5cbi8qKlxuICogQXNzZXJ0cyB0aGF0IGEgcHJlbWlzZSBpcyB0cnVlLlxuICovXG5VdGlscy5hc3NlcnRUcnVlID0gZnVuY3Rpb24ocHJlbWlzZSwgbWVzc2FnZSkge1xuICBpZiAoIXByZW1pc2UpIHtcbiAgICB0aHJvdyBuZXcgVmFsdWVFcnJvcihtZXNzYWdlKTtcbiAgfVxufTtcblxuLyoqXG4gKiBBc3NlcnRzIHRoYXQgYSB2YWx1ZSBpcyBub3QgbnVsbCBvciB1bmRlZmluZWQuXG4gKi9cblV0aWxzLmFzc2VydE5vdE51bGwgPSBmdW5jdGlvbih2YWx1ZSwgbmFtZSkge1xuICBVdGlscy5hc3NlcnRUcnVlKFxuICAgIHZhbHVlICE9PSBudWxsICYmIHR5cGVvZiB2YWx1ZSAhPT0gdW5kZWZpbmVkLFxuICAgIHNwcmludGYoXCIlcyBtdXN0IGJlIHByb3ZpZGVkXCIsIG5hbWUgfHwgXCJBIHZhbHVlXCIpXG4gICk7XG4gIHJldHVybiB2YWx1ZTtcbn07XG5cblV0aWxzLm5vdyA9IGZ1bmN0aW9uKCkge1xuICByZXR1cm4gbmV3IERhdGUoKS5nZXRUaW1lKCk7XG59O1xuXG5VdGlscy5pc1N0cmluZyA9IGZ1bmN0aW9uKHZhbHVlKSB7XG4gIHJldHVybiB0eXBlb2YgdmFsdWUgPT09IFwic3RyaW5nXCI7XG59O1xuXG4vKipcbiAqIEdlbmVyYXRlIGEgcmFuZG9tIElEIGNvbnNpc3Rpbmcgb2YgdGhlIGN1cnJlbnQgdGltZXN0YW1wXG4gKiBhbmQgYSByYW5kb20gYmFzZS0zNiBudW1iZXIgYmFzZWQgb24gTWF0aC5yYW5kb20oKS5cbiAqL1xuVXRpbHMucmFuZG9tSWQgPSBmdW5jdGlvbigpIHtcbiAgcmV0dXJuIHNwcmludGYoXG4gICAgXCIlcy0lc1wiLFxuICAgIFV0aWxzLm5vdygpLFxuICAgIE1hdGgucmFuZG9tKClcbiAgICAgIC50b1N0cmluZygzNilcbiAgICAgIC5zbGljZSgyKVxuICApO1xufTtcblxuLyoqXG4gKiBHZW5lcmF0ZSBhbiBlbnVtIGZyb20gdGhlIGdpdmVuIGxpc3Qgb2YgbG93ZXItY2FzZSBlbnVtIHZhbHVlcyxcbiAqIHdoZXJlIHRoZSBlbnVtIGtleXMgd2lsbCBiZSB1cHBlciBjYXNlLlxuICpcbiAqIENvbnZlcnNpb24gZnJvbSBwYXNjYWwgY2FzZSBiYXNlZCBvbiBjb2RlIGZyb20gaGVyZTpcbiAqIGh0dHA6Ly9zdGFja292ZXJmbG93LmNvbS9xdWVzdGlvbnMvMzA1MjEyMjRcbiAqL1xuVXRpbHMubWFrZUVudW0gPSBmdW5jdGlvbih2YWx1ZXMpIHtcbiAgdmFyIGVudW1PYmogPSB7fTtcblxuICB2YWx1ZXMuZm9yRWFjaChmdW5jdGlvbih2YWx1ZSkge1xuICAgIHZhciBrZXkgPSB2YWx1ZVxuICAgICAgLnJlcGxhY2UoL1xcLj8oW2Etel0rKV8/L2csIGZ1bmN0aW9uKHgsIHkpIHtcbiAgICAgICAgcmV0dXJuIHkudG9VcHBlckNhc2UoKSArIFwiX1wiO1xuICAgICAgfSlcbiAgICAgIC5yZXBsYWNlKC9fJC8sIFwiXCIpO1xuXG4gICAgZW51bU9ialtrZXldID0gdmFsdWU7XG4gIH0pO1xuXG4gIHJldHVybiBlbnVtT2JqO1xufTtcblxuVXRpbHMuY29udGFpbnMgPSBmdW5jdGlvbihvYmosIHZhbHVlKSB7XG4gIGlmIChvYmogaW5zdGFuY2VvZiBBcnJheSkge1xuICAgIHJldHVybiAoXG4gICAgICBVdGlscy5maW5kKG9iaiwgZnVuY3Rpb24odikge1xuICAgICAgICByZXR1cm4gdiA9PT0gdmFsdWU7XG4gICAgICB9KSAhPT0gbnVsbFxuICAgICk7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIHZhbHVlIGluIG9iajtcbiAgfVxufTtcblxuVXRpbHMuZmluZCA9IGZ1bmN0aW9uKGFycmF5LCBwcmVkaWNhdGUpIHtcbiAgZm9yICh2YXIgeCA9IDA7IHggPCBhcnJheS5sZW5ndGg7IHgrKykge1xuICAgIGlmIChwcmVkaWNhdGUoYXJyYXlbeF0pKSB7XG4gICAgICByZXR1cm4gYXJyYXlbeF07XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIG51bGw7XG59O1xuXG5VdGlscy5jb250YWluc1ZhbHVlID0gZnVuY3Rpb24ob2JqLCB2YWx1ZSkge1xuICBpZiAob2JqIGluc3RhbmNlb2YgQXJyYXkpIHtcbiAgICByZXR1cm4gKFxuICAgICAgVXRpbHMuZmluZChvYmosIGZ1bmN0aW9uKHYpIHtcbiAgICAgICAgcmV0dXJuIHYgPT09IHZhbHVlO1xuICAgICAgfSkgIT09IG51bGxcbiAgICApO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiAoXG4gICAgICBVdGlscy5maW5kKFV0aWxzLnZhbHVlcyhvYmopLCBmdW5jdGlvbih2KSB7XG4gICAgICAgIHJldHVybiB2ID09PSB2YWx1ZTtcbiAgICAgIH0pICE9PSBudWxsXG4gICAgKTtcbiAgfVxufTtcblxuLyoqXG4gKiBEZXRlcm1pbmUgaWYgdGhlIGdpdmVuIHZhbHVlIGlzIGEgY2FsbGFibGUgZnVuY3Rpb24gdHlwZS5cbiAqIEJvcnJvd2VkIGZyb20gVW5kZXJzY29yZS5qcy5cbiAqL1xuVXRpbHMuaXNGdW5jdGlvbiA9IGZ1bmN0aW9uKG9iaikge1xuICByZXR1cm4gISEob2JqICYmIG9iai5jb25zdHJ1Y3RvciAmJiBvYmouY2FsbCAmJiBvYmouYXBwbHkpO1xufTtcblxuLyoqXG4gKiBHZXQgYSBsaXN0IG9mIHZhbHVlcyBmcm9tIGEgSmF2YXNjcmlwdCBvYmplY3QgdXNlZFxuICogYXMgYSBoYXNoIG1hcC5cbiAqL1xuVXRpbHMudmFsdWVzID0gZnVuY3Rpb24obWFwKSB7XG4gIHZhciB2YWx1ZXMgPSBbXTtcblxuICBVdGlscy5hc3NlcnROb3ROdWxsKG1hcCwgXCJtYXBcIik7XG5cbiAgZm9yICh2YXIgayBpbiBtYXApIHtcbiAgICB2YWx1ZXMucHVzaChtYXBba10pO1xuICB9XG5cbiAgcmV0dXJuIHZhbHVlcztcbn07XG5cblV0aWxzLndyYXBQcm9taXNlID0gKHByb21pc2UsIGNyZWF0ZVJlc29sdmUsIGNyZWF0ZVJlamVjdCkgPT4ge1xuICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgIHByb21pc2UudGhlbihjcmVhdGVSZXNvbHZlKHJlc29sdmUpKS5jYXRjaChjcmVhdGVSZWplY3QocmVqZWN0KSk7XG4gIH0pO1xufTtcblxuZXhwb3J0IGRlZmF1bHQgVXRpbHM7XG4iLCJpbXBvcnQgVXRpbHMgZnJvbSBcIi4vdXRpbHNcIjtcbi8vUGxhY2Vob2xkZXJcbmV4cG9ydCBjb25zdCBDSEFUX0NPTkZJR1VSQVRJT05TID0ge1xuICBDT05DVVJSRU5UX0NIQVRTOiAxMFxufTtcblxuZXhwb3J0IGNvbnN0IFJFU09VUkNFX1BBVEggPSB7XG4gIE1FU1NBR0U6IFwiL2NvbnRhY3QvY2hhdC9wYXJ0aWNpcGFudC9tZXNzYWdlXCIsXG4gIFRSQU5TQ1JJUFQ6IFwiL2NvbnRhY3QvY2hhdC9wYXJ0aWNpcGFudC90cmFuc2NyaXB0XCIsXG4gIEVWRU5UOiBcIi9jb250YWN0L2NoYXQvcGFydGljaXBhbnQvZXZlbnRcIixcbiAgRElTQ09OTkVDVDogXCIvY29udGFjdC9jaGF0L3BhcnRpY2lwYW50L2Rpc2Nvbm5lY3RcIixcbiAgQ09OTkVDVElPTl9ERVRBSUxTOiBcIi9jb250YWN0L2NoYXQvcGFydGljaXBhbnQvY29ubmVjdGlvbi1kZXRhaWxzXCJcbn07XG5cbmV4cG9ydCBjb25zdCBIVFRQX01FVEhPRFMgPSB7XG4gIFBPU1Q6IFwicG9zdFwiXG59O1xuXG5leHBvcnQgY29uc3QgTUVTU0FHRV9QRVJTSVNURU5DRSA9IHtcbiAgUEVSU0lTVEVEOiBcIlBFUlNJU1RFRFwiLFxuICBOT05fUEVSU0lTVEVEOiBcIk5PTl9QRVJTSVNURURcIlxufTtcblxuZXhwb3J0IGNvbnN0IENPTlRFTlRfVFlQRSA9IHtcbiAgdGV4dFBsYWluOiBcInRleHQvcGxhaW5cIlxufTtcblxuZXhwb3J0IGNvbnN0IFZJU0lCSUxJVFkgPSBVdGlscy5tYWtlRW51bShbXG4gIFwiQUxMXCIsXG4gIFwiTUFOQUdFUlwiLFxuICBcIkFHRU5UXCIsXG4gIFwiQ1VTVE9NRVJcIixcbiAgXCJUSElSRFBBUlRZXCJcbl0pO1xuXG5leHBvcnQgY29uc3QgUEVSU0lTVEVOQ0UgPSBVdGlscy5tYWtlRW51bShbXCJQRVJTSVNURURcIiwgXCJOT05fUEVSU0lTVEVEXCJdKTtcblxuZXhwb3J0IGNvbnN0IFNUQUdFX0NPTkZJRyA9IHtcbiAgUFJPRDoge1xuICAgIGludm9rZVVybDogXCJodHRwczovL3Z4Z2gzdGZ5dGcuZXhlY3V0ZS1hcGkudXMtd2VzdC0yLmFtYXpvbmF3cy5jb20vU3RhZ2VcIlxuICAgIC8vYmVsb3cgaXMgZ2F1dGFtJ3MgZGV2IHVybFxuICAgIC8vaW52b2tlVXJsOiBcImh0dHBzOi8vajFsdGRqNnNmNi5leGVjdXRlLWFwaS51cy13ZXN0LTIuYW1hem9uYXdzLmNvbS9TdGFnZVwiXG4gIH1cbn07XG5cbmV4cG9ydCBjb25zdCBNUVRUX0NPTlNUQU5UUyA9IHtcbiAgS0VFUF9BTElWRTogMzAsXG4gIENPTk5FQ1RfVElNRU9VVDogNjBcbn07XG5cbmV4cG9ydCBjb25zdCBTRVNTSU9OX1RZUEVTID0ge1xuICBBR0VOVDogXCJBR0VOVFwiLFxuICBDVVNUT01FUjogXCJDVVNUT01FUlwiXG59O1xuXG5leHBvcnQgY29uc3QgQ0hBVF9FVkVOVFMgPSB7XG4gIElOQ09NSU5HX01FU1NBR0U6IFwiSU5DT01JTkdfTUVTU0FHRVwiLFxuICBJTkNPTUlOR19UWVBJTkc6IFwiSU5DT01JTkdfVFlQSU5HXCIsXG4gIENPTk5FQ1RJT05fRVNUQUJMSVNIRUQ6IFwiQ09OTkVDVElPTl9FU1RBQkxJU0hFRFwiLFxuICBDT05ORUNUSU9OX0JST0tFTjogXCJDT05ORUNUSU9OX0JST0tFTlwiXG59O1xuIiwiaW1wb3J0IHtcbiAgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uLFxuICBVbkltcGxlbWVudGVkTWV0aG9kRXhjZXB0aW9uXG59IGZyb20gXCIuLi9jb3JlL2V4Y2VwdGlvbnNcIjtcbmltcG9ydCB7IG1ha2VIdHRwUmVxdWVzdCB9IGZyb20gXCIuL1htbEh0dHBDbGllbnRcIjtcbmltcG9ydCB7XG4gIFJFU09VUkNFX1BBVEgsXG4gIEhUVFBfTUVUSE9EUyxcbiAgU1RBR0VfQ09ORklHLFxuICBDT05URU5UX1RZUEUsXG4gIE1FU1NBR0VfUEVSU0lTVEVOQ0Vcbn0gZnJvbSBcIi4uL2NvbnN0YW50c1wiO1xuXG5jbGFzcyBDaGF0Q2xpZW50RmFjdG9yeUltcGwge1xuICBnZXRDbGllbnQoc3RhZ2UpIHtcbiAgICBpZiAoXCJQUk9EXCIgPT09IHN0YWdlKSB7XG4gICAgICByZXR1cm4gbmV3IEh0dHBDaGF0Q2xpZW50KHtcbiAgICAgICAgc3RhZ2VDb25maWc6IFNUQUdFX0NPTkZJRy5QUk9EXG4gICAgICB9KTtcbiAgICB9XG4gICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbihcbiAgICAgIFwidW5yZWNvZ25pemVkIHN0YWdlIGluIENoYXRDbGllbnRGYWN0b3J5SW1wbFwiXG4gICAgKTtcbiAgfVxufVxuXG4vKmVzbGludC1kaXNhYmxlKi9cbmNsYXNzIENoYXRDbGllbnQge1xuICBzZW5kTWVzc2FnZShwYXJ0aWNpcGFudFRva2VuLCBtZXNzYWdlLCB0eXBlKSB7XG4gICAgdGhyb3cgbmV3IFVuSW1wbGVtZW50ZWRNZXRob2RFeGNlcHRpb24oXCJzZW5kVGV4dE1lc3NhZ2UgaW4gQ2hhdENsaWVudFwiKTtcbiAgfVxuXG4gIGRpc2Nvbm5lY3RDaGF0KHBhcnRpY2lwYW50VG9rZW4pIHtcbiAgICB0aHJvdyBuZXcgVW5JbXBsZW1lbnRlZE1ldGhvZEV4Y2VwdGlvbihcImRpc2Nvbm5lY3RDaGF0IGluIENoYXRDbGllbnRcIik7XG4gIH1cblxuICBzZW5kRXZlbnQoZXZlbnRUeXBlLCBtZXNzYWdlSWRzLCB2aXNpYmlsaXR5LCBwZXJzaXN0ZW5jZSkge1xuICAgIHRocm93IG5ldyBVbkltcGxlbWVudGVkTWV0aG9kRXhjZXB0aW9uKFwic2VuZEV2ZW50IGluIENoYXRDbGllbnRcIik7XG4gIH1cblxuICBjcmVhdGVDb25uZWN0aW9uRGV0YWlscyhwYXJ0aWNpcGFudFRva2VuKSB7XG4gICAgdGhyb3cgbmV3IFVuSW1wbGVtZW50ZWRNZXRob2RFeGNlcHRpb24oXCJyZWNvbm5lY3RDaGF0IGluIENoYXRDbGllbnRcIik7XG4gIH1cbn1cbi8qZXNsaW50LWVuYWJsZSovXG5cbnZhciBjcmVhdGVEZWZhdWx0SGVhZGVycyA9ICgpID0+ICh7XG4gIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxuICBBY2NlcHQ6IFwiYXBwbGljYXRpb24vanNvblwiXG59KTtcblxuY2xhc3MgSHR0cENoYXRDbGllbnQgZXh0ZW5kcyBDaGF0Q2xpZW50IHtcbiAgY29uc3RydWN0b3IoYXJncykge1xuICAgIHN1cGVyKCk7XG4gICAgdGhpcy5pbnZva2VVcmwgPSBhcmdzLnN0YWdlQ29uZmlnLmludm9rZVVybDtcbiAgICB0aGlzLmNhbGxIdHRwQ2xpZW50ID0gbWFrZUh0dHBSZXF1ZXN0O1xuICB9XG5cbiAgc2VuZE1lc3NhZ2UoY29ubmVjdGlvblRva2VuLCBtZXNzYWdlLCB0eXBlKSB7XG4gICAgY29uc29sZS5sb2codHlwZSk7XG4gICAgdmFyIGJvZHkgPSB7XG4gICAgICBNZXNzYWdlOiB7XG4gICAgICAgIENvbnRlbnRUeXBlOiBDT05URU5UX1RZUEUudGV4dFBsYWluLFxuICAgICAgICBDb250ZW50OiBtZXNzYWdlLFxuICAgICAgICBQZXJzaXN0ZW5jZTogTUVTU0FHRV9QRVJTSVNURU5DRS5QRVJTSVNURURcbiAgICAgIH1cbiAgICB9O1xuICAgIHZhciByZXF1ZXN0SW5wdXQgPSB7XG4gICAgICBtZXRob2Q6IEhUVFBfTUVUSE9EUy5QT1NULFxuICAgICAgaGVhZGVyczogeyBDb25uZWN0aW9uVG9rZW46IGNvbm5lY3Rpb25Ub2tlbiB9LFxuICAgICAgdXJsOiB0aGlzLmludm9rZVVybCArIFJFU09VUkNFX1BBVEguTUVTU0FHRSxcbiAgICAgIGJvZHk6IGJvZHlcbiAgICB9O1xuICAgIHJldHVybiB0aGlzLl9jYWxsSHR0cENsaWVudChyZXF1ZXN0SW5wdXQpO1xuICB9XG5cbiAgZ2V0VHJhbnNjcmlwdChjb25uZWN0aW9uVG9rZW4sIGFyZ3MpIHtcbiAgICAvL3ZhciBzZWxmID0gdGhpcztcbiAgICAvL3ZhciBoZWFkZXJzID0gdGhpcy5fY3JlYXRlRGVmYXVsdEhlYWRlcnMoKTtcbiAgICAvL2hlYWRlcnMuQ29ubmVjdGlvblRva2VuID0gY29ubmVjdGlvblRva2VuO1xuICAgIC8vdmFyIGJvZHkgPSBKU09OLnN0cmluZ2lmeShhcmdzKTtcbiAgICB2YXIgcmVxdWVzdElucHV0ID0ge1xuICAgICAgbWV0aG9kOiBIVFRQX01FVEhPRFMuUE9TVCxcbiAgICAgIGhlYWRlcnM6IHsgQ29ubmVjdGlvblRva2VuOiBjb25uZWN0aW9uVG9rZW4gfSxcbiAgICAgIHVybDogdGhpcy5pbnZva2VVcmwgKyBSRVNPVVJDRV9QQVRILlRSQU5TQ1JJUFQsXG4gICAgICBib2R5OiBhcmdzXG4gICAgfTtcbiAgICByZXR1cm4gdGhpcy5fY2FsbEh0dHBDbGllbnQocmVxdWVzdElucHV0KTtcbiAgfVxuXG4gIHNlbmRFdmVudChjb25uZWN0aW9uVG9rZW4sIGV2ZW50VHlwZSwgbWVzc2FnZUlkcywgdmlzaWJpbGl0eSwgcGVyc2lzdGVuY2UpIHtcbiAgICBjb25zb2xlLmxvZyhtZXNzYWdlSWRzKTtcbiAgICBjb25zb2xlLmxvZyhwZXJzaXN0ZW5jZSk7XG4gICAgLy92YXIgc2VsZiA9IHRoaXM7XG4gICAgLy92YXIgaGVhZGVycyA9IHRoaXMuX2NyZWF0ZURlZmF1bHRIZWFkZXJzKCk7XG4gICAgLy9oZWFkZXJzLkNvbm5lY3Rpb25Ub2tlbiA9IGNvbm5lY3Rpb25Ub2tlbjtcbiAgICB2YXIgYm9keSA9IHtcbiAgICAgIFBhcnRpY2lwYW50RXZlbnQ6IHtcbiAgICAgICAgVmlzaWJpbGl0eTogdmlzaWJpbGl0eSxcbiAgICAgICAgUGFydGljaXBhbnRFdmVudFR5cGU6IGV2ZW50VHlwZVxuICAgICAgICAvL01lc3NhZ2VJZExpc3Q6IG1lc3NhZ2VJZHNcbiAgICAgIH1cbiAgICB9O1xuICAgIHZhciByZXF1ZXN0SW5wdXQgPSB7XG4gICAgICBtZXRob2Q6IEhUVFBfTUVUSE9EUy5QT1NULFxuICAgICAgaGVhZGVyczogeyBDb25uZWN0aW9uVG9rZW46IGNvbm5lY3Rpb25Ub2tlbiB9LFxuICAgICAgdXJsOiB0aGlzLmludm9rZVVybCArIFJFU09VUkNFX1BBVEguRVZFTlQsXG4gICAgICBib2R5OiBib2R5XG4gICAgfTtcbiAgICByZXR1cm4gdGhpcy5fY2FsbEh0dHBDbGllbnQocmVxdWVzdElucHV0KTtcbiAgfVxuXG4gIGRpc2Nvbm5lY3RDaGF0KGNvbm5lY3Rpb25Ub2tlbikge1xuICAgIC8vdmFyIHNlbGYgPSB0aGlzO1xuICAgIC8vdmFyIGhlYWRlcnMgPSB0aGlzLl9jcmVhdGVEZWZhdWx0SGVhZGVycygpO1xuICAgIC8vaGVhZGVycy5Db25uZWN0aW9uVG9rZW4gPSBjb25uZWN0aW9uVG9rZW47XG4gICAgLy92YXIgYm9keSA9IEpTT04uc3RyaW5naWZ5KHt9KTtcbiAgICB2YXIgcmVxdWVzdElucHV0ID0ge1xuICAgICAgbWV0aG9kOiBIVFRQX01FVEhPRFMuUE9TVCxcbiAgICAgIGhlYWRlcnM6IHsgQ29ubmVjdGlvblRva2VuOiBjb25uZWN0aW9uVG9rZW4gfSxcbiAgICAgIHVybDogdGhpcy5pbnZva2VVcmwgKyBSRVNPVVJDRV9QQVRILkRJU0NPTk5FQ1QsXG4gICAgICBib2R5OiB7fVxuICAgIH07XG4gICAgcmV0dXJuIHRoaXMuX2NhbGxIdHRwQ2xpZW50KHJlcXVlc3RJbnB1dCk7XG4gIH1cblxuICBjcmVhdGVDb25uZWN0aW9uRGV0YWlscyhwYXJ0aWNpcGFudFRva2VuKSB7XG4gICAgLy92YXIgc2VsZiA9IHRoaXM7XG4gICAgLy92YXIgaGVhZGVycyA9IHRoaXMuX2NyZWF0ZURlZmF1bHRIZWFkZXJzKCk7XG4gICAgLy9oZWFkZXJzLlBhcnRpY2lwYW50VG9rZW4gPSBwYXJ0aWNpcGFudFRva2VuO1xuICAgIC8vdmFyIGJvZHkgPSBKU09OLnN0cmluZ2lmeSh7fSk7XG4gICAgdmFyIHJlcXVlc3RJbnB1dCA9IHtcbiAgICAgIG1ldGhvZDogSFRUUF9NRVRIT0RTLlBPU1QsXG4gICAgICBoZWFkZXJzOiB7IFBhcnRpY2lwYW50VG9rZW46IHBhcnRpY2lwYW50VG9rZW4gfSxcbiAgICAgIHVybDogdGhpcy5pbnZva2VVcmwgKyBSRVNPVVJDRV9QQVRILkNPTk5FQ1RJT05fREVUQUlMUyxcbiAgICAgIGJvZHk6IHt9XG4gICAgfTtcbiAgICByZXR1cm4gdGhpcy5fY2FsbEh0dHBDbGllbnQocmVxdWVzdElucHV0KTtcbiAgfVxuXG4gIF9jYWxsSHR0cENsaWVudChyZXF1ZXN0SW5wdXQpIHtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgcmVxdWVzdElucHV0LmhlYWRlcnMgPSBPYmplY3QuYXNzaWduKFxuICAgICAgcmVxdWVzdElucHV0LmhlYWRlcnMsXG4gICAgICBjcmVhdGVEZWZhdWx0SGVhZGVycygpXG4gICAgKTtcbiAgICByZXF1ZXN0SW5wdXQuYm9keSA9IEpTT04uc3RyaW5naWZ5KHJlcXVlc3RJbnB1dC5ib2R5KTtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICB2YXIgc3VjY2VzcyA9IHJlcXVlc3QgPT4ge1xuICAgICAgICB2YXIgcmVzcG9uc2VPYmplY3QgPSB7fTtcbiAgICAgICAgcmVzcG9uc2VPYmplY3QuZGF0YSA9IEpTT04ucGFyc2UocmVxdWVzdC5yZXNwb25zZVRleHQpO1xuICAgICAgICByZXNvbHZlKHJlc3BvbnNlT2JqZWN0KTtcbiAgICAgIH07XG4gICAgICB2YXIgZmFpbHVyZSA9IHJlcXVlc3QgPT4ge1xuICAgICAgICB2YXIgZXJyb3JPYmplY3QgPSB7fTtcbiAgICAgICAgZXJyb3JPYmplY3Quc3RhdHVzVGV4dCA9IHJlcXVlc3Quc3RhdHVzVGV4dDtcbiAgICAgICAgcmVqZWN0KGVycm9yT2JqZWN0KTtcbiAgICAgIH07XG4gICAgICBzZWxmLmNhbGxIdHRwQ2xpZW50KHJlcXVlc3RJbnB1dCwgc3VjY2VzcywgZmFpbHVyZSk7XG4gICAgfSk7XG4gIH1cbn1cblxudmFyIENoYXRDbGllbnRGYWN0b3J5ID0gbmV3IENoYXRDbGllbnRGYWN0b3J5SW1wbCgpO1xuZXhwb3J0IHsgQ2hhdENsaWVudEZhY3RvcnkgfTtcbiIsImltcG9ydCB7IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiB9IGZyb20gXCIuL2V4Y2VwdGlvbnNcIjtcbmltcG9ydCBVdGlscyBmcm9tIFwiLi4vdXRpbHNcIjtcbmltcG9ydCB7IENPTlRFTlRfVFlQRSwgVklTSUJJTElUWSwgUEVSU0lTVEVOQ0UgfSBmcm9tIFwiLi4vY29uc3RhbnRzXCI7XG5cbmNsYXNzIENoYXRDb250cm9sbGVyQXJnc1ZhbGlkYXRvciB7XG4gIF9hc3NlcnRJc05vbkVtcHR5U3RyaW5nKHZhbHVlLCBrZXkpIHtcbiAgICBpZiAoIXZhbHVlIHx8IHR5cGVvZiB2YWx1ZSAhPT0gXCJzdHJpbmdcIikge1xuICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbihrZXkgKyBcIiBpcyBub3QgYSBub24tZW1wdHkgc3RyaW5nIVwiKTtcbiAgICB9XG4gIH1cblxuICBfYXNzZXJ0SXNMaXN0KHZhbHVlLCBrZXkpIHtcbiAgICBpZiAoIUFycmF5LmlzQXJyYXkodmFsdWUpKSB7XG4gICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uKGtleSArIFwiIGlzIG5vdCBhbiBhcnJheVwiKTtcbiAgICB9XG4gIH1cblxuICBfYXNzZXJ0SXNFbnVtKHZhbHVlLCBhbGxvd2VkVmFsdWVzLCBrZXkpIHtcbiAgICB2YXIgaTtcbiAgICBmb3IgKGkgPSAwOyBpIDwgYWxsb3dlZFZhbHVlcy5sZW5ndGg7IGkrKykge1xuICAgICAgaWYgKGFsbG93ZWRWYWx1ZXNbaV0gPT09IHZhbHVlKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICB9XG4gICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbihcbiAgICAgIGtleSArIFwiIHBhc3NlZCBpcyBub3QgdmFsaWQuIFwiICsgXCJBbGxvd2VkIHZhbHVlcyBhcmU6IFwiICsgYWxsb3dlZFZhbHVlc1xuICAgICk7XG4gIH1cblxuICBfYXNzZXJ0SXNPYmplY3QodmFsdWUsIGtleSkge1xuICAgIGlmICh0eXBlb2YgdmFsdWUgIT09IFwib2JqZWN0XCIpIHtcbiAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24oa2V5ICsgXCIgaXMgbm90IGFuIG9iamVjdCFcIik7XG4gICAgfVxuICB9XG5cbiAgLyplc2xpbnQtZGlzYWJsZSBuby11bnVzZWQtdmFycyovXG4gIHZhbGlkYXRlTmV3Q29udHJvbGxlckRldGFpbHMoY2hhdERldGFpbHMpIHtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuICAvKmVzbGludC1lbmFibGUgbm8tdW51c2VkLXZhcnMqL1xuXG4gIHZhbGlkYXRlU2VuZE1lc3NhZ2UobWVzc2FnZSwgdHlwZSkge1xuICAgIGlmICghVXRpbHMuaXNTdHJpbmcobWVzc2FnZSkpIHtcbiAgICAgIHRoaXMuX2Fzc2VydElzT2JqZWN0KG1lc3NhZ2UsIFwibWVzc2FnZVwiKTtcbiAgICB9XG4gICAgdGhpcy5fYXNzZXJ0SXNFbnVtKHR5cGUsIE9iamVjdC52YWx1ZXMoQ09OVEVOVF9UWVBFKSwgXCJ0eXBlXCIpO1xuICB9XG5cbiAgLyplc2xpbnQtZGlzYWJsZSBuby11bnVzZWQtdmFycyovXG4gIHZhbGlkYXRlQ29ubmVjdENoYXQoYXJncykge1xuICAgIHJldHVybiB0cnVlO1xuICB9XG4gIC8qZXNsaW50LWVuYWJsZSBuby11bnVzZWQtdmFycyovXG5cbiAgdmFsaWRhdGVTZW5kRXZlbnQoYXJncykge1xuICAgIHRoaXMuX2Fzc2VydElzTm9uRW1wdHlTdHJpbmcoYXJncy5ldmVudFR5cGUsIFwiZXZlbnRUeXBlXCIpO1xuICAgIGlmIChhcmdzLm1lc3NhZ2VJZHMgIT09IHVuZGVmaW5lZCkge1xuICAgICAgdGhpcy5fYXNzZXJ0SXNMaXN0KGFyZ3MubWVzc2FnZUlkcyk7XG4gICAgfVxuICAgIGlmIChhcmdzLnZpc2liaWxpdHkgIT09IHVuZGVmaW5lZCkge1xuICAgICAgdGhpcy5fYXNzZXJ0SXNFbnVtKFxuICAgICAgICBhcmdzLnZpc2liaWxpdHksXG4gICAgICAgIE9iamVjdC52YWx1ZXMoVklTSUJJTElUWSksXG4gICAgICAgIFwidmlzaWJpbGl0eVwiXG4gICAgICApO1xuICAgIH1cbiAgICBpZiAoYXJncy5wZXJzaXN0ZW5jZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICB0aGlzLl9hc3NlcnRJc0VudW0oXG4gICAgICAgIGFyZ3MucGVyc2lzdGVuY2UsXG4gICAgICAgIE9iamVjdC52YWx1ZXMoUEVSU0lTVEVOQ0UpLFxuICAgICAgICBcInBlcnNpc3RlbmNlXCJcbiAgICAgICk7XG4gICAgfVxuICB9XG5cbiAgLy8gVE9ETzogTm90IHN1cmUgYWJvdXQgdGhpcyBBUEkuXG4gIC8qZXNsaW50LWRpc2FibGUgbm8tdW51c2VkLXZhcnMqL1xuICB2YWxpZGF0ZUdldE1lc3NhZ2VzKGFyZ3MpIHtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuICAvKmVzbGludC1lbmFibGUgbm8tdW51c2VkLXZhcnMqL1xufVxuXG5jbGFzcyBDaGF0U2VydmljZUFyZ3NWYWxpZGF0b3IgZXh0ZW5kcyBDaGF0Q29udHJvbGxlckFyZ3NWYWxpZGF0b3Ige1xuICB2YWxpZGF0ZUNoYXREZXRhaWxzKGNoYXREZXRhaWxzKSB7XG4gICAgdGhpcy5fYXNzZXJ0SXNPYmplY3QoY2hhdERldGFpbHMsIFwiY2hhdERldGFpbHNcIik7XG4gICAgdGhpcy5fYXNzZXJ0SXNOb25FbXB0eVN0cmluZyhcbiAgICAgIGNoYXREZXRhaWxzLmluaXRpYWxDb250YWN0SWQsXG4gICAgICBcImNoYXREZXRhaWxzLmluaXRpYWxDb250YWN0SWRcIlxuICAgICk7XG4gICAgdGhpcy5fYXNzZXJ0SXNOb25FbXB0eVN0cmluZyhcbiAgICAgIGNoYXREZXRhaWxzLmNvbnRhY3RJZCxcbiAgICAgIFwiY2hhdERldGFpbHMuY29udGFjdElkXCJcbiAgICApO1xuICAgIHRoaXMuX2Fzc2VydElzTm9uRW1wdHlTdHJpbmcoXG4gICAgICBjaGF0RGV0YWlscy5wYXJ0aWNpcGFudElkLFxuICAgICAgXCJjaGF0RGV0YWlscy5wYXJ0aWNpcGFudElkXCJcbiAgICApO1xuICAgIGlmIChjaGF0RGV0YWlscy5jb25uZWN0aW9uRGV0YWlscykge1xuICAgICAgdGhpcy5fYXNzZXJ0SXNPYmplY3QoXG4gICAgICAgIGNoYXREZXRhaWxzLmNvbm5lY3Rpb25EZXRhaWxzLFxuICAgICAgICBcImNoYXREZXRhaWxzLmNvbm5lY3Rpb25EZXRhaWxzXCJcbiAgICAgICk7XG4gICAgICB0aGlzLl9hc3NlcnRJc05vbkVtcHR5U3RyaW5nKFxuICAgICAgICBjaGF0RGV0YWlscy5jb25uZWN0aW9uRGV0YWlscy5QcmVTaWduZWRDb25uZWN0aW9uVXJsLFxuICAgICAgICBcImNoYXREZXRhaWxzLmNvbm5lY3Rpb25EZXRhaWxzLlByZVNpZ25lZENvbm5lY3Rpb25VcmxcIlxuICAgICAgKTtcbiAgICAgIHRoaXMuX2Fzc2VydElzTm9uRW1wdHlTdHJpbmcoXG4gICAgICAgIGNoYXREZXRhaWxzLmNvbm5lY3Rpb25EZXRhaWxzLkNvbm5lY3Rpb25JZCxcbiAgICAgICAgXCJjaGF0RGV0YWlscy5jb25uZWN0aW9uRGV0YWlscy5Db25uZWN0aW9uSWRcIlxuICAgICAgKTtcbiAgICAgIHRoaXMuX2Fzc2VydElzTm9uRW1wdHlTdHJpbmcoXG4gICAgICAgIGNoYXREZXRhaWxzLmNvbm5lY3Rpb25EZXRhaWxzLmNvbm5lY3Rpb25Ub2tlbixcbiAgICAgICAgXCJjaGF0RGV0YWlscy5jb25uZWN0aW9uRGV0YWlscy5jb25uZWN0aW9uVG9rZW5cIlxuICAgICAgKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5fYXNzZXJ0SXNOb25FbXB0eVN0cmluZyhcbiAgICAgICAgY2hhdERldGFpbHMucGFydGljaXBhbnRUb2tlbixcbiAgICAgICAgXCJjaGF0RGV0YWlscy5wYXJ0aWNpcGFudFRva2VuXCJcbiAgICAgICk7XG4gICAgfVxuICB9XG5cbiAgdmFsaWRhdGVJbml0aWF0ZUNoYXRSZXNwb25zZSgpIHtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxufVxuXG5leHBvcnQgeyBDaGF0U2VydmljZUFyZ3NWYWxpZGF0b3IgfTtcbiIsImltcG9ydCB7XG4gIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbixcbiAgVW5JbXBsZW1lbnRlZE1ldGhvZEV4Y2VwdGlvblxufSBmcm9tIFwiLi9leGNlcHRpb25zXCI7XG5cbmNsYXNzIENoYXRDb25uZWN0aW9uTWFuYWdlciB7XG4gIGNyZWF0ZU5ld01xdHRDb25uZWN0aW9uUHJvdmlkZXIoY29ubmVjdGlvbkFyZ3MsIHR5cGUpIHtcbiAgICBzd2l0Y2ggKHR5cGUpIHtcbiAgICAgIGNhc2UgXCJQYWhvTXF0dENvbm5lY3Rpb25cIjpcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKGNhbGxiYWNrKSB7XG4gICAgICAgICAgY29ubmVjdGlvbkFyZ3MuY2FsbGJhY2sgPSBjYWxsYmFjaztcbiAgICAgICAgICByZXR1cm4gbmV3IFBhaG9NcXR0Q29ubmVjdGlvbihjb25uZWN0aW9uQXJncyk7XG4gICAgICAgIH07XG4gICAgfVxuICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24oXG4gICAgICBcInR5cGUgaW4gQ2hhdENvbm5lY3Rpb25NYW5hZ2VyLmNyZWF0ZU5ld01xdHRDb25uZWN0aW9uUHJvdmlkZXJcIixcbiAgICAgIHR5cGVcbiAgICApO1xuICB9XG59XG5cbi8vIFdoYXQgaXMgdGhlIGV4cGVjdGF0aW9uIGZyb20gdGhpcyBjbGFzcz9cbi8vIFRoaXMgc2hvdWxkIHByb3ZpZGUgYW4gaW50ZXJmYWNlIGZvciBjb25uZWN0aW5nICsgc3Vic2NyaWJpbmcgJiYgZGlzY29ubmVjdGluZyArIHVuc3Vic2NyaWJpbmcgdG8gZW5kcG9pbnQgKyB0b3BpYy5cbi8vIFRoaXMgY2xhc3Mgc2hvdWxkIGNhbGwgYmFja1xuLyplc2xpbnQtZGlzYWJsZSBuby11bnVzZWQtdmFycyovXG5jbGFzcyBNUVRUQ2xpZW50IHtcbiAgLyoqXG4gICAqIEBwYXJhbSBjb25uZWN0aW9uT3B0aW9ucyAob2JqZWN0KSAtXG4gICAqICAgICAgY29ubmVjdE9wdGlvbnMudXNlU1NMIC0gaWYgcHJlc2VudCBhbmQgdHJ1ZSwgdXNlIGFuIFNTTCBXZWJzb2NrZXQgY29ubmVjdGlvbi5cbiAgICogICAgICBjb25uZWN0T3B0aW9ucy5rZWVwQWxpdmVJbnRlcnZhbCAtIHRoZSBzZXJ2ZXIgZGlzY29ubmVjdHMgdGhpcyBjbGllbnQgaWYgdGhlcmUgaXMgbm8gYWN0aXZpdHkgZm9yIHRoaXMgbnVtYmVyIG9mIHNlY29uZHMuXG4gICAqICAgICAgY29ubmVjdE9wdGlvbnMucmVjb25uZWN0IC0gU2V0cyB3aGV0aGVyIHRoZSBjbGllbnQgd2lsbCBhdXRvbWF0aWNhbGx5IGF0dGVtcHQgdG8gcmVjb25uZWN0XG4gICAqICAgICAgY29ubmVjdE9wdGlvbnMubXF0dFZlcnNpb24gLSBUaGUgdmVyc2lvbiBvZiBNUVRUIHRvIHVzZSB0byBjb25uZWN0IHRvIHRoZSBNUVRUIEJyb2tlci5cbiAgICogICAgICBjb25uZWN0T3B0aW9ucy50aW1lb3V0IC0gSWYgdGhlIGNvbm5lY3QgaGFzIG5vdCBzdWNjZWVkZWQgd2l0aGluIHRoaXMgbnVtYmVyIG9mIHNlY29uZHMsIGl0IGlzIGRlZW1lZCB0byBoYXZlIGZhaWxlZC5cbiAgICpcbiAgICogQHJldHVybnMgYSBQcm9taXNlIG9iamVjdCAtXG4gICAqICAgICAgcmVzcG9uc2UgPSB7fVxuICAgKiAgICAgIGVycm9yID0ge1wicmVhc29uXCI6IHt9IC8vIEltcGxlbWVudGF0aW9uIHNwZWNpZmljXG4gICAqICAgICAgICAgIH1cbiAgICovXG4gIGNvbm5lY3QoY29ubmVjdE9wdGlvbnMpIHtcbiAgICB0aHJvdyBuZXcgVW5JbXBsZW1lbnRlZE1ldGhvZEV4Y2VwdGlvbihcImNvbm5lY3QgaW4gSW90Q2xpZW50XCIpO1xuICB9XG5cbiAgZGlzY29ubmVjdCgpIHtcbiAgICB0aHJvdyBuZXcgVW5JbXBsZW1lbnRlZE1ldGhvZEV4Y2VwdGlvbihcImNvbm5lY3QgaW4gSW90Q2xpZW50XCIpO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSBzdWJzY3JpYmVPcHRpb25zIChvYmplY3QpIC1cbiAgICogICAgICBzdWJzY3JpYmVPcHRpb25zLnFvcyAtIHRoZSBtYWl4aW11bSBxb3Mgb2YgYW55IHB1YmxpY2F0aW9ucyBzZW50IGFzIGEgcmVzdWx0IG9mIG1ha2luZyB0aGlzIHN1YnNjcmlwdGlvbi5cbiAgICogICAgICBjb25uZWN0T3B0aW9ucy50aW1lb3V0IC0gd2hpY2gsIGlmIHByZXNlbnQsIGRldGVybWluZXMgdGhlIG51bWJlciBvZiBzZWNvbmRzIGFmdGVyIHdoaWNoIHRoZSBvbkZhaWx1cmUgY2FsYmFjayBpcyBjYWxsZWQuXG4gICAqICAgICAgICAgIFRoZSBwcmVzZW5jZSBvZiBhIHRpbWVvdXQgZG9lcyBub3QgcHJldmVudCB0aGUgb25TdWNjZXNzIGNhbGxiYWNrIGZyb20gYmVpbmcgY2FsbGVkIHdoZW4gdGhlIHN1YnNjcmliZSBjb21wbGV0ZXMuXG4gICAqXG4gICAqIEByZXR1cm5zIGEgUHJvbWlzZSBvYmplY3QgLVxuICAgKiAgICAgIHJlc3BvbnNlID0ge1widG9waWNcIjogPHN0cmluZz4sXG4gICAqICAgICAgICAgICAgICAgICAgXCJxb3NcIjogcW9zLFxuICAgKiAgICAgIH1cbiAgICogICAgICBlcnJvciA9IHtcInRvcGljXCI6IDxzdHJpbmc+LFxuICAgKiAgICAgICAgICBcImVycm9yXCI6IHt9IC8vIEltcGxlbWVudGF0aW9uIHNwZWNpZmljXG4gICAqICAgICAgfVxuICAgKi9cbiAgc3Vic2NyaWJlKHRvcGljLCBzdWJzY3JpYmVPcHRpb25zKSB7XG4gICAgdGhyb3cgbmV3IFVuSW1wbGVtZW50ZWRNZXRob2RFeGNlcHRpb24oXCJjb25uZWN0IGluIElvdENsaWVudFwiKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0gc3Vic2NyaWJlT3B0aW9ucyAob2JqZWN0KSAtXG4gICAqICAgICAgY29ubmVjdE9wdGlvbnMudGltZW91dCAtIHdoaWNoLCBpZiBwcmVzZW50LCBkZXRlcm1pbmVzIHRoZSBudW1iZXIgb2Ygc2Vjb25kcyBhZnRlciB3aGljaCB0aGUgb25GYWlsdXJlIGNhbGxiYWNrIGlzIGNhbGxlZC5cbiAgICogICAgICAgICAgVGhlIHByZXNlbmNlIG9mIGEgdGltZW91dCBkb2VzIG5vdCBwcmV2ZW50IHRoZSBvblN1Y2Nlc3MgY2FsbGJhY2sgZnJvbSBiZWluZyBjYWxsZWQgd2hlbiB0aGUgdW5zdWJzY3JpYmUgY29tcGxldGVzLlxuICAgKlxuICAgKiBAcmV0dXJucyBhIFByb21pc2Ugb2JqZWN0IC1cbiAgICogICAgICByZXNwb25zZSA9IHtcInRvcGljXCI6IDxzdHJpbmc+LFxuICAgKiAgICAgICAgICAgICAgICAgIFwicW9zXCI6IHFvcyxcbiAgICogICAgICB9XG4gICAqICAgICAgZXJyb3IgPSB7XCJ0b3BpY1wiOiA8c3RyaW5nPixcbiAgICogICAgICAgICAgXCJlcnJvclwiOiB7fSAvLyBJbXBsZW1lbnRhdGlvbiBzcGVjaWZpY1xuICAgKiAgICAgIH1cbiAgICpcbiAgICovXG4gIHVuc3Vic2NyaWJlKHRvcGljLCB1bnN1YnNjcmliZU9wdGlvbnMpIHtcbiAgICB0aHJvdyBuZXcgVW5JbXBsZW1lbnRlZE1ldGhvZEV4Y2VwdGlvbihcImNvbm5lY3QgaW4gSW90Q2xpZW50XCIpO1xuICB9XG59XG4vKmVzbGludC1lbmFibGUgbm8tdW51c2VkLXZhcnMqL1xuXG52YXIgTXF0dENvbm5lY3Rpb25TdGF0dXMgPSBPYmplY3QuZnJlZXplKHtcbiAgTmV2ZXJDb25uZWN0ZWQ6IFwiTmV2ZXJDb25uZWN0ZWRcIixcbiAgQ29ubmVjdGluZzogXCJDb25uZWN0aW5nXCIsXG4gIENvbm5lY3RlZDogXCJDb25uZWN0ZWRcIixcbiAgRGlzY29ubmVjdGVkUmV0cnlpbmc6IFwiRGlzY29ubmVjdGVkUmV0cnlpbmdcIixcbiAgRGlzY29ubmVjdGVkOiBcIkRpc2Nvbm5lY3RlZFwiLFxuICBSZWNvbm5lY3Rpbmc6IFwiUmVjb25uZWN0aW5nXCJcbn0pO1xuXG52YXIgTXF0dEV2ZW50cyA9IE9iamVjdC5mcmVlemUoe1xuICBNRVNTQUdFOiBcIk1lc3NhZ2VcIiwgLy8gdG9waWMsIHFvcywgcGF5bG9hZFN0cmluZ1xuICBESVNDT05ORUNURURfUkVUUllJTkc6IFwiRGlzY29ubmVjdGVkUmV0cnlpbmdcIiwgLy8gcmVhc29uOiBwYWhvT2JqZWN0XG4gIERJU0NPTk5FQ1RFRDogXCJEaXNjb25uZWN0ZWRcIiwgLy8gcmVhc29uOiBwYWhvT2JqZWN0LyBcIlRpbWVPdXRJblJlY29ubmVjdFwiXG4gIFJFQ09OTkVDVEVEOiBcIlJlY29ubmVjdFN1Y2Nlc3NcIlxufSk7IC8vIHt9XG5cbnZhciBQYWhvQ2xpZW50ID0gcmVxdWlyZShcInBhaG8tY2xpZW50XCIpO1xuXG5jbGFzcyBQYWhvTXF0dENvbm5lY3Rpb24gZXh0ZW5kcyBNUVRUQ2xpZW50IHtcbiAgY29uc3RydWN0b3IoYXJncykge1xuICAgIHN1cGVyKCk7XG4gICAgdGhpcy5wcmVTaWduZWRVcmwgPSBhcmdzLnByZVNpZ25lZFVybDtcbiAgICB0aGlzLmNvbm5lY3Rpb25JZCA9IGFyZ3MuY29ubmVjdGlvbklkO1xuICAgIHRoaXMuc3RhdHVzID0gTXF0dENvbm5lY3Rpb25TdGF0dXMuTmV2ZXJDb25uZWN0ZWQ7XG4gICAgdGhpcy5wYWhvQ2xpZW50ID0gbmV3IFBhaG9DbGllbnQuQ2xpZW50KFxuICAgICAgdGhpcy5wcmVTaWduZWRVcmwsXG4gICAgICB0aGlzLmNvbm5lY3Rpb25JZFxuICAgICk7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgIHRoaXMucGFob0NsaWVudC5vbk1lc3NhZ2VBcnJpdmVkID0gZnVuY3Rpb24obWVzc2FnZSkge1xuICAgICAgc2VsZi5fbWVzc2FnZUFycml2ZWRDYWxsYmFjayhtZXNzYWdlKTtcbiAgICB9O1xuICAgIHRoaXMucGFob0NsaWVudC5vbkNvbm5lY3Rpb25Mb3N0ID0gZnVuY3Rpb24oZGF0YSkge1xuICAgICAgc2VsZi5fY29ubmVjdGlvbkxvc3RDYWxsQmFjayhkYXRhKTtcbiAgICB9O1xuICAgIHRoaXMucGFob0NsaWVudC5vbk1lc3NhZ2VBcnJpdmVkID0gZnVuY3Rpb24obWVzc2FnZSkge1xuICAgICAgc2VsZi5fbWVzc2FnZUFycml2ZWRDYWxsYmFjayhtZXNzYWdlKTtcbiAgICB9O1xuICAgIHRoaXMuZGVidWcgPSBhcmdzLmRlYnVnO1xuICAgIGlmIChhcmdzLmRlYnVnKSB7XG4gICAgICB0aGlzLnBhaG9DbGllbnQudHJhY2UgPSBmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKFwidHJhY2UgcGFobzogXCIpO1xuICAgICAgICBjb25zb2xlLmxvZyhkYXRhKTtcbiAgICAgIH07XG4gICAgfVxuICAgIHRoaXMuY2FsbGJhY2sgPSBhcmdzLmNhbGxiYWNrO1xuICAgIHRoaXMua2lsbFJlY29ubmVjdCA9IG51bGw7XG4gICAgdGhpcy5tYXhSZXRyeVRpbWUgPSBhcmdzLm1heFJldHJ5VGltZTtcbiAgICB0aGlzLm5ldmVyQ29ubmVjdGVkID0gdHJ1ZTtcbiAgICB0aGlzLl9zdWJzY3JpYmVkVG9waWNzID0gW107XG4gIH1cblxuICBjb25uZWN0KGNvbm5lY3RPcHRpb25zKSB7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgIGNvbm5lY3RPcHRpb25zLm9uU3VjY2VzcyA9IGZ1bmN0aW9uKHJlc3BvbnNlKSB7XG4gICAgICAgIHNlbGYubmV2ZXJDb25uZWN0ZWQgPSBmYWxzZTtcbiAgICAgICAgdmFyIG9sZFN0YXR1cyA9IHNlbGYuc3RhdHVzO1xuICAgICAgICBzZWxmLl9vbkNvbm5lY3RTdWNjZXNzKHJlc3BvbnNlKTtcbiAgICAgICAgcmVzb2x2ZSh7fSk7XG4gICAgICAgIGlmIChvbGRTdGF0dXMgPT09IE1xdHRDb25uZWN0aW9uU3RhdHVzLkRpc2Nvbm5lY3RlZFJldHJ5aW5nKSB7XG4gICAgICAgICAgc2VsZi5jYWxsYmFjayhNcXR0RXZlbnRzLlJFQ09OTkVDVEVELCB7fSk7XG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgICBjb25uZWN0T3B0aW9ucy5vbkZhaWx1cmUgPSBmdW5jdGlvbihlcnJvcikge1xuICAgICAgICB2YXIgZXJyb3JEZXRhaWxzID0ge1xuICAgICAgICAgIHJlYXNvbjogZXJyb3JcbiAgICAgICAgfTtcbiAgICAgICAgc2VsZi5fb25Db25uZWN0RmFpbHVyZShlcnJvckRldGFpbHMpO1xuICAgICAgICByZWplY3QoZXJyb3JEZXRhaWxzKTtcbiAgICAgIH07XG4gICAgICBzZWxmLnN0YXR1cyA9IE1xdHRDb25uZWN0aW9uU3RhdHVzLkNvbm5lY3Rpbmc7XG4gICAgICBzZWxmLnBhaG9DbGllbnQuY29ubmVjdChjb25uZWN0T3B0aW9ucyk7XG4gICAgfSk7XG4gIH1cblxuICBfY29ubmVjdGlvbkxvc3RDYWxsQmFjayhlcnJvcikge1xuICAgIHZhciBkYXRhID0ge1xuICAgICAgcmVhc29uOiBlcnJvclxuICAgIH07XG4gICAgdGhpcy5fc3Vic2NyaWJlZFRvcGljcyA9IFtdO1xuICAgIGlmICh0aGlzLnN0YXR1cyA9PT0gTXF0dENvbm5lY3Rpb25TdGF0dXMuRGlzY29ubmVjdGVkKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmIChkYXRhLnJlYXNvbi5yZWNvbm5lY3QpIHtcbiAgICAgIHRoaXMuc3RhdHVzID0gTXF0dENvbm5lY3Rpb25TdGF0dXMuRGlzY29ubmVjdGVkUmV0cnlpbmc7XG4gICAgICB0aGlzLmNhbGxiYWNrKE1xdHRFdmVudHMuRElTQ09OTkVDVEVEX1JFVFJZSU5HLCBkYXRhKTtcbiAgICAgIHRoaXMua2lsbFJlY29ubmVjdCA9IHRoaXMuX3NjaGVkdWxlUmVjb25uZWN0S2lsbGluZygpO1xuICAgICAgcmV0dXJuO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnN0YXR1cyA9IE1xdHRDb25uZWN0aW9uU3RhdHVzLkRpc2Nvbm5lY3RlZDtcbiAgICAgIHRoaXMuY2FsbGJhY2soTXF0dEV2ZW50cy5ESVNDT05ORUNURUQsIGRhdGEpO1xuICAgIH1cbiAgfVxuXG4gIF9tZXNzYWdlQXJyaXZlZENhbGxiYWNrKG1lc3NhZ2UpIHtcbiAgICB2YXIgaW5jb21pbmdNZXNzYWdlID0ge1xuICAgICAgdG9waWM6IG1lc3NhZ2UudG9waWMsXG4gICAgICBxb3M6IG1lc3NhZ2UucW9zLFxuICAgICAgcGF5bG9hZFN0cmluZzogbWVzc2FnZS5wYXlsb2FkU3RyaW5nXG4gICAgfTtcbiAgICB0aGlzLmNhbGxiYWNrKE1xdHRFdmVudHMuTUVTU0FHRSwgaW5jb21pbmdNZXNzYWdlKTtcbiAgfVxuXG4gIC8qZXNsaW50LWRpc2FibGUgbm8tdW51c2VkLXZhcnMqL1xuICBfb25Db25uZWN0U3VjY2VzcyhyZXNwb25zZSkge1xuICAgIC8qZXNsaW50LWVuYWJsZSBuby11bnVzZWQtdmFycyovXG4gICAgaWYgKHRoaXMua2lsbFJlY29ubmVjdCAhPT0gbnVsbCkge1xuICAgICAgY2xlYXJUaW1lb3V0KHRoaXMua2lsbFJlY29ubmVjdCk7XG4gICAgICB0aGlzLmtpbGxSZWNvbm5lY3QgPSBudWxsO1xuICAgIH1cbiAgICB0aGlzLnN0YXR1cyA9IE1xdHRDb25uZWN0aW9uU3RhdHVzLkNvbm5lY3RlZDtcbiAgfVxuXG4gIC8qZXNsaW50LWRpc2FibGUgbm8tdW51c2VkLXZhcnMqL1xuICBfb25Db25uZWN0RmFpbHVyZShlcnJvcikge1xuICAgIC8qZXNsaW50LWVuYWJsZSBuby11bnVzZWQtdmFycyovXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgIGlmIChzZWxmLm5ldmVyQ29ubmVjdGVkKSB7XG4gICAgICBzZWxmLnN0YXR1cyA9IE1xdHRDb25uZWN0aW9uU3RhdHVzLk5ldmVyQ29ubmVjdGVkO1xuICAgIH0gZWxzZSB7XG4gICAgICBzZWxmLnN0YXR1cyA9IE1xdHRDb25uZWN0aW9uU3RhdHVzLkRpc2Nvbm5lY3RlZDtcbiAgICB9XG4gIH1cblxuICBfc2NoZWR1bGVSZWNvbm5lY3RLaWxsaW5nKCkge1xuICAgIHZhciBzZWxmID0gdGhpcztcbiAgICByZXR1cm4gc2V0VGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgIHNlbGYuZGlzY29ubmVjdCgpO1xuICAgICAgc2VsZi5jYWxsYmFjayhNcXR0RXZlbnRzLkRJU0NPTk5FQ1RFRCwgeyByZWFzb246IFwiVGltZW91dEluUmVjb25uZWN0XCIgfSk7XG4gICAgfSwgc2VsZi5tYXhSZXRyeVRpbWUgKiAxMDAwKTtcbiAgfVxuXG4gIGRpc2Nvbm5lY3QoKSB7XG4gICAgdGhpcy5fc3Vic2NyaWJlZFRvcGljcyA9IFtdO1xuICAgIHRoaXMuc3RhdHVzID0gTXF0dENvbm5lY3Rpb25TdGF0dXMuRGlzY29ubmVjdGVkO1xuICAgIHRoaXMucGFob0NsaWVudC5kaXNjb25uZWN0KCk7XG4gIH1cblxuICBzdWJzY3JpYmUodG9waWMsIHN1YnNjcmliZU9wdGlvbnMpIHtcbiAgICAvLyBzaG91bGQgd2UgY2hlY2sgaWYgdGhpcyB0b3BpYyBpcyBhbHJlYWR5IHN1YnNjcmliZWQ/XG4gICAgLy8gTk8sIGxlYXZlIHRoaXMgYmVoYXZpb3VyIHRvIFBBSE8gLSB3aGF0ZXZlciBQQUhPIGRvZXNcbiAgICAvLyBpbiBjYXNlIG9mIGR1cGxpY2F0ZSBzdWJzY3JpYmUgLSB3ZSB3aWxsIGZvbGxvdyB0aGUgc2FtZS5cbiAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgc3Vic2NyaWJlT3B0aW9ucy5vblN1Y2Nlc3MgPSBmdW5jdGlvbihyZXNwb25zZSkge1xuICAgICAgICBzZWxmLl9zdWJzY3JpYmVTdWNjZXNzKHRvcGljLCByZXNwb25zZSk7XG4gICAgICAgIHZhciByZXNwb25zZU9iamVjdCA9IHtcbiAgICAgICAgICB0b3BpYzogdG9waWMsXG4gICAgICAgICAgcW9zOiByZXNwb25zZS5ncmFudGVkUW9zXG4gICAgICAgIH07XG4gICAgICAgIHJlc29sdmUocmVzcG9uc2VPYmplY3QpO1xuICAgICAgfTtcbiAgICAgIHN1YnNjcmliZU9wdGlvbnMub25GYWlsdXJlID0gZnVuY3Rpb24oZXJyb3IpIHtcbiAgICAgICAgdmFyIGVycm9yT2JqZWN0ID0ge1xuICAgICAgICAgIHRvcGljOiB0b3BpYyxcbiAgICAgICAgICBlcnJvcjogZXJyb3JcbiAgICAgICAgfTtcbiAgICAgICAgcmVqZWN0KGVycm9yT2JqZWN0KTtcbiAgICAgIH07XG4gICAgICBzZWxmLnBhaG9DbGllbnQuc3Vic2NyaWJlKHRvcGljLCBzdWJzY3JpYmVPcHRpb25zKTtcbiAgICB9KTtcbiAgfVxuXG4gIF9hZGRUb1RvcGljcyh0b3BpYykge1xuICAgIHZhciBzZWxmID0gdGhpcztcbiAgICB2YXIgdDtcbiAgICBmb3IgKHQgaW4gc2VsZi5fc3Vic2NyaWJlZFRvcGljcykge1xuICAgICAgaWYgKHQgPT09IHRvcGljKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICB9XG4gICAgc2VsZi5fc3Vic2NyaWJlZFRvcGljcy5wdXNoKHRvcGljKTtcbiAgfVxuXG4gIC8qZXNsaW50LWRpc2FibGUgbm8tdW51c2VkLXZhcnMqL1xuICBfc3Vic2NyaWJlU3VjY2Vzcyh0b3BpYywgcmVzcG9uc2UpIHtcbiAgICAvKmVzbGludC1lbmFibGUgbm8tdW51c2VkLXZhcnMqL1xuICAgIHRoaXMuX2FkZFRvVG9waWNzKHRvcGljKTtcbiAgfVxuXG4gIGdldFN1YnNjcmliZWRUb3BpY3MoKSB7XG4gICAgcmV0dXJuIHRoaXMuX3N1YnNjcmliZWRUb3BpY3Muc2xpY2UoMCk7XG4gIH1cblxuICB1bnN1YnNjcmliZSh0b3BpYywgdW5zdWJzY3JpYmVPcHRpb25zKSB7XG4gICAgLy8gc2hvdWxkIHdlIGNoZWNrIGlmIHRoaXMgdG9waWMgaXMgZXZlbiBzdWJzY3JpYmVkP1xuICAgIC8vIE5PLCBsZWF2ZSB0aGlzIGJlaGF2aW91ciB0byBQQUhPIC0gd2hhdGV2ZXIgUEFITyBkb2VzXG4gICAgLy8gaW4gY2FzZSBvZiB1bnN1YnNjcmliZSBvZiB0b3BpY3Mgbm90IGV2ZW50IHN1YnNjcmliZWRcbiAgICAvLyAtIHdlIHdpbGwgZm9sbG93IHRoZSBzYW1lLlxuICAgIHZhciBzZWxmID0gdGhpcztcbiAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICB1bnN1YnNjcmliZU9wdGlvbnMub25TdWNjZXNzID0gZnVuY3Rpb24ocmVzcG9uc2UpIHtcbiAgICAgICAgdmFyIHJlc3BvbnNlT2JqZWN0ID0ge1xuICAgICAgICAgIHRvcGljOiB0b3BpYyxcbiAgICAgICAgICByZXNwb25zZTogcmVzcG9uc2VcbiAgICAgICAgfTtcbiAgICAgICAgc2VsZi5fdW5zdWJzY3JpYmVTdWNjZXNzKHRvcGljLCByZXNwb25zZU9iamVjdCk7XG4gICAgICAgIHJlc29sdmUocmVzcG9uc2VPYmplY3QpO1xuICAgICAgfTtcbiAgICAgIHVuc3Vic2NyaWJlT3B0aW9ucy5vbkZhaWx1cmUgPSBmdW5jdGlvbihlcnJvcikge1xuICAgICAgICB2YXIgZXJyb3JPYmplY3QgPSB7XG4gICAgICAgICAgdG9waWM6IHRvcGljLFxuICAgICAgICAgIGVycm9yOiBlcnJvclxuICAgICAgICB9O1xuICAgICAgICByZWplY3QoZXJyb3JPYmplY3QpO1xuICAgICAgfTtcbiAgICAgIHNlbGYucGFob0NsaWVudC51bnN1YnNjcmliZSh0b3BpYywgdW5zdWJzY3JpYmVPcHRpb25zKTtcbiAgICB9KTtcbiAgfVxuXG4gIC8qZXNsaW50LWRpc2FibGUgbm8tdW51c2VkLXZhcnMqL1xuICBfdW5zdWJzY3JpYmVTdWNjZXNzKHRvcGljLCByZXNwb25zZSkge1xuICAgIC8qZXNsaW50LWVuYWJsZSBuby11bnVzZWQtdmFycyovXG4gICAgdGhpcy5fc3Vic2NyaWJlZFRvcGljcyA9IHRoaXMuX3N1YnNjcmliZWRUb3BpY3MuZmlsdGVyKHQgPT4gdCAhPT0gdG9waWMpO1xuICB9XG5cbiAgZ2V0U3RhdHVzKCkge1xuICAgIHJldHVybiB0aGlzLnN0YXR1cztcbiAgfVxuXG4gIF9sb2dpdChkYXRhKSB7XG4gICAgaWYgKHRoaXMuZGVidWcpIHtcbiAgICAgIGNvbnNvbGUubG9nKGRhdGEpO1xuICAgIH1cbiAgfVxufVxuXG5leHBvcnQgeyBDaGF0Q29ubmVjdGlvbk1hbmFnZXIsIE1xdHRFdmVudHMsIE1xdHRDb25uZWN0aW9uU3RhdHVzIH07XG4iLCJpbXBvcnQge1xuICBVbkltcGxlbWVudGVkTWV0aG9kRXhjZXB0aW9uLFxuICBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24sXG4gIElsbGVnYWxTdGF0ZUV4Y2VwdGlvblxufSBmcm9tIFwiLi9leGNlcHRpb25zXCI7XG5pbXBvcnQgeyBNcXR0Q29ubmVjdGlvblN0YXR1cywgTXF0dEV2ZW50cyB9IGZyb20gXCIuL2Nvbm5lY3Rpb25NYW5hZ2VyXCI7XG5pbXBvcnQgeyBNUVRUX0NPTlNUQU5UUyB9IGZyb20gXCIuLi9jb25zdGFudHNcIjtcbi8qKlxuICogVGhpcyBjbGFzcyBpcyB1c2VkIGZvciBlc3RhYmxpc2hpbmcgYSBjb25uZWN0aW9uIGZvciB0aGUgY2hhdC5cbiAqIFRoZSBvYmplY3Qgb2YgdGhpcyBjbGFzcyBjYW4gb25seSBiZSBzdGFydGVkIG9uY2UgYW5kIGNhbiBvbmx5IGJlIGNsb3NlZCBvbmNlLlxuICogSWYgdGhlIGNvbm5lY3Rpb24gZmFpbHMgdG8gZXN0YWJsaXNoLCBvciBpZiBpdCBlbmRzIGFicnVwdGx5IGR1ZSB0b1xuICogIGRvd25zdHJlYW0gaXNzdWVzLCBvciBpdCBpcyBlbmRlZCBleHBsaWNpdGx5IGJ5IGNhbGxpbmcgZW5kKClcbiAqICB0aGVuIHRoaXMgb2JqZWN0IGNhbiBubyBsb25nZXIgYmUgdXNlZC4gQSBuZXcgb2JqZWN0IG11c3QgYmUgY3JlYXRlZCB0byBjYWxsIHN0YXJ0IGFnYWluLlxuICogc3RhcnQoKSBhdHRlbXB0cyB0byBzdGFydCBhIGNvbm5lY3Rpb24uXG4gKi9cbi8qZXNsaW50LWRpc2FibGUgbm8tdW51c2VkLXZhcnMqL1xuY2xhc3MgQ29ubmVjdGlvbkhlbHBlciB7XG4gIC8qKlxuICAgKiAgIHJldHVybnMgUHJvbWlzZSBvYmplY3Qgd2l0aFxuICAgKiAgICAgICByZXNwb25zZSA9IHtcbiAgICogICAgICAgICBjb25uZWN0U3VjY2VzczogdHJ1ZSxcbiAgICogICAgICAgICBkZXRhaWxzOiB7fSAvLyBJbXBsZW1lbnRhdGlvbiBzcGVjaWZpY1xuICAgKiAgICAgICB9O1xuICAgKiAgICAgICBlcnJvciA9IHtcbiAgICogICAgICAgICBjb25uZWN0U3VjY2VzczogZmFsc2UsXG4gICAqICAgICAgICAgcmVhc29uOiBcIlwiIC8vIEltcGxlbWVudGF0aW9uIHNwZWNpZmljXG4gICAqICAgICAgICAgZGV0YWlsczoge30gLy8gSW1wbGVtZW50YXRpb24gc3BlY2lmaWNcbiAgICogICAgICAgfTtcbiAgICovXG4gIHN0YXJ0KGFyZ3MpIHtcbiAgICB0aHJvdyBuZXcgVW5JbXBsZW1lbnRlZE1ldGhvZEV4Y2VwdGlvbihcInN0YXJ0IGluIENvbm5lY3Rpb25IZWxwZXJcIik7XG4gIH1cblxuICBlbmQoKSB7XG4gICAgdGhyb3cgbmV3IFVuSW1wbGVtZW50ZWRNZXRob2RFeGNlcHRpb24oXCJlbmQgaW4gQ29ubmVjdGlvbkhlbHBlclwiKTtcbiAgfVxufVxuLyplc2xpbnQtZW5hYmxlIG5vLXVudXNlZC12YXJzKi9cblxudmFyIENvbm5lY3Rpb25IZWxwZXJTdGF0dXMgPSB7XG4gIE5ldmVyU3RhcnRlZDogXCJOZXZlclN0YXJ0ZWRcIixcbiAgU3RhcnRpbmc6IFwiU3RhcnRpbmdcIixcbiAgQ29ubmVjdGVkOiBcIkNvbm5lY3RlZFwiLFxuICBEaXNjb25uZWN0ZWRSZWNvbm5lY3Rpbmc6IFwiRGlzY29ubmVjdGVkUmVjb25uZWN0aW5nXCIsXG4gIEVuZGVkOiBcIkVuZGVkXCJcbn07XG5cbnZhciBDb25uZWN0aW9uSGVscGVyRXZlbnRzID0ge1xuICBFbmRlZDogXCJFbmRlZFwiLCAvLyBldmVudCBkYXRhIGlzOiB7cmVhc29uOiAuLi59XG4gIERpc2Nvbm5lY3RlZFJlY29ubmVjdGluZzogXCJEaXNjb25uZWN0ZWRSZWNvbm5lY3RpbmdcIiwgLy8gZXZlbnQgZGF0YSBpczoge3JlYXNvbjogLi4ufVxuICBSZWNvbm5lY3RlZDogXCJSZWNvbm5lY3RlZFwiLCAvLyBldmVudCBkYXRhIGlzOiB7fVxuICBJbmNvbWluZ01lc3NhZ2U6IFwiSW5jb21pbmdNZXNzYWdlXCIgLy8gZXZlbnQgZGF0YSBpczoge3BheWxvYWRTdHJpbmc6IC4uLn1cbn07XG5cbi8qXG5UaGlzIGltcGxlbWVudGF0aW9uIGFzc3VtZXMgdGhhdCBpdCBoYXMgaXRzIG93biBNUVRUIGNsaWVudCBcbndoaWNoIGhhcyBuZXZlciBiZWVuIGNvbm5lY3RlZCBhbmQgd2lsbCBub3QgYmUgc2hhcmVkIHdpdGggYW55b25lLlxuKi9cbmNsYXNzIFNvbG9DaGF0Q29ubmVjdGlvbk1xdHRIZWxwZXIgZXh0ZW5kcyBDb25uZWN0aW9uSGVscGVyIHtcbiAgY29uc3RydWN0b3IoYXJncykge1xuICAgIHN1cGVyKCk7XG4gICAgdGhpcy5wcmVTaWduZWRVcmwgPSBhcmdzLmNvbm5lY3Rpb25EZXRhaWxzLnByZVNpZ25lZFVybDtcbiAgICB0aGlzLnRvcGljID0gYXJncy5jb25uZWN0aW9uRGV0YWlscy5jb25uZWN0aW9uSWQ7XG4gICAgdGhpcy5pb3RDb25uZWN0aW9uID0gYXJncy5tcXR0Q29ubmVjdGlvblByb3ZpZGVyKChldmVudFR5cGUsIGV2ZW50RGF0YSkgPT5cbiAgICAgIHRoaXMuX2hhbmRsZUlvdEV2ZW50KGV2ZW50VHlwZSwgZXZlbnREYXRhKVxuICAgICk7XG4gICAgaWYgKFxuICAgICAgdGhpcy5pb3RDb25uZWN0aW9uLmdldFN0YXR1cygpICE9PSBNcXR0Q29ubmVjdGlvblN0YXR1cy5OZXZlckNvbm5lY3RlZFxuICAgICkge1xuICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbihcbiAgICAgICAgXCJpb3RDb25uZWN0aW9uIGlzIGV4cGVjdGVkIHRvIGJlIGluIE5ldmVyQ29ubmVjdGVkIHN0YXRlIGJ1dCBpcyBub3RcIlxuICAgICAgKSgpO1xuICAgIH1cbiAgICB0aGlzLmNoYXRDb250cm9sbGVyQ2FsbGJhY2sgPSBhcmdzLmNhbGxiYWNrO1xuICAgIHRoaXMuc3RhdHVzID0gQ29ubmVjdGlvbkhlbHBlclN0YXR1cy5OZXZlclN0YXJ0ZWQ7XG4gIH1cblxuICBzdGFydCgpIHtcbiAgICBpZiAodGhpcy5zdGF0dXMgIT09IENvbm5lY3Rpb25IZWxwZXJTdGF0dXMuTmV2ZXJTdGFydGVkKSB7XG4gICAgICB0aHJvdyBuZXcgSWxsZWdhbFN0YXRlRXhjZXB0aW9uKFwiQ29ubmVjdGlvbiBoZWxwZXIgc3RhcnRlZCB0d2ljZSEhXCIpO1xuICAgIH1cbiAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgdGhpcy5zdGF0dXMgPSBDb25uZWN0aW9uSGVscGVyU3RhdHVzLlN0YXJ0aW5nO1xuICAgIHJldHVybiBuZXcgUHJvbWlzZShzZWxmLl9jcmVhdGVTdGFydFByb21pc2UoKSk7XG4gIH1cblxuICBfY3JlYXRlU3RhcnRQcm9taXNlKCkge1xuICAgIHZhciBzZWxmID0gdGhpcztcbiAgICByZXR1cm4gZnVuY3Rpb24ocmVzb3ZsZSwgcmVqZWN0KSB7XG4gICAgICBzZWxmLl9jb25uZWN0KHJlc292bGUsIHJlamVjdCk7XG4gICAgfTtcbiAgfVxuXG4gIF9jb25uZWN0KHJlc29sdmUsIHJlamVjdCkge1xuICAgIHZhciBzZWxmID0gdGhpcztcbiAgICB2YXIgY29ubmVjdE9wdGlvbnMgPSB7XG4gICAgICB1c2VTU0w6IHRydWUsXG4gICAgICBrZWVwQWxpdmVJbnRlcnZhbDogTVFUVF9DT05TVEFOVFMuS0VFUF9BTElWRSxcbiAgICAgIHJlY29ubmVjdDogZmFsc2UsXG4gICAgICBtcXR0VmVyc2lvbjogNCxcbiAgICAgIHRpbWVvdXQ6IE1RVFRfQ09OU1RBTlRTLkNPTk5FQ1RfVElNRU9VVFxuICAgIH07XG4gICAgc2VsZi5pb3RDb25uZWN0aW9uXG4gICAgICAuY29ubmVjdChjb25uZWN0T3B0aW9ucylcbiAgICAgIC50aGVuKGZ1bmN0aW9uKHJlc3BvbnNlKSB7XG4gICAgICAgIHNlbGYuX3Bvc3RDb25uZWN0KHJlc29sdmUsIHJlamVjdCwgcmVzcG9uc2UpO1xuICAgICAgfSlcbiAgICAgIC5jYXRjaChmdW5jdGlvbihlcnJvcikge1xuICAgICAgICBzZWxmLl9jb25uZWN0RmFpbGVkKHJlamVjdCwgZXJyb3IpO1xuICAgICAgfSk7XG4gIH1cblxuICBfcG9zdENvbm5lY3QocmVzb2x2ZSwgcmVqZWN0LCBjb25uZWN0UmVzcG9uc2UpIHtcbiAgICB0aGlzLl9zdWJzY3JpYmUocmVzb2x2ZSwgcmVqZWN0LCBjb25uZWN0UmVzcG9uc2UpO1xuICB9XG5cbiAgX2Nvbm5lY3RGYWlsZWQocmVqZWN0LCBjb25uZWN0RXJyb3IpIHtcbiAgICB2YXIgZXJyb3IgPSB7XG4gICAgICBjb25uZWN0U3VjY2VzczogZmFsc2UsXG4gICAgICByZWFzb246IFwiQ29ubmVjdGlvblRvQnJva2VyRmFpbGVkXCIsXG4gICAgICBkZXRhaWxzOiBjb25uZWN0RXJyb3JcbiAgICB9O1xuICAgIHNlbGYuc3RhdHVzID0gQ29ubmVjdGlvbkhlbHBlclN0YXR1cy5FbmRlZDtcbiAgICByZWplY3QoZXJyb3IpO1xuICB9XG5cbiAgLyplc2xpbnQtZGlzYWJsZSBuby11bnVzZWQtdmFycyovXG4gIF9zdWJzY3JpYmUocmVzb2x2ZSwgcmVqZWN0LCBjb25uZWN0UmVzcG9uc2UpIHtcbiAgICAvKmVzbGludC1lbmFibGUgbm8tdW51c2VkLXZhcnMqL1xuICAgIHZhciBzZWxmID0gdGhpcztcbiAgICB2YXIgc3Vic2NyaWJlT3B0aW9ucyA9IHtcbiAgICAgIHFvczogMVxuICAgIH07XG4gICAgc2VsZi5pb3RDb25uZWN0aW9uXG4gICAgICAuc3Vic2NyaWJlKHNlbGYudG9waWMsIHN1YnNjcmliZU9wdGlvbnMpXG4gICAgICAudGhlbihmdW5jdGlvbihyZXNwb25zZSkge1xuICAgICAgICBzZWxmLl9wb3N0U3Vic2NyaWJlKHJlc29sdmUsIHJlc3BvbnNlKTtcbiAgICAgIH0pXG4gICAgICAuY2F0Y2goZnVuY3Rpb24oZXJyb3IpIHtcbiAgICAgICAgc2VsZi5fc3Vic2NyaWJlRmFpbGVkKHJlamVjdCwgZXJyb3IpO1xuICAgICAgfSk7XG4gIH1cblxuICBfcG9zdFN1YnNjcmliZShyZXNvbHZlLCBzdWJzY3JpYmVSZXNwb25zZSkge1xuICAgIHZhciByZXNwb25zZSA9IHtcbiAgICAgIGRldGFpbHM6IHN1YnNjcmliZVJlc3BvbnNlLFxuICAgICAgY29ubmVjdFN1Y2Nlc3M6IHRydWVcbiAgICB9O1xuICAgIHRoaXMuc3RhdHVzID0gQ29ubmVjdGlvbkhlbHBlclN0YXR1cy5Db25uZWN0ZWQ7XG4gICAgcmVzb2x2ZShyZXNwb25zZSk7XG4gIH1cblxuICBfc3Vic2NyaWJlRmFpbGVkKHJlamVjdCwgc3Vic2NyaWJlRXJyb3IpIHtcbiAgICB2YXIgZXJyb3IgPSB7XG4gICAgICBjb25uZWN0U3VjY2VzczogZmFsc2UsXG4gICAgICBkZXRhaWxzOiBzdWJzY3JpYmVFcnJvcixcbiAgICAgIHJlYXNvbjogXCJTdWJzY3JpYnRpb25Ub1RvcGljRmFpbGVkXCJcbiAgICB9O1xuICAgIHZhciBzZWxmID0gdGhpcztcbiAgICBzZWxmLnN0YXR1cyA9IENvbm5lY3Rpb25IZWxwZXJTdGF0dXMuRW5kZWQ7XG4gICAgc2VsZi5pb3RDb25uZWN0aW9uLmRpc2Nvbm5lY3QoKTtcbiAgICByZWplY3QoZXJyb3IpO1xuICB9XG5cbiAgX2hhbmRsZUlvdEV2ZW50KGV2ZW50VHlwZSwgZXZlbnREYXRhKSB7XG4gICAgc3dpdGNoIChldmVudFR5cGUpIHtcbiAgICAgIGNhc2UgTXF0dEV2ZW50cy5NRVNTQUdFOlxuICAgICAgICB0aGlzLmNoYXRDb250cm9sbGVyQ2FsbGJhY2soXG4gICAgICAgICAgQ29ubmVjdGlvbkhlbHBlckV2ZW50cy5JbmNvbWluZ01lc3NhZ2UsXG4gICAgICAgICAgZXZlbnREYXRhXG4gICAgICAgICk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBNcXR0RXZlbnRzLkRJU0NPTk5FQ1RFRF9SRVRSWUlORzpcbiAgICAgICAgY29uc29sZS5sb2coXCJFUlJPUi4gUmVjZWl2ZWQgdW5leHBlY3RlZCBldmVudCBESVNDT05ORUNURURfUkVUUllJTkdcIik7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBNcXR0RXZlbnRzLkRJU0NPTk5FQ1RFRDpcbiAgICAgICAgdGhpcy5zdGF0dXMgPSBDb25uZWN0aW9uSGVscGVyU3RhdHVzLkVuZGVkO1xuICAgICAgICB0aGlzLmNoYXRDb250cm9sbGVyQ2FsbGJhY2soQ29ubmVjdGlvbkhlbHBlckV2ZW50cy5FbmRlZCwgZXZlbnREYXRhKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIE1xdHRFdmVudHMuUkVDT05ORUNURUQ6XG4gICAgICAgIGNvbnNvbGUubG9nKFwiRVJST1IuIFJlY2VpdmVkIHVuZXhwZWN0ZWQgZXZlbnQgRElTQ09OTkVDVEVEX1JFVFJZSU5HXCIpO1xuICAgICAgICBicmVhaztcbiAgICB9XG4gIH1cblxuICBlbmQoKSB7XG4gICAgdGhpcy5zdGF0dXMgPSBDb25uZWN0aW9uSGVscGVyU3RhdHVzLkVuZGVkO1xuICAgIC8vIERvIHdlIGV4cGxpY2l0bHkgaGF2ZSB0byB1bnN1YnNjcmliZSBiZWZvcmUgZGlzY29ubmVjdGluZyBNUVRUP1xuICAgIHRoaXMuaW90Q29ubmVjdGlvbi5kaXNjb25uZWN0KCk7XG4gIH1cblxuICBnZXRTdGF0dXMoKSB7XG4gICAgcmV0dXJuIHRoaXMuc3RhdHVzO1xuICB9XG59XG5cbmV4cG9ydCB7XG4gIFNvbG9DaGF0Q29ubmVjdGlvbk1xdHRIZWxwZXIsXG4gIENvbm5lY3Rpb25IZWxwZXJFdmVudHMsXG4gIENvbm5lY3Rpb25IZWxwZXJTdGF0dXNcbn07XG4iLCJpbXBvcnQgeyBDSEFUX0VWRU5UUyB9IGZyb20gXCIuLi9jb25zdGFudHNcIjtcbmltcG9ydCB7IENvbm5lY3Rpb25IZWxwZXJFdmVudHMgfSBmcm9tIFwiLi9jb25uZWN0aW9uSGVscGVyXCI7XG5cbmNsYXNzIEV2ZW50Q29uc3RydWN0b3Ige1xuICBmcm9tQ29ubmVjdGlvbkhlbHBlckV2ZW50KGV2ZW50VHlwZSwgZXZlbnREYXRhLCBjaGF0RGV0YWlscykge1xuICAgIHZhciBkYXRhID0ge1xuICAgICAgZGF0YTogZXZlbnREYXRhLFxuICAgICAgY2hhdERldGFpbHM6IGNoYXREZXRhaWxzXG4gICAgfTtcbiAgICB2YXIgcmV0dXJuT2JqZWN0ID0ge1xuICAgICAgdHlwZTogbnVsbCxcbiAgICAgIGRhdGE6IGRhdGFcbiAgICB9O1xuICAgIHN3aXRjaCAoZXZlbnRUeXBlKSB7XG4gICAgICBjYXNlIENvbm5lY3Rpb25IZWxwZXJFdmVudHMuRW5kZWQ6XG4gICAgICAgIGRhdGEucmV0cnlpbmcgPSBmYWxzZTtcbiAgICAgICAgcmV0dXJuT2JqZWN0LnR5cGUgPSBDSEFUX0VWRU5UUy5DT05ORUNUSU9OX0JST0tFTjtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIENvbm5lY3Rpb25IZWxwZXJFdmVudHMuRGlzY29ubmVjdGVkUmVjb25uZWN0aW5nOlxuICAgICAgICBkYXRhLnJldHJ5aW5nID0gdHJ1ZTtcbiAgICAgICAgcmV0dXJuT2JqZWN0LnR5cGUgPSBDSEFUX0VWRU5UUy5DT05ORUNUSU9OX0JST0tFTjtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIENvbm5lY3Rpb25IZWxwZXJFdmVudHMuUmVjb25uZWN0ZWQ6XG4gICAgICAgIGRhdGEuY29ubmVjdENhbGxlZCA9IGZhbHNlO1xuICAgICAgICByZXR1cm5PYmplY3QudHlwZSA9IENIQVRfRVZFTlRTLkNPTk5FQ1RJT05fRVNUQUJMSVNIRUQ7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBDb25uZWN0aW9uSGVscGVyRXZlbnRzLkluY29taW5nTWVzc2FnZTpcbiAgICAgICAgcmV0dXJuIHRoaXMuX2Zyb21JbmNvbWluZ0RhdGEoZXZlbnREYXRhLCBjaGF0RGV0YWlscyk7XG4gICAgfVxuICB9XG5cbiAgX2Zyb21JbmNvbWluZ0RhdGEoZXZlbnREYXRhLCBjaGF0RGV0YWlscykge1xuICAgIHZhciBpbmNvbWluZ0RhdGEgPSBKU09OLnBhcnNlKGV2ZW50RGF0YS5wYXlsb2FkU3RyaW5nKTtcbiAgICB2YXIgZGF0YSA9IHtcbiAgICAgIGRhdGE6IGluY29taW5nRGF0YSxcbiAgICAgIGNoYXREZXRhaWxzOiBjaGF0RGV0YWlsc1xuICAgIH07XG4gICAgdmFyIHJldHVybk9iamVjdCA9IHtcbiAgICAgIHR5cGU6IG51bGwsXG4gICAgICBkYXRhOiBkYXRhXG4gICAgfTtcbiAgICBzd2l0Y2ggKGluY29taW5nRGF0YS5EYXRhLlR5cGUpIHtcbiAgICAgIGNhc2UgXCJUWVBJTkdcIjpcbiAgICAgICAgcmV0dXJuT2JqZWN0LnR5cGUgPSBDSEFUX0VWRU5UUy5JTkNPTUlOR19UWVBJTkc7XG4gICAgICAgIHJldHVybiByZXR1cm5PYmplY3Q7XG4gICAgfVxuICAgIC8vIFRPRE8gdGhpcyBpcyBub3QgcmlnaHQhIFdlIGFyZSByZXR1cm5pbmdcbiAgICAvLyBhIE1FU1NBR0UgZXZlbnQgZXZlbiB0aG91Z2ggdGhpcyBjb3VsZCBiZSBhIGN1c3RvbSBldmVudCxcbiAgICAvLyBzaG91bGQgdGhlcmUgYmUgYW4gZXhoYXVzdGl2ZSBsaXN0IG9mIGV2ZW50cyBsaWtlIFBBUlRJQ0lQQU5UX0pPSU5FRFxuICAgIC8vIHJlY29nbml6ZWQgYXMgTUVTU0FHRT9cbiAgICByZXR1cm5PYmplY3QudHlwZSA9IENIQVRfRVZFTlRTLklOQ09NSU5HX01FU1NBR0U7XG4gICAgcmV0dXJuIHJldHVybk9iamVjdDtcbiAgfVxufVxuXG5leHBvcnQgeyBFdmVudENvbnN0cnVjdG9yIH07XG4iLCJpbXBvcnQgVXRpbHMgZnJvbSBcIi4uL3V0aWxzXCI7XG5cbmNvbnN0IEFMTF9FVkVOVFMgPSBcIjw8YWxsPj5cIjtcblxuLyoqXG4gKiBBbiBvYmplY3QgcmVwcmVzZW50aW5nIGFuIGV2ZW50IHN1YnNjcmlwdGlvbiBpbiBhbiBFdmVudEJ1cy5cbiAqL1xudmFyIFN1YnNjcmlwdGlvbiA9IGZ1bmN0aW9uKHN1Yk1hcCwgZXZlbnROYW1lLCBmKSB7XG4gIHRoaXMuc3ViTWFwID0gc3ViTWFwO1xuICB0aGlzLmlkID0gVXRpbHMucmFuZG9tSWQoKTtcbiAgdGhpcy5ldmVudE5hbWUgPSBldmVudE5hbWU7XG4gIHRoaXMuZiA9IGY7XG59O1xuXG4vKipcbiAqIFVuc3Vic2NyaWJlIHRoZSBoYW5kbGVyIG9mIHRoaXMgc3Vic2NyaXB0aW9uIGZyb20gdGhlIEV2ZW50QnVzXG4gKiBmcm9tIHdoaWNoIGl0IHdhcyBjcmVhdGVkLlxuICovXG5TdWJzY3JpcHRpb24ucHJvdG90eXBlLnVuc3Vic2NyaWJlID0gZnVuY3Rpb24oKSB7XG4gIHRoaXMuc3ViTWFwLnVuc3Vic2NyaWJlKHRoaXMuZXZlbnROYW1lLCB0aGlzLmlkKTtcbn07XG5cbi8qKlxuICogQSBtYXAgb2YgZXZlbnQgc3Vic2NyaXB0aW9ucywgdXNlZCBieSB0aGUgRXZlbnRCdXMuXG4gKi9cbnZhciBTdWJzY3JpcHRpb25NYXAgPSBmdW5jdGlvbigpIHtcbiAgdGhpcy5zdWJJZE1hcCA9IHt9O1xuICB0aGlzLnN1YkV2ZW50TmFtZU1hcCA9IHt9O1xufTtcblxuLyoqXG4gKiBBZGQgYSBzdWJzY3JpcHRpb24gZm9yIHRoZSBuYW1lZCBldmVudC4gIENyZWF0ZXMgYSBuZXcgU3Vic2NyaXB0aW9uXG4gKiBvYmplY3QgYW5kIHJldHVybnMgaXQuICBUaGlzIG9iamVjdCBjYW4gYmUgdXNlZCB0byB1bnN1YnNjcmliZS5cbiAqL1xuU3Vic2NyaXB0aW9uTWFwLnByb3RvdHlwZS5zdWJzY3JpYmUgPSBmdW5jdGlvbihldmVudE5hbWUsIGYpIHtcbiAgdmFyIHN1YiA9IG5ldyBTdWJzY3JpcHRpb24odGhpcywgZXZlbnROYW1lLCBmKTtcblxuICB0aGlzLnN1YklkTWFwW3N1Yi5pZF0gPSBzdWI7XG4gIHZhciBzdWJMaXN0ID0gdGhpcy5zdWJFdmVudE5hbWVNYXBbZXZlbnROYW1lXSB8fCBbXTtcbiAgc3ViTGlzdC5wdXNoKHN1Yik7XG4gIHRoaXMuc3ViRXZlbnROYW1lTWFwW2V2ZW50TmFtZV0gPSBzdWJMaXN0O1xufTtcblxuLyoqXG4gKiBVbnN1YnNjcmliZSBhIHN1YnNjcmlwdGlvbiBtYXRjaGluZyB0aGUgZ2l2ZW4gZXZlbnQgbmFtZSBhbmQgaWQuXG4gKi9cblN1YnNjcmlwdGlvbk1hcC5wcm90b3R5cGUudW5zdWJzY3JpYmUgPSBmdW5jdGlvbihldmVudE5hbWUsIHN1YklkKSB7XG4gIGlmIChVdGlscy5jb250YWlucyh0aGlzLnN1YkV2ZW50TmFtZU1hcCwgZXZlbnROYW1lKSkge1xuICAgIHRoaXMuc3ViRXZlbnROYW1lTWFwW2V2ZW50TmFtZV0gPSB0aGlzLnN1YkV2ZW50TmFtZU1hcFtldmVudE5hbWVdLmZpbHRlcihcbiAgICAgIGZ1bmN0aW9uKHMpIHtcbiAgICAgICAgcmV0dXJuIHMuaWQgIT09IHN1YklkO1xuICAgICAgfVxuICAgICk7XG5cbiAgICBpZiAodGhpcy5zdWJFdmVudE5hbWVNYXBbZXZlbnROYW1lXS5sZW5ndGggPCAxKSB7XG4gICAgICBkZWxldGUgdGhpcy5zdWJFdmVudE5hbWVNYXBbZXZlbnROYW1lXTtcbiAgICB9XG4gIH1cblxuICBpZiAoVXRpbHMuY29udGFpbnModGhpcy5zdWJJZE1hcCwgc3ViSWQpKSB7XG4gICAgZGVsZXRlIHRoaXMuc3ViSWRNYXBbc3ViSWRdO1xuICB9XG59O1xuXG4vKipcbiAqIEdldCBhIGxpc3Qgb2YgYWxsIHN1YnNjcmlwdGlvbnMgaW4gdGhlIHN1YnNjcmlwdGlvbiBtYXAuXG4gKi9cblN1YnNjcmlwdGlvbk1hcC5wcm90b3R5cGUuZ2V0QWxsU3Vic2NyaXB0aW9ucyA9IGZ1bmN0aW9uKCkge1xuICByZXR1cm4gVXRpbHMudmFsdWVzKHRoaXMuc3ViRXZlbnROYW1lTWFwKS5yZWR1Y2UoZnVuY3Rpb24oYSwgYikge1xuICAgIHJldHVybiBhLmNvbmNhdChiKTtcbiAgfSwgW10pO1xufTtcblxuLyoqXG4gKiBHZXQgYSBsaXN0IG9mIHN1YnNjcmlwdGlvbnMgZm9yIHRoZSBnaXZlbiBldmVudCBuYW1lLCBvciBhbiBlbXB0eVxuICogbGlzdCBpZiB0aGVyZSBhcmUgbm8gc3Vic2NyaXB0aW9ucy5cbiAqL1xuU3Vic2NyaXB0aW9uTWFwLnByb3RvdHlwZS5nZXRTdWJzY3JpcHRpb25zID0gZnVuY3Rpb24oZXZlbnROYW1lKSB7XG4gIHJldHVybiB0aGlzLnN1YkV2ZW50TmFtZU1hcFtldmVudE5hbWVdIHx8IFtdO1xufTtcblxuLyoqXG4gKiBBbiBvYmplY3Qgd2hpY2ggbWFpbnRhaW5zIGEgbWFwIG9mIHN1YnNjcmlwdGlvbnMgYW5kIHNlcnZlcyBhcyB0aGVcbiAqIG1lY2hhbmlzbSBmb3IgdHJpZ2dlcmluZyBldmVudHMgdG8gYmUgaGFuZGxlZCBieSBzdWJzY3JpYmVycy5cbiAqL1xudmFyIEV2ZW50QnVzID0gZnVuY3Rpb24ocGFyYW1zSW4pIHtcbiAgdmFyIHBhcmFtcyA9IHBhcmFtc0luIHx8IHt9O1xuXG4gIHRoaXMuc3ViTWFwID0gbmV3IFN1YnNjcmlwdGlvbk1hcCgpO1xuICB0aGlzLmxvZ0V2ZW50cyA9IHBhcmFtcy5sb2dFdmVudHMgfHwgZmFsc2U7XG59O1xuXG4vKipcbiAqIFN1YnNjcmliZSB0byB0aGUgbmFtZWQgZXZlbnQuICBSZXR1cm5zIGEgbmV3IFN1YnNjcmlwdGlvbiBvYmplY3RcbiAqIHdoaWNoIGNhbiBiZSB1c2VkIHRvIHVuc3Vic2NyaWJlLlxuICovXG5FdmVudEJ1cy5wcm90b3R5cGUuc3Vic2NyaWJlID0gZnVuY3Rpb24oZXZlbnROYW1lLCBmKSB7XG4gIFV0aWxzLmFzc2VydE5vdE51bGwoZXZlbnROYW1lLCBcImV2ZW50TmFtZVwiKTtcbiAgVXRpbHMuYXNzZXJ0Tm90TnVsbChmLCBcImZcIik7XG4gIFV0aWxzLmFzc2VydFRydWUoVXRpbHMuaXNGdW5jdGlvbihmKSwgXCJmIG11c3QgYmUgYSBmdW5jdGlvblwiKTtcbiAgcmV0dXJuIHRoaXMuc3ViTWFwLnN1YnNjcmliZShldmVudE5hbWUsIGYpO1xufTtcblxuLyoqXG4gKiBTdWJzY3JpYmUgYSBmdW5jdGlvbiB0byBiZSBjYWxsZWQgb24gYWxsIGV2ZW50cy5cbiAqL1xuRXZlbnRCdXMucHJvdG90eXBlLnN1YnNjcmliZUFsbCA9IGZ1bmN0aW9uKGYpIHtcbiAgVXRpbHMuYXNzZXJ0Tm90TnVsbChmLCBcImZcIik7XG4gIFV0aWxzLmFzc2VydFRydWUoVXRpbHMuaXNGdW5jdGlvbihmKSwgXCJmIG11c3QgYmUgYSBmdW5jdGlvblwiKTtcbiAgcmV0dXJuIHRoaXMuc3ViTWFwLnN1YnNjcmliZShBTExfRVZFTlRTLCBmKTtcbn07XG5cbi8qKlxuICogR2V0IGEgbGlzdCBvZiBzdWJzY3JpcHRpb25zIGZvciB0aGUgZ2l2ZW4gZXZlbnQgbmFtZSwgb3IgYW4gZW1wdHlcbiAqIGxpc3QgaWYgdGhlcmUgYXJlIG5vIHN1YnNjcmlwdGlvbnMuXG4gKi9cbkV2ZW50QnVzLnByb3RvdHlwZS5nZXRTdWJzY3JpcHRpb25zID0gZnVuY3Rpb24oZXZlbnROYW1lKSB7XG4gIHJldHVybiB0aGlzLnN1Yk1hcC5nZXRTdWJzY3JpcHRpb25zKGV2ZW50TmFtZSk7XG59O1xuXG4vKipcbiAqIFRyaWdnZXIgdGhlIGdpdmVuIGV2ZW50IHdpdGggdGhlIGdpdmVuIGRhdGEuICBBbGwgbWV0aG9kcyBzdWJzY3JpYmVkXG4gKiB0byB0aGlzIGV2ZW50IHdpbGwgYmUgY2FsbGVkIGFuZCBhcmUgcHJvdmlkZWQgd2l0aCB0aGUgZ2l2ZW4gYXJiaXRyYXJ5XG4gKiBkYXRhIG9iamVjdCBhbmQgdGhlIG5hbWUgb2YgdGhlIGV2ZW50LCBpbiB0aGF0IG9yZGVyLlxuICovXG5FdmVudEJ1cy5wcm90b3R5cGUudHJpZ2dlciA9IGZ1bmN0aW9uKGV2ZW50TmFtZSwgZGF0YSkge1xuICBVdGlscy5hc3NlcnROb3ROdWxsKGV2ZW50TmFtZSwgXCJldmVudE5hbWVcIik7XG4gIHZhciBzZWxmID0gdGhpcztcbiAgdmFyIGFsbEV2ZW50U3VicyA9IHRoaXMuc3ViTWFwLmdldFN1YnNjcmlwdGlvbnMoQUxMX0VWRU5UUyk7XG4gIHZhciBldmVudFN1YnMgPSB0aGlzLnN1Yk1hcC5nZXRTdWJzY3JpcHRpb25zKGV2ZW50TmFtZSk7XG5cbiAgLy8gaWYgKHRoaXMubG9nRXZlbnRzICYmIChldmVudE5hbWUgIT09IGNvbm5lY3QuRXZlbnRUeXBlLkxPRyAmJiBldmVudE5hbWUgIT09IGNvbm5lY3QuRXZlbnRUeXBlLk1BU1RFUl9SRVNQT05TRSAmJiBldmVudE5hbWUgIT09IGNvbm5lY3QuRXZlbnRUeXBlLkFQSV9NRVRSSUMpKSB7XG4gIC8vICAgIGNvbm5lY3QuZ2V0TG9nKCkudHJhY2UoXCJQdWJsaXNoaW5nIGV2ZW50OiAlc1wiLCBldmVudE5hbWUpO1xuICAvLyB9XG5cbiAgYWxsRXZlbnRTdWJzLmNvbmNhdChldmVudFN1YnMpLmZvckVhY2goZnVuY3Rpb24oc3ViKSB7XG4gICAgdHJ5IHtcbiAgICAgIHN1Yi5mKGRhdGEgfHwgbnVsbCwgZXZlbnROYW1lLCBzZWxmKTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICAvLyAgIGNvbm5lY3RcbiAgICAgIC8vICAgICAuZ2V0TG9nKClcbiAgICAgIC8vICAgICAuZXJyb3IoXCInJXMnIGV2ZW50IGhhbmRsZXIgZmFpbGVkLlwiLCBldmVudE5hbWUpXG4gICAgICAvLyAgICAgLndpdGhFeGNlcHRpb24oZSk7XG4gICAgfVxuICB9KTtcbn07XG5cbi8qKlxuICogVHJpZ2dlciB0aGUgZ2l2ZW4gZXZlbnQgd2l0aCB0aGUgZ2l2ZW4gZGF0YS4gIEFsbCBtZXRob2RzIHN1YnNjcmliZWRcbiAqIHRvIHRoaXMgZXZlbnQgd2lsbCBiZSBjYWxsZWQgYW5kIGFyZSBwcm92aWRlZCB3aXRoIHRoZSBnaXZlbiBhcmJpdHJhcnlcbiAqIGRhdGEgb2JqZWN0IGFuZCB0aGUgbmFtZSBvZiB0aGUgZXZlbnQsIGluIHRoYXQgb3JkZXIuXG4gKi9cbkV2ZW50QnVzLnByb3RvdHlwZS50cmlnZ2VyQXN5bmMgPSBmdW5jdGlvbihldmVudE5hbWUsIGRhdGEpIHtcbiAgc2V0VGltZW91dCgoKSA9PiB0aGlzLnRyaWdnZXIoZXZlbnROYW1lLCBkYXRhKSwgMCk7XG59O1xuXG4vKipcbiAqIFJldHVybnMgYSBjbG9zdXJlIHdoaWNoIGJyaWRnZXMgYW4gZXZlbnQgZnJvbSBhbm90aGVyIEV2ZW50QnVzIHRvIHRoaXMgYnVzLlxuICpcbiAqIFVzYWdlOlxuICogY29uZHVpdC5vblVwc3RyZWFtKFwiTXlFdmVudFwiLCBidXMuYnJpZGdlKCkpO1xuICovXG5FdmVudEJ1cy5wcm90b3R5cGUuYnJpZGdlID0gZnVuY3Rpb24oKSB7XG4gIHZhciBzZWxmID0gdGhpcztcbiAgcmV0dXJuIGZ1bmN0aW9uKGRhdGEsIGV2ZW50KSB7XG4gICAgc2VsZi50cmlnZ2VyKGV2ZW50LCBkYXRhKTtcbiAgfTtcbn07XG5cbi8qKlxuICogVW5zdWJzY3JpYmUgYWxsIGV2ZW50cyBpbiB0aGUgZXZlbnQgYnVzLlxuICovXG5FdmVudEJ1cy5wcm90b3R5cGUudW5zdWJzY3JpYmVBbGwgPSBmdW5jdGlvbigpIHtcbiAgdGhpcy5zdWJNYXAuZ2V0QWxsU3Vic2NyaXB0aW9ucygpLmZvckVhY2goZnVuY3Rpb24oc3ViKSB7XG4gICAgc3ViLnVuc3Vic2NyaWJlKCk7XG4gIH0pO1xufTtcblxuZXhwb3J0IHsgRXZlbnRCdXMgfTtcbiIsImltcG9ydCB7XG4gIFVuSW1wbGVtZW50ZWRNZXRob2RFeGNlcHRpb24sXG4gIElsbGVnYWxTdGF0ZUV4Y2VwdGlvblxufSBmcm9tIFwiLi9leGNlcHRpb25zXCI7XG5pbXBvcnQgeyBDb25uZWN0aW9uSGVscGVyU3RhdHVzIH0gZnJvbSBcIi4vY29ubmVjdGlvbkhlbHBlclwiO1xuaW1wb3J0IFV0aWxzIGZyb20gXCIuLi91dGlsc1wiO1xuaW1wb3J0IHsgUEVSU0lTVEVOQ0UsIFZJU0lCSUxJVFksIENIQVRfRVZFTlRTIH0gZnJvbSBcIi4uL2NvbnN0YW50c1wiO1xuXG52YXIgTmV0d29ya0xpbmtTdGF0dXMgPSB7XG4gIE5ldmVyRXN0YWJsaXNoZWQ6IFwiTmV2ZXJFc3RhYmxpc2hlZFwiLFxuICBFc3RhYmxpc2hpbmc6IFwiRXN0YWJsaXNoaW5nXCIsXG4gIEVzdGFibGlzaGVkOiBcIkVzdGFibGlzaGVkXCIsXG4gIEJyb2tlblJldHJ5aW5nOiBcIkJyb2tlblJldHJ5aW5nXCIsXG4gIEJyb2tlbjogXCJCcm9rZW5cIlxufTtcblxuLyplc2xpbnQtZGlzYWJsZSBuby11bnVzZWQtdmFycyovXG5jbGFzcyBDaGF0Q29udHJvbGxlciB7XG4gIC8qKlxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gdGV4dE1lc3NhZ2VcbiAgICogQHJldHVybiBhIHByb21pc2Ugb2JqZWN0IHdpdGhcbiAgICogc3VjY2VzcyA9IHtcbiAgICogIFwic3RhdHVzQ29kZVwiOiAyMDAsXG4gICAqICBcImRhdGFcIjoge1xuICAgKiAgICAgIFwiTWVzc2FnZUlkXCI6IDxzdHJpbmc+XG4gICAqICAgICAgfVxuICAgKiAgfVxuICAgKiBlcnJvciA9IHtcbiAgICogIFwic3RhdHVzQ29kZVwiOiA8ZXJyb3JTdGF0dXNDb2RlPixcbiAgICogIFwiZXhjZXB0aW9uXCI6IHt9IC8vIHNvbWUgb2JqZWN0Li4uXG4gICAqIH1cbiAgICovXG4gIHNlbmRUZXh0TWVzc2FnZSh0ZXh0TWVzc2FnZSkge1xuICAgIHRocm93IG5ldyBVbkltcGxlbWVudGVkTWV0aG9kRXhjZXB0aW9uKFwic2VuZFRleHRNZXNzYWdlIGluIENoYXRDb250cm9sbGVyXCIpO1xuICB9XG5cbiAgLyoqXG4gICAqXG4gICAqIEBwYXJhbSB7Kn0gYXJnc1xuICAgKiBAcmV0dXJuIFByb21pc2Ugb2JqZWN0IHdpdGhcbiAgICogICAgICByZXNwb25zZSA9IHtcbiAgICogICAgICAgICAgICAgIFwiZGV0YWlsc1wiOiB7fSwgLy8gSW1wbGVtZW50YXRpb24gc3BlY2lmaWNcbiAgICogICAgICAgICAgICAgIFwiaW5pdGlhbENvbnRhY3RJZFwiOiA8SW5pdGlhbENvbnRhY3RJZD4sXG4gICAqICAgICAgICAgICAgICBcImNvbnRhY3RJZFwiOiAgPGNvbnRhY3RJZD4sXG4gICAqICAgICAgICAgICAgICBcImNvbm5lY3RTdWNjZXNzXCI6IHRydWVcbiAgICogICAgICB9XG4gICAqICAgICAgZXJyb3IgPSB7XG4gICAqICAgICAgICAgICAgICBcImRldGFpbHNcIjoge30sIC8vIEltcGxlbWVudGF0aW9uIHNwZWNpZmljXG4gICAqICAgICAgICAgICAgICBcImluaXRpYWxDb250YWN0SWRcIjogPEluaXRpYWxDb250YWN0SWQ+LFxuICAgKiAgICAgICAgICAgICAgXCJjb250YWN0SWRcIjogIDxjb250YWN0SWQ+LFxuICAgKiAgICAgICAgICAgICAgXCJjb25uZWN0U3VjY2Vzc1wiOiBmYWxzZVxuICAgKiAgICAgIH1cbiAgICovXG4gIGVzdGFibGlzaE5ldHdvcmtMaW5rKGFyZ3MpIHtcbiAgICB0aHJvdyBuZXcgVW5JbXBsZW1lbnRlZE1ldGhvZEV4Y2VwdGlvbihcImNvbm5lY3RDaGF0IGluIENoYXRDb250cm9sbGVyXCIpO1xuICB9XG5cbiAgLyoqXG4gICAqIEByZXR1cm4gbnVsbFxuICAgKi9cbiAgZGlzY29ubmVjdFBhcnRpY2lwYW50KCkge1xuICAgIHRocm93IG5ldyBVbkltcGxlbWVudGVkTWV0aG9kRXhjZXB0aW9uKFwiZW5kQ2hhdCBpbiBDaGF0Q29udHJvbGxlclwiKTtcbiAgfVxuXG4gIC8qKlxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gZXZlbnRUeXBlXG4gICAqIEByZXR1cm4gUHJvbWlzZSBvYmplY3Qgd2l0aFxuICAgKiAgc3VjY2VzcyA9IHtcbiAgICogICAgICBcInN0YXR1c0NvZGVcIjogMjAwLFxuICAgKiAgICAgIFwiZGF0YVwiOiB7fSAvLyBlbXB0eSBvYmplY3Q/IFRPRE9cbiAgICogIH1cbiAgICogIGVycm9yID0ge1xuICAgKiAgICAgIFwic3RhdHVzQ29kZVwiOiA8ZXJyb3JDb2RlPixcbiAgICogICAgICBcImV4Y2VwdGlvblwiOiB7fSAvLyBzb21lIG9iamVjdFxuICAgKiAgfVxuICAgKi9cbiAgc2VuZEV2ZW50KGV2ZW50VHlwZSkge1xuICAgIHRocm93IG5ldyBVbkltcGxlbWVudGVkTWV0aG9kRXhjZXB0aW9uKFwic2VuZEV2ZW50IGluIENoYXRDb250cm9sbGVyXCIpO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7b2JqZWN0fSBhcmdzIC8vVE9ET1xuICAgKiBAcmV0dXJuIC8vIFRPRE9cbiAgICovXG4gIGdldFRyYW5zY3JpcHQoYXJncykge1xuICAgIHRocm93IG5ldyBVbkltcGxlbWVudGVkTWV0aG9kRXhjZXB0aW9uKFwiZ2V0VHJhbnNjcmlwdCBpbiBDaGF0Q29udHJvbGxlclwiKTtcbiAgfVxuXG4gIGdldENvbm5lY3Rpb25TdGF0dXMoKSB7XG4gICAgdGhyb3cgbmV3IFVuSW1wbGVtZW50ZWRNZXRob2RFeGNlcHRpb24oXCJnZXRTdGF0dXMgaW4gQ2hhdENvbnRyb2xsZXJcIik7XG4gIH1cbn1cbi8qZXNsaW50LWVuYWJsZSBuby11bnVzZWQtdmFycyovXG5cbmNsYXNzIFBlcnNpc3RlbnRDb25uZWN0aW9uQW5kQ2hhdFNlcnZpY2VDb250cm9sbGVyIGV4dGVuZHMgQ2hhdENvbnRyb2xsZXIge1xuICBjb25zdHJ1Y3RvcihhcmdzKSB7XG4gICAgc3VwZXIoKTtcbiAgICB0aGlzLnNldEFyZ3VtZW50cyhhcmdzKTtcbiAgfVxuXG4gIHNldEFyZ3VtZW50cyhhcmdzKSB7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgIHRoaXMuYXJnc1ZhbGlkYXRvciA9IGFyZ3MuYXJnc1ZhbGlkYXRvcjtcbiAgICB0aGlzLmNoYXRFdmVudENvbnN0cnVjdG9yID0gYXJncy5jaGF0RXZlbnRDb25zdHJ1Y3RvcjtcbiAgICB0aGlzLmNvbm5lY3Rpb25EZXRhaWxzID0gYXJncy5jaGF0RGV0YWlscy5jb25uZWN0aW9uRGV0YWlscztcbiAgICB0aGlzLmludGlhbENvbnRhY3RJZCA9IGFyZ3MuY2hhdERldGFpbHMuaW5pdGlhbENvbnRhY3RJZDtcbiAgICB0aGlzLmNvbnRhY3RJZCA9IGFyZ3MuY2hhdERldGFpbHMuY29udGFjdElkO1xuICAgIHRoaXMucGFydGljaXBhbnRJZCA9IGFyZ3MuY2hhdERldGFpbHMucGFydGljaXBhbnRJZDtcbiAgICB0aGlzLmFjcHNDbGllbnQgPSBhcmdzLmFjcHNDbGllbnQ7XG4gICAgdGhpcy5wYXJ0aWNpcGFudFRva2VuID0gYXJncy5jaGF0RGV0YWlscy5wYXJ0aWNpcGFudFRva2VuO1xuICAgIHRoaXMuY29ubmVjdGlvbkhlbHBlckNhbGxiYWNrID0gKGV2ZW50VHlwZSwgZXZlbnREYXRhKSA9PlxuICAgICAgc2VsZi5faGFuZGxlQ29ubmVjdGlvbkhlbHBlckV2ZW50cyhldmVudFR5cGUsIGV2ZW50RGF0YSk7XG4gICAgdGhpcy5faGFzQ29ubmVjdGlvbkRldGFpbHMgPSBhcmdzLmhhc0Nvbm5lY3Rpb25EZXRhaWxzO1xuICAgIHRoaXMuY2hhdENvbnRyb2xsZXJGYWN0b3J5ID0gYXJncy5jaGF0Q29udHJvbGxlckZhY3Rvcnk7XG4gICAgaWYgKGFyZ3MuaGFzQ29ubmVjdGlvbkRldGFpbHMpIHtcbiAgICAgIHRoaXMuX3NldENvbm5lY3Rpb25IZWxwZXIoYXJncy5jaGF0RGV0YWlscy5jb25uZWN0aW9uRGV0YWlscyk7XG4gICAgfVxuICAgIHRoaXMuX2Nvbm5lY3RDYWxsZWRBdGxlYXN0T25jZSA9IGZhbHNlO1xuICAgIHRoaXMuX2V2ZXJDb25uZWN0ZWQgPSBmYWxzZTtcbiAgICB0aGlzLnB1YnN1YiA9IGFyZ3MucHVic3ViO1xuICAgIHRoaXMuY29udGludW91c1N1Y2Nlc3NGZXRjaENvbm5lY3Rpb25zID0gMDtcbiAgICB0aGlzLl9jaGF0RW5kZWQgPSBmYWxzZTtcbiAgfVxuXG4gIF9zZXRDb25uZWN0aW9uSGVscGVyKGNvbm5lY3Rpb25EZXRhaWxzKSB7XG4gICAgdmFyIGNvbm5lY3Rpb25IZWxwZXJQcm92aWRlciA9IHRoaXMuY2hhdENvbnRyb2xsZXJGYWN0b3J5LmNyZWF0ZUNvbm5lY3Rpb25IZWxwZXJQcm92aWRlcihcbiAgICAgIGNvbm5lY3Rpb25EZXRhaWxzXG4gICAgKTtcbiAgICB0aGlzLmNvbm5lY3Rpb25IZWxwZXIgPSBjb25uZWN0aW9uSGVscGVyUHJvdmlkZXIoXG4gICAgICB0aGlzLmNvbm5lY3Rpb25IZWxwZXJDYWxsYmFja1xuICAgICk7XG4gIH1cblxuICBzdWJzY3JpYmUoZXZlbnROYW1lLCBjYWxsYmFjaykge1xuICAgIHRoaXMucHVic3ViLnN1YnNjcmliZShldmVudE5hbWUsIGNhbGxiYWNrKTtcbiAgfVxuXG4gIF9jcmVhdGVQcm9taXNlV3JhcHBlckZyb21Db250ZXh0KHByb21pc2UsIHJlcXVlc3RDb250ZXh0KSB7XG4gICAgdmFyIGNyZWF0ZVJlc29sdmUgPSByZXNvbHZlID0+IHtcbiAgICAgIHJldHVybiByZXNwb25zZSA9PiB7XG4gICAgICAgIHJlc3BvbnNlLnJlcXVlc3RDb250ZXh0ID0gcmVxdWVzdENvbnRleHQ7XG4gICAgICAgIHJlc29sdmUocmVzcG9uc2UpO1xuICAgICAgfTtcbiAgICB9O1xuICAgIHZhciBjcmVhdGVSZWplY3QgPSByZWplY3QgPT4ge1xuICAgICAgcmV0dXJuIGVycm9yID0+IHtcbiAgICAgICAgZXJyb3IucmVxdWVzdENvbnRleHQgPSByZXF1ZXN0Q29udGV4dDtcbiAgICAgICAgcmVqZWN0KGVycm9yKTtcbiAgICAgIH07XG4gICAgfTtcbiAgICByZXR1cm4gVXRpbHMud3JhcFByb21pc2UocHJvbWlzZSwgY3JlYXRlUmVzb2x2ZSwgY3JlYXRlUmVqZWN0KTtcbiAgfVxuXG4gIHNlbmRNZXNzYWdlKG1lc3NhZ2VJbnB1dCwgdHlwZSwgb3B0aW9uYWxQYXJhbXMpIHtcbiAgICB2YXIgb3B0aW9ucyA9IG9wdGlvbmFsUGFyYW1zIHx8IHt9O1xuICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAvL3ZhciB0eXBlID0gb3B0aW9ucy50eXBlIHx8IENPTlRFTlRfVFlQRS50ZXh0UGxhaW47XG4gICAgdmFyIHJlcXVlc3RDb250ZXh0ID0gb3B0aW9ucy5yZXF1ZXN0Q29udGV4dDtcbiAgICBzZWxmLmFyZ3NWYWxpZGF0b3IudmFsaWRhdGVTZW5kTWVzc2FnZShtZXNzYWdlSW5wdXQsIHR5cGUpO1xuICAgIHZhciBjb25uZWN0aW9uVG9rZW4gPSBzZWxmLmNvbm5lY3Rpb25EZXRhaWxzLmNvbm5lY3Rpb25Ub2tlbjtcblxuICAgIHZhciBtZXNzYWdlO1xuICAgIGlmICghVXRpbHMuaXNTdHJpbmcobWVzc2FnZUlucHV0KSkge1xuICAgICAgbWVzc2FnZSA9IG1lc3NhZ2VJbnB1dC5tZXNzYWdlO1xuICAgIH0gZWxzZSB7XG4gICAgICBtZXNzYWdlID0gbWVzc2FnZUlucHV0O1xuICAgIH1cbiAgICB2YXIgcHJvbWlzZSA9IHNlbGYuYWNwc0NsaWVudC5zZW5kTWVzc2FnZShjb25uZWN0aW9uVG9rZW4sIG1lc3NhZ2UsIHR5cGUpO1xuICAgIHJldHVybiB0aGlzLl9jcmVhdGVQcm9taXNlV3JhcHBlckZyb21Db250ZXh0KHByb21pc2UsIHJlcXVlc3RDb250ZXh0KTtcbiAgfVxuXG4gIHNlbmRFdmVudChhcmdzLCBvcHRpb25hbFBhcmFtcykge1xuICAgIHZhciBvcHRpb25zID0gb3B0aW9uYWxQYXJhbXMgfHwge307XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgIHNlbGYuYXJnc1ZhbGlkYXRvci52YWxpZGF0ZVNlbmRFdmVudChhcmdzKTtcbiAgICB2YXIgY29ubmVjdGlvblRva2VuID0gc2VsZi5jb25uZWN0aW9uRGV0YWlscy5jb25uZWN0aW9uVG9rZW47XG4gICAgdmFyIHBlcnNpc3RlbmNlQXJndW1lbnQgPSBhcmdzLnBlcnNpc3RlbmNlIHx8IFBFUlNJU1RFTkNFLlBFUlNJU1RFRDtcbiAgICB2YXIgdmlzaWJpbGl0eUFyZ3VtZW50ID0gYXJncy52aXNpYmlsaXR5IHx8IFZJU0lCSUxJVFkuQUxMO1xuXG4gICAgdmFyIHJlcXVlc3RDb250ZXh0ID0gb3B0aW9ucy5yZXF1ZXN0Q29udGV4dDtcbiAgICB2YXIgcHJvbWlzZSA9IHNlbGYuYWNwc0NsaWVudC5zZW5kRXZlbnQoXG4gICAgICBjb25uZWN0aW9uVG9rZW4sXG4gICAgICBhcmdzLmV2ZW50VHlwZSxcbiAgICAgIGFyZ3MubWVzc2FnZUlkcyxcbiAgICAgIHZpc2liaWxpdHlBcmd1bWVudCxcbiAgICAgIHBlcnNpc3RlbmNlQXJndW1lbnRcbiAgICApO1xuICAgIHJldHVybiB0aGlzLl9jcmVhdGVQcm9taXNlV3JhcHBlckZyb21Db250ZXh0KHByb21pc2UsIHJlcXVlc3RDb250ZXh0KTtcbiAgfVxuXG4gIGdldFRyYW5zY3JpcHQoaW5wdXRBcmdzLCBvcHRpb25hbFBhcmFtcykge1xuICAgIHZhciBvcHRpb25zID0gb3B0aW9uYWxQYXJhbXMgfHwge307XG4gICAgdmFyIGFyZ3MgPSB7fTtcbiAgICBhcmdzLkludGlhbENvbnRhY3RJZCA9IHRoaXMuaW50aWFsQ29udGFjdElkO1xuICAgIGFyZ3MuU3RhcnRLZXkgPSBpbnB1dEFyZ3MuU3RhcnRLZXkgfHwge307XG4gICAgYXJncy5TY2FuRGlyZWN0aW9uID0gaW5wdXRBcmdzLlNjYW5EaXJlY3Rpb24gfHwgXCJCQUNLV0FSRFwiO1xuICAgIGFyZ3MuU29ydEtleSA9IGlucHV0QXJncy5Tb3J0S2V5IHx8IFwiQVNDRU5ESU5HXCI7XG4gICAgYXJncy5NYXhSZXN1bHRzID0gaW5wdXRBcmdzLk1heFJlc3VsdHMgfHwgMTU7XG4gICAgaWYgKGlucHV0QXJncy5OZXh0VG9rZW4pIHtcbiAgICAgIGFyZ3MuTmV4dFRva2VuID0gaW5wdXRBcmdzLk5leHRUb2tlbjtcbiAgICB9XG4gICAgdmFyIGNvbm5lY3Rpb25Ub2tlbiA9IHRoaXMuY29ubmVjdGlvbkRldGFpbHMuY29ubmVjdGlvblRva2VuO1xuXG4gICAgdmFyIHJlcXVlc3RDb250ZXh0ID0gb3B0aW9ucy5yZXF1ZXN0Q29udGV4dDtcbiAgICB2YXIgcHJvbWlzZSA9IHRoaXMuYWNwc0NsaWVudC5nZXRUcmFuc2NyaXB0KGNvbm5lY3Rpb25Ub2tlbiwgYXJncyk7XG4gICAgcmV0dXJuIHRoaXMuX2NyZWF0ZVByb21pc2VXcmFwcGVyRnJvbUNvbnRleHQocHJvbWlzZSwgcmVxdWVzdENvbnRleHQpO1xuICB9XG5cbiAgX2hhbmRsZUNvbm5lY3Rpb25IZWxwZXJFdmVudHMoZXZlbnRUeXBlLCBldmVudERhdGEpIHtcbiAgICB0cnkge1xuICAgICAgdmFyIGNoYXRFdmVudCA9IHRoaXMuY2hhdEV2ZW50Q29uc3RydWN0b3IuZnJvbUNvbm5lY3Rpb25IZWxwZXJFdmVudChcbiAgICAgICAgZXZlbnRUeXBlLFxuICAgICAgICBldmVudERhdGEsXG4gICAgICAgIHRoaXMuZ2V0Q2hhdERldGFpbHMoKVxuICAgICAgKTtcbiAgICB9IGNhdGNoIChleGMpIHtcbiAgICAgIC8vIFRPRE8gbG9nIHRoZSBleGNlcHRpb25cbiAgICAgIGNvbnNvbGUubG9nKGV4Yyk7XG4gICAgICB0aHJvdyBleGM7XG4gICAgfVxuICAgIHRoaXMucHVic3ViLnRyaWdnZXJBc3luYyhjaGF0RXZlbnQudHlwZSwgY2hhdEV2ZW50LmRhdGEpO1xuICB9XG5cbiAgY29ubmVjdChhcmdzKSB7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgIHRoaXMuYXJnc1ZhbGlkYXRvci52YWxpZGF0ZUNvbm5lY3RDaGF0KGFyZ3MpO1xuICAgIGlmIChcbiAgICAgIHNlbGYuZ2V0Q29ubmVjdGlvblN0YXR1cygpICE9PSBOZXR3b3JrTGlua1N0YXR1cy5Ccm9rZW4gJiZcbiAgICAgIHNlbGYuZ2V0Q29ubmVjdGlvblN0YXR1cygpICE9PSBOZXR3b3JrTGlua1N0YXR1cy5OZXZlckVzdGFibGlzaGVkXG4gICAgKSB7XG4gICAgICB0aHJvdyBuZXcgSWxsZWdhbFN0YXRlRXhjZXB0aW9uKFxuICAgICAgICBcIkNhbiBjYWxsIGVzdGFibGlzaE5ldHdvcmtMaW5rIG9ubHkgd2hlbiBnZXRDb25uZWN0aW9uU3RhdHVzIGlzIEJyb2tlbiBvciBOZXZlckVzdGFibGlzaGVkXCJcbiAgICAgICk7XG4gICAgfVxuICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgIHZhciBjYWxsYmFja3MgPSBzZWxmLl9jcmVhdGVDb25uZWN0Q2FsbGJhY2tzV3JhcHBlcihcbiAgICAgICAgcmVzb2x2ZSxcbiAgICAgICAgcmVqZWN0LFxuICAgICAgICBhcmdzXG4gICAgICApO1xuICAgICAgaWYgKHNlbGYuX2hhc0Nvbm5lY3Rpb25EZXRhaWxzKSB7XG4gICAgICAgIHNlbGYuX3N0YXJ0Q29ubmVjdGlvbkhlbHBlcihjYWxsYmFja3MpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgc2VsZlxuICAgICAgICAgIC5fZmV0Y2hDb25uZWN0aW9uRGV0YWlscygpXG4gICAgICAgICAgLnRoZW4oZnVuY3Rpb24oY29ubmVjdGlvbkRldGFpbHMpIHtcbiAgICAgICAgICAgIHNlbGYuX3NldENvbm5lY3Rpb25IZWxwZXIoY29ubmVjdGlvbkRldGFpbHMpO1xuICAgICAgICAgICAgc2VsZi5jb25uZWN0aW9uRGV0YWlscyA9IGNvbm5lY3Rpb25EZXRhaWxzO1xuICAgICAgICAgICAgc2VsZi5faGFzQ29ubmVjdGlvbkRldGFpbHMgPSB0cnVlO1xuICAgICAgICAgICAgc2VsZi5fc3RhcnRDb25uZWN0aW9uSGVscGVyKGNhbGxiYWNrcyk7XG4gICAgICAgICAgfSlcbiAgICAgICAgICAuY2F0Y2goZnVuY3Rpb24oZXJyb3IpIHtcbiAgICAgICAgICAgIGNhbGxiYWNrcy5yZWplY3QoZXJyb3IpO1xuICAgICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgc2VsZi5fY29ubmVjdENhbGxlZEF0bGVhc3RPbmNlID0gdHJ1ZTtcbiAgICB9KTtcbiAgfVxuXG4gIF9jcmVhdGVDb25uZWN0Q2FsbGJhY2tzV3JhcHBlcihyZXNvbHZlQ2FsbGJhY2ssIHJlamVjdENhbGxiYWNrLCByZXF1ZXN0KSB7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgIHJldHVybiB7XG4gICAgICByZXNvbHZlOiByZXNwb25zZSA9PiB7XG4gICAgICAgIHZhciByZXNwb25zZU9iamVjdCA9IHtcbiAgICAgICAgICBfZGVidWc6IHJlc3BvbnNlLFxuICAgICAgICAgIGNvbm5lY3RTdWNjZXNzOiB0cnVlLFxuICAgICAgICAgIGNvbm5lY3RDYWxsZWQ6IHRydWVcbiAgICAgICAgfTtcbiAgICAgICAgdmFyIGV2ZW50RGF0YSA9IE9iamVjdC5hc3NpZ24oXG4gICAgICAgICAge1xuICAgICAgICAgICAgY2hhdERldGFpbHM6IHNlbGYuZ2V0Q2hhdERldGFpbHMoKVxuICAgICAgICAgIH0sXG4gICAgICAgICAgcmVzcG9uc2VPYmplY3RcbiAgICAgICAgKTtcbiAgICAgICAgdGhpcy5wdWJzdWIudHJpZ2dlckFzeW5jKENIQVRfRVZFTlRTLkNPTk5FQ1RJT05fRVNUQUJMSVNIRUQsIGV2ZW50RGF0YSk7XG4gICAgICAgIHJlc29sdmVDYWxsYmFjayhyZXNwb25zZU9iamVjdCwgcmVxdWVzdCk7XG4gICAgICB9LFxuICAgICAgcmVqZWN0OiBlcnJvciA9PiB7XG4gICAgICAgIHZhciBlcnJvck9iamVjdCA9IHtcbiAgICAgICAgICBfZGVidWc6IGVycm9yLFxuICAgICAgICAgIGNvbm5lY3RTdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgICBjb25uZWN0Q2FsbGVkOiB0cnVlXG4gICAgICAgIH07XG4gICAgICAgIHJlamVjdENhbGxiYWNrKGVycm9yT2JqZWN0LCByZXF1ZXN0KTtcbiAgICAgIH1cbiAgICB9O1xuICB9XG5cbiAgX2ZldGNoQ29ubmVjdGlvbkRldGFpbHMoKSB7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgIHNlbGYuYWNwc0NsaWVudFxuICAgICAgICAuY3JlYXRlQ29ubmVjdGlvbkRldGFpbHMoc2VsZi5wYXJ0aWNpcGFudFRva2VuKVxuICAgICAgICAudGhlbihmdW5jdGlvbihyZXNwb25zZSkge1xuICAgICAgICAgIHZhciBjb25uZWN0aW9uRGV0YWlscyA9IHt9O1xuICAgICAgICAgIGNvbm5lY3Rpb25EZXRhaWxzLkNvbm5lY3Rpb25JZCA9XG4gICAgICAgICAgICByZXNwb25zZS5kYXRhLkNvbm5lY3Rpb25EZXRhaWxzLkNvbm5lY3Rpb25JZDtcbiAgICAgICAgICBjb25uZWN0aW9uRGV0YWlscy5QcmVTaWduZWRDb25uZWN0aW9uVXJsID1cbiAgICAgICAgICAgIHJlc3BvbnNlLmRhdGEuQ29ubmVjdGlvbkRldGFpbHMuUHJlU2lnbmVkQ29ubmVjdGlvblVybDtcbiAgICAgICAgICBjb25uZWN0aW9uRGV0YWlscy5jb25uZWN0aW9uVG9rZW4gPVxuICAgICAgICAgICAgcmVzcG9uc2UuZGF0YS5QYXJ0aWNpcGFudENyZWRlbnRpYWxzLlRva2VuO1xuICAgICAgICAgIHJlc29sdmUoY29ubmVjdGlvbkRldGFpbHMpO1xuICAgICAgICB9KVxuICAgICAgICAuY2F0Y2goZnVuY3Rpb24oZXJyb3IpIHtcbiAgICAgICAgICByZWplY3Qoe1xuICAgICAgICAgICAgcmVhc29uOiBcIkZhaWxlZCB0byBmZXRjaCBjb25uZWN0aW9uRGV0YWlsc1wiLFxuICAgICAgICAgICAgX2RlYnVnOiBlcnJvclxuICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9KTtcbiAgfVxuXG4gIGRpc2Nvbm5lY3RQYXJ0aWNpcGFudCgpIHtcbiAgICAvLyBob3cgdG8gaGFuZGxlIHRoZSBmYWlsdXJlIG9mIHRoZSBhY3BzIGRpc2Nvbm5lY3QgQVBJIGNhbGw/XG4gICAgLy8gQ2FudCB0cm91YmxlIHRoZSBjbGllbnQgdG8gbWFrZSBzdXJlIGl0IGRpc2Nvbm5lY3RzIHRoZSBjaGF0IGJlXG4gICAgLy8gcmV0cnlpbmcgdGhyb3VnaCBhIGJ1dHRvbiBjbGljaywgYXQgbWF4IHNob3VsZCBoYXZlIHNjaGVkdWxlZFxuICAgIC8vIHJldHJ5IGZvciBkaXNjb25uZWN0aW5nIGludGVybmFsbHkgd2l0aG91dCBpbmZvcm1pbmcgdGhlIGNsaWVudC5cbiAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgc2VsZi5fY2hhdEVuZGVkID0gdHJ1ZTtcbiAgICB2YXIgY29ubmVjdGlvblRva2VuID0gc2VsZi5jb25uZWN0aW9uRGV0YWlscy5jb25uZWN0aW9uVG9rZW47XG4gICAgc2V0VGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgIHNlbGYuYWNwc0NsaWVudC5kaXNjb25uZWN0Q2hhdChjb25uZWN0aW9uVG9rZW4pO1xuICAgICAgc2VsZi5jb25uZWN0aW9uSGVscGVyLmVuZCgpO1xuICAgIH0sIDApO1xuICB9XG5cbiAgX3N0YXJ0Q29ubmVjdGlvbkhlbHBlcihjYWxsYmFja3MpIHtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgdGhpcy5jb25uZWN0aW9uSGVscGVyXG4gICAgICAuc3RhcnQoKVxuICAgICAgLnRoZW4oZnVuY3Rpb24ocmVzcG9uc2UpIHtcbiAgICAgICAgc2VsZi5fZXZlckNvbm5lY3RlZCA9IHRydWU7XG4gICAgICAgIGNhbGxiYWNrcy5yZXNvbHZlKHJlc3BvbnNlLmRldGFpbHMpO1xuICAgICAgfSlcbiAgICAgIC5jYXRjaChmdW5jdGlvbigpIHtcbiAgICAgICAgY2FsbGJhY2tzLnJlamVjdCh7fSk7XG4gICAgICB9KTtcbiAgfVxuXG4gIGdldENoYXREZXRhaWxzKCkge1xuICAgIHZhciBzZWxmID0gdGhpcztcbiAgICByZXR1cm4ge1xuICAgICAgaW50aWFsQ29udGFjdElkOiBzZWxmLmludGlhbENvbnRhY3RJZCxcbiAgICAgIGNvbnRhY3RJZDogc2VsZi5jb250YWN0SWQsXG4gICAgICBwYXJ0aWNpcGFudElkOiBzZWxmLnBhcnRpY2lwYW50SWQsXG4gICAgICBwYXJ0aWNpcGFudFRva2VuOiBzZWxmLnBhcnRpY2lwYW50VG9rZW4sXG4gICAgICBjb25uZWN0aW9uRGV0YWlsczogc2VsZi5jb25uZWN0aW9uRGV0YWlsc1xuICAgIH07XG4gIH1cblxuICBfY29udmVydENvbm5lY3Rpb25IZWxwZXJTdGF0dXMoY29ubmVjdGlvbkhlbHBlclN0YXR1cykge1xuICAgIHN3aXRjaCAoY29ubmVjdGlvbkhlbHBlclN0YXR1cykge1xuICAgICAgY2FzZSBDb25uZWN0aW9uSGVscGVyU3RhdHVzLk5ldmVyU3RhcnRlZDpcbiAgICAgICAgcmV0dXJuIE5ldHdvcmtMaW5rU3RhdHVzLk5ldmVyRXN0YWJsaXNoZWQ7XG4gICAgICBjYXNlIENvbm5lY3Rpb25IZWxwZXJTdGF0dXMuU3RhcnRpbmc6XG4gICAgICAgIHJldHVybiBOZXR3b3JrTGlua1N0YXR1cy5Fc3RhYmxpc2hpbmc7XG4gICAgICBjYXNlIENvbm5lY3Rpb25IZWxwZXJTdGF0dXMuRW5kZWQ6XG4gICAgICAgIHJldHVybiBOZXR3b3JrTGlua1N0YXR1cy5Ccm9rZW47XG4gICAgICBjYXNlIENvbm5lY3Rpb25IZWxwZXJTdGF0dXMuQ29ubmVjdGVkOlxuICAgICAgICByZXR1cm4gTmV0d29ya0xpbmtTdGF0dXMuRXN0YWJsaXNoZWQ7XG4gICAgICBjYXNlIENvbm5lY3Rpb25IZWxwZXJTdGF0dXMuRGlzY29ubmVjdGVkUmVjb25uZWN0aW5nOlxuICAgICAgICByZXR1cm4gTmV0d29ya0xpbmtTdGF0dXMuQnJva2VuUmV0cnlpbmc7XG4gICAgfVxuICAgIC8vIExPRyBmYXRhbCBlcnJvciBoZXJlLiBXZSBzaG91bGQgbmV2ZXIgcmVhY2ggaGVyZS5cbiAgfVxuXG4gIGdldENvbm5lY3Rpb25TdGF0dXMoKSB7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgIGlmICghc2VsZi5faGFzQ29ubmVjdGlvbkRldGFpbHMpIHtcbiAgICAgIHJldHVybiBOZXR3b3JrTGlua1N0YXR1cy5OZXZlckVzdGFibGlzaGVkO1xuICAgIH1cbiAgICByZXR1cm4gc2VsZi5fY29udmVydENvbm5lY3Rpb25IZWxwZXJTdGF0dXMoXG4gICAgICBzZWxmLmNvbm5lY3Rpb25IZWxwZXIuZ2V0U3RhdHVzKClcbiAgICApO1xuICB9XG59XG5cbmV4cG9ydCB7IFBlcnNpc3RlbnRDb25uZWN0aW9uQW5kQ2hhdFNlcnZpY2VDb250cm9sbGVyIH07XG4iLCJpbXBvcnQge1xuICBVbkltcGxlbWVudGVkTWV0aG9kRXhjZXB0aW9uLFxuICBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25cbn0gZnJvbSBcIi4vZXhjZXB0aW9uc1wiO1xuaW1wb3J0IHsgQ2hhdENsaWVudEZhY3RvcnkgfSBmcm9tIFwiLi4vY2xpZW50L2NsaWVudFwiO1xuaW1wb3J0IHsgQ2hhdFNlcnZpY2VBcmdzVmFsaWRhdG9yIH0gZnJvbSBcIi4vY2hhdEFyZ3NWYWxpZGF0b3JcIjtcbmltcG9ydCB7IENoYXRDb25uZWN0aW9uTWFuYWdlciB9IGZyb20gXCIuL2Nvbm5lY3Rpb25NYW5hZ2VyXCI7XG5pbXBvcnQgeyBTb2xvQ2hhdENvbm5lY3Rpb25NcXR0SGVscGVyIH0gZnJvbSBcIi4vY29ubmVjdGlvbkhlbHBlclwiO1xuaW1wb3J0IHsgU0VTU0lPTl9UWVBFUywgQ0hBVF9FVkVOVFMgfSBmcm9tIFwiLi4vY29uc3RhbnRzXCI7XG5pbXBvcnQgeyBFdmVudENvbnN0cnVjdG9yIH0gZnJvbSBcIi4vZXZlbnRDb25zdHJ1Y3RvclwiO1xuaW1wb3J0IHsgRXZlbnRCdXMgfSBmcm9tIFwiLi9ldmVudGJ1c1wiO1xuXG5pbXBvcnQgeyBQZXJzaXN0ZW50Q29ubmVjdGlvbkFuZENoYXRTZXJ2aWNlQ29udHJvbGxlciB9IGZyb20gXCIuL2NoYXRDb250cm9sbGVyXCI7XG5cbmNsYXNzIENoYXRTZXNzaW9uRmFjdG9yeSB7XG4gIC8qZXNsaW50LWRpc2FibGUgbm8tdW51c2VkLXZhcnMqL1xuXG4gIGNyZWF0ZUFnZW50Q2hhdENvbnRyb2xsZXIoY2hhdERldGFpbHMsIHBhcnRpY2lwYW50VHlwZSkge1xuICAgIHRocm93IG5ldyBVbkltcGxlbWVudGVkTWV0aG9kRXhjZXB0aW9uKFxuICAgICAgXCJjcmVhdGVBZ2VudENoYXRDb250cm9sbGVyIGluIENoYXRDb250cm9sbGVyRmFjdG9yeS5cIlxuICAgICk7XG4gIH1cblxuICBjcmVhdGVDdXN0b21lckNoYXRDb250cm9sbGVyKGNoYXREZXRhaWxzLCBwYXJ0aWNpcGFudFR5cGUpIHtcbiAgICB0aHJvdyBuZXcgVW5JbXBsZW1lbnRlZE1ldGhvZEV4Y2VwdGlvbihcbiAgICAgIFwiY3JlYXRlQ3VzdG9tZXJDaGF0Q29udHJvbGxlciBpbiBDaGF0Q29udHJvbGxlckZhY3RvcnkuXCJcbiAgICApO1xuICB9XG5cbiAgY3JlYXRlQ29ubmVjdGlvbkhlbHBlclByb3ZpZGVyKGNvbm5lY3Rpb25EZXRhaWxzKSB7XG4gICAgdGhyb3cgbmV3IFVuSW1wbGVtZW50ZWRNZXRob2RFeGNlcHRpb24oXG4gICAgICBcImNyZWF0ZUluY29taW5nQ2hhdENvbnRyb2xsZXIgaW4gQ2hhdENvbnRyb2xsZXJGYWN0b3J5XCJcbiAgICApO1xuICB9XG4gIC8qZXNsaW50LWVuYWJsZSBuby11bnVzZWQtdmFycyovXG59XG5cbmNsYXNzIFBlcnNpc3RlbnRDb25uZWN0aW9uQW5kQ2hhdFNlcnZpY2VTZXNzaW9uRmFjdG9yeSBleHRlbmRzIENoYXRTZXNzaW9uRmFjdG9yeSB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHN1cGVyKCk7XG4gICAgdGhpcy5hcmdzVmFsaWRhdG9yID0gbmV3IENoYXRTZXJ2aWNlQXJnc1ZhbGlkYXRvcigpO1xuICAgIHRoaXMuY2hhdENvbm5lY3Rpb25NYW5hZ2VyID0gbmV3IENoYXRDb25uZWN0aW9uTWFuYWdlcigpO1xuICAgIHRoaXMuYWNwc0NsaWVudCA9IENoYXRDbGllbnRGYWN0b3J5LmdldENsaWVudChcIlBST0RcIik7XG4gICAgdGhpcy5jaGF0RXZlbnRDb25zdHJ1Y3RvciA9IG5ldyBFdmVudENvbnN0cnVjdG9yKCk7XG4gICAgLy8gVE9ETyByZW1vdmUgYmVsb3cgLSBpdHMgZm9yIHRlc3RpbmcuXG4gICAgLy90aGlzLmFjcHNDbGllbnQgPSBuZXcgTW9ja0FjcHNDbGllbnQoe1xuICAgIC8vICAgIFwicGFydGljaXBhbnRUb2tlblwiOiBcInBhcnRpY2lwYW50VG9rZW5cIixcbiAgICAvLyAgICBcImNvbm5lY3Rpb25JZFwiOiBDSUQsXG4gICAgLy8gICAgXCJwcmVTaWduZWRVcmxcIjogUFVSTFxuICAgIC8vfSk7XG4gIH1cblxuICBjcmVhdGVBZ2VudENoYXRTZXNzaW9uKGNoYXREZXRhaWxzKSB7XG4gICAgdmFyIGNoYXRDb250cm9sbGVyID0gdGhpcy5fY3JlYXRlQ2hhdFNlc3Npb24oY2hhdERldGFpbHMpO1xuICAgIHJldHVybiBuZXcgQWdlbnRDaGF0U2Vzc2lvbihjaGF0Q29udHJvbGxlcik7XG4gIH1cblxuICBjcmVhdGVDdXN0b21lckNoYXRTZXNzaW9uKGNoYXREZXRhaWxzKSB7XG4gICAgdmFyIGNoYXRDb250cm9sbGVyID0gdGhpcy5fY3JlYXRlQ2hhdFNlc3Npb24oY2hhdERldGFpbHMpO1xuICAgIHJldHVybiBuZXcgQ3VzdG9tZXJDaGF0U2Vzc2lvbihjaGF0Q29udHJvbGxlcik7XG4gIH1cblxuICBfY3JlYXRlQ2hhdFNlc3Npb24oY2hhdERldGFpbHNJbnB1dCkge1xuICAgIC8vdGhpcy5hcmdzVmFsaWRhdG9yLnZhbGlkYXRlTmV3Q29udHJvbGxlckRldGFpbHMoY2hhdERldGFpbHNJbnB1dCk7XG4gICAgdmFyIGNoYXREZXRhaWxzID0gdGhpcy5fbm9ybWFsaXplQ2hhdERldGFpbHMoY2hhdERldGFpbHNJbnB1dCk7XG4gICAgdmFyIGhhc0Nvbm5lY3Rpb25EZXRhaWxzID0gZmFsc2U7XG4gICAgaWYgKGNoYXREZXRhaWxzLmNvbm5lY3Rpb25EZXRhaWxzKSB7XG4gICAgICBoYXNDb25uZWN0aW9uRGV0YWlscyA9IHRydWU7XG4gICAgfVxuICAgIHZhciBhcmdzID0ge1xuICAgICAgY2hhdERldGFpbHM6IGNoYXREZXRhaWxzLFxuICAgICAgY2hhdENvbnRyb2xsZXJGYWN0b3J5OiB0aGlzLFxuICAgICAgY2hhdEV2ZW50Q29uc3RydWN0b3I6IHRoaXMuY2hhdEV2ZW50Q29uc3RydWN0b3IsXG4gICAgICBwdWJzdWI6IG5ldyBFdmVudEJ1cygpLFxuICAgICAgYWNwc0NsaWVudDogdGhpcy5hY3BzQ2xpZW50LFxuICAgICAgYXJnc1ZhbGlkYXRvcjogdGhpcy5hcmdzVmFsaWRhdG9yLFxuICAgICAgaGFzQ29ubmVjdGlvbkRldGFpbHM6IGhhc0Nvbm5lY3Rpb25EZXRhaWxzXG4gICAgfTtcbiAgICByZXR1cm4gbmV3IFBlcnNpc3RlbnRDb25uZWN0aW9uQW5kQ2hhdFNlcnZpY2VDb250cm9sbGVyKGFyZ3MpO1xuICB9XG5cbiAgX25vcm1hbGl6ZUNoYXREZXRhaWxzKGNoYXREZXRhaWxzSW5wdXQpIHtcbiAgICBpZiAoXG4gICAgICBjaGF0RGV0YWlsc0lucHV0LlBhcnRpY2lwYW50Q3JlZGVudGlhbHMgJiZcbiAgICAgIGNoYXREZXRhaWxzSW5wdXQuUGFydGljaXBhbnRDcmVkZW50aWFscy5Ub2tlblxuICAgICkge1xuICAgICAgdGhpcy5hcmdzVmFsaWRhdG9yLnZhbGlkYXRlSW5pdGlhdGVDaGF0UmVzcG9uc2UoY2hhdERldGFpbHNJbnB1dCk7XG4gICAgICB2YXIgY2hhdERldGFpbHMgPSB7fTtcbiAgICAgIHZhciBjb25uZWN0aW9uRGV0YWlscyA9IHt9O1xuICAgICAgY29ubmVjdGlvbkRldGFpbHMuY29ubmVjdGlvblRva2VuID1cbiAgICAgICAgY2hhdERldGFpbHNJbnB1dC5QYXJ0aWNpcGFudENyZWRlbnRpYWxzLlRva2VuO1xuICAgICAgY29ubmVjdGlvbkRldGFpbHMuQ29ubmVjdGlvbklkID1cbiAgICAgICAgY2hhdERldGFpbHNJbnB1dC5Db25uZWN0aW9uRGV0YWlscy5Db25uZWN0aW9uSWQ7XG4gICAgICBjb25uZWN0aW9uRGV0YWlscy5QcmVTaWduZWRDb25uZWN0aW9uVXJsID1cbiAgICAgICAgY2hhdERldGFpbHNJbnB1dC5Db25uZWN0aW9uRGV0YWlscy5QcmVTaWduZWRDb25uZWN0aW9uVXJsO1xuICAgICAgY2hhdERldGFpbHMuY29ubmVjdGlvbkRldGFpbHMgPSBjb25uZWN0aW9uRGV0YWlscztcbiAgICAgIGNoYXREZXRhaWxzLnBhcnRpY2lwYW50SWQgPSBjaGF0RGV0YWlsc0lucHV0LlBhcnRpY2lwYW50SWQ7XG4gICAgICBjaGF0RGV0YWlscy5jb250YWN0SWQgPSBjaGF0RGV0YWlsc0lucHV0LkNvbnRhY3RJZDtcbiAgICAgIGNoYXREZXRhaWxzLmluaXRpYWxDb250YWN0SWQgPSBjaGF0RGV0YWlsc0lucHV0LkNvbnRhY3RJZDtcbiAgICAgIHJldHVybiBjaGF0RGV0YWlscztcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5hcmdzVmFsaWRhdG9yLnZhbGlkYXRlQ2hhdERldGFpbHMoY2hhdERldGFpbHNJbnB1dCk7XG4gICAgICByZXR1cm4gY2hhdERldGFpbHNJbnB1dDtcbiAgICB9XG4gIH1cblxuICBjcmVhdGVDb25uZWN0aW9uSGVscGVyUHJvdmlkZXIoY29ubmVjdGlvbkRldGFpbHMpIHtcbiAgICAvL2xhdGVyIHJldHVybiBiYXNlZCBvbiB0aGUgdHlwZSBhcmd1bWVudFxuICAgIHZhciBjb25uZWN0aW9uQXJncyA9IHtcbiAgICAgIHByZVNpZ25lZFVybDogY29ubmVjdGlvbkRldGFpbHMuUHJlU2lnbmVkQ29ubmVjdGlvblVybCxcbiAgICAgIGNvbm5lY3Rpb25JZDogY29ubmVjdGlvbkRldGFpbHMuQ29ubmVjdGlvbklkLFxuICAgICAgbWF4UmV0cnlUaW1lOiAxMjAsIC8vIG5vdCB1c2VkIHJpZ2h0IG5vdyBhbnl3YXlzLlxuICAgICAgZGVidWc6IHRydWVcbiAgICB9O1xuICAgIHZhciBtcXR0Q29ubmVjdGlvblByb3ZpZGVyID0gdGhpcy5jaGF0Q29ubmVjdGlvbk1hbmFnZXIuY3JlYXRlTmV3TXF0dENvbm5lY3Rpb25Qcm92aWRlcihcbiAgICAgIGNvbm5lY3Rpb25BcmdzLFxuICAgICAgXCJQYWhvTXF0dENvbm5lY3Rpb25cIlxuICAgICk7XG4gICAgdmFyIGFyZ3MgPSB7XG4gICAgICBtcXR0Q29ubmVjdGlvblByb3ZpZGVyOiBtcXR0Q29ubmVjdGlvblByb3ZpZGVyLFxuICAgICAgY29ubmVjdGlvbkRldGFpbHM6IHtcbiAgICAgICAgcHJlU2lnbmVkVXJsOiBjb25uZWN0aW9uRGV0YWlscy5QcmVTaWduZWRDb25uZWN0aW9uVXJsLFxuICAgICAgICBjb25uZWN0aW9uSWQ6IGNvbm5lY3Rpb25EZXRhaWxzLkNvbm5lY3Rpb25JZFxuICAgICAgfVxuICAgIH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uKGNhbGxiYWNrKSB7XG4gICAgICBhcmdzLmNhbGxiYWNrID0gY2FsbGJhY2s7XG4gICAgICByZXR1cm4gbmV3IFNvbG9DaGF0Q29ubmVjdGlvbk1xdHRIZWxwZXIoYXJncyk7XG4gICAgfTtcbiAgfVxufVxuXG5jbGFzcyBDaGF0U2Vzc2lvbiB7XG4gIGNvbnN0cnVjdG9yKGNvbnRyb2xsZXIpIHtcbiAgICB0aGlzLmNvbnRyb2xsZXIgPSBjb250cm9sbGVyO1xuICB9XG5cbiAgb25NZXNzYWdlKGNhbGxiYWNrKSB7XG4gICAgdGhpcy5jb250cm9sbGVyLnN1YnNjcmliZShDSEFUX0VWRU5UUy5JTkNPTUlOR19NRVNTQUdFLCBjYWxsYmFjayk7XG4gIH1cblxuICBvblR5cGluZyhjYWxsYmFjaykge1xuICAgIHRoaXMuY29udHJvbGxlci5zdWJzY3JpYmUoQ0hBVF9FVkVOVFMuSU5DT01JTkdfVFlQSU5HLCBjYWxsYmFjayk7XG4gIH1cblxuICBvbkNvbm5lY3Rpb25Ccm9rZW4oY2FsbGJhY2spIHtcbiAgICB0aGlzLmNvbnRyb2xsZXIuc3Vic2NyaWJlKENIQVRfRVZFTlRTLkNPTk5FQ1RJT05fQlJPS0VOLCBjYWxsYmFjayk7XG4gIH1cblxuICBvbkNvbm5lY3Rpb25Fc3RhYmxpc2hlZChjYWxsYmFjaykge1xuICAgIHRoaXMuY29udHJvbGxlci5zdWJzY3JpYmUoQ0hBVF9FVkVOVFMuQ09OTkVDVElPTl9FU1RBQkxJU0hFRCwgY2FsbGJhY2spO1xuICB9XG5cbiAgc2VuZE1lc3NhZ2UobWVzc2FnZSwgdHlwZSwgb3B0aW9ucykge1xuICAgIHJldHVybiB0aGlzLmNvbnRyb2xsZXIuc2VuZE1lc3NhZ2UobWVzc2FnZSwgdHlwZSwgb3B0aW9ucyk7XG4gIH1cblxuICBjb25uZWN0KGFyZ3MsIG9wdGlvbnMpIHtcbiAgICByZXR1cm4gdGhpcy5jb250cm9sbGVyLmNvbm5lY3QoXG4gICAgICBhcmdzLFxuICAgICAgb3B0aW9uc1xuICAgICk7XG4gIH1cblxuICBzZW5kRXZlbnQoYXJncywgb3B0aW9ucykge1xuICAgIHJldHVybiB0aGlzLmNvbnRyb2xsZXIuc2VuZEV2ZW50KGFyZ3MsIG9wdGlvbnMpO1xuICB9XG5cbiAgZ2V0VHJhbnNjcmlwdChhcmdzLCBvcHRpb25zKSB7XG4gICAgcmV0dXJuIHRoaXMuY29udHJvbGxlci5nZXRUcmFuc2NyaXB0KGFyZ3MsIG9wdGlvbnMpO1xuICB9XG5cbiAgZ2V0Q29ubmVjdGlvblN0YXR1cygpIHtcbiAgICByZXR1cm4gdGhpcy5jb250cm9sbGVyLmdldENvbm5lY3Rpb25TdGF0dXMoKTtcbiAgfVxuXG4gIGdldENoYXREZXRhaWxzKCkge1xuICAgIHJldHVybiB0aGlzLmNvbnRyb2xsZXIuZ2V0Q2hhdERldGFpbHMoKTtcbiAgfVxufVxuXG5jbGFzcyBBZ2VudENoYXRTZXNzaW9uIGV4dGVuZHMgQ2hhdFNlc3Npb24ge1xuICBjb25zdHJ1Y3Rvcihjb250cm9sbGVyKSB7XG4gICAgc3VwZXIoY29udHJvbGxlcik7XG4gIH1cbn1cblxuY2xhc3MgQ3VzdG9tZXJDaGF0U2Vzc2lvbiBleHRlbmRzIENoYXRTZXNzaW9uIHtcbiAgY29uc3RydWN0b3IoY29udHJvbGxlcikge1xuICAgIHN1cGVyKGNvbnRyb2xsZXIpO1xuICB9XG5cbiAgZGlzY29ubmVjdFBhcnRpY2lwYW50KCkge1xuICAgIHJldHVybiB0aGlzLmNvbnRyb2xsZXIuZGlzY29ubmVjdFBhcnRpY2lwYW50KCk7XG4gIH1cbn1cblxuY29uc3QgQ0hBVF9TRVNTSU9OX0ZBQ1RPUlkgPSBuZXcgUGVyc2lzdGVudENvbm5lY3Rpb25BbmRDaGF0U2VydmljZVNlc3Npb25GYWN0b3J5KCk7XG5cbnZhciBDaGF0U2Vzc2lvbkNvbnN0cnVjdG9yID0gKGNoYXREZXRhaWxzLCB0eXBlUGFyYW0pID0+IHtcbiAgdmFyIHR5cGUgPSB0eXBlUGFyYW0gfHwgU0VTU0lPTl9UWVBFUy5BR0VOVDtcbiAgaWYgKHR5cGUgPT09IFNFU1NJT05fVFlQRVMuQUdFTlQpIHtcbiAgICByZXR1cm4gQ0hBVF9TRVNTSU9OX0ZBQ1RPUlkuY3JlYXRlQWdlbnRDaGF0U2Vzc2lvbihjaGF0RGV0YWlscyk7XG4gIH0gZWxzZSBpZiAodHlwZSA9PT0gU0VTU0lPTl9UWVBFUy5DVVNUT01FUikge1xuICAgIHJldHVybiBDSEFUX1NFU1NJT05fRkFDVE9SWS5jcmVhdGVDdXN0b21lckNoYXRTZXNzaW9uKGNoYXREZXRhaWxzKTtcbiAgfSBlbHNlIHtcbiAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uKFxuICAgICAgXCJVbmtvd24gdmFsdWUgZm9yIHNlc3Npb24gdHlwZVwiLFxuICAgICAgdHlwZVBhcmFtXG4gICAgKTtcbiAgfVxufTtcblxuZXhwb3J0IHsgQ2hhdFNlc3Npb25Db25zdHJ1Y3RvciB9O1xuIiwidmFyIGc7XG5cbi8vIFRoaXMgd29ya3MgaW4gbm9uLXN0cmljdCBtb2RlXG5nID0gKGZ1bmN0aW9uKCkge1xuXHRyZXR1cm4gdGhpcztcbn0pKCk7XG5cbnRyeSB7XG5cdC8vIFRoaXMgd29ya3MgaWYgZXZhbCBpcyBhbGxvd2VkIChzZWUgQ1NQKVxuXHRnID0gZyB8fCBuZXcgRnVuY3Rpb24oXCJyZXR1cm4gdGhpc1wiKSgpO1xufSBjYXRjaCAoZSkge1xuXHQvLyBUaGlzIHdvcmtzIGlmIHRoZSB3aW5kb3cgcmVmZXJlbmNlIGlzIGF2YWlsYWJsZVxuXHRpZiAodHlwZW9mIHdpbmRvdyA9PT0gXCJvYmplY3RcIikgZyA9IHdpbmRvdztcbn1cblxuLy8gZyBjYW4gc3RpbGwgYmUgdW5kZWZpbmVkLCBidXQgbm90aGluZyB0byBkbyBhYm91dCBpdC4uLlxuLy8gV2UgcmV0dXJuIHVuZGVmaW5lZCwgaW5zdGVhZCBvZiBub3RoaW5nIGhlcmUsIHNvIGl0J3Ncbi8vIGVhc2llciB0byBoYW5kbGUgdGhpcyBjYXNlLiBpZighZ2xvYmFsKSB7IC4uLn1cblxubW9kdWxlLmV4cG9ydHMgPSBnO1xuIiwiLyplc2xpbnQgbm8tdW51c2VkLXZhcnM6IFwib2ZmXCIqL1xuaW1wb3J0IHsgQ2hhdFNlc3Npb25Db25zdHJ1Y3RvciB9IGZyb20gXCIuL2NvcmUvY2hhdFNlc3Npb25cIjtcblxuY29ubmVjdCA9IGdsb2JhbC5jb25uZWN0IHx8IHt9O1xuZ2xvYmFsLmNvbm5lY3QgPSBjb25uZWN0O1xuY29ubmVjdC5DaGF0U2Vzc2lvbiA9IENoYXRTZXNzaW9uQ29uc3RydWN0b3I7XG5cbmV4cG9ydCBjb25zdCBjaGF0U2Vzc2lvbiA9IENoYXRTZXNzaW9uQ29uc3RydWN0b3I7XG4iLCIvKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxuICogQ29weXJpZ2h0IChjKSAyMDEzIElCTSBDb3JwLlxuICpcbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuIFRoaXMgcHJvZ3JhbSBhbmQgdGhlIGFjY29tcGFueWluZyBtYXRlcmlhbHNcbiAqIGFyZSBtYWRlIGF2YWlsYWJsZSB1bmRlciB0aGUgdGVybXMgb2YgdGhlIEVjbGlwc2UgUHVibGljIExpY2Vuc2UgdjEuMFxuICogYW5kIEVjbGlwc2UgRGlzdHJpYnV0aW9uIExpY2Vuc2UgdjEuMCB3aGljaCBhY2NvbXBhbnkgdGhpcyBkaXN0cmlidXRpb24uXG4gKlxuICogVGhlIEVjbGlwc2UgUHVibGljIExpY2Vuc2UgaXMgYXZhaWxhYmxlIGF0XG4gKiAgICBodHRwOi8vd3d3LmVjbGlwc2Uub3JnL2xlZ2FsL2VwbC12MTAuaHRtbFxuICogYW5kIHRoZSBFY2xpcHNlIERpc3RyaWJ1dGlvbiBMaWNlbnNlIGlzIGF2YWlsYWJsZSBhdFxuICogICBodHRwOi8vd3d3LmVjbGlwc2Uub3JnL29yZy9kb2N1bWVudHMvZWRsLXYxMC5waHAuXG4gKlxuICogQ29udHJpYnV0b3JzOlxuICogICAgQW5kcmV3IEJhbmtzIC0gaW5pdGlhbCBBUEkgYW5kIGltcGxlbWVudGF0aW9uIGFuZCBpbml0aWFsIGRvY3VtZW50YXRpb25cbiAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuXG5cbi8vIE9ubHkgZXhwb3NlIGEgc2luZ2xlIG9iamVjdCBuYW1lIGluIHRoZSBnbG9iYWwgbmFtZXNwYWNlLlxuLy8gRXZlcnl0aGluZyBtdXN0IGdvIHRocm91Z2ggdGhpcyBtb2R1bGUuIEdsb2JhbCBQYWhvIG1vZHVsZVxuLy8gb25seSBoYXMgYSBzaW5nbGUgcHVibGljIGZ1bmN0aW9uLCBjbGllbnQsIHdoaWNoIHJldHVybnNcbi8vIGEgUGFobyBjbGllbnQgb2JqZWN0IGdpdmVuIGNvbm5lY3Rpb24gZGV0YWlscy5cblxuLyoqXG4gKiBTZW5kIGFuZCByZWNlaXZlIG1lc3NhZ2VzIHVzaW5nIHdlYiBicm93c2Vycy5cbiAqIDxwPlxuICogVGhpcyBwcm9ncmFtbWluZyBpbnRlcmZhY2UgbGV0cyBhIEphdmFTY3JpcHQgY2xpZW50IGFwcGxpY2F0aW9uIHVzZSB0aGUgTVFUVCBWMy4xIG9yXG4gKiBWMy4xLjEgcHJvdG9jb2wgdG8gY29ubmVjdCB0byBhbiBNUVRULXN1cHBvcnRpbmcgbWVzc2FnaW5nIHNlcnZlci5cbiAqXG4gKiBUaGUgZnVuY3Rpb24gc3VwcG9ydGVkIGluY2x1ZGVzOlxuICogPG9sPlxuICogPGxpPkNvbm5lY3RpbmcgdG8gYW5kIGRpc2Nvbm5lY3RpbmcgZnJvbSBhIHNlcnZlci4gVGhlIHNlcnZlciBpcyBpZGVudGlmaWVkIGJ5IGl0cyBob3N0IG5hbWUgYW5kIHBvcnQgbnVtYmVyLlxuICogPGxpPlNwZWNpZnlpbmcgb3B0aW9ucyB0aGF0IHJlbGF0ZSB0byB0aGUgY29tbXVuaWNhdGlvbnMgbGluayB3aXRoIHRoZSBzZXJ2ZXIsXG4gKiBmb3IgZXhhbXBsZSB0aGUgZnJlcXVlbmN5IG9mIGtlZXAtYWxpdmUgaGVhcnRiZWF0cywgYW5kIHdoZXRoZXIgU1NML1RMUyBpcyByZXF1aXJlZC5cbiAqIDxsaT5TdWJzY3JpYmluZyB0byBhbmQgcmVjZWl2aW5nIG1lc3NhZ2VzIGZyb20gTVFUVCBUb3BpY3MuXG4gKiA8bGk+UHVibGlzaGluZyBtZXNzYWdlcyB0byBNUVRUIFRvcGljcy5cbiAqIDwvb2w+XG4gKiA8cD5cbiAqIFRoZSBBUEkgY29uc2lzdHMgb2YgdHdvIG1haW4gb2JqZWN0czpcbiAqIDxkbD5cbiAqIDxkdD48Yj57QGxpbmsgUGFoby5DbGllbnR9PC9iPjwvZHQ+XG4gKiA8ZGQ+VGhpcyBjb250YWlucyBtZXRob2RzIHRoYXQgcHJvdmlkZSB0aGUgZnVuY3Rpb25hbGl0eSBvZiB0aGUgQVBJLFxuICogaW5jbHVkaW5nIHByb3Zpc2lvbiBvZiBjYWxsYmFja3MgdGhhdCBub3RpZnkgdGhlIGFwcGxpY2F0aW9uIHdoZW4gYSBtZXNzYWdlXG4gKiBhcnJpdmVzIGZyb20gb3IgaXMgZGVsaXZlcmVkIHRvIHRoZSBtZXNzYWdpbmcgc2VydmVyLFxuICogb3Igd2hlbiB0aGUgc3RhdHVzIG9mIGl0cyBjb25uZWN0aW9uIHRvIHRoZSBtZXNzYWdpbmcgc2VydmVyIGNoYW5nZXMuPC9kZD5cbiAqIDxkdD48Yj57QGxpbmsgUGFoby5NZXNzYWdlfTwvYj48L2R0PlxuICogPGRkPlRoaXMgZW5jYXBzdWxhdGVzIHRoZSBwYXlsb2FkIG9mIHRoZSBtZXNzYWdlIGFsb25nIHdpdGggdmFyaW91cyBhdHRyaWJ1dGVzXG4gKiBhc3NvY2lhdGVkIHdpdGggaXRzIGRlbGl2ZXJ5LCBpbiBwYXJ0aWN1bGFyIHRoZSBkZXN0aW5hdGlvbiB0byB3aGljaCBpdCBoYXNcbiAqIGJlZW4gKG9yIGlzIGFib3V0IHRvIGJlKSBzZW50LjwvZGQ+XG4gKiA8L2RsPlxuICogPHA+XG4gKiBUaGUgcHJvZ3JhbW1pbmcgaW50ZXJmYWNlIHZhbGlkYXRlcyBwYXJhbWV0ZXJzIHBhc3NlZCB0byBpdCwgYW5kIHdpbGwgdGhyb3dcbiAqIGFuIEVycm9yIGNvbnRhaW5pbmcgYW4gZXJyb3IgbWVzc2FnZSBpbnRlbmRlZCBmb3IgZGV2ZWxvcGVyIHVzZSwgaWYgaXQgZGV0ZWN0c1xuICogYW4gZXJyb3Igd2l0aCBhbnkgcGFyYW1ldGVyLlxuICogPHA+XG4gKiBFeGFtcGxlOlxuICpcbiAqIDxjb2RlPjxwcmU+XG52YXIgY2xpZW50ID0gbmV3IFBhaG8uTVFUVC5DbGllbnQobG9jYXRpb24uaG9zdG5hbWUsIE51bWJlcihsb2NhdGlvbi5wb3J0KSwgXCJjbGllbnRJZFwiKTtcbmNsaWVudC5vbkNvbm5lY3Rpb25Mb3N0ID0gb25Db25uZWN0aW9uTG9zdDtcbmNsaWVudC5vbk1lc3NhZ2VBcnJpdmVkID0gb25NZXNzYWdlQXJyaXZlZDtcbmNsaWVudC5jb25uZWN0KHtvblN1Y2Nlc3M6b25Db25uZWN0fSk7XG5cbmZ1bmN0aW9uIG9uQ29ubmVjdCgpIHtcbiAgLy8gT25jZSBhIGNvbm5lY3Rpb24gaGFzIGJlZW4gbWFkZSwgbWFrZSBhIHN1YnNjcmlwdGlvbiBhbmQgc2VuZCBhIG1lc3NhZ2UuXG4gIGNvbnNvbGUubG9nKFwib25Db25uZWN0XCIpO1xuICBjbGllbnQuc3Vic2NyaWJlKFwiL1dvcmxkXCIpO1xuICB2YXIgbWVzc2FnZSA9IG5ldyBQYWhvLk1RVFQuTWVzc2FnZShcIkhlbGxvXCIpO1xuICBtZXNzYWdlLmRlc3RpbmF0aW9uTmFtZSA9IFwiL1dvcmxkXCI7XG4gIGNsaWVudC5zZW5kKG1lc3NhZ2UpO1xufTtcbmZ1bmN0aW9uIG9uQ29ubmVjdGlvbkxvc3QocmVzcG9uc2VPYmplY3QpIHtcbiAgaWYgKHJlc3BvbnNlT2JqZWN0LmVycm9yQ29kZSAhPT0gMClcblx0Y29uc29sZS5sb2coXCJvbkNvbm5lY3Rpb25Mb3N0OlwiK3Jlc3BvbnNlT2JqZWN0LmVycm9yTWVzc2FnZSk7XG59O1xuZnVuY3Rpb24gb25NZXNzYWdlQXJyaXZlZChtZXNzYWdlKSB7XG4gIGNvbnNvbGUubG9nKFwib25NZXNzYWdlQXJyaXZlZDpcIittZXNzYWdlLnBheWxvYWRTdHJpbmcpO1xuICBjbGllbnQuZGlzY29ubmVjdCgpO1xufTtcbiAqIDwvcHJlPjwvY29kZT5cbiAqIEBuYW1lc3BhY2UgUGFob1xuICovXG5cbi8qIGpzaGludCBzaGFkb3c6dHJ1ZSAqL1xuKGZ1bmN0aW9uIEV4cG9ydExpYnJhcnkocm9vdCwgZmFjdG9yeSkge1xuXHRpZih0eXBlb2YgZXhwb3J0cyA9PT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgbW9kdWxlID09PSBcIm9iamVjdFwiKXtcblx0XHRtb2R1bGUuZXhwb3J0cyA9IGZhY3RvcnkoKTtcblx0fSBlbHNlIGlmICh0eXBlb2YgZGVmaW5lID09PSBcImZ1bmN0aW9uXCIgJiYgZGVmaW5lLmFtZCl7XG5cdFx0ZGVmaW5lKGZhY3RvcnkpO1xuXHR9IGVsc2UgaWYgKHR5cGVvZiBleHBvcnRzID09PSBcIm9iamVjdFwiKXtcblx0XHRleHBvcnRzID0gZmFjdG9yeSgpO1xuXHR9IGVsc2Uge1xuXHRcdC8vaWYgKHR5cGVvZiByb290LlBhaG8gPT09IFwidW5kZWZpbmVkXCIpe1xuXHRcdC8vXHRyb290LlBhaG8gPSB7fTtcblx0XHQvL31cblx0XHRyb290LlBhaG8gPSBmYWN0b3J5KCk7XG5cdH1cbn0pKHRoaXMsIGZ1bmN0aW9uIExpYnJhcnlGYWN0b3J5KCl7XG5cblxuXHR2YXIgUGFob01RVFQgPSAoZnVuY3Rpb24gKGdsb2JhbCkge1xuXG5cdC8vIFByaXZhdGUgdmFyaWFibGVzIGJlbG93LCB0aGVzZSBhcmUgb25seSB2aXNpYmxlIGluc2lkZSB0aGUgZnVuY3Rpb24gY2xvc3VyZVxuXHQvLyB3aGljaCBpcyB1c2VkIHRvIGRlZmluZSB0aGUgbW9kdWxlLlxuXHR2YXIgdmVyc2lvbiA9IFwiQFZFUlNJT05ALUBCVUlMRExFVkVMQFwiO1xuXG5cdC8qKlxuXHQgKiBAcHJpdmF0ZVxuXHQgKi9cblx0dmFyIGxvY2FsU3RvcmFnZSA9IGdsb2JhbC5sb2NhbFN0b3JhZ2UgfHwgKGZ1bmN0aW9uICgpIHtcblx0XHR2YXIgZGF0YSA9IHt9O1xuXG5cdFx0cmV0dXJuIHtcblx0XHRcdHNldEl0ZW06IGZ1bmN0aW9uIChrZXksIGl0ZW0pIHsgZGF0YVtrZXldID0gaXRlbTsgfSxcblx0XHRcdGdldEl0ZW06IGZ1bmN0aW9uIChrZXkpIHsgcmV0dXJuIGRhdGFba2V5XTsgfSxcblx0XHRcdHJlbW92ZUl0ZW06IGZ1bmN0aW9uIChrZXkpIHsgZGVsZXRlIGRhdGFba2V5XTsgfSxcblx0XHR9O1xuXHR9KSgpO1xuXG5cdFx0LyoqXG5cdCAqIFVuaXF1ZSBtZXNzYWdlIHR5cGUgaWRlbnRpZmllcnMsIHdpdGggYXNzb2NpYXRlZFxuXHQgKiBhc3NvY2lhdGVkIGludGVnZXIgdmFsdWVzLlxuXHQgKiBAcHJpdmF0ZVxuXHQgKi9cblx0XHR2YXIgTUVTU0FHRV9UWVBFID0ge1xuXHRcdFx0Q09OTkVDVDogMSxcblx0XHRcdENPTk5BQ0s6IDIsXG5cdFx0XHRQVUJMSVNIOiAzLFxuXHRcdFx0UFVCQUNLOiA0LFxuXHRcdFx0UFVCUkVDOiA1LFxuXHRcdFx0UFVCUkVMOiA2LFxuXHRcdFx0UFVCQ09NUDogNyxcblx0XHRcdFNVQlNDUklCRTogOCxcblx0XHRcdFNVQkFDSzogOSxcblx0XHRcdFVOU1VCU0NSSUJFOiAxMCxcblx0XHRcdFVOU1VCQUNLOiAxMSxcblx0XHRcdFBJTkdSRVE6IDEyLFxuXHRcdFx0UElOR1JFU1A6IDEzLFxuXHRcdFx0RElTQ09OTkVDVDogMTRcblx0XHR9O1xuXG5cdFx0Ly8gQ29sbGVjdGlvbiBvZiB1dGlsaXR5IG1ldGhvZHMgdXNlZCB0byBzaW1wbGlmeSBtb2R1bGUgY29kZVxuXHRcdC8vIGFuZCBwcm9tb3RlIHRoZSBEUlkgcGF0dGVybi5cblxuXHRcdC8qKlxuXHQgKiBWYWxpZGF0ZSBhbiBvYmplY3QncyBwYXJhbWV0ZXIgbmFtZXMgdG8gZW5zdXJlIHRoZXlcblx0ICogbWF0Y2ggYSBsaXN0IG9mIGV4cGVjdGVkIHZhcmlhYmxlcyBuYW1lIGZvciB0aGlzIG9wdGlvblxuXHQgKiB0eXBlLiBVc2VkIHRvIGVuc3VyZSBvcHRpb24gb2JqZWN0IHBhc3NlZCBpbnRvIHRoZSBBUEkgZG9uJ3Rcblx0ICogY29udGFpbiBlcnJvbmVvdXMgcGFyYW1ldGVycy5cblx0ICogQHBhcmFtIHtPYmplY3R9IG9iaiAtIFVzZXIgb3B0aW9ucyBvYmplY3Rcblx0ICogQHBhcmFtIHtPYmplY3R9IGtleXMgLSB2YWxpZCBrZXlzIGFuZCB0eXBlcyB0aGF0IG1heSBleGlzdCBpbiBvYmouXG5cdCAqIEB0aHJvd3Mge0Vycm9yfSBJbnZhbGlkIG9wdGlvbiBwYXJhbWV0ZXIgZm91bmQuXG5cdCAqIEBwcml2YXRlXG5cdCAqL1xuXHRcdHZhciB2YWxpZGF0ZSA9IGZ1bmN0aW9uKG9iaiwga2V5cykge1xuXHRcdFx0Zm9yICh2YXIga2V5IGluIG9iaikge1xuXHRcdFx0XHRpZiAob2JqLmhhc093blByb3BlcnR5KGtleSkpIHtcblx0XHRcdFx0XHRpZiAoa2V5cy5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7XG5cdFx0XHRcdFx0XHRpZiAodHlwZW9mIG9ialtrZXldICE9PSBrZXlzW2tleV0pXG5cdFx0XHRcdFx0XHRcdHRocm93IG5ldyBFcnJvcihmb3JtYXQoRVJST1IuSU5WQUxJRF9UWVBFLCBbdHlwZW9mIG9ialtrZXldLCBrZXldKSk7XG5cdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdHZhciBlcnJvclN0ciA9IFwiVW5rbm93biBwcm9wZXJ0eSwgXCIgKyBrZXkgKyBcIi4gVmFsaWQgcHJvcGVydGllcyBhcmU6XCI7XG5cdFx0XHRcdFx0XHRmb3IgKHZhciB2YWxpZEtleSBpbiBrZXlzKVxuXHRcdFx0XHRcdFx0XHRpZiAoa2V5cy5oYXNPd25Qcm9wZXJ0eSh2YWxpZEtleSkpXG5cdFx0XHRcdFx0XHRcdFx0ZXJyb3JTdHIgPSBlcnJvclN0citcIiBcIit2YWxpZEtleTtcblx0XHRcdFx0XHRcdHRocm93IG5ldyBFcnJvcihlcnJvclN0cik7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fTtcblxuXHRcdC8qKlxuXHQgKiBSZXR1cm4gYSBuZXcgZnVuY3Rpb24gd2hpY2ggcnVucyB0aGUgdXNlciBmdW5jdGlvbiBib3VuZFxuXHQgKiB0byBhIGZpeGVkIHNjb3BlLlxuXHQgKiBAcGFyYW0ge2Z1bmN0aW9ufSBVc2VyIGZ1bmN0aW9uXG5cdCAqIEBwYXJhbSB7b2JqZWN0fSBGdW5jdGlvbiBzY29wZVxuXHQgKiBAcmV0dXJuIHtmdW5jdGlvbn0gVXNlciBmdW5jdGlvbiBib3VuZCB0byBhbm90aGVyIHNjb3BlXG5cdCAqIEBwcml2YXRlXG5cdCAqL1xuXHRcdHZhciBzY29wZSA9IGZ1bmN0aW9uIChmLCBzY29wZSkge1xuXHRcdFx0cmV0dXJuIGZ1bmN0aW9uICgpIHtcblx0XHRcdFx0cmV0dXJuIGYuYXBwbHkoc2NvcGUsIGFyZ3VtZW50cyk7XG5cdFx0XHR9O1xuXHRcdH07XG5cblx0XHQvKipcblx0ICogVW5pcXVlIG1lc3NhZ2UgdHlwZSBpZGVudGlmaWVycywgd2l0aCBhc3NvY2lhdGVkXG5cdCAqIGFzc29jaWF0ZWQgaW50ZWdlciB2YWx1ZXMuXG5cdCAqIEBwcml2YXRlXG5cdCAqL1xuXHRcdHZhciBFUlJPUiA9IHtcblx0XHRcdE9LOiB7Y29kZTowLCB0ZXh0OlwiQU1RSlNDMDAwMEkgT0suXCJ9LFxuXHRcdFx0Q09OTkVDVF9USU1FT1VUOiB7Y29kZToxLCB0ZXh0OlwiQU1RSlNDMDAwMUUgQ29ubmVjdCB0aW1lZCBvdXQuXCJ9LFxuXHRcdFx0U1VCU0NSSUJFX1RJTUVPVVQ6IHtjb2RlOjIsIHRleHQ6XCJBTVFKUzAwMDJFIFN1YnNjcmliZSB0aW1lZCBvdXQuXCJ9LFxuXHRcdFx0VU5TVUJTQ1JJQkVfVElNRU9VVDoge2NvZGU6MywgdGV4dDpcIkFNUUpTMDAwM0UgVW5zdWJzY3JpYmUgdGltZWQgb3V0LlwifSxcblx0XHRcdFBJTkdfVElNRU9VVDoge2NvZGU6NCwgdGV4dDpcIkFNUUpTMDAwNEUgUGluZyB0aW1lZCBvdXQuXCJ9LFxuXHRcdFx0SU5URVJOQUxfRVJST1I6IHtjb2RlOjUsIHRleHQ6XCJBTVFKUzAwMDVFIEludGVybmFsIGVycm9yLiBFcnJvciBNZXNzYWdlOiB7MH0sIFN0YWNrIHRyYWNlOiB7MX1cIn0sXG5cdFx0XHRDT05OQUNLX1JFVFVSTkNPREU6IHtjb2RlOjYsIHRleHQ6XCJBTVFKUzAwMDZFIEJhZCBDb25uYWNrIHJldHVybiBjb2RlOnswfSB7MX0uXCJ9LFxuXHRcdFx0U09DS0VUX0VSUk9SOiB7Y29kZTo3LCB0ZXh0OlwiQU1RSlMwMDA3RSBTb2NrZXQgZXJyb3I6ezB9LlwifSxcblx0XHRcdFNPQ0tFVF9DTE9TRToge2NvZGU6OCwgdGV4dDpcIkFNUUpTMDAwOEkgU29ja2V0IGNsb3NlZC5cIn0sXG5cdFx0XHRNQUxGT1JNRURfVVRGOiB7Y29kZTo5LCB0ZXh0OlwiQU1RSlMwMDA5RSBNYWxmb3JtZWQgVVRGIGRhdGE6ezB9IHsxfSB7Mn0uXCJ9LFxuXHRcdFx0VU5TVVBQT1JURUQ6IHtjb2RlOjEwLCB0ZXh0OlwiQU1RSlMwMDEwRSB7MH0gaXMgbm90IHN1cHBvcnRlZCBieSB0aGlzIGJyb3dzZXIuXCJ9LFxuXHRcdFx0SU5WQUxJRF9TVEFURToge2NvZGU6MTEsIHRleHQ6XCJBTVFKUzAwMTFFIEludmFsaWQgc3RhdGUgezB9LlwifSxcblx0XHRcdElOVkFMSURfVFlQRToge2NvZGU6MTIsIHRleHQ6XCJBTVFKUzAwMTJFIEludmFsaWQgdHlwZSB7MH0gZm9yIHsxfS5cIn0sXG5cdFx0XHRJTlZBTElEX0FSR1VNRU5UOiB7Y29kZToxMywgdGV4dDpcIkFNUUpTMDAxM0UgSW52YWxpZCBhcmd1bWVudCB7MH0gZm9yIHsxfS5cIn0sXG5cdFx0XHRVTlNVUFBPUlRFRF9PUEVSQVRJT046IHtjb2RlOjE0LCB0ZXh0OlwiQU1RSlMwMDE0RSBVbnN1cHBvcnRlZCBvcGVyYXRpb24uXCJ9LFxuXHRcdFx0SU5WQUxJRF9TVE9SRURfREFUQToge2NvZGU6MTUsIHRleHQ6XCJBTVFKUzAwMTVFIEludmFsaWQgZGF0YSBpbiBsb2NhbCBzdG9yYWdlIGtleT17MH0gdmFsdWU9ezF9LlwifSxcblx0XHRcdElOVkFMSURfTVFUVF9NRVNTQUdFX1RZUEU6IHtjb2RlOjE2LCB0ZXh0OlwiQU1RSlMwMDE2RSBJbnZhbGlkIE1RVFQgbWVzc2FnZSB0eXBlIHswfS5cIn0sXG5cdFx0XHRNQUxGT1JNRURfVU5JQ09ERToge2NvZGU6MTcsIHRleHQ6XCJBTVFKUzAwMTdFIE1hbGZvcm1lZCBVbmljb2RlIHN0cmluZzp7MH0gezF9LlwifSxcblx0XHRcdEJVRkZFUl9GVUxMOiB7Y29kZToxOCwgdGV4dDpcIkFNUUpTMDAxOEUgTWVzc2FnZSBidWZmZXIgaXMgZnVsbCwgbWF4aW11bSBidWZmZXIgc2l6ZTogezB9LlwifSxcblx0XHR9O1xuXG5cdFx0LyoqIENPTk5BQ0sgUkMgTWVhbmluZy4gKi9cblx0XHR2YXIgQ09OTkFDS19SQyA9IHtcblx0XHRcdDA6XCJDb25uZWN0aW9uIEFjY2VwdGVkXCIsXG5cdFx0XHQxOlwiQ29ubmVjdGlvbiBSZWZ1c2VkOiB1bmFjY2VwdGFibGUgcHJvdG9jb2wgdmVyc2lvblwiLFxuXHRcdFx0MjpcIkNvbm5lY3Rpb24gUmVmdXNlZDogaWRlbnRpZmllciByZWplY3RlZFwiLFxuXHRcdFx0MzpcIkNvbm5lY3Rpb24gUmVmdXNlZDogc2VydmVyIHVuYXZhaWxhYmxlXCIsXG5cdFx0XHQ0OlwiQ29ubmVjdGlvbiBSZWZ1c2VkOiBiYWQgdXNlciBuYW1lIG9yIHBhc3N3b3JkXCIsXG5cdFx0XHQ1OlwiQ29ubmVjdGlvbiBSZWZ1c2VkOiBub3QgYXV0aG9yaXplZFwiXG5cdFx0fTtcblxuXHQvKipcblx0ICogRm9ybWF0IGFuIGVycm9yIG1lc3NhZ2UgdGV4dC5cblx0ICogQHByaXZhdGVcblx0ICogQHBhcmFtIHtlcnJvcn0gRVJST1IgdmFsdWUgYWJvdmUuXG5cdCAqIEBwYXJhbSB7c3Vic3RpdHV0aW9uc30gW2FycmF5XSBzdWJzdGl0dXRlZCBpbnRvIHRoZSB0ZXh0LlxuXHQgKiBAcmV0dXJuIHRoZSB0ZXh0IHdpdGggdGhlIHN1YnN0aXR1dGlvbnMgbWFkZS5cblx0ICovXG5cdFx0dmFyIGZvcm1hdCA9IGZ1bmN0aW9uKGVycm9yLCBzdWJzdGl0dXRpb25zKSB7XG5cdFx0XHR2YXIgdGV4dCA9IGVycm9yLnRleHQ7XG5cdFx0XHRpZiAoc3Vic3RpdHV0aW9ucykge1xuXHRcdFx0XHR2YXIgZmllbGQsc3RhcnQ7XG5cdFx0XHRcdGZvciAodmFyIGk9MDsgaTxzdWJzdGl0dXRpb25zLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHRcdFx0ZmllbGQgPSBcIntcIitpK1wifVwiO1xuXHRcdFx0XHRcdHN0YXJ0ID0gdGV4dC5pbmRleE9mKGZpZWxkKTtcblx0XHRcdFx0XHRpZihzdGFydCA+IDApIHtcblx0XHRcdFx0XHRcdHZhciBwYXJ0MSA9IHRleHQuc3Vic3RyaW5nKDAsc3RhcnQpO1xuXHRcdFx0XHRcdFx0dmFyIHBhcnQyID0gdGV4dC5zdWJzdHJpbmcoc3RhcnQrZmllbGQubGVuZ3RoKTtcblx0XHRcdFx0XHRcdHRleHQgPSBwYXJ0MStzdWJzdGl0dXRpb25zW2ldK3BhcnQyO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdFx0cmV0dXJuIHRleHQ7XG5cdFx0fTtcblxuXHRcdC8vTVFUVCBwcm90b2NvbCBhbmQgdmVyc2lvbiAgICAgICAgICA2ICAgIE0gICAgUSAgICBJICAgIHMgICAgZCAgICBwICAgIDNcblx0XHR2YXIgTXF0dFByb3RvSWRlbnRpZmllcnYzID0gWzB4MDAsMHgwNiwweDRkLDB4NTEsMHg0OSwweDczLDB4NjQsMHg3MCwweDAzXTtcblx0XHQvL01RVFQgcHJvdG8vdmVyc2lvbiBmb3IgMzExICAgICAgICAgNCAgICBNICAgIFEgICAgVCAgICBUICAgIDRcblx0XHR2YXIgTXF0dFByb3RvSWRlbnRpZmllcnY0ID0gWzB4MDAsMHgwNCwweDRkLDB4NTEsMHg1NCwweDU0LDB4MDRdO1xuXG5cdFx0LyoqXG5cdCAqIENvbnN0cnVjdCBhbiBNUVRUIHdpcmUgcHJvdG9jb2wgbWVzc2FnZS5cblx0ICogQHBhcmFtIHR5cGUgTVFUVCBwYWNrZXQgdHlwZS5cblx0ICogQHBhcmFtIG9wdGlvbnMgb3B0aW9uYWwgd2lyZSBtZXNzYWdlIGF0dHJpYnV0ZXMuXG5cdCAqXG5cdCAqIE9wdGlvbmFsIHByb3BlcnRpZXNcblx0ICpcblx0ICogbWVzc2FnZUlkZW50aWZpZXI6IG1lc3NhZ2UgSUQgaW4gdGhlIHJhbmdlIFswLi42NTUzNV1cblx0ICogcGF5bG9hZE1lc3NhZ2U6XHRBcHBsaWNhdGlvbiBNZXNzYWdlIC0gUFVCTElTSCBvbmx5XG5cdCAqIGNvbm5lY3RTdHJpbmdzOlx0YXJyYXkgb2YgMCBvciBtb3JlIFN0cmluZ3MgdG8gYmUgcHV0IGludG8gdGhlIENPTk5FQ1QgcGF5bG9hZFxuXHQgKiB0b3BpY3M6XHRcdFx0YXJyYXkgb2Ygc3RyaW5ncyAoU1VCU0NSSUJFLCBVTlNVQlNDUklCRSlcblx0ICogcmVxdWVzdFFvUzpcdFx0YXJyYXkgb2YgUW9TIHZhbHVlcyBbMC4uMl1cblx0ICpcblx0ICogXCJGbGFnXCIgcHJvcGVydGllc1xuXHQgKiBjbGVhblNlc3Npb246XHR0cnVlIGlmIHByZXNlbnQgLyBmYWxzZSBpZiBhYnNlbnQgKENPTk5FQ1QpXG5cdCAqIHdpbGxNZXNzYWdlOiAgXHR0cnVlIGlmIHByZXNlbnQgLyBmYWxzZSBpZiBhYnNlbnQgKENPTk5FQ1QpXG5cdCAqIGlzUmV0YWluZWQ6XHRcdHRydWUgaWYgcHJlc2VudCAvIGZhbHNlIGlmIGFic2VudCAoQ09OTkVDVClcblx0ICogdXNlck5hbWU6XHRcdHRydWUgaWYgcHJlc2VudCAvIGZhbHNlIGlmIGFic2VudCAoQ09OTkVDVClcblx0ICogcGFzc3dvcmQ6XHRcdHRydWUgaWYgcHJlc2VudCAvIGZhbHNlIGlmIGFic2VudCAoQ09OTkVDVClcblx0ICoga2VlcEFsaXZlSW50ZXJ2YWw6XHRpbnRlZ2VyIFswLi42NTUzNV0gIChDT05ORUNUKVxuXHQgKlxuXHQgKiBAcHJpdmF0ZVxuXHQgKiBAaWdub3JlXG5cdCAqL1xuXHRcdHZhciBXaXJlTWVzc2FnZSA9IGZ1bmN0aW9uICh0eXBlLCBvcHRpb25zKSB7XG5cdFx0XHR0aGlzLnR5cGUgPSB0eXBlO1xuXHRcdFx0Zm9yICh2YXIgbmFtZSBpbiBvcHRpb25zKSB7XG5cdFx0XHRcdGlmIChvcHRpb25zLmhhc093blByb3BlcnR5KG5hbWUpKSB7XG5cdFx0XHRcdFx0dGhpc1tuYW1lXSA9IG9wdGlvbnNbbmFtZV07XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9O1xuXG5cdFx0V2lyZU1lc3NhZ2UucHJvdG90eXBlLmVuY29kZSA9IGZ1bmN0aW9uKCkge1xuXHRcdC8vIENvbXB1dGUgdGhlIGZpcnN0IGJ5dGUgb2YgdGhlIGZpeGVkIGhlYWRlclxuXHRcdFx0dmFyIGZpcnN0ID0gKCh0aGlzLnR5cGUgJiAweDBmKSA8PCA0KTtcblxuXHRcdFx0Lypcblx0XHQgKiBOb3cgY2FsY3VsYXRlIHRoZSBsZW5ndGggb2YgdGhlIHZhcmlhYmxlIGhlYWRlciArIHBheWxvYWQgYnkgYWRkaW5nIHVwIHRoZSBsZW5ndGhzXG5cdFx0ICogb2YgYWxsIHRoZSBjb21wb25lbnQgcGFydHNcblx0XHQgKi9cblxuXHRcdFx0dmFyIHJlbUxlbmd0aCA9IDA7XG5cdFx0XHR2YXIgdG9waWNTdHJMZW5ndGggPSBbXTtcblx0XHRcdHZhciBkZXN0aW5hdGlvbk5hbWVMZW5ndGggPSAwO1xuXHRcdFx0dmFyIHdpbGxNZXNzYWdlUGF5bG9hZEJ5dGVzO1xuXG5cdFx0XHQvLyBpZiB0aGUgbWVzc2FnZSBjb250YWlucyBhIG1lc3NhZ2VJZGVudGlmaWVyIHRoZW4gd2UgbmVlZCB0d28gYnl0ZXMgZm9yIHRoYXRcblx0XHRcdGlmICh0aGlzLm1lc3NhZ2VJZGVudGlmaWVyICE9PSB1bmRlZmluZWQpXG5cdFx0XHRcdHJlbUxlbmd0aCArPSAyO1xuXG5cdFx0XHRzd2l0Y2godGhpcy50eXBlKSB7XG5cdFx0XHQvLyBJZiB0aGlzIGEgQ29ubmVjdCB0aGVuIHdlIG5lZWQgdG8gaW5jbHVkZSAxMiBieXRlcyBmb3IgaXRzIGhlYWRlclxuXHRcdFx0Y2FzZSBNRVNTQUdFX1RZUEUuQ09OTkVDVDpcblx0XHRcdFx0c3dpdGNoKHRoaXMubXF0dFZlcnNpb24pIHtcblx0XHRcdFx0Y2FzZSAzOlxuXHRcdFx0XHRcdHJlbUxlbmd0aCArPSBNcXR0UHJvdG9JZGVudGlmaWVydjMubGVuZ3RoICsgMztcblx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0Y2FzZSA0OlxuXHRcdFx0XHRcdHJlbUxlbmd0aCArPSBNcXR0UHJvdG9JZGVudGlmaWVydjQubGVuZ3RoICsgMztcblx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0fVxuXG5cdFx0XHRcdHJlbUxlbmd0aCArPSBVVEY4TGVuZ3RoKHRoaXMuY2xpZW50SWQpICsgMjtcblx0XHRcdFx0aWYgKHRoaXMud2lsbE1lc3NhZ2UgIT09IHVuZGVmaW5lZCkge1xuXHRcdFx0XHRcdHJlbUxlbmd0aCArPSBVVEY4TGVuZ3RoKHRoaXMud2lsbE1lc3NhZ2UuZGVzdGluYXRpb25OYW1lKSArIDI7XG5cdFx0XHRcdFx0Ly8gV2lsbCBtZXNzYWdlIGlzIGFsd2F5cyBhIHN0cmluZywgc2VudCBhcyBVVEYtOCBjaGFyYWN0ZXJzIHdpdGggYSBwcmVjZWRpbmcgbGVuZ3RoLlxuXHRcdFx0XHRcdHdpbGxNZXNzYWdlUGF5bG9hZEJ5dGVzID0gdGhpcy53aWxsTWVzc2FnZS5wYXlsb2FkQnl0ZXM7XG5cdFx0XHRcdFx0aWYgKCEod2lsbE1lc3NhZ2VQYXlsb2FkQnl0ZXMgaW5zdGFuY2VvZiBVaW50OEFycmF5KSlcblx0XHRcdFx0XHRcdHdpbGxNZXNzYWdlUGF5bG9hZEJ5dGVzID0gbmV3IFVpbnQ4QXJyYXkocGF5bG9hZEJ5dGVzKTtcblx0XHRcdFx0XHRyZW1MZW5ndGggKz0gd2lsbE1lc3NhZ2VQYXlsb2FkQnl0ZXMuYnl0ZUxlbmd0aCArMjtcblx0XHRcdFx0fVxuXHRcdFx0XHRpZiAodGhpcy51c2VyTmFtZSAhPT0gdW5kZWZpbmVkKVxuXHRcdFx0XHRcdHJlbUxlbmd0aCArPSBVVEY4TGVuZ3RoKHRoaXMudXNlck5hbWUpICsgMjtcblx0XHRcdFx0aWYgKHRoaXMucGFzc3dvcmQgIT09IHVuZGVmaW5lZClcblx0XHRcdFx0XHRyZW1MZW5ndGggKz0gVVRGOExlbmd0aCh0aGlzLnBhc3N3b3JkKSArIDI7XG5cdFx0XHRcdGJyZWFrO1xuXG5cdFx0XHQvLyBTdWJzY3JpYmUsIFVuc3Vic2NyaWJlIGNhbiBib3RoIGNvbnRhaW4gdG9waWMgc3RyaW5nc1xuXHRcdFx0Y2FzZSBNRVNTQUdFX1RZUEUuU1VCU0NSSUJFOlxuXHRcdFx0XHRmaXJzdCB8PSAweDAyOyAvLyBRb3MgPSAxO1xuXHRcdFx0XHRmb3IgKCB2YXIgaSA9IDA7IGkgPCB0aGlzLnRvcGljcy5sZW5ndGg7IGkrKykge1xuXHRcdFx0XHRcdHRvcGljU3RyTGVuZ3RoW2ldID0gVVRGOExlbmd0aCh0aGlzLnRvcGljc1tpXSk7XG5cdFx0XHRcdFx0cmVtTGVuZ3RoICs9IHRvcGljU3RyTGVuZ3RoW2ldICsgMjtcblx0XHRcdFx0fVxuXHRcdFx0XHRyZW1MZW5ndGggKz0gdGhpcy5yZXF1ZXN0ZWRRb3MubGVuZ3RoOyAvLyAxIGJ5dGUgZm9yIGVhY2ggdG9waWMncyBRb3Ncblx0XHRcdFx0Ly8gUW9TIG9uIFN1YnNjcmliZSBvbmx5XG5cdFx0XHRcdGJyZWFrO1xuXG5cdFx0XHRjYXNlIE1FU1NBR0VfVFlQRS5VTlNVQlNDUklCRTpcblx0XHRcdFx0Zmlyc3QgfD0gMHgwMjsgLy8gUW9zID0gMTtcblx0XHRcdFx0Zm9yICggdmFyIGkgPSAwOyBpIDwgdGhpcy50b3BpY3MubGVuZ3RoOyBpKyspIHtcblx0XHRcdFx0XHR0b3BpY1N0ckxlbmd0aFtpXSA9IFVURjhMZW5ndGgodGhpcy50b3BpY3NbaV0pO1xuXHRcdFx0XHRcdHJlbUxlbmd0aCArPSB0b3BpY1N0ckxlbmd0aFtpXSArIDI7XG5cdFx0XHRcdH1cblx0XHRcdFx0YnJlYWs7XG5cblx0XHRcdGNhc2UgTUVTU0FHRV9UWVBFLlBVQlJFTDpcblx0XHRcdFx0Zmlyc3QgfD0gMHgwMjsgLy8gUW9zID0gMTtcblx0XHRcdFx0YnJlYWs7XG5cblx0XHRcdGNhc2UgTUVTU0FHRV9UWVBFLlBVQkxJU0g6XG5cdFx0XHRcdGlmICh0aGlzLnBheWxvYWRNZXNzYWdlLmR1cGxpY2F0ZSkgZmlyc3QgfD0gMHgwODtcblx0XHRcdFx0Zmlyc3QgID0gZmlyc3QgfD0gKHRoaXMucGF5bG9hZE1lc3NhZ2UucW9zIDw8IDEpO1xuXHRcdFx0XHRpZiAodGhpcy5wYXlsb2FkTWVzc2FnZS5yZXRhaW5lZCkgZmlyc3QgfD0gMHgwMTtcblx0XHRcdFx0ZGVzdGluYXRpb25OYW1lTGVuZ3RoID0gVVRGOExlbmd0aCh0aGlzLnBheWxvYWRNZXNzYWdlLmRlc3RpbmF0aW9uTmFtZSk7XG5cdFx0XHRcdHJlbUxlbmd0aCArPSBkZXN0aW5hdGlvbk5hbWVMZW5ndGggKyAyO1xuXHRcdFx0XHR2YXIgcGF5bG9hZEJ5dGVzID0gdGhpcy5wYXlsb2FkTWVzc2FnZS5wYXlsb2FkQnl0ZXM7XG5cdFx0XHRcdHJlbUxlbmd0aCArPSBwYXlsb2FkQnl0ZXMuYnl0ZUxlbmd0aDtcblx0XHRcdFx0aWYgKHBheWxvYWRCeXRlcyBpbnN0YW5jZW9mIEFycmF5QnVmZmVyKVxuXHRcdFx0XHRcdHBheWxvYWRCeXRlcyA9IG5ldyBVaW50OEFycmF5KHBheWxvYWRCeXRlcyk7XG5cdFx0XHRcdGVsc2UgaWYgKCEocGF5bG9hZEJ5dGVzIGluc3RhbmNlb2YgVWludDhBcnJheSkpXG5cdFx0XHRcdFx0cGF5bG9hZEJ5dGVzID0gbmV3IFVpbnQ4QXJyYXkocGF5bG9hZEJ5dGVzLmJ1ZmZlcik7XG5cdFx0XHRcdGJyZWFrO1xuXG5cdFx0XHRjYXNlIE1FU1NBR0VfVFlQRS5ESVNDT05ORUNUOlxuXHRcdFx0XHRicmVhaztcblxuXHRcdFx0ZGVmYXVsdDpcblx0XHRcdFx0YnJlYWs7XG5cdFx0XHR9XG5cblx0XHRcdC8vIE5vdyB3ZSBjYW4gYWxsb2NhdGUgYSBidWZmZXIgZm9yIHRoZSBtZXNzYWdlXG5cblx0XHRcdHZhciBtYmkgPSBlbmNvZGVNQkkocmVtTGVuZ3RoKTsgIC8vIENvbnZlcnQgdGhlIGxlbmd0aCB0byBNUVRUIE1CSSBmb3JtYXRcblx0XHRcdHZhciBwb3MgPSBtYmkubGVuZ3RoICsgMTsgICAgICAgIC8vIE9mZnNldCBvZiBzdGFydCBvZiB2YXJpYWJsZSBoZWFkZXJcblx0XHRcdHZhciBidWZmZXIgPSBuZXcgQXJyYXlCdWZmZXIocmVtTGVuZ3RoICsgcG9zKTtcblx0XHRcdHZhciBieXRlU3RyZWFtID0gbmV3IFVpbnQ4QXJyYXkoYnVmZmVyKTsgICAgLy8gdmlldyBpdCBhcyBhIHNlcXVlbmNlIG9mIGJ5dGVzXG5cblx0XHRcdC8vV3JpdGUgdGhlIGZpeGVkIGhlYWRlciBpbnRvIHRoZSBidWZmZXJcblx0XHRcdGJ5dGVTdHJlYW1bMF0gPSBmaXJzdDtcblx0XHRcdGJ5dGVTdHJlYW0uc2V0KG1iaSwxKTtcblxuXHRcdFx0Ly8gSWYgdGhpcyBpcyBhIFBVQkxJU0ggdGhlbiB0aGUgdmFyaWFibGUgaGVhZGVyIHN0YXJ0cyB3aXRoIGEgdG9waWNcblx0XHRcdGlmICh0aGlzLnR5cGUgPT0gTUVTU0FHRV9UWVBFLlBVQkxJU0gpXG5cdFx0XHRcdHBvcyA9IHdyaXRlU3RyaW5nKHRoaXMucGF5bG9hZE1lc3NhZ2UuZGVzdGluYXRpb25OYW1lLCBkZXN0aW5hdGlvbk5hbWVMZW5ndGgsIGJ5dGVTdHJlYW0sIHBvcyk7XG5cdFx0XHQvLyBJZiB0aGlzIGlzIGEgQ09OTkVDVCB0aGVuIHRoZSB2YXJpYWJsZSBoZWFkZXIgY29udGFpbnMgdGhlIHByb3RvY29sIG5hbWUvdmVyc2lvbiwgZmxhZ3MgYW5kIGtlZXBhbGl2ZSB0aW1lXG5cblx0XHRcdGVsc2UgaWYgKHRoaXMudHlwZSA9PSBNRVNTQUdFX1RZUEUuQ09OTkVDVCkge1xuXHRcdFx0XHRzd2l0Y2ggKHRoaXMubXF0dFZlcnNpb24pIHtcblx0XHRcdFx0Y2FzZSAzOlxuXHRcdFx0XHRcdGJ5dGVTdHJlYW0uc2V0KE1xdHRQcm90b0lkZW50aWZpZXJ2MywgcG9zKTtcblx0XHRcdFx0XHRwb3MgKz0gTXF0dFByb3RvSWRlbnRpZmllcnYzLmxlbmd0aDtcblx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0Y2FzZSA0OlxuXHRcdFx0XHRcdGJ5dGVTdHJlYW0uc2V0KE1xdHRQcm90b0lkZW50aWZpZXJ2NCwgcG9zKTtcblx0XHRcdFx0XHRwb3MgKz0gTXF0dFByb3RvSWRlbnRpZmllcnY0Lmxlbmd0aDtcblx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0fVxuXHRcdFx0XHR2YXIgY29ubmVjdEZsYWdzID0gMDtcblx0XHRcdFx0aWYgKHRoaXMuY2xlYW5TZXNzaW9uKVxuXHRcdFx0XHRcdGNvbm5lY3RGbGFncyA9IDB4MDI7XG5cdFx0XHRcdGlmICh0aGlzLndpbGxNZXNzYWdlICE9PSB1bmRlZmluZWQgKSB7XG5cdFx0XHRcdFx0Y29ubmVjdEZsYWdzIHw9IDB4MDQ7XG5cdFx0XHRcdFx0Y29ubmVjdEZsYWdzIHw9ICh0aGlzLndpbGxNZXNzYWdlLnFvczw8Myk7XG5cdFx0XHRcdFx0aWYgKHRoaXMud2lsbE1lc3NhZ2UucmV0YWluZWQpIHtcblx0XHRcdFx0XHRcdGNvbm5lY3RGbGFncyB8PSAweDIwO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0XHRpZiAodGhpcy51c2VyTmFtZSAhPT0gdW5kZWZpbmVkKVxuXHRcdFx0XHRcdGNvbm5lY3RGbGFncyB8PSAweDgwO1xuXHRcdFx0XHRpZiAodGhpcy5wYXNzd29yZCAhPT0gdW5kZWZpbmVkKVxuXHRcdFx0XHRcdGNvbm5lY3RGbGFncyB8PSAweDQwO1xuXHRcdFx0XHRieXRlU3RyZWFtW3BvcysrXSA9IGNvbm5lY3RGbGFncztcblx0XHRcdFx0cG9zID0gd3JpdGVVaW50MTYgKHRoaXMua2VlcEFsaXZlSW50ZXJ2YWwsIGJ5dGVTdHJlYW0sIHBvcyk7XG5cdFx0XHR9XG5cblx0XHRcdC8vIE91dHB1dCB0aGUgbWVzc2FnZUlkZW50aWZpZXIgLSBpZiB0aGVyZSBpcyBvbmVcblx0XHRcdGlmICh0aGlzLm1lc3NhZ2VJZGVudGlmaWVyICE9PSB1bmRlZmluZWQpXG5cdFx0XHRcdHBvcyA9IHdyaXRlVWludDE2ICh0aGlzLm1lc3NhZ2VJZGVudGlmaWVyLCBieXRlU3RyZWFtLCBwb3MpO1xuXG5cdFx0XHRzd2l0Y2godGhpcy50eXBlKSB7XG5cdFx0XHRjYXNlIE1FU1NBR0VfVFlQRS5DT05ORUNUOlxuXHRcdFx0XHRwb3MgPSB3cml0ZVN0cmluZyh0aGlzLmNsaWVudElkLCBVVEY4TGVuZ3RoKHRoaXMuY2xpZW50SWQpLCBieXRlU3RyZWFtLCBwb3MpO1xuXHRcdFx0XHRpZiAodGhpcy53aWxsTWVzc2FnZSAhPT0gdW5kZWZpbmVkKSB7XG5cdFx0XHRcdFx0cG9zID0gd3JpdGVTdHJpbmcodGhpcy53aWxsTWVzc2FnZS5kZXN0aW5hdGlvbk5hbWUsIFVURjhMZW5ndGgodGhpcy53aWxsTWVzc2FnZS5kZXN0aW5hdGlvbk5hbWUpLCBieXRlU3RyZWFtLCBwb3MpO1xuXHRcdFx0XHRcdHBvcyA9IHdyaXRlVWludDE2KHdpbGxNZXNzYWdlUGF5bG9hZEJ5dGVzLmJ5dGVMZW5ndGgsIGJ5dGVTdHJlYW0sIHBvcyk7XG5cdFx0XHRcdFx0Ynl0ZVN0cmVhbS5zZXQod2lsbE1lc3NhZ2VQYXlsb2FkQnl0ZXMsIHBvcyk7XG5cdFx0XHRcdFx0cG9zICs9IHdpbGxNZXNzYWdlUGF5bG9hZEJ5dGVzLmJ5dGVMZW5ndGg7XG5cblx0XHRcdFx0fVxuXHRcdFx0XHRpZiAodGhpcy51c2VyTmFtZSAhPT0gdW5kZWZpbmVkKVxuXHRcdFx0XHRcdHBvcyA9IHdyaXRlU3RyaW5nKHRoaXMudXNlck5hbWUsIFVURjhMZW5ndGgodGhpcy51c2VyTmFtZSksIGJ5dGVTdHJlYW0sIHBvcyk7XG5cdFx0XHRcdGlmICh0aGlzLnBhc3N3b3JkICE9PSB1bmRlZmluZWQpXG5cdFx0XHRcdFx0cG9zID0gd3JpdGVTdHJpbmcodGhpcy5wYXNzd29yZCwgVVRGOExlbmd0aCh0aGlzLnBhc3N3b3JkKSwgYnl0ZVN0cmVhbSwgcG9zKTtcblx0XHRcdFx0YnJlYWs7XG5cblx0XHRcdGNhc2UgTUVTU0FHRV9UWVBFLlBVQkxJU0g6XG5cdFx0XHRcdC8vIFBVQkxJU0ggaGFzIGEgdGV4dCBvciBiaW5hcnkgcGF5bG9hZCwgaWYgdGV4dCBkbyBub3QgYWRkIGEgMiBieXRlIGxlbmd0aCBmaWVsZCwganVzdCB0aGUgVVRGIGNoYXJhY3RlcnMuXG5cdFx0XHRcdGJ5dGVTdHJlYW0uc2V0KHBheWxvYWRCeXRlcywgcG9zKTtcblxuXHRcdFx0XHRicmVhaztcblxuXHRcdFx0XHQvLyAgICBcdCAgICBjYXNlIE1FU1NBR0VfVFlQRS5QVUJSRUM6XG5cdFx0XHRcdC8vICAgIFx0ICAgIGNhc2UgTUVTU0FHRV9UWVBFLlBVQlJFTDpcblx0XHRcdFx0Ly8gICAgXHQgICAgY2FzZSBNRVNTQUdFX1RZUEUuUFVCQ09NUDpcblx0XHRcdFx0Ly8gICAgXHQgICAgXHRicmVhaztcblxuXHRcdFx0Y2FzZSBNRVNTQUdFX1RZUEUuU1VCU0NSSUJFOlxuXHRcdFx0XHQvLyBTVUJTQ1JJQkUgaGFzIGEgbGlzdCBvZiB0b3BpYyBzdHJpbmdzIGFuZCByZXF1ZXN0IFFvU1xuXHRcdFx0XHRmb3IgKHZhciBpPTA7IGk8dGhpcy50b3BpY3MubGVuZ3RoOyBpKyspIHtcblx0XHRcdFx0XHRwb3MgPSB3cml0ZVN0cmluZyh0aGlzLnRvcGljc1tpXSwgdG9waWNTdHJMZW5ndGhbaV0sIGJ5dGVTdHJlYW0sIHBvcyk7XG5cdFx0XHRcdFx0Ynl0ZVN0cmVhbVtwb3MrK10gPSB0aGlzLnJlcXVlc3RlZFFvc1tpXTtcblx0XHRcdFx0fVxuXHRcdFx0XHRicmVhaztcblxuXHRcdFx0Y2FzZSBNRVNTQUdFX1RZUEUuVU5TVUJTQ1JJQkU6XG5cdFx0XHRcdC8vIFVOU1VCU0NSSUJFIGhhcyBhIGxpc3Qgb2YgdG9waWMgc3RyaW5nc1xuXHRcdFx0XHRmb3IgKHZhciBpPTA7IGk8dGhpcy50b3BpY3MubGVuZ3RoOyBpKyspXG5cdFx0XHRcdFx0cG9zID0gd3JpdGVTdHJpbmcodGhpcy50b3BpY3NbaV0sIHRvcGljU3RyTGVuZ3RoW2ldLCBieXRlU3RyZWFtLCBwb3MpO1xuXHRcdFx0XHRicmVhaztcblxuXHRcdFx0ZGVmYXVsdDpcblx0XHRcdFx0Ly8gRG8gbm90aGluZy5cblx0XHRcdH1cblxuXHRcdFx0cmV0dXJuIGJ1ZmZlcjtcblx0XHR9O1xuXG5cdFx0ZnVuY3Rpb24gZGVjb2RlTWVzc2FnZShpbnB1dCxwb3MpIHtcblx0XHRcdHZhciBzdGFydGluZ1BvcyA9IHBvcztcblx0XHRcdHZhciBmaXJzdCA9IGlucHV0W3Bvc107XG5cdFx0XHR2YXIgdHlwZSA9IGZpcnN0ID4+IDQ7XG5cdFx0XHR2YXIgbWVzc2FnZUluZm8gPSBmaXJzdCAmPSAweDBmO1xuXHRcdFx0cG9zICs9IDE7XG5cblxuXHRcdFx0Ly8gRGVjb2RlIHRoZSByZW1haW5pbmcgbGVuZ3RoIChNQkkgZm9ybWF0KVxuXG5cdFx0XHR2YXIgZGlnaXQ7XG5cdFx0XHR2YXIgcmVtTGVuZ3RoID0gMDtcblx0XHRcdHZhciBtdWx0aXBsaWVyID0gMTtcblx0XHRcdGRvIHtcblx0XHRcdFx0aWYgKHBvcyA9PSBpbnB1dC5sZW5ndGgpIHtcblx0XHRcdFx0XHRyZXR1cm4gW251bGwsc3RhcnRpbmdQb3NdO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGRpZ2l0ID0gaW5wdXRbcG9zKytdO1xuXHRcdFx0XHRyZW1MZW5ndGggKz0gKChkaWdpdCAmIDB4N0YpICogbXVsdGlwbGllcik7XG5cdFx0XHRcdG11bHRpcGxpZXIgKj0gMTI4O1xuXHRcdFx0fSB3aGlsZSAoKGRpZ2l0ICYgMHg4MCkgIT09IDApO1xuXG5cdFx0XHR2YXIgZW5kUG9zID0gcG9zK3JlbUxlbmd0aDtcblx0XHRcdGlmIChlbmRQb3MgPiBpbnB1dC5sZW5ndGgpIHtcblx0XHRcdFx0cmV0dXJuIFtudWxsLHN0YXJ0aW5nUG9zXTtcblx0XHRcdH1cblxuXHRcdFx0dmFyIHdpcmVNZXNzYWdlID0gbmV3IFdpcmVNZXNzYWdlKHR5cGUpO1xuXHRcdFx0c3dpdGNoKHR5cGUpIHtcblx0XHRcdGNhc2UgTUVTU0FHRV9UWVBFLkNPTk5BQ0s6XG5cdFx0XHRcdHZhciBjb25uZWN0QWNrbm93bGVkZ2VGbGFncyA9IGlucHV0W3BvcysrXTtcblx0XHRcdFx0aWYgKGNvbm5lY3RBY2tub3dsZWRnZUZsYWdzICYgMHgwMSlcblx0XHRcdFx0XHR3aXJlTWVzc2FnZS5zZXNzaW9uUHJlc2VudCA9IHRydWU7XG5cdFx0XHRcdHdpcmVNZXNzYWdlLnJldHVybkNvZGUgPSBpbnB1dFtwb3MrK107XG5cdFx0XHRcdGJyZWFrO1xuXG5cdFx0XHRjYXNlIE1FU1NBR0VfVFlQRS5QVUJMSVNIOlxuXHRcdFx0XHR2YXIgcW9zID0gKG1lc3NhZ2VJbmZvID4+IDEpICYgMHgwMztcblxuXHRcdFx0XHR2YXIgbGVuID0gcmVhZFVpbnQxNihpbnB1dCwgcG9zKTtcblx0XHRcdFx0cG9zICs9IDI7XG5cdFx0XHRcdHZhciB0b3BpY05hbWUgPSBwYXJzZVVURjgoaW5wdXQsIHBvcywgbGVuKTtcblx0XHRcdFx0cG9zICs9IGxlbjtcblx0XHRcdFx0Ly8gSWYgUW9TIDEgb3IgMiB0aGVyZSB3aWxsIGJlIGEgbWVzc2FnZUlkZW50aWZpZXJcblx0XHRcdFx0aWYgKHFvcyA+IDApIHtcblx0XHRcdFx0XHR3aXJlTWVzc2FnZS5tZXNzYWdlSWRlbnRpZmllciA9IHJlYWRVaW50MTYoaW5wdXQsIHBvcyk7XG5cdFx0XHRcdFx0cG9zICs9IDI7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHR2YXIgbWVzc2FnZSA9IG5ldyBNZXNzYWdlKGlucHV0LnN1YmFycmF5KHBvcywgZW5kUG9zKSk7XG5cdFx0XHRcdGlmICgobWVzc2FnZUluZm8gJiAweDAxKSA9PSAweDAxKVxuXHRcdFx0XHRcdG1lc3NhZ2UucmV0YWluZWQgPSB0cnVlO1xuXHRcdFx0XHRpZiAoKG1lc3NhZ2VJbmZvICYgMHgwOCkgPT0gMHgwOClcblx0XHRcdFx0XHRtZXNzYWdlLmR1cGxpY2F0ZSA9ICB0cnVlO1xuXHRcdFx0XHRtZXNzYWdlLnFvcyA9IHFvcztcblx0XHRcdFx0bWVzc2FnZS5kZXN0aW5hdGlvbk5hbWUgPSB0b3BpY05hbWU7XG5cdFx0XHRcdHdpcmVNZXNzYWdlLnBheWxvYWRNZXNzYWdlID0gbWVzc2FnZTtcblx0XHRcdFx0YnJlYWs7XG5cblx0XHRcdGNhc2UgIE1FU1NBR0VfVFlQRS5QVUJBQ0s6XG5cdFx0XHRjYXNlICBNRVNTQUdFX1RZUEUuUFVCUkVDOlxuXHRcdFx0Y2FzZSAgTUVTU0FHRV9UWVBFLlBVQlJFTDpcblx0XHRcdGNhc2UgIE1FU1NBR0VfVFlQRS5QVUJDT01QOlxuXHRcdFx0Y2FzZSAgTUVTU0FHRV9UWVBFLlVOU1VCQUNLOlxuXHRcdFx0XHR3aXJlTWVzc2FnZS5tZXNzYWdlSWRlbnRpZmllciA9IHJlYWRVaW50MTYoaW5wdXQsIHBvcyk7XG5cdFx0XHRcdGJyZWFrO1xuXG5cdFx0XHRjYXNlICBNRVNTQUdFX1RZUEUuU1VCQUNLOlxuXHRcdFx0XHR3aXJlTWVzc2FnZS5tZXNzYWdlSWRlbnRpZmllciA9IHJlYWRVaW50MTYoaW5wdXQsIHBvcyk7XG5cdFx0XHRcdHBvcyArPSAyO1xuXHRcdFx0XHR3aXJlTWVzc2FnZS5yZXR1cm5Db2RlID0gaW5wdXQuc3ViYXJyYXkocG9zLCBlbmRQb3MpO1xuXHRcdFx0XHRicmVhaztcblxuXHRcdFx0ZGVmYXVsdDpcblx0XHRcdFx0YnJlYWs7XG5cdFx0XHR9XG5cblx0XHRcdHJldHVybiBbd2lyZU1lc3NhZ2UsZW5kUG9zXTtcblx0XHR9XG5cblx0XHRmdW5jdGlvbiB3cml0ZVVpbnQxNihpbnB1dCwgYnVmZmVyLCBvZmZzZXQpIHtcblx0XHRcdGJ1ZmZlcltvZmZzZXQrK10gPSBpbnB1dCA+PiA4OyAgICAgIC8vTVNCXG5cdFx0XHRidWZmZXJbb2Zmc2V0KytdID0gaW5wdXQgJSAyNTY7ICAgICAvL0xTQlxuXHRcdFx0cmV0dXJuIG9mZnNldDtcblx0XHR9XG5cblx0XHRmdW5jdGlvbiB3cml0ZVN0cmluZyhpbnB1dCwgdXRmOExlbmd0aCwgYnVmZmVyLCBvZmZzZXQpIHtcblx0XHRcdG9mZnNldCA9IHdyaXRlVWludDE2KHV0ZjhMZW5ndGgsIGJ1ZmZlciwgb2Zmc2V0KTtcblx0XHRcdHN0cmluZ1RvVVRGOChpbnB1dCwgYnVmZmVyLCBvZmZzZXQpO1xuXHRcdFx0cmV0dXJuIG9mZnNldCArIHV0ZjhMZW5ndGg7XG5cdFx0fVxuXG5cdFx0ZnVuY3Rpb24gcmVhZFVpbnQxNihidWZmZXIsIG9mZnNldCkge1xuXHRcdFx0cmV0dXJuIDI1NipidWZmZXJbb2Zmc2V0XSArIGJ1ZmZlcltvZmZzZXQrMV07XG5cdFx0fVxuXG5cdFx0LyoqXG5cdCAqIEVuY29kZXMgYW4gTVFUVCBNdWx0aS1CeXRlIEludGVnZXJcblx0ICogQHByaXZhdGVcblx0ICovXG5cdFx0ZnVuY3Rpb24gZW5jb2RlTUJJKG51bWJlcikge1xuXHRcdFx0dmFyIG91dHB1dCA9IG5ldyBBcnJheSgxKTtcblx0XHRcdHZhciBudW1CeXRlcyA9IDA7XG5cblx0XHRcdGRvIHtcblx0XHRcdFx0dmFyIGRpZ2l0ID0gbnVtYmVyICUgMTI4O1xuXHRcdFx0XHRudW1iZXIgPSBudW1iZXIgPj4gNztcblx0XHRcdFx0aWYgKG51bWJlciA+IDApIHtcblx0XHRcdFx0XHRkaWdpdCB8PSAweDgwO1xuXHRcdFx0XHR9XG5cdFx0XHRcdG91dHB1dFtudW1CeXRlcysrXSA9IGRpZ2l0O1xuXHRcdFx0fSB3aGlsZSAoIChudW1iZXIgPiAwKSAmJiAobnVtQnl0ZXM8NCkgKTtcblxuXHRcdFx0cmV0dXJuIG91dHB1dDtcblx0XHR9XG5cblx0XHQvKipcblx0ICogVGFrZXMgYSBTdHJpbmcgYW5kIGNhbGN1bGF0ZXMgaXRzIGxlbmd0aCBpbiBieXRlcyB3aGVuIGVuY29kZWQgaW4gVVRGOC5cblx0ICogQHByaXZhdGVcblx0ICovXG5cdFx0ZnVuY3Rpb24gVVRGOExlbmd0aChpbnB1dCkge1xuXHRcdFx0dmFyIG91dHB1dCA9IDA7XG5cdFx0XHRmb3IgKHZhciBpID0gMDsgaTxpbnB1dC5sZW5ndGg7IGkrKylcblx0XHRcdHtcblx0XHRcdFx0dmFyIGNoYXJDb2RlID0gaW5wdXQuY2hhckNvZGVBdChpKTtcblx0XHRcdFx0aWYgKGNoYXJDb2RlID4gMHg3RkYpXG5cdFx0XHRcdHtcblx0XHRcdFx0XHQvLyBTdXJyb2dhdGUgcGFpciBtZWFucyBpdHMgYSA0IGJ5dGUgY2hhcmFjdGVyXG5cdFx0XHRcdFx0aWYgKDB4RDgwMCA8PSBjaGFyQ29kZSAmJiBjaGFyQ29kZSA8PSAweERCRkYpXG5cdFx0XHRcdFx0e1xuXHRcdFx0XHRcdFx0aSsrO1xuXHRcdFx0XHRcdFx0b3V0cHV0Kys7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdG91dHB1dCArPTM7XG5cdFx0XHRcdH1cblx0XHRcdFx0ZWxzZSBpZiAoY2hhckNvZGUgPiAweDdGKVxuXHRcdFx0XHRcdG91dHB1dCArPTI7XG5cdFx0XHRcdGVsc2Vcblx0XHRcdFx0XHRvdXRwdXQrKztcblx0XHRcdH1cblx0XHRcdHJldHVybiBvdXRwdXQ7XG5cdFx0fVxuXG5cdFx0LyoqXG5cdCAqIFRha2VzIGEgU3RyaW5nIGFuZCB3cml0ZXMgaXQgaW50byBhbiBhcnJheSBhcyBVVEY4IGVuY29kZWQgYnl0ZXMuXG5cdCAqIEBwcml2YXRlXG5cdCAqL1xuXHRcdGZ1bmN0aW9uIHN0cmluZ1RvVVRGOChpbnB1dCwgb3V0cHV0LCBzdGFydCkge1xuXHRcdFx0dmFyIHBvcyA9IHN0YXJ0O1xuXHRcdFx0Zm9yICh2YXIgaSA9IDA7IGk8aW5wdXQubGVuZ3RoOyBpKyspIHtcblx0XHRcdFx0dmFyIGNoYXJDb2RlID0gaW5wdXQuY2hhckNvZGVBdChpKTtcblxuXHRcdFx0XHQvLyBDaGVjayBmb3IgYSBzdXJyb2dhdGUgcGFpci5cblx0XHRcdFx0aWYgKDB4RDgwMCA8PSBjaGFyQ29kZSAmJiBjaGFyQ29kZSA8PSAweERCRkYpIHtcblx0XHRcdFx0XHR2YXIgbG93Q2hhckNvZGUgPSBpbnB1dC5jaGFyQ29kZUF0KCsraSk7XG5cdFx0XHRcdFx0aWYgKGlzTmFOKGxvd0NoYXJDb2RlKSkge1xuXHRcdFx0XHRcdFx0dGhyb3cgbmV3IEVycm9yKGZvcm1hdChFUlJPUi5NQUxGT1JNRURfVU5JQ09ERSwgW2NoYXJDb2RlLCBsb3dDaGFyQ29kZV0pKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0Y2hhckNvZGUgPSAoKGNoYXJDb2RlIC0gMHhEODAwKTw8MTApICsgKGxvd0NoYXJDb2RlIC0gMHhEQzAwKSArIDB4MTAwMDA7XG5cblx0XHRcdFx0fVxuXG5cdFx0XHRcdGlmIChjaGFyQ29kZSA8PSAweDdGKSB7XG5cdFx0XHRcdFx0b3V0cHV0W3BvcysrXSA9IGNoYXJDb2RlO1xuXHRcdFx0XHR9IGVsc2UgaWYgKGNoYXJDb2RlIDw9IDB4N0ZGKSB7XG5cdFx0XHRcdFx0b3V0cHV0W3BvcysrXSA9IGNoYXJDb2RlPj42ICAmIDB4MUYgfCAweEMwO1xuXHRcdFx0XHRcdG91dHB1dFtwb3MrK10gPSBjaGFyQ29kZSAgICAgJiAweDNGIHwgMHg4MDtcblx0XHRcdFx0fSBlbHNlIGlmIChjaGFyQ29kZSA8PSAweEZGRkYpIHtcblx0XHRcdFx0XHRvdXRwdXRbcG9zKytdID0gY2hhckNvZGU+PjEyICYgMHgwRiB8IDB4RTA7XG5cdFx0XHRcdFx0b3V0cHV0W3BvcysrXSA9IGNoYXJDb2RlPj42ICAmIDB4M0YgfCAweDgwO1xuXHRcdFx0XHRcdG91dHB1dFtwb3MrK10gPSBjaGFyQ29kZSAgICAgJiAweDNGIHwgMHg4MDtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRvdXRwdXRbcG9zKytdID0gY2hhckNvZGU+PjE4ICYgMHgwNyB8IDB4RjA7XG5cdFx0XHRcdFx0b3V0cHV0W3BvcysrXSA9IGNoYXJDb2RlPj4xMiAmIDB4M0YgfCAweDgwO1xuXHRcdFx0XHRcdG91dHB1dFtwb3MrK10gPSBjaGFyQ29kZT4+NiAgJiAweDNGIHwgMHg4MDtcblx0XHRcdFx0XHRvdXRwdXRbcG9zKytdID0gY2hhckNvZGUgICAgICYgMHgzRiB8IDB4ODA7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHRcdHJldHVybiBvdXRwdXQ7XG5cdFx0fVxuXG5cdFx0ZnVuY3Rpb24gcGFyc2VVVEY4KGlucHV0LCBvZmZzZXQsIGxlbmd0aCkge1xuXHRcdFx0dmFyIG91dHB1dCA9IFwiXCI7XG5cdFx0XHR2YXIgdXRmMTY7XG5cdFx0XHR2YXIgcG9zID0gb2Zmc2V0O1xuXG5cdFx0XHR3aGlsZSAocG9zIDwgb2Zmc2V0K2xlbmd0aClcblx0XHRcdHtcblx0XHRcdFx0dmFyIGJ5dGUxID0gaW5wdXRbcG9zKytdO1xuXHRcdFx0XHRpZiAoYnl0ZTEgPCAxMjgpXG5cdFx0XHRcdFx0dXRmMTYgPSBieXRlMTtcblx0XHRcdFx0ZWxzZVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0dmFyIGJ5dGUyID0gaW5wdXRbcG9zKytdLTEyODtcblx0XHRcdFx0XHRpZiAoYnl0ZTIgPCAwKVxuXHRcdFx0XHRcdFx0dGhyb3cgbmV3IEVycm9yKGZvcm1hdChFUlJPUi5NQUxGT1JNRURfVVRGLCBbYnl0ZTEudG9TdHJpbmcoMTYpLCBieXRlMi50b1N0cmluZygxNiksXCJcIl0pKTtcblx0XHRcdFx0XHRpZiAoYnl0ZTEgPCAweEUwKSAgICAgICAgICAgICAvLyAyIGJ5dGUgY2hhcmFjdGVyXG5cdFx0XHRcdFx0XHR1dGYxNiA9IDY0KihieXRlMS0weEMwKSArIGJ5dGUyO1xuXHRcdFx0XHRcdGVsc2Vcblx0XHRcdFx0XHR7XG5cdFx0XHRcdFx0XHR2YXIgYnl0ZTMgPSBpbnB1dFtwb3MrK10tMTI4O1xuXHRcdFx0XHRcdFx0aWYgKGJ5dGUzIDwgMClcblx0XHRcdFx0XHRcdFx0dGhyb3cgbmV3IEVycm9yKGZvcm1hdChFUlJPUi5NQUxGT1JNRURfVVRGLCBbYnl0ZTEudG9TdHJpbmcoMTYpLCBieXRlMi50b1N0cmluZygxNiksIGJ5dGUzLnRvU3RyaW5nKDE2KV0pKTtcblx0XHRcdFx0XHRcdGlmIChieXRlMSA8IDB4RjApICAgICAgICAvLyAzIGJ5dGUgY2hhcmFjdGVyXG5cdFx0XHRcdFx0XHRcdHV0ZjE2ID0gNDA5NiooYnl0ZTEtMHhFMCkgKyA2NCpieXRlMiArIGJ5dGUzO1xuXHRcdFx0XHRcdFx0ZWxzZVxuXHRcdFx0XHRcdFx0e1xuXHRcdFx0XHRcdFx0XHR2YXIgYnl0ZTQgPSBpbnB1dFtwb3MrK10tMTI4O1xuXHRcdFx0XHRcdFx0XHRpZiAoYnl0ZTQgPCAwKVxuXHRcdFx0XHRcdFx0XHRcdHRocm93IG5ldyBFcnJvcihmb3JtYXQoRVJST1IuTUFMRk9STUVEX1VURiwgW2J5dGUxLnRvU3RyaW5nKDE2KSwgYnl0ZTIudG9TdHJpbmcoMTYpLCBieXRlMy50b1N0cmluZygxNiksIGJ5dGU0LnRvU3RyaW5nKDE2KV0pKTtcblx0XHRcdFx0XHRcdFx0aWYgKGJ5dGUxIDwgMHhGOCkgICAgICAgIC8vIDQgYnl0ZSBjaGFyYWN0ZXJcblx0XHRcdFx0XHRcdFx0XHR1dGYxNiA9IDI2MjE0NCooYnl0ZTEtMHhGMCkgKyA0MDk2KmJ5dGUyICsgNjQqYnl0ZTMgKyBieXRlNDtcblx0XHRcdFx0XHRcdFx0ZWxzZSAgICAgICAgICAgICAgICAgICAgIC8vIGxvbmdlciBlbmNvZGluZ3MgYXJlIG5vdCBzdXBwb3J0ZWRcblx0XHRcdFx0XHRcdFx0XHR0aHJvdyBuZXcgRXJyb3IoZm9ybWF0KEVSUk9SLk1BTEZPUk1FRF9VVEYsIFtieXRlMS50b1N0cmluZygxNiksIGJ5dGUyLnRvU3RyaW5nKDE2KSwgYnl0ZTMudG9TdHJpbmcoMTYpLCBieXRlNC50b1N0cmluZygxNildKSk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cblx0XHRcdFx0aWYgKHV0ZjE2ID4gMHhGRkZGKSAgIC8vIDQgYnl0ZSBjaGFyYWN0ZXIgLSBleHByZXNzIGFzIGEgc3Vycm9nYXRlIHBhaXJcblx0XHRcdFx0e1xuXHRcdFx0XHRcdHV0ZjE2IC09IDB4MTAwMDA7XG5cdFx0XHRcdFx0b3V0cHV0ICs9IFN0cmluZy5mcm9tQ2hhckNvZGUoMHhEODAwICsgKHV0ZjE2ID4+IDEwKSk7IC8vIGxlYWQgY2hhcmFjdGVyXG5cdFx0XHRcdFx0dXRmMTYgPSAweERDMDAgKyAodXRmMTYgJiAweDNGRik7ICAvLyB0cmFpbCBjaGFyYWN0ZXJcblx0XHRcdFx0fVxuXHRcdFx0XHRvdXRwdXQgKz0gU3RyaW5nLmZyb21DaGFyQ29kZSh1dGYxNik7XG5cdFx0XHR9XG5cdFx0XHRyZXR1cm4gb3V0cHV0O1xuXHRcdH1cblxuXHRcdC8qKlxuXHQgKiBSZXBlYXQga2VlcGFsaXZlIHJlcXVlc3RzLCBtb25pdG9yIHJlc3BvbnNlcy5cblx0ICogQGlnbm9yZVxuXHQgKi9cblx0XHR2YXIgUGluZ2VyID0gZnVuY3Rpb24oY2xpZW50LCBrZWVwQWxpdmVJbnRlcnZhbCkge1xuXHRcdFx0dGhpcy5fY2xpZW50ID0gY2xpZW50O1xuXHRcdFx0dGhpcy5fa2VlcEFsaXZlSW50ZXJ2YWwgPSBrZWVwQWxpdmVJbnRlcnZhbCoxMDAwO1xuXHRcdFx0dGhpcy5pc1Jlc2V0ID0gZmFsc2U7XG5cblx0XHRcdHZhciBwaW5nUmVxID0gbmV3IFdpcmVNZXNzYWdlKE1FU1NBR0VfVFlQRS5QSU5HUkVRKS5lbmNvZGUoKTtcblxuXHRcdFx0dmFyIGRvVGltZW91dCA9IGZ1bmN0aW9uIChwaW5nZXIpIHtcblx0XHRcdFx0cmV0dXJuIGZ1bmN0aW9uICgpIHtcblx0XHRcdFx0XHRyZXR1cm4gZG9QaW5nLmFwcGx5KHBpbmdlcik7XG5cdFx0XHRcdH07XG5cdFx0XHR9O1xuXG5cdFx0XHQvKiogQGlnbm9yZSAqL1xuXHRcdFx0dmFyIGRvUGluZyA9IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRpZiAoIXRoaXMuaXNSZXNldCkge1xuXHRcdFx0XHRcdHRoaXMuX2NsaWVudC5fdHJhY2UoXCJQaW5nZXIuZG9QaW5nXCIsIFwiVGltZWQgb3V0XCIpO1xuXHRcdFx0XHRcdHRoaXMuX2NsaWVudC5fZGlzY29ubmVjdGVkKCBFUlJPUi5QSU5HX1RJTUVPVVQuY29kZSAsIGZvcm1hdChFUlJPUi5QSU5HX1RJTUVPVVQpKTtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHR0aGlzLmlzUmVzZXQgPSBmYWxzZTtcblx0XHRcdFx0XHR0aGlzLl9jbGllbnQuX3RyYWNlKFwiUGluZ2VyLmRvUGluZ1wiLCBcInNlbmQgUElOR1JFUVwiKTtcblx0XHRcdFx0XHR0aGlzLl9jbGllbnQuc29ja2V0LnNlbmQocGluZ1JlcSk7XG5cdFx0XHRcdFx0dGhpcy50aW1lb3V0ID0gc2V0VGltZW91dChkb1RpbWVvdXQodGhpcyksIHRoaXMuX2tlZXBBbGl2ZUludGVydmFsKTtcblx0XHRcdFx0fVxuXHRcdFx0fTtcblxuXHRcdFx0dGhpcy5yZXNldCA9IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHR0aGlzLmlzUmVzZXQgPSB0cnVlO1xuXHRcdFx0XHRjbGVhclRpbWVvdXQodGhpcy50aW1lb3V0KTtcblx0XHRcdFx0aWYgKHRoaXMuX2tlZXBBbGl2ZUludGVydmFsID4gMClcblx0XHRcdFx0XHR0aGlzLnRpbWVvdXQgPSBzZXRUaW1lb3V0KGRvVGltZW91dCh0aGlzKSwgdGhpcy5fa2VlcEFsaXZlSW50ZXJ2YWwpO1xuXHRcdFx0fTtcblxuXHRcdFx0dGhpcy5jYW5jZWwgPSBmdW5jdGlvbigpIHtcblx0XHRcdFx0Y2xlYXJUaW1lb3V0KHRoaXMudGltZW91dCk7XG5cdFx0XHR9O1xuXHRcdH07XG5cblx0XHQvKipcblx0ICogTW9uaXRvciByZXF1ZXN0IGNvbXBsZXRpb24uXG5cdCAqIEBpZ25vcmVcblx0ICovXG5cdFx0dmFyIFRpbWVvdXQgPSBmdW5jdGlvbihjbGllbnQsIHRpbWVvdXRTZWNvbmRzLCBhY3Rpb24sIGFyZ3MpIHtcblx0XHRcdGlmICghdGltZW91dFNlY29uZHMpXG5cdFx0XHRcdHRpbWVvdXRTZWNvbmRzID0gMzA7XG5cblx0XHRcdHZhciBkb1RpbWVvdXQgPSBmdW5jdGlvbiAoYWN0aW9uLCBjbGllbnQsIGFyZ3MpIHtcblx0XHRcdFx0cmV0dXJuIGZ1bmN0aW9uICgpIHtcblx0XHRcdFx0XHRyZXR1cm4gYWN0aW9uLmFwcGx5KGNsaWVudCwgYXJncyk7XG5cdFx0XHRcdH07XG5cdFx0XHR9O1xuXHRcdFx0dGhpcy50aW1lb3V0ID0gc2V0VGltZW91dChkb1RpbWVvdXQoYWN0aW9uLCBjbGllbnQsIGFyZ3MpLCB0aW1lb3V0U2Vjb25kcyAqIDEwMDApO1xuXG5cdFx0XHR0aGlzLmNhbmNlbCA9IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRjbGVhclRpbWVvdXQodGhpcy50aW1lb3V0KTtcblx0XHRcdH07XG5cdFx0fTtcblxuXHQvKipcblx0ICogSW50ZXJuYWwgaW1wbGVtZW50YXRpb24gb2YgdGhlIFdlYnNvY2tldHMgTVFUVCBWMy4xIGNsaWVudC5cblx0ICpcblx0ICogQG5hbWUgUGFoby5DbGllbnRJbXBsIEBjb25zdHJ1Y3RvclxuXHQgKiBAcGFyYW0ge1N0cmluZ30gaG9zdCB0aGUgRE5TIG5hbWVvZiB0aGUgd2ViU29ja2V0IGhvc3QuXG5cdCAqIEBwYXJhbSB7TnVtYmVyfSBwb3J0IHRoZSBwb3J0IG51bWJlciBmb3IgdGhhdCBob3N0LlxuXHQgKiBAcGFyYW0ge1N0cmluZ30gY2xpZW50SWQgdGhlIE1RIGNsaWVudCBpZGVudGlmaWVyLlxuXHQgKi9cblx0XHR2YXIgQ2xpZW50SW1wbCA9IGZ1bmN0aW9uICh1cmksIGhvc3QsIHBvcnQsIHBhdGgsIGNsaWVudElkKSB7XG5cdFx0Ly8gQ2hlY2sgZGVwZW5kZW5jaWVzIGFyZSBzYXRpc2ZpZWQgaW4gdGhpcyBicm93c2VyLlxuXHRcdFx0aWYgKCEoXCJXZWJTb2NrZXRcIiBpbiBnbG9iYWwgJiYgZ2xvYmFsLldlYlNvY2tldCAhPT0gbnVsbCkpIHtcblx0XHRcdFx0dGhyb3cgbmV3IEVycm9yKGZvcm1hdChFUlJPUi5VTlNVUFBPUlRFRCwgW1wiV2ViU29ja2V0XCJdKSk7XG5cdFx0XHR9XG5cdFx0XHRpZiAoIShcIkFycmF5QnVmZmVyXCIgaW4gZ2xvYmFsICYmIGdsb2JhbC5BcnJheUJ1ZmZlciAhPT0gbnVsbCkpIHtcblx0XHRcdFx0dGhyb3cgbmV3IEVycm9yKGZvcm1hdChFUlJPUi5VTlNVUFBPUlRFRCwgW1wiQXJyYXlCdWZmZXJcIl0pKTtcblx0XHRcdH1cblx0XHRcdHRoaXMuX3RyYWNlKFwiUGFoby5DbGllbnRcIiwgdXJpLCBob3N0LCBwb3J0LCBwYXRoLCBjbGllbnRJZCk7XG5cblx0XHRcdHRoaXMuaG9zdCA9IGhvc3Q7XG5cdFx0XHR0aGlzLnBvcnQgPSBwb3J0O1xuXHRcdFx0dGhpcy5wYXRoID0gcGF0aDtcblx0XHRcdHRoaXMudXJpID0gdXJpO1xuXHRcdFx0dGhpcy5jbGllbnRJZCA9IGNsaWVudElkO1xuXHRcdFx0dGhpcy5fd3N1cmkgPSBudWxsO1xuXG5cdFx0XHQvLyBMb2NhbCBzdG9yYWdla2V5cyBhcmUgcXVhbGlmaWVkIHdpdGggdGhlIGZvbGxvd2luZyBzdHJpbmcuXG5cdFx0XHQvLyBUaGUgY29uZGl0aW9uYWwgaW5jbHVzaW9uIG9mIHBhdGggaW4gdGhlIGtleSBpcyBmb3IgYmFja3dhcmRcblx0XHRcdC8vIGNvbXBhdGliaWxpdHkgdG8gd2hlbiB0aGUgcGF0aCB3YXMgbm90IGNvbmZpZ3VyYWJsZSBhbmQgYXNzdW1lZCB0b1xuXHRcdFx0Ly8gYmUgL21xdHRcblx0XHRcdHRoaXMuX2xvY2FsS2V5PWhvc3QrXCI6XCIrcG9ydCsocGF0aCE9XCIvbXF0dFwiP1wiOlwiK3BhdGg6XCJcIikrXCI6XCIrY2xpZW50SWQrXCI6XCI7XG5cblx0XHRcdC8vIENyZWF0ZSBwcml2YXRlIGluc3RhbmNlLW9ubHkgbWVzc2FnZSBxdWV1ZVxuXHRcdFx0Ly8gSW50ZXJuYWwgcXVldWUgb2YgbWVzc2FnZXMgdG8gYmUgc2VudCwgaW4gc2VuZGluZyBvcmRlci5cblx0XHRcdHRoaXMuX21zZ19xdWV1ZSA9IFtdO1xuXHRcdFx0dGhpcy5fYnVmZmVyZWRfbXNnX3F1ZXVlID0gW107XG5cblx0XHRcdC8vIE1lc3NhZ2VzIHdlIGhhdmUgc2VudCBhbmQgYXJlIGV4cGVjdGluZyBhIHJlc3BvbnNlIGZvciwgaW5kZXhlZCBieSB0aGVpciByZXNwZWN0aXZlIG1lc3NhZ2UgaWRzLlxuXHRcdFx0dGhpcy5fc2VudE1lc3NhZ2VzID0ge307XG5cblx0XHRcdC8vIE1lc3NhZ2VzIHdlIGhhdmUgcmVjZWl2ZWQgYW5kIGFja25vd2xlZ2VkIGFuZCBhcmUgZXhwZWN0aW5nIGEgY29uZmlybSBtZXNzYWdlIGZvclxuXHRcdFx0Ly8gaW5kZXhlZCBieSB0aGVpciByZXNwZWN0aXZlIG1lc3NhZ2UgaWRzLlxuXHRcdFx0dGhpcy5fcmVjZWl2ZWRNZXNzYWdlcyA9IHt9O1xuXG5cdFx0XHQvLyBJbnRlcm5hbCBsaXN0IG9mIGNhbGxiYWNrcyB0byBiZSBleGVjdXRlZCB3aGVuIG1lc3NhZ2VzXG5cdFx0XHQvLyBoYXZlIGJlZW4gc3VjY2Vzc2Z1bGx5IHNlbnQgb3ZlciB3ZWIgc29ja2V0LCBlLmcuIGRpc2Nvbm5lY3Rcblx0XHRcdC8vIHdoZW4gaXQgZG9lc24ndCBoYXZlIHRvIHdhaXQgZm9yIEFDSywganVzdCBtZXNzYWdlIGlzIGRpc3BhdGNoZWQuXG5cdFx0XHR0aGlzLl9ub3RpZnlfbXNnX3NlbnQgPSB7fTtcblxuXHRcdFx0Ly8gVW5pcXVlIGlkZW50aWZpZXIgZm9yIFNFTkQgbWVzc2FnZXMsIGluY3JlbWVudGluZ1xuXHRcdFx0Ly8gY291bnRlciBhcyBtZXNzYWdlcyBhcmUgc2VudC5cblx0XHRcdHRoaXMuX21lc3NhZ2VfaWRlbnRpZmllciA9IDE7XG5cblx0XHRcdC8vIFVzZWQgdG8gZGV0ZXJtaW5lIHRoZSB0cmFuc21pc3Npb24gc2VxdWVuY2Ugb2Ygc3RvcmVkIHNlbnQgbWVzc2FnZXMuXG5cdFx0XHR0aGlzLl9zZXF1ZW5jZSA9IDA7XG5cblxuXHRcdFx0Ly8gTG9hZCB0aGUgbG9jYWwgc3RhdGUsIGlmIGFueSwgZnJvbSB0aGUgc2F2ZWQgdmVyc2lvbiwgb25seSByZXN0b3JlIHN0YXRlIHJlbGV2YW50IHRvIHRoaXMgY2xpZW50LlxuXHRcdFx0Zm9yICh2YXIga2V5IGluIGxvY2FsU3RvcmFnZSlcblx0XHRcdFx0aWYgKCAgIGtleS5pbmRleE9mKFwiU2VudDpcIit0aGlzLl9sb2NhbEtleSkgPT09IDAgfHwga2V5LmluZGV4T2YoXCJSZWNlaXZlZDpcIit0aGlzLl9sb2NhbEtleSkgPT09IDApXG5cdFx0XHRcdFx0dGhpcy5yZXN0b3JlKGtleSk7XG5cdFx0fTtcblxuXHRcdC8vIE1lc3NhZ2luZyBDbGllbnQgcHVibGljIGluc3RhbmNlIG1lbWJlcnMuXG5cdFx0Q2xpZW50SW1wbC5wcm90b3R5cGUuaG9zdCA9IG51bGw7XG5cdFx0Q2xpZW50SW1wbC5wcm90b3R5cGUucG9ydCA9IG51bGw7XG5cdFx0Q2xpZW50SW1wbC5wcm90b3R5cGUucGF0aCA9IG51bGw7XG5cdFx0Q2xpZW50SW1wbC5wcm90b3R5cGUudXJpID0gbnVsbDtcblx0XHRDbGllbnRJbXBsLnByb3RvdHlwZS5jbGllbnRJZCA9IG51bGw7XG5cblx0XHQvLyBNZXNzYWdpbmcgQ2xpZW50IHByaXZhdGUgaW5zdGFuY2UgbWVtYmVycy5cblx0XHRDbGllbnRJbXBsLnByb3RvdHlwZS5zb2NrZXQgPSBudWxsO1xuXHRcdC8qIHRydWUgb25jZSB3ZSBoYXZlIHJlY2VpdmVkIGFuIGFja25vd2xlZGdlbWVudCB0byBhIENPTk5FQ1QgcGFja2V0LiAqL1xuXHRcdENsaWVudEltcGwucHJvdG90eXBlLmNvbm5lY3RlZCA9IGZhbHNlO1xuXHRcdC8qIFRoZSBsYXJnZXN0IG1lc3NhZ2UgaWRlbnRpZmllciBhbGxvd2VkLCBtYXkgbm90IGJlIGxhcmdlciB0aGFuIDIqKjE2IGJ1dFxuXHRcdCAqIGlmIHNldCBzbWFsbGVyIHJlZHVjZXMgdGhlIG1heGltdW0gbnVtYmVyIG9mIG91dGJvdW5kIG1lc3NhZ2VzIGFsbG93ZWQuXG5cdFx0ICovXG5cdFx0Q2xpZW50SW1wbC5wcm90b3R5cGUubWF4TWVzc2FnZUlkZW50aWZpZXIgPSA2NTUzNjtcblx0XHRDbGllbnRJbXBsLnByb3RvdHlwZS5jb25uZWN0T3B0aW9ucyA9IG51bGw7XG5cdFx0Q2xpZW50SW1wbC5wcm90b3R5cGUuaG9zdEluZGV4ID0gbnVsbDtcblx0XHRDbGllbnRJbXBsLnByb3RvdHlwZS5vbkNvbm5lY3RlZCA9IG51bGw7XG5cdFx0Q2xpZW50SW1wbC5wcm90b3R5cGUub25Db25uZWN0aW9uTG9zdCA9IG51bGw7XG5cdFx0Q2xpZW50SW1wbC5wcm90b3R5cGUub25NZXNzYWdlRGVsaXZlcmVkID0gbnVsbDtcblx0XHRDbGllbnRJbXBsLnByb3RvdHlwZS5vbk1lc3NhZ2VBcnJpdmVkID0gbnVsbDtcblx0XHRDbGllbnRJbXBsLnByb3RvdHlwZS50cmFjZUZ1bmN0aW9uID0gbnVsbDtcblx0XHRDbGllbnRJbXBsLnByb3RvdHlwZS5fbXNnX3F1ZXVlID0gbnVsbDtcblx0XHRDbGllbnRJbXBsLnByb3RvdHlwZS5fYnVmZmVyZWRfbXNnX3F1ZXVlID0gbnVsbDtcblx0XHRDbGllbnRJbXBsLnByb3RvdHlwZS5fY29ubmVjdFRpbWVvdXQgPSBudWxsO1xuXHRcdC8qIFRoZSBzZW5kUGluZ2VyIG1vbml0b3JzIGhvdyBsb25nIHdlIGFsbG93IGJlZm9yZSB3ZSBzZW5kIGRhdGEgdG8gcHJvdmUgdG8gdGhlIHNlcnZlciB0aGF0IHdlIGFyZSBhbGl2ZS4gKi9cblx0XHRDbGllbnRJbXBsLnByb3RvdHlwZS5zZW5kUGluZ2VyID0gbnVsbDtcblx0XHQvKiBUaGUgcmVjZWl2ZVBpbmdlciBtb25pdG9ycyBob3cgbG9uZyB3ZSBhbGxvdyBiZWZvcmUgd2UgcmVxdWlyZSBldmlkZW5jZSB0aGF0IHRoZSBzZXJ2ZXIgaXMgYWxpdmUuICovXG5cdFx0Q2xpZW50SW1wbC5wcm90b3R5cGUucmVjZWl2ZVBpbmdlciA9IG51bGw7XG5cdFx0Q2xpZW50SW1wbC5wcm90b3R5cGUuX3JlY29ubmVjdEludGVydmFsID0gMTsgLy8gUmVjb25uZWN0IERlbGF5LCBzdGFydHMgYXQgMSBzZWNvbmRcblx0XHRDbGllbnRJbXBsLnByb3RvdHlwZS5fcmVjb25uZWN0aW5nID0gZmFsc2U7XG5cdFx0Q2xpZW50SW1wbC5wcm90b3R5cGUuX3JlY29ubmVjdFRpbWVvdXQgPSBudWxsO1xuXHRcdENsaWVudEltcGwucHJvdG90eXBlLmRpc2Nvbm5lY3RlZFB1Ymxpc2hpbmcgPSBmYWxzZTtcblx0XHRDbGllbnRJbXBsLnByb3RvdHlwZS5kaXNjb25uZWN0ZWRCdWZmZXJTaXplID0gNTAwMDtcblxuXHRcdENsaWVudEltcGwucHJvdG90eXBlLnJlY2VpdmVCdWZmZXIgPSBudWxsO1xuXG5cdFx0Q2xpZW50SW1wbC5wcm90b3R5cGUuX3RyYWNlQnVmZmVyID0gbnVsbDtcblx0XHRDbGllbnRJbXBsLnByb3RvdHlwZS5fTUFYX1RSQUNFX0VOVFJJRVMgPSAxMDA7XG5cblx0XHRDbGllbnRJbXBsLnByb3RvdHlwZS5jb25uZWN0ID0gZnVuY3Rpb24gKGNvbm5lY3RPcHRpb25zKSB7XG5cdFx0XHR2YXIgY29ubmVjdE9wdGlvbnNNYXNrZWQgPSB0aGlzLl90cmFjZU1hc2soY29ubmVjdE9wdGlvbnMsIFwicGFzc3dvcmRcIik7XG5cdFx0XHR0aGlzLl90cmFjZShcIkNsaWVudC5jb25uZWN0XCIsIGNvbm5lY3RPcHRpb25zTWFza2VkLCB0aGlzLnNvY2tldCwgdGhpcy5jb25uZWN0ZWQpO1xuXG5cdFx0XHRpZiAodGhpcy5jb25uZWN0ZWQpXG5cdFx0XHRcdHRocm93IG5ldyBFcnJvcihmb3JtYXQoRVJST1IuSU5WQUxJRF9TVEFURSwgW1wiYWxyZWFkeSBjb25uZWN0ZWRcIl0pKTtcblx0XHRcdGlmICh0aGlzLnNvY2tldClcblx0XHRcdFx0dGhyb3cgbmV3IEVycm9yKGZvcm1hdChFUlJPUi5JTlZBTElEX1NUQVRFLCBbXCJhbHJlYWR5IGNvbm5lY3RlZFwiXSkpO1xuXG5cdFx0XHRpZiAodGhpcy5fcmVjb25uZWN0aW5nKSB7XG5cdFx0XHQvLyBjb25uZWN0KCkgZnVuY3Rpb24gaXMgY2FsbGVkIHdoaWxlIHJlY29ubmVjdCBpcyBpbiBwcm9ncmVzcy5cblx0XHRcdC8vIFRlcm1pbmF0ZSB0aGUgYXV0byByZWNvbm5lY3QgcHJvY2VzcyB0byB1c2UgbmV3IGNvbm5lY3Qgb3B0aW9ucy5cblx0XHRcdFx0dGhpcy5fcmVjb25uZWN0VGltZW91dC5jYW5jZWwoKTtcblx0XHRcdFx0dGhpcy5fcmVjb25uZWN0VGltZW91dCA9IG51bGw7XG5cdFx0XHRcdHRoaXMuX3JlY29ubmVjdGluZyA9IGZhbHNlO1xuXHRcdFx0fVxuXG5cdFx0XHR0aGlzLmNvbm5lY3RPcHRpb25zID0gY29ubmVjdE9wdGlvbnM7XG5cdFx0XHR0aGlzLl9yZWNvbm5lY3RJbnRlcnZhbCA9IDE7XG5cdFx0XHR0aGlzLl9yZWNvbm5lY3RpbmcgPSBmYWxzZTtcblx0XHRcdGlmIChjb25uZWN0T3B0aW9ucy51cmlzKSB7XG5cdFx0XHRcdHRoaXMuaG9zdEluZGV4ID0gMDtcblx0XHRcdFx0dGhpcy5fZG9Db25uZWN0KGNvbm5lY3RPcHRpb25zLnVyaXNbMF0pO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0dGhpcy5fZG9Db25uZWN0KHRoaXMudXJpKTtcblx0XHRcdH1cblxuXHRcdH07XG5cblx0XHRDbGllbnRJbXBsLnByb3RvdHlwZS5zdWJzY3JpYmUgPSBmdW5jdGlvbiAoZmlsdGVyLCBzdWJzY3JpYmVPcHRpb25zKSB7XG5cdFx0XHR0aGlzLl90cmFjZShcIkNsaWVudC5zdWJzY3JpYmVcIiwgZmlsdGVyLCBzdWJzY3JpYmVPcHRpb25zKTtcblxuXHRcdFx0aWYgKCF0aGlzLmNvbm5lY3RlZClcblx0XHRcdFx0dGhyb3cgbmV3IEVycm9yKGZvcm1hdChFUlJPUi5JTlZBTElEX1NUQVRFLCBbXCJub3QgY29ubmVjdGVkXCJdKSk7XG5cbiAgICAgICAgICAgIHZhciB3aXJlTWVzc2FnZSA9IG5ldyBXaXJlTWVzc2FnZShNRVNTQUdFX1RZUEUuU1VCU0NSSUJFKTtcbiAgICAgICAgICAgIHdpcmVNZXNzYWdlLnRvcGljcyA9IGZpbHRlci5jb25zdHJ1Y3RvciA9PT0gQXJyYXkgPyBmaWx0ZXIgOiBbZmlsdGVyXTtcbiAgICAgICAgICAgIGlmIChzdWJzY3JpYmVPcHRpb25zLnFvcyA9PT0gdW5kZWZpbmVkKVxuICAgICAgICAgICAgICAgIHN1YnNjcmliZU9wdGlvbnMucW9zID0gMDtcbiAgICAgICAgICAgIHdpcmVNZXNzYWdlLnJlcXVlc3RlZFFvcyA9IFtdO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB3aXJlTWVzc2FnZS50b3BpY3MubGVuZ3RoOyBpKyspXG4gICAgICAgICAgICAgICAgd2lyZU1lc3NhZ2UucmVxdWVzdGVkUW9zW2ldID0gc3Vic2NyaWJlT3B0aW9ucy5xb3M7XG5cblx0XHRcdGlmIChzdWJzY3JpYmVPcHRpb25zLm9uU3VjY2Vzcykge1xuXHRcdFx0XHR3aXJlTWVzc2FnZS5vblN1Y2Nlc3MgPSBmdW5jdGlvbihncmFudGVkUW9zKSB7c3Vic2NyaWJlT3B0aW9ucy5vblN1Y2Nlc3Moe2ludm9jYXRpb25Db250ZXh0OnN1YnNjcmliZU9wdGlvbnMuaW52b2NhdGlvbkNvbnRleHQsZ3JhbnRlZFFvczpncmFudGVkUW9zfSk7fTtcblx0XHRcdH1cblxuXHRcdFx0aWYgKHN1YnNjcmliZU9wdGlvbnMub25GYWlsdXJlKSB7XG5cdFx0XHRcdHdpcmVNZXNzYWdlLm9uRmFpbHVyZSA9IGZ1bmN0aW9uKGVycm9yQ29kZSkge3N1YnNjcmliZU9wdGlvbnMub25GYWlsdXJlKHtpbnZvY2F0aW9uQ29udGV4dDpzdWJzY3JpYmVPcHRpb25zLmludm9jYXRpb25Db250ZXh0LGVycm9yQ29kZTplcnJvckNvZGUsIGVycm9yTWVzc2FnZTpmb3JtYXQoZXJyb3JDb2RlKX0pO307XG5cdFx0XHR9XG5cblx0XHRcdGlmIChzdWJzY3JpYmVPcHRpb25zLnRpbWVvdXQpIHtcblx0XHRcdFx0d2lyZU1lc3NhZ2UudGltZU91dCA9IG5ldyBUaW1lb3V0KHRoaXMsIHN1YnNjcmliZU9wdGlvbnMudGltZW91dCwgc3Vic2NyaWJlT3B0aW9ucy5vbkZhaWx1cmUsXG5cdFx0XHRcdFx0W3tpbnZvY2F0aW9uQ29udGV4dDpzdWJzY3JpYmVPcHRpb25zLmludm9jYXRpb25Db250ZXh0LFxuXHRcdFx0XHRcdFx0ZXJyb3JDb2RlOkVSUk9SLlNVQlNDUklCRV9USU1FT1VULmNvZGUsXG5cdFx0XHRcdFx0XHRlcnJvck1lc3NhZ2U6Zm9ybWF0KEVSUk9SLlNVQlNDUklCRV9USU1FT1VUKX1dKTtcblx0XHRcdH1cblxuXHRcdFx0Ly8gQWxsIHN1YnNjcmlwdGlvbnMgcmV0dXJuIGEgU1VCQUNLLlxuXHRcdFx0dGhpcy5fcmVxdWlyZXNfYWNrKHdpcmVNZXNzYWdlKTtcblx0XHRcdHRoaXMuX3NjaGVkdWxlX21lc3NhZ2Uod2lyZU1lc3NhZ2UpO1xuXHRcdH07XG5cblx0XHQvKiogQGlnbm9yZSAqL1xuXHRcdENsaWVudEltcGwucHJvdG90eXBlLnVuc3Vic2NyaWJlID0gZnVuY3Rpb24oZmlsdGVyLCB1bnN1YnNjcmliZU9wdGlvbnMpIHtcblx0XHRcdHRoaXMuX3RyYWNlKFwiQ2xpZW50LnVuc3Vic2NyaWJlXCIsIGZpbHRlciwgdW5zdWJzY3JpYmVPcHRpb25zKTtcblxuXHRcdFx0aWYgKCF0aGlzLmNvbm5lY3RlZClcblx0XHRcdFx0dGhyb3cgbmV3IEVycm9yKGZvcm1hdChFUlJPUi5JTlZBTElEX1NUQVRFLCBbXCJub3QgY29ubmVjdGVkXCJdKSk7XG5cbiAgICAgICAgICAgIHZhciB3aXJlTWVzc2FnZSA9IG5ldyBXaXJlTWVzc2FnZShNRVNTQUdFX1RZUEUuVU5TVUJTQ1JJQkUpO1xuICAgICAgICAgICAgd2lyZU1lc3NhZ2UudG9waWNzID0gZmlsdGVyLmNvbnN0cnVjdG9yID09PSBBcnJheSA/IGZpbHRlciA6IFtmaWx0ZXJdO1xuXG5cdFx0XHRpZiAodW5zdWJzY3JpYmVPcHRpb25zLm9uU3VjY2Vzcykge1xuXHRcdFx0XHR3aXJlTWVzc2FnZS5jYWxsYmFjayA9IGZ1bmN0aW9uKCkge3Vuc3Vic2NyaWJlT3B0aW9ucy5vblN1Y2Nlc3Moe2ludm9jYXRpb25Db250ZXh0OnVuc3Vic2NyaWJlT3B0aW9ucy5pbnZvY2F0aW9uQ29udGV4dH0pO307XG5cdFx0XHR9XG5cdFx0XHRpZiAodW5zdWJzY3JpYmVPcHRpb25zLnRpbWVvdXQpIHtcblx0XHRcdFx0d2lyZU1lc3NhZ2UudGltZU91dCA9IG5ldyBUaW1lb3V0KHRoaXMsIHVuc3Vic2NyaWJlT3B0aW9ucy50aW1lb3V0LCB1bnN1YnNjcmliZU9wdGlvbnMub25GYWlsdXJlLFxuXHRcdFx0XHRcdFt7aW52b2NhdGlvbkNvbnRleHQ6dW5zdWJzY3JpYmVPcHRpb25zLmludm9jYXRpb25Db250ZXh0LFxuXHRcdFx0XHRcdFx0ZXJyb3JDb2RlOkVSUk9SLlVOU1VCU0NSSUJFX1RJTUVPVVQuY29kZSxcblx0XHRcdFx0XHRcdGVycm9yTWVzc2FnZTpmb3JtYXQoRVJST1IuVU5TVUJTQ1JJQkVfVElNRU9VVCl9XSk7XG5cdFx0XHR9XG5cblx0XHRcdC8vIEFsbCB1bnN1YnNjcmliZXMgcmV0dXJuIGEgU1VCQUNLLlxuXHRcdFx0dGhpcy5fcmVxdWlyZXNfYWNrKHdpcmVNZXNzYWdlKTtcblx0XHRcdHRoaXMuX3NjaGVkdWxlX21lc3NhZ2Uod2lyZU1lc3NhZ2UpO1xuXHRcdH07XG5cblx0XHRDbGllbnRJbXBsLnByb3RvdHlwZS5zZW5kID0gZnVuY3Rpb24gKG1lc3NhZ2UpIHtcblx0XHRcdHRoaXMuX3RyYWNlKFwiQ2xpZW50LnNlbmRcIiwgbWVzc2FnZSk7XG5cblx0XHRcdHZhciB3aXJlTWVzc2FnZSA9IG5ldyBXaXJlTWVzc2FnZShNRVNTQUdFX1RZUEUuUFVCTElTSCk7XG5cdFx0XHR3aXJlTWVzc2FnZS5wYXlsb2FkTWVzc2FnZSA9IG1lc3NhZ2U7XG5cblx0XHRcdGlmICh0aGlzLmNvbm5lY3RlZCkge1xuXHRcdFx0Ly8gTWFyayBxb3MgMSAmIDIgbWVzc2FnZSBhcyBcIkFDSyByZXF1aXJlZFwiXG5cdFx0XHQvLyBGb3IgcW9zIDAgbWVzc2FnZSwgaW52b2tlIG9uTWVzc2FnZURlbGl2ZXJlZCBjYWxsYmFjayBpZiB0aGVyZSBpcyBvbmUuXG5cdFx0XHQvLyBUaGVuIHNjaGVkdWxlIHRoZSBtZXNzYWdlLlxuXHRcdFx0XHRpZiAobWVzc2FnZS5xb3MgPiAwKSB7XG5cdFx0XHRcdFx0dGhpcy5fcmVxdWlyZXNfYWNrKHdpcmVNZXNzYWdlKTtcblx0XHRcdFx0fSBlbHNlIGlmICh0aGlzLm9uTWVzc2FnZURlbGl2ZXJlZCkge1xuXHRcdFx0XHRcdHRoaXMuX25vdGlmeV9tc2dfc2VudFt3aXJlTWVzc2FnZV0gPSB0aGlzLm9uTWVzc2FnZURlbGl2ZXJlZCh3aXJlTWVzc2FnZS5wYXlsb2FkTWVzc2FnZSk7XG5cdFx0XHRcdH1cblx0XHRcdFx0dGhpcy5fc2NoZWR1bGVfbWVzc2FnZSh3aXJlTWVzc2FnZSk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0Ly8gQ3VycmVudGx5IGRpc2Nvbm5lY3RlZCwgd2lsbCBub3Qgc2NoZWR1bGUgdGhpcyBtZXNzYWdlXG5cdFx0XHQvLyBDaGVjayBpZiByZWNvbm5lY3RpbmcgaXMgaW4gcHJvZ3Jlc3MgYW5kIGRpc2Nvbm5lY3RlZCBwdWJsaXNoIGlzIGVuYWJsZWQuXG5cdFx0XHRcdGlmICh0aGlzLl9yZWNvbm5lY3RpbmcgJiYgdGhpcy5kaXNjb25uZWN0ZWRQdWJsaXNoaW5nKSB7XG5cdFx0XHRcdC8vIENoZWNrIHRoZSBsaW1pdCB3aGljaCBpbmNsdWRlIHRoZSBcInJlcXVpcmVkIEFDS1wiIG1lc3NhZ2VzXG5cdFx0XHRcdFx0dmFyIG1lc3NhZ2VDb3VudCA9IE9iamVjdC5rZXlzKHRoaXMuX3NlbnRNZXNzYWdlcykubGVuZ3RoICsgdGhpcy5fYnVmZmVyZWRfbXNnX3F1ZXVlLmxlbmd0aDtcblx0XHRcdFx0XHRpZiAobWVzc2FnZUNvdW50ID4gdGhpcy5kaXNjb25uZWN0ZWRCdWZmZXJTaXplKSB7XG5cdFx0XHRcdFx0XHR0aHJvdyBuZXcgRXJyb3IoZm9ybWF0KEVSUk9SLkJVRkZFUl9GVUxMLCBbdGhpcy5kaXNjb25uZWN0ZWRCdWZmZXJTaXplXSkpO1xuXHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRpZiAobWVzc2FnZS5xb3MgPiAwKSB7XG5cdFx0XHRcdFx0XHQvLyBNYXJrIHRoaXMgbWVzc2FnZSBhcyBcIkFDSyByZXF1aXJlZFwiXG5cdFx0XHRcdFx0XHRcdHRoaXMuX3JlcXVpcmVzX2Fjayh3aXJlTWVzc2FnZSk7XG5cdFx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0XHR3aXJlTWVzc2FnZS5zZXF1ZW5jZSA9ICsrdGhpcy5fc2VxdWVuY2U7XG5cdFx0XHRcdFx0XHRcdC8vIEFkZCBtZXNzYWdlcyBpbiBmaWZvIG9yZGVyIHRvIGFycmF5LCBieSBhZGRpbmcgdG8gc3RhcnRcblx0XHRcdFx0XHRcdFx0dGhpcy5fYnVmZmVyZWRfbXNnX3F1ZXVlLnVuc2hpZnQod2lyZU1lc3NhZ2UpO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHR0aHJvdyBuZXcgRXJyb3IoZm9ybWF0KEVSUk9SLklOVkFMSURfU1RBVEUsIFtcIm5vdCBjb25uZWN0ZWRcIl0pKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH07XG5cblx0XHRDbGllbnRJbXBsLnByb3RvdHlwZS5kaXNjb25uZWN0ID0gZnVuY3Rpb24gKCkge1xuXHRcdFx0dGhpcy5fdHJhY2UoXCJDbGllbnQuZGlzY29ubmVjdFwiKTtcblxuXHRcdFx0aWYgKHRoaXMuX3JlY29ubmVjdGluZykge1xuXHRcdFx0Ly8gZGlzY29ubmVjdCgpIGZ1bmN0aW9uIGlzIGNhbGxlZCB3aGlsZSByZWNvbm5lY3QgaXMgaW4gcHJvZ3Jlc3MuXG5cdFx0XHQvLyBUZXJtaW5hdGUgdGhlIGF1dG8gcmVjb25uZWN0IHByb2Nlc3MuXG5cdFx0XHRcdHRoaXMuX3JlY29ubmVjdFRpbWVvdXQuY2FuY2VsKCk7XG5cdFx0XHRcdHRoaXMuX3JlY29ubmVjdFRpbWVvdXQgPSBudWxsO1xuXHRcdFx0XHR0aGlzLl9yZWNvbm5lY3RpbmcgPSBmYWxzZTtcblx0XHRcdH1cblxuXHRcdFx0aWYgKCF0aGlzLnNvY2tldClcblx0XHRcdFx0dGhyb3cgbmV3IEVycm9yKGZvcm1hdChFUlJPUi5JTlZBTElEX1NUQVRFLCBbXCJub3QgY29ubmVjdGluZyBvciBjb25uZWN0ZWRcIl0pKTtcblxuXHRcdFx0dmFyIHdpcmVNZXNzYWdlID0gbmV3IFdpcmVNZXNzYWdlKE1FU1NBR0VfVFlQRS5ESVNDT05ORUNUKTtcblxuXHRcdFx0Ly8gUnVuIHRoZSBkaXNjb25uZWN0ZWQgY2FsbCBiYWNrIGFzIHNvb24gYXMgdGhlIG1lc3NhZ2UgaGFzIGJlZW4gc2VudCxcblx0XHRcdC8vIGluIGNhc2Ugb2YgYSBmYWlsdXJlIGxhdGVyIG9uIGluIHRoZSBkaXNjb25uZWN0IHByb2Nlc3NpbmcuXG5cdFx0XHQvLyBhcyBhIGNvbnNlcXVlbmNlLCB0aGUgX2Rpc2NvbmVjdGVkIGNhbGwgYmFjayBtYXkgYmUgcnVuIHNldmVyYWwgdGltZXMuXG5cdFx0XHR0aGlzLl9ub3RpZnlfbXNnX3NlbnRbd2lyZU1lc3NhZ2VdID0gc2NvcGUodGhpcy5fZGlzY29ubmVjdGVkLCB0aGlzKTtcblxuXHRcdFx0dGhpcy5fc2NoZWR1bGVfbWVzc2FnZSh3aXJlTWVzc2FnZSk7XG5cdFx0fTtcblxuXHRcdENsaWVudEltcGwucHJvdG90eXBlLmdldFRyYWNlTG9nID0gZnVuY3Rpb24gKCkge1xuXHRcdFx0aWYgKCB0aGlzLl90cmFjZUJ1ZmZlciAhPT0gbnVsbCApIHtcblx0XHRcdFx0dGhpcy5fdHJhY2UoXCJDbGllbnQuZ2V0VHJhY2VMb2dcIiwgbmV3IERhdGUoKSk7XG5cdFx0XHRcdHRoaXMuX3RyYWNlKFwiQ2xpZW50LmdldFRyYWNlTG9nIGluIGZsaWdodCBtZXNzYWdlc1wiLCB0aGlzLl9zZW50TWVzc2FnZXMubGVuZ3RoKTtcblx0XHRcdFx0Zm9yICh2YXIga2V5IGluIHRoaXMuX3NlbnRNZXNzYWdlcylcblx0XHRcdFx0XHR0aGlzLl90cmFjZShcIl9zZW50TWVzc2FnZXMgXCIsa2V5LCB0aGlzLl9zZW50TWVzc2FnZXNba2V5XSk7XG5cdFx0XHRcdGZvciAodmFyIGtleSBpbiB0aGlzLl9yZWNlaXZlZE1lc3NhZ2VzKVxuXHRcdFx0XHRcdHRoaXMuX3RyYWNlKFwiX3JlY2VpdmVkTWVzc2FnZXMgXCIsa2V5LCB0aGlzLl9yZWNlaXZlZE1lc3NhZ2VzW2tleV0pO1xuXG5cdFx0XHRcdHJldHVybiB0aGlzLl90cmFjZUJ1ZmZlcjtcblx0XHRcdH1cblx0XHR9O1xuXG5cdFx0Q2xpZW50SW1wbC5wcm90b3R5cGUuc3RhcnRUcmFjZSA9IGZ1bmN0aW9uICgpIHtcblx0XHRcdGlmICggdGhpcy5fdHJhY2VCdWZmZXIgPT09IG51bGwgKSB7XG5cdFx0XHRcdHRoaXMuX3RyYWNlQnVmZmVyID0gW107XG5cdFx0XHR9XG5cdFx0XHR0aGlzLl90cmFjZShcIkNsaWVudC5zdGFydFRyYWNlXCIsIG5ldyBEYXRlKCksIHZlcnNpb24pO1xuXHRcdH07XG5cblx0XHRDbGllbnRJbXBsLnByb3RvdHlwZS5zdG9wVHJhY2UgPSBmdW5jdGlvbiAoKSB7XG5cdFx0XHRkZWxldGUgdGhpcy5fdHJhY2VCdWZmZXI7XG5cdFx0fTtcblxuXHRcdENsaWVudEltcGwucHJvdG90eXBlLl9kb0Nvbm5lY3QgPSBmdW5jdGlvbiAod3N1cmwpIHtcblx0XHQvLyBXaGVuIHRoZSBzb2NrZXQgaXMgb3BlbiwgdGhpcyBjbGllbnQgd2lsbCBzZW5kIHRoZSBDT05ORUNUIFdpcmVNZXNzYWdlIHVzaW5nIHRoZSBzYXZlZCBwYXJhbWV0ZXJzLlxuXHRcdFx0aWYgKHRoaXMuY29ubmVjdE9wdGlvbnMudXNlU1NMKSB7XG5cdFx0XHRcdHZhciB1cmlQYXJ0cyA9IHdzdXJsLnNwbGl0KFwiOlwiKTtcblx0XHRcdFx0dXJpUGFydHNbMF0gPSBcIndzc1wiO1xuXHRcdFx0XHR3c3VybCA9IHVyaVBhcnRzLmpvaW4oXCI6XCIpO1xuXHRcdFx0fVxuXHRcdFx0dGhpcy5fd3N1cmkgPSB3c3VybDtcblx0XHRcdHRoaXMuY29ubmVjdGVkID0gZmFsc2U7XG5cblxuXG5cdFx0XHRpZiAodGhpcy5jb25uZWN0T3B0aW9ucy5tcXR0VmVyc2lvbiA8IDQpIHtcblx0XHRcdFx0dGhpcy5zb2NrZXQgPSBuZXcgV2ViU29ja2V0KHdzdXJsLCBbXCJtcXR0djMuMVwiXSk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHR0aGlzLnNvY2tldCA9IG5ldyBXZWJTb2NrZXQod3N1cmwsIFtcIm1xdHRcIl0pO1xuXHRcdFx0fVxuXHRcdFx0dGhpcy5zb2NrZXQuYmluYXJ5VHlwZSA9IFwiYXJyYXlidWZmZXJcIjtcblx0XHRcdHRoaXMuc29ja2V0Lm9ub3BlbiA9IHNjb3BlKHRoaXMuX29uX3NvY2tldF9vcGVuLCB0aGlzKTtcblx0XHRcdHRoaXMuc29ja2V0Lm9ubWVzc2FnZSA9IHNjb3BlKHRoaXMuX29uX3NvY2tldF9tZXNzYWdlLCB0aGlzKTtcblx0XHRcdHRoaXMuc29ja2V0Lm9uZXJyb3IgPSBzY29wZSh0aGlzLl9vbl9zb2NrZXRfZXJyb3IsIHRoaXMpO1xuXHRcdFx0dGhpcy5zb2NrZXQub25jbG9zZSA9IHNjb3BlKHRoaXMuX29uX3NvY2tldF9jbG9zZSwgdGhpcyk7XG5cblx0XHRcdHRoaXMuc2VuZFBpbmdlciA9IG5ldyBQaW5nZXIodGhpcywgdGhpcy5jb25uZWN0T3B0aW9ucy5rZWVwQWxpdmVJbnRlcnZhbCk7XG5cdFx0XHR0aGlzLnJlY2VpdmVQaW5nZXIgPSBuZXcgUGluZ2VyKHRoaXMsIHRoaXMuY29ubmVjdE9wdGlvbnMua2VlcEFsaXZlSW50ZXJ2YWwpO1xuXHRcdFx0aWYgKHRoaXMuX2Nvbm5lY3RUaW1lb3V0KSB7XG5cdFx0XHRcdHRoaXMuX2Nvbm5lY3RUaW1lb3V0LmNhbmNlbCgpO1xuXHRcdFx0XHR0aGlzLl9jb25uZWN0VGltZW91dCA9IG51bGw7XG5cdFx0XHR9XG5cdFx0XHR0aGlzLl9jb25uZWN0VGltZW91dCA9IG5ldyBUaW1lb3V0KHRoaXMsIHRoaXMuY29ubmVjdE9wdGlvbnMudGltZW91dCwgdGhpcy5fZGlzY29ubmVjdGVkLCAgW0VSUk9SLkNPTk5FQ1RfVElNRU9VVC5jb2RlLCBmb3JtYXQoRVJST1IuQ09OTkVDVF9USU1FT1VUKV0pO1xuXHRcdH07XG5cblxuXHRcdC8vIFNjaGVkdWxlIGEgbmV3IG1lc3NhZ2UgdG8gYmUgc2VudCBvdmVyIHRoZSBXZWJTb2NrZXRzXG5cdFx0Ly8gY29ubmVjdGlvbi4gQ09OTkVDVCBtZXNzYWdlcyBjYXVzZSBXZWJTb2NrZXQgY29ubmVjdGlvblxuXHRcdC8vIHRvIGJlIHN0YXJ0ZWQuIEFsbCBvdGhlciBtZXNzYWdlcyBhcmUgcXVldWVkIGludGVybmFsbHlcblx0XHQvLyB1bnRpbCB0aGlzIGhhcyBoYXBwZW5lZC4gV2hlbiBXUyBjb25uZWN0aW9uIHN0YXJ0cywgcHJvY2Vzc1xuXHRcdC8vIGFsbCBvdXRzdGFuZGluZyBtZXNzYWdlcy5cblx0XHRDbGllbnRJbXBsLnByb3RvdHlwZS5fc2NoZWR1bGVfbWVzc2FnZSA9IGZ1bmN0aW9uIChtZXNzYWdlKSB7XG5cdFx0XHQvLyBBZGQgbWVzc2FnZXMgaW4gZmlmbyBvcmRlciB0byBhcnJheSwgYnkgYWRkaW5nIHRvIHN0YXJ0XG5cdFx0XHR0aGlzLl9tc2dfcXVldWUudW5zaGlmdChtZXNzYWdlKTtcblx0XHRcdC8vIFByb2Nlc3Mgb3V0c3RhbmRpbmcgbWVzc2FnZXMgaW4gdGhlIHF1ZXVlIGlmIHdlIGhhdmUgYW4gIG9wZW4gc29ja2V0LCBhbmQgaGF2ZSByZWNlaXZlZCBDT05OQUNLLlxuXHRcdFx0aWYgKHRoaXMuY29ubmVjdGVkKSB7XG5cdFx0XHRcdHRoaXMuX3Byb2Nlc3NfcXVldWUoKTtcblx0XHRcdH1cblx0XHR9O1xuXG5cdFx0Q2xpZW50SW1wbC5wcm90b3R5cGUuc3RvcmUgPSBmdW5jdGlvbihwcmVmaXgsIHdpcmVNZXNzYWdlKSB7XG5cdFx0XHR2YXIgc3RvcmVkTWVzc2FnZSA9IHt0eXBlOndpcmVNZXNzYWdlLnR5cGUsIG1lc3NhZ2VJZGVudGlmaWVyOndpcmVNZXNzYWdlLm1lc3NhZ2VJZGVudGlmaWVyLCB2ZXJzaW9uOjF9O1xuXG5cdFx0XHRzd2l0Y2god2lyZU1lc3NhZ2UudHlwZSkge1xuXHRcdFx0Y2FzZSBNRVNTQUdFX1RZUEUuUFVCTElTSDpcblx0XHRcdFx0aWYod2lyZU1lc3NhZ2UucHViUmVjUmVjZWl2ZWQpXG5cdFx0XHRcdFx0c3RvcmVkTWVzc2FnZS5wdWJSZWNSZWNlaXZlZCA9IHRydWU7XG5cblx0XHRcdFx0Ly8gQ29udmVydCB0aGUgcGF5bG9hZCB0byBhIGhleCBzdHJpbmcuXG5cdFx0XHRcdHN0b3JlZE1lc3NhZ2UucGF5bG9hZE1lc3NhZ2UgPSB7fTtcblx0XHRcdFx0dmFyIGhleCA9IFwiXCI7XG5cdFx0XHRcdHZhciBtZXNzYWdlQnl0ZXMgPSB3aXJlTWVzc2FnZS5wYXlsb2FkTWVzc2FnZS5wYXlsb2FkQnl0ZXM7XG5cdFx0XHRcdGZvciAodmFyIGk9MDsgaTxtZXNzYWdlQnl0ZXMubGVuZ3RoOyBpKyspIHtcblx0XHRcdFx0XHRpZiAobWVzc2FnZUJ5dGVzW2ldIDw9IDB4Rilcblx0XHRcdFx0XHRcdGhleCA9IGhleCtcIjBcIittZXNzYWdlQnl0ZXNbaV0udG9TdHJpbmcoMTYpO1xuXHRcdFx0XHRcdGVsc2Vcblx0XHRcdFx0XHRcdGhleCA9IGhleCttZXNzYWdlQnl0ZXNbaV0udG9TdHJpbmcoMTYpO1xuXHRcdFx0XHR9XG5cdFx0XHRcdHN0b3JlZE1lc3NhZ2UucGF5bG9hZE1lc3NhZ2UucGF5bG9hZEhleCA9IGhleDtcblxuXHRcdFx0XHRzdG9yZWRNZXNzYWdlLnBheWxvYWRNZXNzYWdlLnFvcyA9IHdpcmVNZXNzYWdlLnBheWxvYWRNZXNzYWdlLnFvcztcblx0XHRcdFx0c3RvcmVkTWVzc2FnZS5wYXlsb2FkTWVzc2FnZS5kZXN0aW5hdGlvbk5hbWUgPSB3aXJlTWVzc2FnZS5wYXlsb2FkTWVzc2FnZS5kZXN0aW5hdGlvbk5hbWU7XG5cdFx0XHRcdGlmICh3aXJlTWVzc2FnZS5wYXlsb2FkTWVzc2FnZS5kdXBsaWNhdGUpXG5cdFx0XHRcdFx0c3RvcmVkTWVzc2FnZS5wYXlsb2FkTWVzc2FnZS5kdXBsaWNhdGUgPSB0cnVlO1xuXHRcdFx0XHRpZiAod2lyZU1lc3NhZ2UucGF5bG9hZE1lc3NhZ2UucmV0YWluZWQpXG5cdFx0XHRcdFx0c3RvcmVkTWVzc2FnZS5wYXlsb2FkTWVzc2FnZS5yZXRhaW5lZCA9IHRydWU7XG5cblx0XHRcdFx0Ly8gQWRkIGEgc2VxdWVuY2UgbnVtYmVyIHRvIHNlbnQgbWVzc2FnZXMuXG5cdFx0XHRcdGlmICggcHJlZml4LmluZGV4T2YoXCJTZW50OlwiKSA9PT0gMCApIHtcblx0XHRcdFx0XHRpZiAoIHdpcmVNZXNzYWdlLnNlcXVlbmNlID09PSB1bmRlZmluZWQgKVxuXHRcdFx0XHRcdFx0d2lyZU1lc3NhZ2Uuc2VxdWVuY2UgPSArK3RoaXMuX3NlcXVlbmNlO1xuXHRcdFx0XHRcdHN0b3JlZE1lc3NhZ2Uuc2VxdWVuY2UgPSB3aXJlTWVzc2FnZS5zZXF1ZW5jZTtcblx0XHRcdFx0fVxuXHRcdFx0XHRicmVhaztcblxuXHRcdFx0ZGVmYXVsdDpcblx0XHRcdFx0dGhyb3cgRXJyb3IoZm9ybWF0KEVSUk9SLklOVkFMSURfU1RPUkVEX0RBVEEsIFtwcmVmaXgrdGhpcy5fbG9jYWxLZXkrd2lyZU1lc3NhZ2UubWVzc2FnZUlkZW50aWZpZXIsIHN0b3JlZE1lc3NhZ2VdKSk7XG5cdFx0XHR9XG5cdFx0XHRsb2NhbFN0b3JhZ2Uuc2V0SXRlbShwcmVmaXgrdGhpcy5fbG9jYWxLZXkrd2lyZU1lc3NhZ2UubWVzc2FnZUlkZW50aWZpZXIsIEpTT04uc3RyaW5naWZ5KHN0b3JlZE1lc3NhZ2UpKTtcblx0XHR9O1xuXG5cdFx0Q2xpZW50SW1wbC5wcm90b3R5cGUucmVzdG9yZSA9IGZ1bmN0aW9uKGtleSkge1xuXHRcdFx0dmFyIHZhbHVlID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oa2V5KTtcblx0XHRcdHZhciBzdG9yZWRNZXNzYWdlID0gSlNPTi5wYXJzZSh2YWx1ZSk7XG5cblx0XHRcdHZhciB3aXJlTWVzc2FnZSA9IG5ldyBXaXJlTWVzc2FnZShzdG9yZWRNZXNzYWdlLnR5cGUsIHN0b3JlZE1lc3NhZ2UpO1xuXG5cdFx0XHRzd2l0Y2goc3RvcmVkTWVzc2FnZS50eXBlKSB7XG5cdFx0XHRjYXNlIE1FU1NBR0VfVFlQRS5QVUJMSVNIOlxuXHRcdFx0XHQvLyBSZXBsYWNlIHRoZSBwYXlsb2FkIG1lc3NhZ2Ugd2l0aCBhIE1lc3NhZ2Ugb2JqZWN0LlxuXHRcdFx0XHR2YXIgaGV4ID0gc3RvcmVkTWVzc2FnZS5wYXlsb2FkTWVzc2FnZS5wYXlsb2FkSGV4O1xuXHRcdFx0XHR2YXIgYnVmZmVyID0gbmV3IEFycmF5QnVmZmVyKChoZXgubGVuZ3RoKS8yKTtcblx0XHRcdFx0dmFyIGJ5dGVTdHJlYW0gPSBuZXcgVWludDhBcnJheShidWZmZXIpO1xuXHRcdFx0XHR2YXIgaSA9IDA7XG5cdFx0XHRcdHdoaWxlIChoZXgubGVuZ3RoID49IDIpIHtcblx0XHRcdFx0XHR2YXIgeCA9IHBhcnNlSW50KGhleC5zdWJzdHJpbmcoMCwgMiksIDE2KTtcblx0XHRcdFx0XHRoZXggPSBoZXguc3Vic3RyaW5nKDIsIGhleC5sZW5ndGgpO1xuXHRcdFx0XHRcdGJ5dGVTdHJlYW1baSsrXSA9IHg7XG5cdFx0XHRcdH1cblx0XHRcdFx0dmFyIHBheWxvYWRNZXNzYWdlID0gbmV3IE1lc3NhZ2UoYnl0ZVN0cmVhbSk7XG5cblx0XHRcdFx0cGF5bG9hZE1lc3NhZ2UucW9zID0gc3RvcmVkTWVzc2FnZS5wYXlsb2FkTWVzc2FnZS5xb3M7XG5cdFx0XHRcdHBheWxvYWRNZXNzYWdlLmRlc3RpbmF0aW9uTmFtZSA9IHN0b3JlZE1lc3NhZ2UucGF5bG9hZE1lc3NhZ2UuZGVzdGluYXRpb25OYW1lO1xuXHRcdFx0XHRpZiAoc3RvcmVkTWVzc2FnZS5wYXlsb2FkTWVzc2FnZS5kdXBsaWNhdGUpXG5cdFx0XHRcdFx0cGF5bG9hZE1lc3NhZ2UuZHVwbGljYXRlID0gdHJ1ZTtcblx0XHRcdFx0aWYgKHN0b3JlZE1lc3NhZ2UucGF5bG9hZE1lc3NhZ2UucmV0YWluZWQpXG5cdFx0XHRcdFx0cGF5bG9hZE1lc3NhZ2UucmV0YWluZWQgPSB0cnVlO1xuXHRcdFx0XHR3aXJlTWVzc2FnZS5wYXlsb2FkTWVzc2FnZSA9IHBheWxvYWRNZXNzYWdlO1xuXG5cdFx0XHRcdGJyZWFrO1xuXG5cdFx0XHRkZWZhdWx0OlxuXHRcdFx0XHR0aHJvdyBFcnJvcihmb3JtYXQoRVJST1IuSU5WQUxJRF9TVE9SRURfREFUQSwgW2tleSwgdmFsdWVdKSk7XG5cdFx0XHR9XG5cblx0XHRcdGlmIChrZXkuaW5kZXhPZihcIlNlbnQ6XCIrdGhpcy5fbG9jYWxLZXkpID09PSAwKSB7XG5cdFx0XHRcdHdpcmVNZXNzYWdlLnBheWxvYWRNZXNzYWdlLmR1cGxpY2F0ZSA9IHRydWU7XG5cdFx0XHRcdHRoaXMuX3NlbnRNZXNzYWdlc1t3aXJlTWVzc2FnZS5tZXNzYWdlSWRlbnRpZmllcl0gPSB3aXJlTWVzc2FnZTtcblx0XHRcdH0gZWxzZSBpZiAoa2V5LmluZGV4T2YoXCJSZWNlaXZlZDpcIit0aGlzLl9sb2NhbEtleSkgPT09IDApIHtcblx0XHRcdFx0dGhpcy5fcmVjZWl2ZWRNZXNzYWdlc1t3aXJlTWVzc2FnZS5tZXNzYWdlSWRlbnRpZmllcl0gPSB3aXJlTWVzc2FnZTtcblx0XHRcdH1cblx0XHR9O1xuXG5cdFx0Q2xpZW50SW1wbC5wcm90b3R5cGUuX3Byb2Nlc3NfcXVldWUgPSBmdW5jdGlvbiAoKSB7XG5cdFx0XHR2YXIgbWVzc2FnZSA9IG51bGw7XG5cblx0XHRcdC8vIFNlbmQgYWxsIHF1ZXVlZCBtZXNzYWdlcyBkb3duIHNvY2tldCBjb25uZWN0aW9uXG5cdFx0XHR3aGlsZSAoKG1lc3NhZ2UgPSB0aGlzLl9tc2dfcXVldWUucG9wKCkpKSB7XG5cdFx0XHRcdHRoaXMuX3NvY2tldF9zZW5kKG1lc3NhZ2UpO1xuXHRcdFx0XHQvLyBOb3RpZnkgbGlzdGVuZXJzIHRoYXQgbWVzc2FnZSB3YXMgc3VjY2Vzc2Z1bGx5IHNlbnRcblx0XHRcdFx0aWYgKHRoaXMuX25vdGlmeV9tc2dfc2VudFttZXNzYWdlXSkge1xuXHRcdFx0XHRcdHRoaXMuX25vdGlmeV9tc2dfc2VudFttZXNzYWdlXSgpO1xuXHRcdFx0XHRcdGRlbGV0ZSB0aGlzLl9ub3RpZnlfbXNnX3NlbnRbbWVzc2FnZV07XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9O1xuXG5cdFx0LyoqXG5cdCAqIEV4cGVjdCBhbiBBQ0sgcmVzcG9uc2UgZm9yIHRoaXMgbWVzc2FnZS4gQWRkIG1lc3NhZ2UgdG8gdGhlIHNldCBvZiBpbiBwcm9ncmVzc1xuXHQgKiBtZXNzYWdlcyBhbmQgc2V0IGFuIHVudXNlZCBpZGVudGlmaWVyIGluIHRoaXMgbWVzc2FnZS5cblx0ICogQGlnbm9yZVxuXHQgKi9cblx0XHRDbGllbnRJbXBsLnByb3RvdHlwZS5fcmVxdWlyZXNfYWNrID0gZnVuY3Rpb24gKHdpcmVNZXNzYWdlKSB7XG5cdFx0XHR2YXIgbWVzc2FnZUNvdW50ID0gT2JqZWN0LmtleXModGhpcy5fc2VudE1lc3NhZ2VzKS5sZW5ndGg7XG5cdFx0XHRpZiAobWVzc2FnZUNvdW50ID4gdGhpcy5tYXhNZXNzYWdlSWRlbnRpZmllcilcblx0XHRcdFx0dGhyb3cgRXJyb3IgKFwiVG9vIG1hbnkgbWVzc2FnZXM6XCIrbWVzc2FnZUNvdW50KTtcblxuXHRcdFx0d2hpbGUodGhpcy5fc2VudE1lc3NhZ2VzW3RoaXMuX21lc3NhZ2VfaWRlbnRpZmllcl0gIT09IHVuZGVmaW5lZCkge1xuXHRcdFx0XHR0aGlzLl9tZXNzYWdlX2lkZW50aWZpZXIrKztcblx0XHRcdH1cblx0XHRcdHdpcmVNZXNzYWdlLm1lc3NhZ2VJZGVudGlmaWVyID0gdGhpcy5fbWVzc2FnZV9pZGVudGlmaWVyO1xuXHRcdFx0dGhpcy5fc2VudE1lc3NhZ2VzW3dpcmVNZXNzYWdlLm1lc3NhZ2VJZGVudGlmaWVyXSA9IHdpcmVNZXNzYWdlO1xuXHRcdFx0aWYgKHdpcmVNZXNzYWdlLnR5cGUgPT09IE1FU1NBR0VfVFlQRS5QVUJMSVNIKSB7XG5cdFx0XHRcdHRoaXMuc3RvcmUoXCJTZW50OlwiLCB3aXJlTWVzc2FnZSk7XG5cdFx0XHR9XG5cdFx0XHRpZiAodGhpcy5fbWVzc2FnZV9pZGVudGlmaWVyID09PSB0aGlzLm1heE1lc3NhZ2VJZGVudGlmaWVyKSB7XG5cdFx0XHRcdHRoaXMuX21lc3NhZ2VfaWRlbnRpZmllciA9IDE7XG5cdFx0XHR9XG5cdFx0fTtcblxuXHRcdC8qKlxuXHQgKiBDYWxsZWQgd2hlbiB0aGUgdW5kZXJseWluZyB3ZWJzb2NrZXQgaGFzIGJlZW4gb3BlbmVkLlxuXHQgKiBAaWdub3JlXG5cdCAqL1xuXHRcdENsaWVudEltcGwucHJvdG90eXBlLl9vbl9zb2NrZXRfb3BlbiA9IGZ1bmN0aW9uICgpIHtcblx0XHQvLyBDcmVhdGUgdGhlIENPTk5FQ1QgbWVzc2FnZSBvYmplY3QuXG5cdFx0XHR2YXIgd2lyZU1lc3NhZ2UgPSBuZXcgV2lyZU1lc3NhZ2UoTUVTU0FHRV9UWVBFLkNPTk5FQ1QsIHRoaXMuY29ubmVjdE9wdGlvbnMpO1xuXHRcdFx0d2lyZU1lc3NhZ2UuY2xpZW50SWQgPSB0aGlzLmNsaWVudElkO1xuXHRcdFx0dGhpcy5fc29ja2V0X3NlbmQod2lyZU1lc3NhZ2UpO1xuXHRcdH07XG5cblx0XHQvKipcblx0ICogQ2FsbGVkIHdoZW4gdGhlIHVuZGVybHlpbmcgd2Vic29ja2V0IGhhcyByZWNlaXZlZCBhIGNvbXBsZXRlIHBhY2tldC5cblx0ICogQGlnbm9yZVxuXHQgKi9cblx0XHRDbGllbnRJbXBsLnByb3RvdHlwZS5fb25fc29ja2V0X21lc3NhZ2UgPSBmdW5jdGlvbiAoZXZlbnQpIHtcblx0XHRcdHRoaXMuX3RyYWNlKFwiQ2xpZW50Ll9vbl9zb2NrZXRfbWVzc2FnZVwiLCBldmVudC5kYXRhKTtcblx0XHRcdHZhciBtZXNzYWdlcyA9IHRoaXMuX2RlZnJhbWVNZXNzYWdlcyhldmVudC5kYXRhKTtcblx0XHRcdGZvciAodmFyIGkgPSAwOyBpIDwgbWVzc2FnZXMubGVuZ3RoOyBpKz0xKSB7XG5cdFx0XHRcdHRoaXMuX2hhbmRsZU1lc3NhZ2UobWVzc2FnZXNbaV0pO1xuXHRcdFx0fVxuXHRcdH07XG5cblx0XHRDbGllbnRJbXBsLnByb3RvdHlwZS5fZGVmcmFtZU1lc3NhZ2VzID0gZnVuY3Rpb24oZGF0YSkge1xuXHRcdFx0dmFyIGJ5dGVBcnJheSA9IG5ldyBVaW50OEFycmF5KGRhdGEpO1xuXHRcdFx0dmFyIG1lc3NhZ2VzID0gW107XG5cdFx0XHRpZiAodGhpcy5yZWNlaXZlQnVmZmVyKSB7XG5cdFx0XHRcdHZhciBuZXdEYXRhID0gbmV3IFVpbnQ4QXJyYXkodGhpcy5yZWNlaXZlQnVmZmVyLmxlbmd0aCtieXRlQXJyYXkubGVuZ3RoKTtcblx0XHRcdFx0bmV3RGF0YS5zZXQodGhpcy5yZWNlaXZlQnVmZmVyKTtcblx0XHRcdFx0bmV3RGF0YS5zZXQoYnl0ZUFycmF5LHRoaXMucmVjZWl2ZUJ1ZmZlci5sZW5ndGgpO1xuXHRcdFx0XHRieXRlQXJyYXkgPSBuZXdEYXRhO1xuXHRcdFx0XHRkZWxldGUgdGhpcy5yZWNlaXZlQnVmZmVyO1xuXHRcdFx0fVxuXHRcdFx0dHJ5IHtcblx0XHRcdFx0dmFyIG9mZnNldCA9IDA7XG5cdFx0XHRcdHdoaWxlKG9mZnNldCA8IGJ5dGVBcnJheS5sZW5ndGgpIHtcblx0XHRcdFx0XHR2YXIgcmVzdWx0ID0gZGVjb2RlTWVzc2FnZShieXRlQXJyYXksb2Zmc2V0KTtcblx0XHRcdFx0XHR2YXIgd2lyZU1lc3NhZ2UgPSByZXN1bHRbMF07XG5cdFx0XHRcdFx0b2Zmc2V0ID0gcmVzdWx0WzFdO1xuXHRcdFx0XHRcdGlmICh3aXJlTWVzc2FnZSAhPT0gbnVsbCkge1xuXHRcdFx0XHRcdFx0bWVzc2FnZXMucHVzaCh3aXJlTWVzc2FnZSk7XG5cdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0XHRpZiAob2Zmc2V0IDwgYnl0ZUFycmF5Lmxlbmd0aCkge1xuXHRcdFx0XHRcdHRoaXMucmVjZWl2ZUJ1ZmZlciA9IGJ5dGVBcnJheS5zdWJhcnJheShvZmZzZXQpO1xuXHRcdFx0XHR9XG5cdFx0XHR9IGNhdGNoIChlcnJvcikge1xuXHRcdFx0XHR2YXIgZXJyb3JTdGFjayA9ICgoZXJyb3IuaGFzT3duUHJvcGVydHkoXCJzdGFja1wiKSA9PSBcInVuZGVmaW5lZFwiKSA/IGVycm9yLnN0YWNrLnRvU3RyaW5nKCkgOiBcIk5vIEVycm9yIFN0YWNrIEF2YWlsYWJsZVwiKTtcblx0XHRcdFx0dGhpcy5fZGlzY29ubmVjdGVkKEVSUk9SLklOVEVSTkFMX0VSUk9SLmNvZGUgLCBmb3JtYXQoRVJST1IuSU5URVJOQUxfRVJST1IsIFtlcnJvci5tZXNzYWdlLGVycm9yU3RhY2tdKSk7XG5cdFx0XHRcdHJldHVybjtcblx0XHRcdH1cblx0XHRcdHJldHVybiBtZXNzYWdlcztcblx0XHR9O1xuXG5cdFx0Q2xpZW50SW1wbC5wcm90b3R5cGUuX2hhbmRsZU1lc3NhZ2UgPSBmdW5jdGlvbih3aXJlTWVzc2FnZSkge1xuXG5cdFx0XHR0aGlzLl90cmFjZShcIkNsaWVudC5faGFuZGxlTWVzc2FnZVwiLCB3aXJlTWVzc2FnZSk7XG5cblx0XHRcdHRyeSB7XG5cdFx0XHRcdHN3aXRjaCh3aXJlTWVzc2FnZS50eXBlKSB7XG5cdFx0XHRcdGNhc2UgTUVTU0FHRV9UWVBFLkNPTk5BQ0s6XG5cdFx0XHRcdFx0dGhpcy5fY29ubmVjdFRpbWVvdXQuY2FuY2VsKCk7XG5cdFx0XHRcdFx0aWYgKHRoaXMuX3JlY29ubmVjdFRpbWVvdXQpXG5cdFx0XHRcdFx0XHR0aGlzLl9yZWNvbm5lY3RUaW1lb3V0LmNhbmNlbCgpO1xuXG5cdFx0XHRcdFx0Ly8gSWYgd2UgaGF2ZSBzdGFydGVkIHVzaW5nIGNsZWFuIHNlc3Npb24gdGhlbiBjbGVhciB1cCB0aGUgbG9jYWwgc3RhdGUuXG5cdFx0XHRcdFx0aWYgKHRoaXMuY29ubmVjdE9wdGlvbnMuY2xlYW5TZXNzaW9uKSB7XG5cdFx0XHRcdFx0XHRmb3IgKHZhciBrZXkgaW4gdGhpcy5fc2VudE1lc3NhZ2VzKSB7XG5cdFx0XHRcdFx0XHRcdHZhciBzZW50TWVzc2FnZSA9IHRoaXMuX3NlbnRNZXNzYWdlc1trZXldO1xuXHRcdFx0XHRcdFx0XHRsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbShcIlNlbnQ6XCIrdGhpcy5fbG9jYWxLZXkrc2VudE1lc3NhZ2UubWVzc2FnZUlkZW50aWZpZXIpO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0dGhpcy5fc2VudE1lc3NhZ2VzID0ge307XG5cblx0XHRcdFx0XHRcdGZvciAodmFyIGtleSBpbiB0aGlzLl9yZWNlaXZlZE1lc3NhZ2VzKSB7XG5cdFx0XHRcdFx0XHRcdHZhciByZWNlaXZlZE1lc3NhZ2UgPSB0aGlzLl9yZWNlaXZlZE1lc3NhZ2VzW2tleV07XG5cdFx0XHRcdFx0XHRcdGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKFwiUmVjZWl2ZWQ6XCIrdGhpcy5fbG9jYWxLZXkrcmVjZWl2ZWRNZXNzYWdlLm1lc3NhZ2VJZGVudGlmaWVyKTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdHRoaXMuX3JlY2VpdmVkTWVzc2FnZXMgPSB7fTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0Ly8gQ2xpZW50IGNvbm5lY3RlZCBhbmQgcmVhZHkgZm9yIGJ1c2luZXNzLlxuXHRcdFx0XHRcdGlmICh3aXJlTWVzc2FnZS5yZXR1cm5Db2RlID09PSAwKSB7XG5cblx0XHRcdFx0XHRcdHRoaXMuY29ubmVjdGVkID0gdHJ1ZTtcblx0XHRcdFx0XHRcdC8vIEp1bXAgdG8gdGhlIGVuZCBvZiB0aGUgbGlzdCBvZiB1cmlzIGFuZCBzdG9wIGxvb2tpbmcgZm9yIGEgZ29vZCBob3N0LlxuXG5cdFx0XHRcdFx0XHRpZiAodGhpcy5jb25uZWN0T3B0aW9ucy51cmlzKVxuXHRcdFx0XHRcdFx0XHR0aGlzLmhvc3RJbmRleCA9IHRoaXMuY29ubmVjdE9wdGlvbnMudXJpcy5sZW5ndGg7XG5cblx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0dGhpcy5fZGlzY29ubmVjdGVkKEVSUk9SLkNPTk5BQ0tfUkVUVVJOQ09ERS5jb2RlICwgZm9ybWF0KEVSUk9SLkNPTk5BQ0tfUkVUVVJOQ09ERSwgW3dpcmVNZXNzYWdlLnJldHVybkNvZGUsIENPTk5BQ0tfUkNbd2lyZU1lc3NhZ2UucmV0dXJuQ29kZV1dKSk7XG5cdFx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHQvLyBSZXNlbmQgbWVzc2FnZXMuXG5cdFx0XHRcdFx0dmFyIHNlcXVlbmNlZE1lc3NhZ2VzID0gW107XG5cdFx0XHRcdFx0Zm9yICh2YXIgbXNnSWQgaW4gdGhpcy5fc2VudE1lc3NhZ2VzKSB7XG5cdFx0XHRcdFx0XHRpZiAodGhpcy5fc2VudE1lc3NhZ2VzLmhhc093blByb3BlcnR5KG1zZ0lkKSlcblx0XHRcdFx0XHRcdFx0c2VxdWVuY2VkTWVzc2FnZXMucHVzaCh0aGlzLl9zZW50TWVzc2FnZXNbbXNnSWRdKTtcblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHQvLyBBbHNvIHNjaGVkdWxlIHFvcyAwIGJ1ZmZlcmVkIG1lc3NhZ2VzIGlmIGFueVxuXHRcdFx0XHRcdGlmICh0aGlzLl9idWZmZXJlZF9tc2dfcXVldWUubGVuZ3RoID4gMCkge1xuXHRcdFx0XHRcdFx0dmFyIG1zZyA9IG51bGw7XG5cdFx0XHRcdFx0XHR3aGlsZSAoKG1zZyA9IHRoaXMuX2J1ZmZlcmVkX21zZ19xdWV1ZS5wb3AoKSkpIHtcblx0XHRcdFx0XHRcdFx0c2VxdWVuY2VkTWVzc2FnZXMucHVzaChtc2cpO1xuXHRcdFx0XHRcdFx0XHRpZiAodGhpcy5vbk1lc3NhZ2VEZWxpdmVyZWQpXG5cdFx0XHRcdFx0XHRcdFx0dGhpcy5fbm90aWZ5X21zZ19zZW50W21zZ10gPSB0aGlzLm9uTWVzc2FnZURlbGl2ZXJlZChtc2cucGF5bG9hZE1lc3NhZ2UpO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdC8vIFNvcnQgc2VudE1lc3NhZ2VzIGludG8gdGhlIG9yaWdpbmFsIHNlbnQgb3JkZXIuXG5cdFx0XHRcdFx0dmFyIHNlcXVlbmNlZE1lc3NhZ2VzID0gc2VxdWVuY2VkTWVzc2FnZXMuc29ydChmdW5jdGlvbihhLGIpIHtyZXR1cm4gYS5zZXF1ZW5jZSAtIGIuc2VxdWVuY2U7fSApO1xuXHRcdFx0XHRcdGZvciAodmFyIGk9MCwgbGVuPXNlcXVlbmNlZE1lc3NhZ2VzLmxlbmd0aDsgaTxsZW47IGkrKykge1xuXHRcdFx0XHRcdFx0dmFyIHNlbnRNZXNzYWdlID0gc2VxdWVuY2VkTWVzc2FnZXNbaV07XG5cdFx0XHRcdFx0XHRpZiAoc2VudE1lc3NhZ2UudHlwZSA9PSBNRVNTQUdFX1RZUEUuUFVCTElTSCAmJiBzZW50TWVzc2FnZS5wdWJSZWNSZWNlaXZlZCkge1xuXHRcdFx0XHRcdFx0XHR2YXIgcHViUmVsTWVzc2FnZSA9IG5ldyBXaXJlTWVzc2FnZShNRVNTQUdFX1RZUEUuUFVCUkVMLCB7bWVzc2FnZUlkZW50aWZpZXI6c2VudE1lc3NhZ2UubWVzc2FnZUlkZW50aWZpZXJ9KTtcblx0XHRcdFx0XHRcdFx0dGhpcy5fc2NoZWR1bGVfbWVzc2FnZShwdWJSZWxNZXNzYWdlKTtcblx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRcdHRoaXMuX3NjaGVkdWxlX21lc3NhZ2Uoc2VudE1lc3NhZ2UpO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdC8vIEV4ZWN1dGUgdGhlIGNvbm5lY3RPcHRpb25zLm9uU3VjY2VzcyBjYWxsYmFjayBpZiB0aGVyZSBpcyBvbmUuXG5cdFx0XHRcdFx0Ly8gV2lsbCBhbHNvIG5vdyByZXR1cm4gaWYgdGhpcyBjb25uZWN0aW9uIHdhcyB0aGUgcmVzdWx0IG9mIGFuIGF1dG9tYXRpY1xuXHRcdFx0XHRcdC8vIHJlY29ubmVjdCBhbmQgd2hpY2ggVVJJIHdhcyBzdWNjZXNzZnVsbHkgY29ubmVjdGVkIHRvLlxuXHRcdFx0XHRcdGlmICh0aGlzLmNvbm5lY3RPcHRpb25zLm9uU3VjY2Vzcykge1xuXHRcdFx0XHRcdFx0dGhpcy5jb25uZWN0T3B0aW9ucy5vblN1Y2Nlc3Moe2ludm9jYXRpb25Db250ZXh0OnRoaXMuY29ubmVjdE9wdGlvbnMuaW52b2NhdGlvbkNvbnRleHR9KTtcblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHR2YXIgcmVjb25uZWN0ZWQgPSBmYWxzZTtcblx0XHRcdFx0XHRpZiAodGhpcy5fcmVjb25uZWN0aW5nKSB7XG5cdFx0XHRcdFx0XHRyZWNvbm5lY3RlZCA9IHRydWU7XG5cdFx0XHRcdFx0XHR0aGlzLl9yZWNvbm5lY3RJbnRlcnZhbCA9IDE7XG5cdFx0XHRcdFx0XHR0aGlzLl9yZWNvbm5lY3RpbmcgPSBmYWxzZTtcblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHQvLyBFeGVjdXRlIHRoZSBvbkNvbm5lY3RlZCBjYWxsYmFjayBpZiB0aGVyZSBpcyBvbmUuXG5cdFx0XHRcdFx0dGhpcy5fY29ubmVjdGVkKHJlY29ubmVjdGVkLCB0aGlzLl93c3VyaSk7XG5cblx0XHRcdFx0XHQvLyBQcm9jZXNzIGFsbCBxdWV1ZWQgbWVzc2FnZXMgbm93IHRoYXQgdGhlIGNvbm5lY3Rpb24gaXMgZXN0YWJsaXNoZWQuXG5cdFx0XHRcdFx0dGhpcy5fcHJvY2Vzc19xdWV1ZSgpO1xuXHRcdFx0XHRcdGJyZWFrO1xuXG5cdFx0XHRcdGNhc2UgTUVTU0FHRV9UWVBFLlBVQkxJU0g6XG5cdFx0XHRcdFx0dGhpcy5fcmVjZWl2ZVB1Ymxpc2god2lyZU1lc3NhZ2UpO1xuXHRcdFx0XHRcdGJyZWFrO1xuXG5cdFx0XHRcdGNhc2UgTUVTU0FHRV9UWVBFLlBVQkFDSzpcblx0XHRcdFx0XHR2YXIgc2VudE1lc3NhZ2UgPSB0aGlzLl9zZW50TWVzc2FnZXNbd2lyZU1lc3NhZ2UubWVzc2FnZUlkZW50aWZpZXJdO1xuXHRcdFx0XHRcdC8vIElmIHRoaXMgaXMgYSByZSBmbG93IG9mIGEgUFVCQUNLIGFmdGVyIHdlIGhhdmUgcmVzdGFydGVkIHJlY2VpdmVkTWVzc2FnZSB3aWxsIG5vdCBleGlzdC5cblx0XHRcdFx0XHRpZiAoc2VudE1lc3NhZ2UpIHtcblx0XHRcdFx0XHRcdGRlbGV0ZSB0aGlzLl9zZW50TWVzc2FnZXNbd2lyZU1lc3NhZ2UubWVzc2FnZUlkZW50aWZpZXJdO1xuXHRcdFx0XHRcdFx0bG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oXCJTZW50OlwiK3RoaXMuX2xvY2FsS2V5K3dpcmVNZXNzYWdlLm1lc3NhZ2VJZGVudGlmaWVyKTtcblx0XHRcdFx0XHRcdGlmICh0aGlzLm9uTWVzc2FnZURlbGl2ZXJlZClcblx0XHRcdFx0XHRcdFx0dGhpcy5vbk1lc3NhZ2VEZWxpdmVyZWQoc2VudE1lc3NhZ2UucGF5bG9hZE1lc3NhZ2UpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRicmVhaztcblxuXHRcdFx0XHRjYXNlIE1FU1NBR0VfVFlQRS5QVUJSRUM6XG5cdFx0XHRcdFx0dmFyIHNlbnRNZXNzYWdlID0gdGhpcy5fc2VudE1lc3NhZ2VzW3dpcmVNZXNzYWdlLm1lc3NhZ2VJZGVudGlmaWVyXTtcblx0XHRcdFx0XHQvLyBJZiB0aGlzIGlzIGEgcmUgZmxvdyBvZiBhIFBVQlJFQyBhZnRlciB3ZSBoYXZlIHJlc3RhcnRlZCByZWNlaXZlZE1lc3NhZ2Ugd2lsbCBub3QgZXhpc3QuXG5cdFx0XHRcdFx0aWYgKHNlbnRNZXNzYWdlKSB7XG5cdFx0XHRcdFx0XHRzZW50TWVzc2FnZS5wdWJSZWNSZWNlaXZlZCA9IHRydWU7XG5cdFx0XHRcdFx0XHR2YXIgcHViUmVsTWVzc2FnZSA9IG5ldyBXaXJlTWVzc2FnZShNRVNTQUdFX1RZUEUuUFVCUkVMLCB7bWVzc2FnZUlkZW50aWZpZXI6d2lyZU1lc3NhZ2UubWVzc2FnZUlkZW50aWZpZXJ9KTtcblx0XHRcdFx0XHRcdHRoaXMuc3RvcmUoXCJTZW50OlwiLCBzZW50TWVzc2FnZSk7XG5cdFx0XHRcdFx0XHR0aGlzLl9zY2hlZHVsZV9tZXNzYWdlKHB1YlJlbE1lc3NhZ2UpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRicmVhaztcblxuXHRcdFx0XHRjYXNlIE1FU1NBR0VfVFlQRS5QVUJSRUw6XG5cdFx0XHRcdFx0dmFyIHJlY2VpdmVkTWVzc2FnZSA9IHRoaXMuX3JlY2VpdmVkTWVzc2FnZXNbd2lyZU1lc3NhZ2UubWVzc2FnZUlkZW50aWZpZXJdO1xuXHRcdFx0XHRcdGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKFwiUmVjZWl2ZWQ6XCIrdGhpcy5fbG9jYWxLZXkrd2lyZU1lc3NhZ2UubWVzc2FnZUlkZW50aWZpZXIpO1xuXHRcdFx0XHRcdC8vIElmIHRoaXMgaXMgYSByZSBmbG93IG9mIGEgUFVCUkVMIGFmdGVyIHdlIGhhdmUgcmVzdGFydGVkIHJlY2VpdmVkTWVzc2FnZSB3aWxsIG5vdCBleGlzdC5cblx0XHRcdFx0XHRpZiAocmVjZWl2ZWRNZXNzYWdlKSB7XG5cdFx0XHRcdFx0XHR0aGlzLl9yZWNlaXZlTWVzc2FnZShyZWNlaXZlZE1lc3NhZ2UpO1xuXHRcdFx0XHRcdFx0ZGVsZXRlIHRoaXMuX3JlY2VpdmVkTWVzc2FnZXNbd2lyZU1lc3NhZ2UubWVzc2FnZUlkZW50aWZpZXJdO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHQvLyBBbHdheXMgZmxvdyBQdWJDb21wLCB3ZSBtYXkgaGF2ZSBwcmV2aW91c2x5IGZsb3dlZCBQdWJDb21wIGJ1dCB0aGUgc2VydmVyIGxvc3QgaXQgYW5kIHJlc3RhcnRlZC5cblx0XHRcdFx0XHR2YXIgcHViQ29tcE1lc3NhZ2UgPSBuZXcgV2lyZU1lc3NhZ2UoTUVTU0FHRV9UWVBFLlBVQkNPTVAsIHttZXNzYWdlSWRlbnRpZmllcjp3aXJlTWVzc2FnZS5tZXNzYWdlSWRlbnRpZmllcn0pO1xuXHRcdFx0XHRcdHRoaXMuX3NjaGVkdWxlX21lc3NhZ2UocHViQ29tcE1lc3NhZ2UpO1xuXG5cblx0XHRcdFx0XHRicmVhaztcblxuXHRcdFx0XHRjYXNlIE1FU1NBR0VfVFlQRS5QVUJDT01QOlxuXHRcdFx0XHRcdHZhciBzZW50TWVzc2FnZSA9IHRoaXMuX3NlbnRNZXNzYWdlc1t3aXJlTWVzc2FnZS5tZXNzYWdlSWRlbnRpZmllcl07XG5cdFx0XHRcdFx0ZGVsZXRlIHRoaXMuX3NlbnRNZXNzYWdlc1t3aXJlTWVzc2FnZS5tZXNzYWdlSWRlbnRpZmllcl07XG5cdFx0XHRcdFx0bG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oXCJTZW50OlwiK3RoaXMuX2xvY2FsS2V5K3dpcmVNZXNzYWdlLm1lc3NhZ2VJZGVudGlmaWVyKTtcblx0XHRcdFx0XHRpZiAodGhpcy5vbk1lc3NhZ2VEZWxpdmVyZWQpXG5cdFx0XHRcdFx0XHR0aGlzLm9uTWVzc2FnZURlbGl2ZXJlZChzZW50TWVzc2FnZS5wYXlsb2FkTWVzc2FnZSk7XG5cdFx0XHRcdFx0YnJlYWs7XG5cblx0XHRcdFx0Y2FzZSBNRVNTQUdFX1RZUEUuU1VCQUNLOlxuXHRcdFx0XHRcdHZhciBzZW50TWVzc2FnZSA9IHRoaXMuX3NlbnRNZXNzYWdlc1t3aXJlTWVzc2FnZS5tZXNzYWdlSWRlbnRpZmllcl07XG5cdFx0XHRcdFx0aWYgKHNlbnRNZXNzYWdlKSB7XG5cdFx0XHRcdFx0XHRpZihzZW50TWVzc2FnZS50aW1lT3V0KVxuXHRcdFx0XHRcdFx0XHRzZW50TWVzc2FnZS50aW1lT3V0LmNhbmNlbCgpO1xuXHRcdFx0XHRcdFx0Ly8gVGhpcyB3aWxsIG5lZWQgdG8gYmUgZml4ZWQgd2hlbiB3ZSBhZGQgbXVsdGlwbGUgdG9waWMgc3VwcG9ydFxuXHRcdFx0XHRcdFx0aWYgKHdpcmVNZXNzYWdlLnJldHVybkNvZGVbMF0gPT09IDB4ODApIHtcblx0XHRcdFx0XHRcdFx0aWYgKHNlbnRNZXNzYWdlLm9uRmFpbHVyZSkge1xuXHRcdFx0XHRcdFx0XHRcdHNlbnRNZXNzYWdlLm9uRmFpbHVyZSh3aXJlTWVzc2FnZS5yZXR1cm5Db2RlKTtcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fSBlbHNlIGlmIChzZW50TWVzc2FnZS5vblN1Y2Nlc3MpIHtcblx0XHRcdFx0XHRcdFx0c2VudE1lc3NhZ2Uub25TdWNjZXNzKHdpcmVNZXNzYWdlLnJldHVybkNvZGUpO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0ZGVsZXRlIHRoaXMuX3NlbnRNZXNzYWdlc1t3aXJlTWVzc2FnZS5tZXNzYWdlSWRlbnRpZmllcl07XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGJyZWFrO1xuXG5cdFx0XHRcdGNhc2UgTUVTU0FHRV9UWVBFLlVOU1VCQUNLOlxuXHRcdFx0XHRcdHZhciBzZW50TWVzc2FnZSA9IHRoaXMuX3NlbnRNZXNzYWdlc1t3aXJlTWVzc2FnZS5tZXNzYWdlSWRlbnRpZmllcl07XG5cdFx0XHRcdFx0aWYgKHNlbnRNZXNzYWdlKSB7XG5cdFx0XHRcdFx0XHRpZiAoc2VudE1lc3NhZ2UudGltZU91dClcblx0XHRcdFx0XHRcdFx0c2VudE1lc3NhZ2UudGltZU91dC5jYW5jZWwoKTtcblx0XHRcdFx0XHRcdGlmIChzZW50TWVzc2FnZS5jYWxsYmFjaykge1xuXHRcdFx0XHRcdFx0XHRzZW50TWVzc2FnZS5jYWxsYmFjaygpO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0ZGVsZXRlIHRoaXMuX3NlbnRNZXNzYWdlc1t3aXJlTWVzc2FnZS5tZXNzYWdlSWRlbnRpZmllcl07XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0YnJlYWs7XG5cblx0XHRcdFx0Y2FzZSBNRVNTQUdFX1RZUEUuUElOR1JFU1A6XG5cdFx0XHRcdC8qIFRoZSBzZW5kUGluZ2VyIG9yIHJlY2VpdmVQaW5nZXIgbWF5IGhhdmUgc2VudCBhIHBpbmcsIHRoZSByZWNlaXZlUGluZ2VyIGhhcyBhbHJlYWR5IGJlZW4gcmVzZXQuICovXG5cdFx0XHRcdFx0dGhpcy5zZW5kUGluZ2VyLnJlc2V0KCk7XG5cdFx0XHRcdFx0YnJlYWs7XG5cblx0XHRcdFx0Y2FzZSBNRVNTQUdFX1RZUEUuRElTQ09OTkVDVDpcblx0XHRcdFx0Ly8gQ2xpZW50cyBkbyBub3QgZXhwZWN0IHRvIHJlY2VpdmUgZGlzY29ubmVjdCBwYWNrZXRzLlxuXHRcdFx0XHRcdHRoaXMuX2Rpc2Nvbm5lY3RlZChFUlJPUi5JTlZBTElEX01RVFRfTUVTU0FHRV9UWVBFLmNvZGUgLCBmb3JtYXQoRVJST1IuSU5WQUxJRF9NUVRUX01FU1NBR0VfVFlQRSwgW3dpcmVNZXNzYWdlLnR5cGVdKSk7XG5cdFx0XHRcdFx0YnJlYWs7XG5cblx0XHRcdFx0ZGVmYXVsdDpcblx0XHRcdFx0XHR0aGlzLl9kaXNjb25uZWN0ZWQoRVJST1IuSU5WQUxJRF9NUVRUX01FU1NBR0VfVFlQRS5jb2RlICwgZm9ybWF0KEVSUk9SLklOVkFMSURfTVFUVF9NRVNTQUdFX1RZUEUsIFt3aXJlTWVzc2FnZS50eXBlXSkpO1xuXHRcdFx0XHR9XG5cdFx0XHR9IGNhdGNoIChlcnJvcikge1xuXHRcdFx0XHR2YXIgZXJyb3JTdGFjayA9ICgoZXJyb3IuaGFzT3duUHJvcGVydHkoXCJzdGFja1wiKSA9PSBcInVuZGVmaW5lZFwiKSA/IGVycm9yLnN0YWNrLnRvU3RyaW5nKCkgOiBcIk5vIEVycm9yIFN0YWNrIEF2YWlsYWJsZVwiKTtcblx0XHRcdFx0dGhpcy5fZGlzY29ubmVjdGVkKEVSUk9SLklOVEVSTkFMX0VSUk9SLmNvZGUgLCBmb3JtYXQoRVJST1IuSU5URVJOQUxfRVJST1IsIFtlcnJvci5tZXNzYWdlLGVycm9yU3RhY2tdKSk7XG5cdFx0XHRcdHJldHVybjtcblx0XHRcdH1cblx0XHR9O1xuXG5cdFx0LyoqIEBpZ25vcmUgKi9cblx0XHRDbGllbnRJbXBsLnByb3RvdHlwZS5fb25fc29ja2V0X2Vycm9yID0gZnVuY3Rpb24gKGVycm9yKSB7XG5cdFx0XHRpZiAoIXRoaXMuX3JlY29ubmVjdGluZykge1xuXHRcdFx0XHR0aGlzLl9kaXNjb25uZWN0ZWQoRVJST1IuU09DS0VUX0VSUk9SLmNvZGUgLCBmb3JtYXQoRVJST1IuU09DS0VUX0VSUk9SLCBbZXJyb3IuZGF0YV0pKTtcblx0XHRcdH1cblx0XHR9O1xuXG5cdFx0LyoqIEBpZ25vcmUgKi9cblx0XHRDbGllbnRJbXBsLnByb3RvdHlwZS5fb25fc29ja2V0X2Nsb3NlID0gZnVuY3Rpb24gKCkge1xuXHRcdFx0aWYgKCF0aGlzLl9yZWNvbm5lY3RpbmcpIHtcblx0XHRcdFx0dGhpcy5fZGlzY29ubmVjdGVkKEVSUk9SLlNPQ0tFVF9DTE9TRS5jb2RlICwgZm9ybWF0KEVSUk9SLlNPQ0tFVF9DTE9TRSkpO1xuXHRcdFx0fVxuXHRcdH07XG5cblx0XHQvKiogQGlnbm9yZSAqL1xuXHRcdENsaWVudEltcGwucHJvdG90eXBlLl9zb2NrZXRfc2VuZCA9IGZ1bmN0aW9uICh3aXJlTWVzc2FnZSkge1xuXG5cdFx0XHRpZiAod2lyZU1lc3NhZ2UudHlwZSA9PSAxKSB7XG5cdFx0XHRcdHZhciB3aXJlTWVzc2FnZU1hc2tlZCA9IHRoaXMuX3RyYWNlTWFzayh3aXJlTWVzc2FnZSwgXCJwYXNzd29yZFwiKTtcblx0XHRcdFx0dGhpcy5fdHJhY2UoXCJDbGllbnQuX3NvY2tldF9zZW5kXCIsIHdpcmVNZXNzYWdlTWFza2VkKTtcblx0XHRcdH1cblx0XHRcdGVsc2UgdGhpcy5fdHJhY2UoXCJDbGllbnQuX3NvY2tldF9zZW5kXCIsIHdpcmVNZXNzYWdlKTtcblxuXHRcdFx0dGhpcy5zb2NrZXQuc2VuZCh3aXJlTWVzc2FnZS5lbmNvZGUoKSk7XG5cdFx0XHQvKiBXZSBoYXZlIHByb3ZlZCB0byB0aGUgc2VydmVyIHdlIGFyZSBhbGl2ZS4gKi9cblx0XHRcdHRoaXMuc2VuZFBpbmdlci5yZXNldCgpO1xuXHRcdH07XG5cblx0XHQvKiogQGlnbm9yZSAqL1xuXHRcdENsaWVudEltcGwucHJvdG90eXBlLl9yZWNlaXZlUHVibGlzaCA9IGZ1bmN0aW9uICh3aXJlTWVzc2FnZSkge1xuXHRcdFx0c3dpdGNoKHdpcmVNZXNzYWdlLnBheWxvYWRNZXNzYWdlLnFvcykge1xuXHRcdFx0Y2FzZSBcInVuZGVmaW5lZFwiOlxuXHRcdFx0Y2FzZSAwOlxuXHRcdFx0XHR0aGlzLl9yZWNlaXZlTWVzc2FnZSh3aXJlTWVzc2FnZSk7XG5cdFx0XHRcdGJyZWFrO1xuXG5cdFx0XHRjYXNlIDE6XG5cdFx0XHRcdHZhciBwdWJBY2tNZXNzYWdlID0gbmV3IFdpcmVNZXNzYWdlKE1FU1NBR0VfVFlQRS5QVUJBQ0ssIHttZXNzYWdlSWRlbnRpZmllcjp3aXJlTWVzc2FnZS5tZXNzYWdlSWRlbnRpZmllcn0pO1xuXHRcdFx0XHR0aGlzLl9zY2hlZHVsZV9tZXNzYWdlKHB1YkFja01lc3NhZ2UpO1xuXHRcdFx0XHR0aGlzLl9yZWNlaXZlTWVzc2FnZSh3aXJlTWVzc2FnZSk7XG5cdFx0XHRcdGJyZWFrO1xuXG5cdFx0XHRjYXNlIDI6XG5cdFx0XHRcdHRoaXMuX3JlY2VpdmVkTWVzc2FnZXNbd2lyZU1lc3NhZ2UubWVzc2FnZUlkZW50aWZpZXJdID0gd2lyZU1lc3NhZ2U7XG5cdFx0XHRcdHRoaXMuc3RvcmUoXCJSZWNlaXZlZDpcIiwgd2lyZU1lc3NhZ2UpO1xuXHRcdFx0XHR2YXIgcHViUmVjTWVzc2FnZSA9IG5ldyBXaXJlTWVzc2FnZShNRVNTQUdFX1RZUEUuUFVCUkVDLCB7bWVzc2FnZUlkZW50aWZpZXI6d2lyZU1lc3NhZ2UubWVzc2FnZUlkZW50aWZpZXJ9KTtcblx0XHRcdFx0dGhpcy5fc2NoZWR1bGVfbWVzc2FnZShwdWJSZWNNZXNzYWdlKTtcblxuXHRcdFx0XHRicmVhaztcblxuXHRcdFx0ZGVmYXVsdDpcblx0XHRcdFx0dGhyb3cgRXJyb3IoXCJJbnZhaWxkIHFvcz1cIiArIHdpcmVNZXNzYWdlLnBheWxvYWRNZXNzYWdlLnFvcyk7XG5cdFx0XHR9XG5cdFx0fTtcblxuXHRcdC8qKiBAaWdub3JlICovXG5cdFx0Q2xpZW50SW1wbC5wcm90b3R5cGUuX3JlY2VpdmVNZXNzYWdlID0gZnVuY3Rpb24gKHdpcmVNZXNzYWdlKSB7XG5cdFx0XHRpZiAodGhpcy5vbk1lc3NhZ2VBcnJpdmVkKSB7XG5cdFx0XHRcdHRoaXMub25NZXNzYWdlQXJyaXZlZCh3aXJlTWVzc2FnZS5wYXlsb2FkTWVzc2FnZSk7XG5cdFx0XHR9XG5cdFx0fTtcblxuXHRcdC8qKlxuXHQgKiBDbGllbnQgaGFzIGNvbm5lY3RlZC5cblx0ICogQHBhcmFtIHtyZWNvbm5lY3R9IFtib29sZWFuXSBpbmRpY2F0ZSBpZiB0aGlzIHdhcyBhIHJlc3VsdCBvZiByZWNvbm5lY3Qgb3BlcmF0aW9uLlxuXHQgKiBAcGFyYW0ge3VyaX0gW3N0cmluZ10gZnVsbHkgcXVhbGlmaWVkIFdlYlNvY2tldCBVUkkgb2YgdGhlIHNlcnZlci5cblx0ICovXG5cdFx0Q2xpZW50SW1wbC5wcm90b3R5cGUuX2Nvbm5lY3RlZCA9IGZ1bmN0aW9uIChyZWNvbm5lY3QsIHVyaSkge1xuXHRcdC8vIEV4ZWN1dGUgdGhlIG9uQ29ubmVjdGVkIGNhbGxiYWNrIGlmIHRoZXJlIGlzIG9uZS5cblx0XHRcdGlmICh0aGlzLm9uQ29ubmVjdGVkKVxuXHRcdFx0XHR0aGlzLm9uQ29ubmVjdGVkKHJlY29ubmVjdCwgdXJpKTtcblx0XHR9O1xuXG5cdFx0LyoqXG5cdCAqIEF0dGVtcHRzIHRvIHJlY29ubmVjdCB0aGUgY2xpZW50IHRvIHRoZSBzZXJ2ZXIuXG4gICAqIEZvciBlYWNoIHJlY29ubmVjdCBhdHRlbXB0LCB3aWxsIGRvdWJsZSB0aGUgcmVjb25uZWN0IGludGVydmFsXG4gICAqIHVwIHRvIDEyOCBzZWNvbmRzLlxuXHQgKi9cblx0XHRDbGllbnRJbXBsLnByb3RvdHlwZS5fcmVjb25uZWN0ID0gZnVuY3Rpb24gKCkge1xuXHRcdFx0dGhpcy5fdHJhY2UoXCJDbGllbnQuX3JlY29ubmVjdFwiKTtcblx0XHRcdGlmICghdGhpcy5jb25uZWN0ZWQpIHtcblx0XHRcdFx0dGhpcy5fcmVjb25uZWN0aW5nID0gdHJ1ZTtcblx0XHRcdFx0dGhpcy5zZW5kUGluZ2VyLmNhbmNlbCgpO1xuXHRcdFx0XHR0aGlzLnJlY2VpdmVQaW5nZXIuY2FuY2VsKCk7XG5cdFx0XHRcdGlmICh0aGlzLl9yZWNvbm5lY3RJbnRlcnZhbCA8IDEyOClcblx0XHRcdFx0XHR0aGlzLl9yZWNvbm5lY3RJbnRlcnZhbCA9IHRoaXMuX3JlY29ubmVjdEludGVydmFsICogMjtcblx0XHRcdFx0aWYgKHRoaXMuY29ubmVjdE9wdGlvbnMudXJpcykge1xuXHRcdFx0XHRcdHRoaXMuaG9zdEluZGV4ID0gMDtcblx0XHRcdFx0XHR0aGlzLl9kb0Nvbm5lY3QodGhpcy5jb25uZWN0T3B0aW9ucy51cmlzWzBdKTtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHR0aGlzLl9kb0Nvbm5lY3QodGhpcy51cmkpO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fTtcblxuXHRcdC8qKlxuXHQgKiBDbGllbnQgaGFzIGRpc2Nvbm5lY3RlZCBlaXRoZXIgYXQgaXRzIG93biByZXF1ZXN0IG9yIGJlY2F1c2UgdGhlIHNlcnZlclxuXHQgKiBvciBuZXR3b3JrIGRpc2Nvbm5lY3RlZCBpdC4gUmVtb3ZlIGFsbCBub24tZHVyYWJsZSBzdGF0ZS5cblx0ICogQHBhcmFtIHtlcnJvckNvZGV9IFtudW1iZXJdIHRoZSBlcnJvciBudW1iZXIuXG5cdCAqIEBwYXJhbSB7ZXJyb3JUZXh0fSBbc3RyaW5nXSB0aGUgZXJyb3IgdGV4dC5cblx0ICogQGlnbm9yZVxuXHQgKi9cblx0XHRDbGllbnRJbXBsLnByb3RvdHlwZS5fZGlzY29ubmVjdGVkID0gZnVuY3Rpb24gKGVycm9yQ29kZSwgZXJyb3JUZXh0KSB7XG5cdFx0XHR0aGlzLl90cmFjZShcIkNsaWVudC5fZGlzY29ubmVjdGVkXCIsIGVycm9yQ29kZSwgZXJyb3JUZXh0KTtcblxuXHRcdFx0aWYgKGVycm9yQ29kZSAhPT0gdW5kZWZpbmVkICYmIHRoaXMuX3JlY29ubmVjdGluZykge1xuXHRcdFx0XHQvL0NvbnRpbnVlIGF1dG9tYXRpYyByZWNvbm5lY3QgcHJvY2Vzc1xuXHRcdFx0XHR0aGlzLl9yZWNvbm5lY3RUaW1lb3V0ID0gbmV3IFRpbWVvdXQodGhpcywgdGhpcy5fcmVjb25uZWN0SW50ZXJ2YWwsIHRoaXMuX3JlY29ubmVjdCk7XG5cdFx0XHRcdHJldHVybjtcblx0XHRcdH1cblxuXHRcdFx0dGhpcy5zZW5kUGluZ2VyLmNhbmNlbCgpO1xuXHRcdFx0dGhpcy5yZWNlaXZlUGluZ2VyLmNhbmNlbCgpO1xuXHRcdFx0aWYgKHRoaXMuX2Nvbm5lY3RUaW1lb3V0KSB7XG5cdFx0XHRcdHRoaXMuX2Nvbm5lY3RUaW1lb3V0LmNhbmNlbCgpO1xuXHRcdFx0XHR0aGlzLl9jb25uZWN0VGltZW91dCA9IG51bGw7XG5cdFx0XHR9XG5cblx0XHRcdC8vIENsZWFyIG1lc3NhZ2UgYnVmZmVycy5cblx0XHRcdHRoaXMuX21zZ19xdWV1ZSA9IFtdO1xuXHRcdFx0dGhpcy5fYnVmZmVyZWRfbXNnX3F1ZXVlID0gW107XG5cdFx0XHR0aGlzLl9ub3RpZnlfbXNnX3NlbnQgPSB7fTtcblxuXHRcdFx0aWYgKHRoaXMuc29ja2V0KSB7XG5cdFx0XHQvLyBDYW5jZWwgYWxsIHNvY2tldCBjYWxsYmFja3Mgc28gdGhhdCB0aGV5IGNhbm5vdCBiZSBkcml2ZW4gYWdhaW4gYnkgdGhpcyBzb2NrZXQuXG5cdFx0XHRcdHRoaXMuc29ja2V0Lm9ub3BlbiA9IG51bGw7XG5cdFx0XHRcdHRoaXMuc29ja2V0Lm9ubWVzc2FnZSA9IG51bGw7XG5cdFx0XHRcdHRoaXMuc29ja2V0Lm9uZXJyb3IgPSBudWxsO1xuXHRcdFx0XHR0aGlzLnNvY2tldC5vbmNsb3NlID0gbnVsbDtcblx0XHRcdFx0aWYgKHRoaXMuc29ja2V0LnJlYWR5U3RhdGUgPT09IDEpXG5cdFx0XHRcdFx0dGhpcy5zb2NrZXQuY2xvc2UoKTtcblx0XHRcdFx0ZGVsZXRlIHRoaXMuc29ja2V0O1xuXHRcdFx0fVxuXG5cdFx0XHRpZiAodGhpcy5jb25uZWN0T3B0aW9ucy51cmlzICYmIHRoaXMuaG9zdEluZGV4IDwgdGhpcy5jb25uZWN0T3B0aW9ucy51cmlzLmxlbmd0aC0xKSB7XG5cdFx0XHQvLyBUcnkgdGhlIG5leHQgaG9zdC5cblx0XHRcdFx0dGhpcy5ob3N0SW5kZXgrKztcblx0XHRcdFx0dGhpcy5fZG9Db25uZWN0KHRoaXMuY29ubmVjdE9wdGlvbnMudXJpc1t0aGlzLmhvc3RJbmRleF0pO1xuXHRcdFx0fSBlbHNlIHtcblxuXHRcdFx0XHRpZiAoZXJyb3JDb2RlID09PSB1bmRlZmluZWQpIHtcblx0XHRcdFx0XHRlcnJvckNvZGUgPSBFUlJPUi5PSy5jb2RlO1xuXHRcdFx0XHRcdGVycm9yVGV4dCA9IGZvcm1hdChFUlJPUi5PSyk7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHQvLyBSdW4gYW55IGFwcGxpY2F0aW9uIGNhbGxiYWNrcyBsYXN0IGFzIHRoZXkgbWF5IGF0dGVtcHQgdG8gcmVjb25uZWN0IGFuZCBoZW5jZSBjcmVhdGUgYSBuZXcgc29ja2V0LlxuXHRcdFx0XHRpZiAodGhpcy5jb25uZWN0ZWQpIHtcblx0XHRcdFx0XHR0aGlzLmNvbm5lY3RlZCA9IGZhbHNlO1xuXHRcdFx0XHRcdC8vIEV4ZWN1dGUgdGhlIGNvbm5lY3Rpb25Mb3N0Q2FsbGJhY2sgaWYgdGhlcmUgaXMgb25lLCBhbmQgd2Ugd2VyZSBjb25uZWN0ZWQuXG5cdFx0XHRcdFx0aWYgKHRoaXMub25Db25uZWN0aW9uTG9zdCkge1xuXHRcdFx0XHRcdFx0dGhpcy5vbkNvbm5lY3Rpb25Mb3N0KHtlcnJvckNvZGU6ZXJyb3JDb2RlLCBlcnJvck1lc3NhZ2U6ZXJyb3JUZXh0LCByZWNvbm5lY3Q6dGhpcy5jb25uZWN0T3B0aW9ucy5yZWNvbm5lY3QsIHVyaTp0aGlzLl93c3VyaX0pO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRpZiAoZXJyb3JDb2RlICE9PSBFUlJPUi5PSy5jb2RlICYmIHRoaXMuY29ubmVjdE9wdGlvbnMucmVjb25uZWN0KSB7XG5cdFx0XHRcdFx0Ly8gU3RhcnQgYXV0b21hdGljIHJlY29ubmVjdCBwcm9jZXNzIGZvciB0aGUgdmVyeSBmaXJzdCB0aW1lIHNpbmNlIGxhc3Qgc3VjY2Vzc2Z1bCBjb25uZWN0LlxuXHRcdFx0XHRcdFx0dGhpcy5fcmVjb25uZWN0SW50ZXJ2YWwgPSAxO1xuXHRcdFx0XHRcdFx0dGhpcy5fcmVjb25uZWN0KCk7XG5cdFx0XHRcdFx0XHRyZXR1cm47XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHQvLyBPdGhlcndpc2Ugd2UgbmV2ZXIgaGFkIGEgY29ubmVjdGlvbiwgc28gaW5kaWNhdGUgdGhhdCB0aGUgY29ubmVjdCBoYXMgZmFpbGVkLlxuXHRcdFx0XHRcdGlmICh0aGlzLmNvbm5lY3RPcHRpb25zLm1xdHRWZXJzaW9uID09PSA0ICYmIHRoaXMuY29ubmVjdE9wdGlvbnMubXF0dFZlcnNpb25FeHBsaWNpdCA9PT0gZmFsc2UpIHtcblx0XHRcdFx0XHRcdHRoaXMuX3RyYWNlKFwiRmFpbGVkIHRvIGNvbm5lY3QgVjQsIGRyb3BwaW5nIGJhY2sgdG8gVjNcIik7XG5cdFx0XHRcdFx0XHR0aGlzLmNvbm5lY3RPcHRpb25zLm1xdHRWZXJzaW9uID0gMztcblx0XHRcdFx0XHRcdGlmICh0aGlzLmNvbm5lY3RPcHRpb25zLnVyaXMpIHtcblx0XHRcdFx0XHRcdFx0dGhpcy5ob3N0SW5kZXggPSAwO1xuXHRcdFx0XHRcdFx0XHR0aGlzLl9kb0Nvbm5lY3QodGhpcy5jb25uZWN0T3B0aW9ucy51cmlzWzBdKTtcblx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRcdHRoaXMuX2RvQ29ubmVjdCh0aGlzLnVyaSk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fSBlbHNlIGlmKHRoaXMuY29ubmVjdE9wdGlvbnMub25GYWlsdXJlKSB7XG5cdFx0XHRcdFx0XHR0aGlzLmNvbm5lY3RPcHRpb25zLm9uRmFpbHVyZSh7aW52b2NhdGlvbkNvbnRleHQ6dGhpcy5jb25uZWN0T3B0aW9ucy5pbnZvY2F0aW9uQ29udGV4dCwgZXJyb3JDb2RlOmVycm9yQ29kZSwgZXJyb3JNZXNzYWdlOmVycm9yVGV4dH0pO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH07XG5cblx0XHQvKiogQGlnbm9yZSAqL1xuXHRcdENsaWVudEltcGwucHJvdG90eXBlLl90cmFjZSA9IGZ1bmN0aW9uICgpIHtcblx0XHQvLyBQYXNzIHRyYWNlIG1lc3NhZ2UgYmFjayB0byBjbGllbnQncyBjYWxsYmFjayBmdW5jdGlvblxuXHRcdFx0aWYgKHRoaXMudHJhY2VGdW5jdGlvbikge1xuXHRcdFx0XHR2YXIgYXJncyA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cyk7XG5cdFx0XHRcdGZvciAodmFyIGkgaW4gYXJncylcblx0XHRcdFx0e1xuXHRcdFx0XHRcdGlmICh0eXBlb2YgYXJnc1tpXSAhPT0gXCJ1bmRlZmluZWRcIilcblx0XHRcdFx0XHRcdGFyZ3Muc3BsaWNlKGksIDEsIEpTT04uc3RyaW5naWZ5KGFyZ3NbaV0pKTtcblx0XHRcdFx0fVxuXHRcdFx0XHR2YXIgcmVjb3JkID0gYXJncy5qb2luKFwiXCIpO1xuXHRcdFx0XHR0aGlzLnRyYWNlRnVuY3Rpb24gKHtzZXZlcml0eTogXCJEZWJ1Z1wiLCBtZXNzYWdlOiByZWNvcmRcdH0pO1xuXHRcdFx0fVxuXG5cdFx0XHQvL2J1ZmZlciBzdHlsZSB0cmFjZVxuXHRcdFx0aWYgKCB0aGlzLl90cmFjZUJ1ZmZlciAhPT0gbnVsbCApIHtcblx0XHRcdFx0Zm9yICh2YXIgaSA9IDAsIG1heCA9IGFyZ3VtZW50cy5sZW5ndGg7IGkgPCBtYXg7IGkrKykge1xuXHRcdFx0XHRcdGlmICggdGhpcy5fdHJhY2VCdWZmZXIubGVuZ3RoID09IHRoaXMuX01BWF9UUkFDRV9FTlRSSUVTICkge1xuXHRcdFx0XHRcdFx0dGhpcy5fdHJhY2VCdWZmZXIuc2hpZnQoKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0aWYgKGkgPT09IDApIHRoaXMuX3RyYWNlQnVmZmVyLnB1c2goYXJndW1lbnRzW2ldKTtcblx0XHRcdFx0XHRlbHNlIGlmICh0eXBlb2YgYXJndW1lbnRzW2ldID09PSBcInVuZGVmaW5lZFwiICkgdGhpcy5fdHJhY2VCdWZmZXIucHVzaChhcmd1bWVudHNbaV0pO1xuXHRcdFx0XHRcdGVsc2UgdGhpcy5fdHJhY2VCdWZmZXIucHVzaChcIiAgXCIrSlNPTi5zdHJpbmdpZnkoYXJndW1lbnRzW2ldKSk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9O1xuXG5cdFx0LyoqIEBpZ25vcmUgKi9cblx0XHRDbGllbnRJbXBsLnByb3RvdHlwZS5fdHJhY2VNYXNrID0gZnVuY3Rpb24gKHRyYWNlT2JqZWN0LCBtYXNrZWQpIHtcblx0XHRcdHZhciB0cmFjZU9iamVjdE1hc2tlZCA9IHt9O1xuXHRcdFx0Zm9yICh2YXIgYXR0ciBpbiB0cmFjZU9iamVjdCkge1xuXHRcdFx0XHRpZiAodHJhY2VPYmplY3QuaGFzT3duUHJvcGVydHkoYXR0cikpIHtcblx0XHRcdFx0XHRpZiAoYXR0ciA9PSBtYXNrZWQpXG5cdFx0XHRcdFx0XHR0cmFjZU9iamVjdE1hc2tlZFthdHRyXSA9IFwiKioqKioqXCI7XG5cdFx0XHRcdFx0ZWxzZVxuXHRcdFx0XHRcdFx0dHJhY2VPYmplY3RNYXNrZWRbYXR0cl0gPSB0cmFjZU9iamVjdFthdHRyXTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdFx0cmV0dXJuIHRyYWNlT2JqZWN0TWFza2VkO1xuXHRcdH07XG5cblx0XHQvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblx0XHQvLyBQdWJsaWMgUHJvZ3JhbW1pbmcgaW50ZXJmYWNlLlxuXHRcdC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG5cdFx0LyoqXG5cdCAqIFRoZSBKYXZhU2NyaXB0IGFwcGxpY2F0aW9uIGNvbW11bmljYXRlcyB0byB0aGUgc2VydmVyIHVzaW5nIGEge0BsaW5rIFBhaG8uQ2xpZW50fSBvYmplY3QuXG5cdCAqIDxwPlxuXHQgKiBNb3N0IGFwcGxpY2F0aW9ucyB3aWxsIGNyZWF0ZSBqdXN0IG9uZSBDbGllbnQgb2JqZWN0IGFuZCB0aGVuIGNhbGwgaXRzIGNvbm5lY3QoKSBtZXRob2QsXG5cdCAqIGhvd2V2ZXIgYXBwbGljYXRpb25zIGNhbiBjcmVhdGUgbW9yZSB0aGFuIG9uZSBDbGllbnQgb2JqZWN0IGlmIHRoZXkgd2lzaC5cblx0ICogSW4gdGhpcyBjYXNlIHRoZSBjb21iaW5hdGlvbiBvZiBob3N0LCBwb3J0IGFuZCBjbGllbnRJZCBhdHRyaWJ1dGVzIG11c3QgYmUgZGlmZmVyZW50IGZvciBlYWNoIENsaWVudCBvYmplY3QuXG5cdCAqIDxwPlxuXHQgKiBUaGUgc2VuZCwgc3Vic2NyaWJlIGFuZCB1bnN1YnNjcmliZSBtZXRob2RzIGFyZSBpbXBsZW1lbnRlZCBhcyBhc3luY2hyb25vdXMgSmF2YVNjcmlwdCBtZXRob2RzXG5cdCAqIChldmVuIHRob3VnaCB0aGUgdW5kZXJseWluZyBwcm90b2NvbCBleGNoYW5nZSBtaWdodCBiZSBzeW5jaHJvbm91cyBpbiBuYXR1cmUpLlxuXHQgKiBUaGlzIG1lYW5zIHRoZXkgc2lnbmFsIHRoZWlyIGNvbXBsZXRpb24gYnkgY2FsbGluZyBiYWNrIHRvIHRoZSBhcHBsaWNhdGlvbixcblx0ICogdmlhIFN1Y2Nlc3Mgb3IgRmFpbHVyZSBjYWxsYmFjayBmdW5jdGlvbnMgcHJvdmlkZWQgYnkgdGhlIGFwcGxpY2F0aW9uIG9uIHRoZSBtZXRob2QgaW4gcXVlc3Rpb24uXG5cdCAqIFN1Y2ggY2FsbGJhY2tzIGFyZSBjYWxsZWQgYXQgbW9zdCBvbmNlIHBlciBtZXRob2QgaW52b2NhdGlvbiBhbmQgZG8gbm90IHBlcnNpc3QgYmV5b25kIHRoZSBsaWZldGltZVxuXHQgKiBvZiB0aGUgc2NyaXB0IHRoYXQgbWFkZSB0aGUgaW52b2NhdGlvbi5cblx0ICogPHA+XG5cdCAqIEluIGNvbnRyYXN0IHRoZXJlIGFyZSBzb21lIGNhbGxiYWNrIGZ1bmN0aW9ucywgbW9zdCBub3RhYmx5IDxpPm9uTWVzc2FnZUFycml2ZWQ8L2k+LFxuXHQgKiB0aGF0IGFyZSBkZWZpbmVkIG9uIHRoZSB7QGxpbmsgUGFoby5DbGllbnR9IG9iamVjdC5cblx0ICogVGhlc2UgbWF5IGdldCBjYWxsZWQgbXVsdGlwbGUgdGltZXMsIGFuZCBhcmVuJ3QgZGlyZWN0bHkgcmVsYXRlZCB0byBzcGVjaWZpYyBtZXRob2QgaW52b2NhdGlvbnMgbWFkZSBieSB0aGUgY2xpZW50LlxuXHQgKlxuXHQgKiBAbmFtZSBQYWhvLkNsaWVudFxuXHQgKlxuXHQgKiBAY29uc3RydWN0b3Jcblx0ICpcblx0ICogQHBhcmFtIHtzdHJpbmd9IGhvc3QgLSB0aGUgYWRkcmVzcyBvZiB0aGUgbWVzc2FnaW5nIHNlcnZlciwgYXMgYSBmdWxseSBxdWFsaWZpZWQgV2ViU29ja2V0IFVSSSwgYXMgYSBETlMgbmFtZSBvciBkb3R0ZWQgZGVjaW1hbCBJUCBhZGRyZXNzLlxuXHQgKiBAcGFyYW0ge251bWJlcn0gcG9ydCAtIHRoZSBwb3J0IG51bWJlciB0byBjb25uZWN0IHRvIC0gb25seSByZXF1aXJlZCBpZiBob3N0IGlzIG5vdCBhIFVSSVxuXHQgKiBAcGFyYW0ge3N0cmluZ30gcGF0aCAtIHRoZSBwYXRoIG9uIHRoZSBob3N0IHRvIGNvbm5lY3QgdG8gLSBvbmx5IHVzZWQgaWYgaG9zdCBpcyBub3QgYSBVUkkuIERlZmF1bHQ6ICcvbXF0dCcuXG5cdCAqIEBwYXJhbSB7c3RyaW5nfSBjbGllbnRJZCAtIHRoZSBNZXNzYWdpbmcgY2xpZW50IGlkZW50aWZpZXIsIGJldHdlZW4gMSBhbmQgMjMgY2hhcmFjdGVycyBpbiBsZW5ndGguXG5cdCAqXG5cdCAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBob3N0IC0gPGk+cmVhZCBvbmx5PC9pPiB0aGUgc2VydmVyJ3MgRE5TIGhvc3RuYW1lIG9yIGRvdHRlZCBkZWNpbWFsIElQIGFkZHJlc3MuXG5cdCAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBwb3J0IC0gPGk+cmVhZCBvbmx5PC9pPiB0aGUgc2VydmVyJ3MgcG9ydC5cblx0ICogQHByb3BlcnR5IHtzdHJpbmd9IHBhdGggLSA8aT5yZWFkIG9ubHk8L2k+IHRoZSBzZXJ2ZXIncyBwYXRoLlxuXHQgKiBAcHJvcGVydHkge3N0cmluZ30gY2xpZW50SWQgLSA8aT5yZWFkIG9ubHk8L2k+IHVzZWQgd2hlbiBjb25uZWN0aW5nIHRvIHRoZSBzZXJ2ZXIuXG5cdCAqIEBwcm9wZXJ0eSB7ZnVuY3Rpb259IG9uQ29ubmVjdGlvbkxvc3QgLSBjYWxsZWQgd2hlbiBhIGNvbm5lY3Rpb24gaGFzIGJlZW4gbG9zdC5cblx0ICogICAgICAgICAgICAgICAgICAgICAgICAgICAgYWZ0ZXIgYSBjb25uZWN0KCkgbWV0aG9kIGhhcyBzdWNjZWVkZWQuXG5cdCAqICAgICAgICAgICAgICAgICAgICAgICAgICAgIEVzdGFibGlzaCB0aGUgY2FsbCBiYWNrIHVzZWQgd2hlbiBhIGNvbm5lY3Rpb24gaGFzIGJlZW4gbG9zdC4gVGhlIGNvbm5lY3Rpb24gbWF5IGJlXG5cdCAqICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvc3QgYmVjYXVzZSB0aGUgY2xpZW50IGluaXRpYXRlcyBhIGRpc2Nvbm5lY3Qgb3IgYmVjYXVzZSB0aGUgc2VydmVyIG9yIG5ldHdvcmtcblx0ICogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2F1c2UgdGhlIGNsaWVudCB0byBiZSBkaXNjb25uZWN0ZWQuIFRoZSBkaXNjb25uZWN0IGNhbGwgYmFjayBtYXkgYmUgY2FsbGVkIHdpdGhvdXRcblx0ICogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhlIGNvbm5lY3Rpb25Db21wbGV0ZSBjYWxsIGJhY2sgYmVpbmcgaW52b2tlZCBpZiwgZm9yIGV4YW1wbGUgdGhlIGNsaWVudCBmYWlscyB0b1xuXHQgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25uZWN0LlxuXHQgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICBBIHNpbmdsZSByZXNwb25zZSBvYmplY3QgcGFyYW1ldGVyIGlzIHBhc3NlZCB0byB0aGUgb25Db25uZWN0aW9uTG9zdCBjYWxsYmFjayBjb250YWluaW5nIHRoZSBmb2xsb3dpbmcgZmllbGRzOlxuXHQgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8b2w+XG5cdCAqICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsaT5lcnJvckNvZGVcblx0ICogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxpPmVycm9yTWVzc2FnZVxuXHQgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L29sPlxuXHQgKiBAcHJvcGVydHkge2Z1bmN0aW9ufSBvbk1lc3NhZ2VEZWxpdmVyZWQgLSBjYWxsZWQgd2hlbiBhIG1lc3NhZ2UgaGFzIGJlZW4gZGVsaXZlcmVkLlxuXHQgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICBBbGwgcHJvY2Vzc2luZyB0aGF0IHRoaXMgQ2xpZW50IHdpbGwgZXZlciBkbyBoYXMgYmVlbiBjb21wbGV0ZWQuIFNvLCBmb3IgZXhhbXBsZSxcblx0ICogICAgICAgICAgICAgICAgICAgICAgICAgICAgaW4gdGhlIGNhc2Ugb2YgYSBRb3M9MiBtZXNzYWdlIHNlbnQgYnkgdGhpcyBjbGllbnQsIHRoZSBQdWJDb21wIGZsb3cgaGFzIGJlZW4gcmVjZWl2ZWQgZnJvbSB0aGUgc2VydmVyXG5cdCAqICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFuZCB0aGUgbWVzc2FnZSBoYXMgYmVlbiByZW1vdmVkIGZyb20gcGVyc2lzdGVudCBzdG9yYWdlIGJlZm9yZSB0aGlzIGNhbGxiYWNrIGlzIGludm9rZWQuXG5cdCAqICAgICAgICAgICAgICAgICAgICAgICAgICAgIFBhcmFtZXRlcnMgcGFzc2VkIHRvIHRoZSBvbk1lc3NhZ2VEZWxpdmVyZWQgY2FsbGJhY2sgYXJlOlxuXHQgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8b2w+XG5cdCAqICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsaT57QGxpbmsgUGFoby5NZXNzYWdlfSB0aGF0IHdhcyBkZWxpdmVyZWQuXG5cdCAqICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvb2w+XG5cdCAqIEBwcm9wZXJ0eSB7ZnVuY3Rpb259IG9uTWVzc2FnZUFycml2ZWQgLSBjYWxsZWQgd2hlbiBhIG1lc3NhZ2UgaGFzIGFycml2ZWQgaW4gdGhpcyBQYWhvLmNsaWVudC5cblx0ICogICAgICAgICAgICAgICAgICAgICAgICAgICAgUGFyYW1ldGVycyBwYXNzZWQgdG8gdGhlIG9uTWVzc2FnZUFycml2ZWQgY2FsbGJhY2sgYXJlOlxuXHQgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8b2w+XG5cdCAqICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsaT57QGxpbmsgUGFoby5NZXNzYWdlfSB0aGF0IGhhcyBhcnJpdmVkLlxuXHQgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L29sPlxuXHQgKiBAcHJvcGVydHkge2Z1bmN0aW9ufSBvbkNvbm5lY3RlZCAtIGNhbGxlZCB3aGVuIGEgY29ubmVjdGlvbiBpcyBzdWNjZXNzZnVsbHkgbWFkZSB0byB0aGUgc2VydmVyLlxuXHQgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhZnRlciBhIGNvbm5lY3QoKSBtZXRob2QuXG5cdCAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFBhcmFtZXRlcnMgcGFzc2VkIHRvIHRoZSBvbkNvbm5lY3RlZCBjYWxsYmFjayBhcmU6XG5cdCAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxvbD5cblx0ICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxpPnJlY29ubmVjdCAoYm9vbGVhbikgLSBJZiB0cnVlLCB0aGUgY29ubmVjdGlvbiB3YXMgdGhlIHJlc3VsdCBvZiBhIHJlY29ubmVjdC48L2xpPlxuXHQgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGk+VVJJIChzdHJpbmcpIC0gVGhlIFVSSSB1c2VkIHRvIGNvbm5lY3QgdG8gdGhlIHNlcnZlci48L2xpPlxuXHQgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L29sPlxuXHQgKiBAcHJvcGVydHkge2Jvb2xlYW59IGRpc2Nvbm5lY3RlZFB1Ymxpc2hpbmcgLSBpZiBzZXQsIHdpbGwgZW5hYmxlIGRpc2Nvbm5lY3RlZCBwdWJsaXNoaW5nIGluXG5cdCAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbiB0aGUgZXZlbnQgdGhhdCB0aGUgY29ubmVjdGlvbiB0byB0aGUgc2VydmVyIGlzIGxvc3QuXG5cdCAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBkaXNjb25uZWN0ZWRCdWZmZXJTaXplIC0gVXNlZCB0byBzZXQgdGhlIG1heGltdW0gbnVtYmVyIG9mIG1lc3NhZ2VzIHRoYXQgdGhlIGRpc2Nvbm5lY3RlZFxuXHQgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJ1ZmZlciB3aWxsIGhvbGQgYmVmb3JlIHJlamVjdGluZyBuZXcgbWVzc2FnZXMuIERlZmF1bHQgc2l6ZTogNTAwMCBtZXNzYWdlc1xuXHQgKiBAcHJvcGVydHkge2Z1bmN0aW9ufSB0cmFjZSAtIGNhbGxlZCB3aGVuZXZlciB0cmFjZSBpcyBjYWxsZWQuIFRPRE9cblx0ICovXG5cdFx0dmFyIENsaWVudCA9IGZ1bmN0aW9uIChob3N0LCBwb3J0LCBwYXRoLCBjbGllbnRJZCkge1xuXG5cdFx0XHR2YXIgdXJpO1xuXG5cdFx0XHRpZiAodHlwZW9mIGhvc3QgIT09IFwic3RyaW5nXCIpXG5cdFx0XHRcdHRocm93IG5ldyBFcnJvcihmb3JtYXQoRVJST1IuSU5WQUxJRF9UWVBFLCBbdHlwZW9mIGhvc3QsIFwiaG9zdFwiXSkpO1xuXG5cdFx0XHRpZiAoYXJndW1lbnRzLmxlbmd0aCA9PSAyKSB7XG5cdFx0XHQvLyBob3N0OiBtdXN0IGJlIGZ1bGwgd3M6Ly8gdXJpXG5cdFx0XHQvLyBwb3J0OiBjbGllbnRJZFxuXHRcdFx0XHRjbGllbnRJZCA9IHBvcnQ7XG5cdFx0XHRcdHVyaSA9IGhvc3Q7XG5cdFx0XHRcdHZhciBtYXRjaCA9IHVyaS5tYXRjaCgvXih3c3M/KTpcXC9cXC8oKFxcWyguKylcXF0pfChbXlxcL10rPykpKDooXFxkKykpPyhcXC8uKikkLyk7XG5cdFx0XHRcdGlmIChtYXRjaCkge1xuXHRcdFx0XHRcdGhvc3QgPSBtYXRjaFs0XXx8bWF0Y2hbMl07XG5cdFx0XHRcdFx0cG9ydCA9IHBhcnNlSW50KG1hdGNoWzddKTtcblx0XHRcdFx0XHRwYXRoID0gbWF0Y2hbOF07XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0dGhyb3cgbmV3IEVycm9yKGZvcm1hdChFUlJPUi5JTlZBTElEX0FSR1VNRU5ULFtob3N0LFwiaG9zdFwiXSkpO1xuXHRcdFx0XHR9XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRpZiAoYXJndW1lbnRzLmxlbmd0aCA9PSAzKSB7XG5cdFx0XHRcdFx0Y2xpZW50SWQgPSBwYXRoO1xuXHRcdFx0XHRcdHBhdGggPSBcIi9tcXR0XCI7XG5cdFx0XHRcdH1cblx0XHRcdFx0aWYgKHR5cGVvZiBwb3J0ICE9PSBcIm51bWJlclwiIHx8IHBvcnQgPCAwKVxuXHRcdFx0XHRcdHRocm93IG5ldyBFcnJvcihmb3JtYXQoRVJST1IuSU5WQUxJRF9UWVBFLCBbdHlwZW9mIHBvcnQsIFwicG9ydFwiXSkpO1xuXHRcdFx0XHRpZiAodHlwZW9mIHBhdGggIT09IFwic3RyaW5nXCIpXG5cdFx0XHRcdFx0dGhyb3cgbmV3IEVycm9yKGZvcm1hdChFUlJPUi5JTlZBTElEX1RZUEUsIFt0eXBlb2YgcGF0aCwgXCJwYXRoXCJdKSk7XG5cblx0XHRcdFx0dmFyIGlwdjZBZGRTQnJhY2tldCA9IChob3N0LmluZGV4T2YoXCI6XCIpICE9PSAtMSAmJiBob3N0LnNsaWNlKDAsMSkgIT09IFwiW1wiICYmIGhvc3Quc2xpY2UoLTEpICE9PSBcIl1cIik7XG5cdFx0XHRcdHVyaSA9IFwid3M6Ly9cIisoaXB2NkFkZFNCcmFja2V0P1wiW1wiK2hvc3QrXCJdXCI6aG9zdCkrXCI6XCIrcG9ydCtwYXRoO1xuXHRcdFx0fVxuXG5cdFx0XHR2YXIgY2xpZW50SWRMZW5ndGggPSAwO1xuXHRcdFx0Zm9yICh2YXIgaSA9IDA7IGk8Y2xpZW50SWQubGVuZ3RoOyBpKyspIHtcblx0XHRcdFx0dmFyIGNoYXJDb2RlID0gY2xpZW50SWQuY2hhckNvZGVBdChpKTtcblx0XHRcdFx0aWYgKDB4RDgwMCA8PSBjaGFyQ29kZSAmJiBjaGFyQ29kZSA8PSAweERCRkYpICB7XG5cdFx0XHRcdFx0aSsrOyAvLyBTdXJyb2dhdGUgcGFpci5cblx0XHRcdFx0fVxuXHRcdFx0XHRjbGllbnRJZExlbmd0aCsrO1xuXHRcdFx0fVxuXHRcdFx0aWYgKHR5cGVvZiBjbGllbnRJZCAhPT0gXCJzdHJpbmdcIiB8fCBjbGllbnRJZExlbmd0aCA+IDY1NTM1KVxuXHRcdFx0XHR0aHJvdyBuZXcgRXJyb3IoZm9ybWF0KEVSUk9SLklOVkFMSURfQVJHVU1FTlQsIFtjbGllbnRJZCwgXCJjbGllbnRJZFwiXSkpO1xuXG5cdFx0XHR2YXIgY2xpZW50ID0gbmV3IENsaWVudEltcGwodXJpLCBob3N0LCBwb3J0LCBwYXRoLCBjbGllbnRJZCk7XG5cblx0XHRcdC8vUHVibGljIFByb3BlcnRpZXNcblx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHRoaXMse1xuXHRcdFx0XHRcImhvc3RcIjp7XG5cdFx0XHRcdFx0Z2V0OiBmdW5jdGlvbigpIHsgcmV0dXJuIGhvc3Q7IH0sXG5cdFx0XHRcdFx0c2V0OiBmdW5jdGlvbigpIHsgdGhyb3cgbmV3IEVycm9yKGZvcm1hdChFUlJPUi5VTlNVUFBPUlRFRF9PUEVSQVRJT04pKTsgfVxuXHRcdFx0XHR9LFxuXHRcdFx0XHRcInBvcnRcIjp7XG5cdFx0XHRcdFx0Z2V0OiBmdW5jdGlvbigpIHsgcmV0dXJuIHBvcnQ7IH0sXG5cdFx0XHRcdFx0c2V0OiBmdW5jdGlvbigpIHsgdGhyb3cgbmV3IEVycm9yKGZvcm1hdChFUlJPUi5VTlNVUFBPUlRFRF9PUEVSQVRJT04pKTsgfVxuXHRcdFx0XHR9LFxuXHRcdFx0XHRcInBhdGhcIjp7XG5cdFx0XHRcdFx0Z2V0OiBmdW5jdGlvbigpIHsgcmV0dXJuIHBhdGg7IH0sXG5cdFx0XHRcdFx0c2V0OiBmdW5jdGlvbigpIHsgdGhyb3cgbmV3IEVycm9yKGZvcm1hdChFUlJPUi5VTlNVUFBPUlRFRF9PUEVSQVRJT04pKTsgfVxuXHRcdFx0XHR9LFxuXHRcdFx0XHRcInVyaVwiOntcblx0XHRcdFx0XHRnZXQ6IGZ1bmN0aW9uKCkgeyByZXR1cm4gdXJpOyB9LFxuXHRcdFx0XHRcdHNldDogZnVuY3Rpb24oKSB7IHRocm93IG5ldyBFcnJvcihmb3JtYXQoRVJST1IuVU5TVVBQT1JURURfT1BFUkFUSU9OKSk7IH1cblx0XHRcdFx0fSxcblx0XHRcdFx0XCJjbGllbnRJZFwiOntcblx0XHRcdFx0XHRnZXQ6IGZ1bmN0aW9uKCkgeyByZXR1cm4gY2xpZW50LmNsaWVudElkOyB9LFxuXHRcdFx0XHRcdHNldDogZnVuY3Rpb24oKSB7IHRocm93IG5ldyBFcnJvcihmb3JtYXQoRVJST1IuVU5TVVBQT1JURURfT1BFUkFUSU9OKSk7IH1cblx0XHRcdFx0fSxcblx0XHRcdFx0XCJvbkNvbm5lY3RlZFwiOntcblx0XHRcdFx0XHRnZXQ6IGZ1bmN0aW9uKCkgeyByZXR1cm4gY2xpZW50Lm9uQ29ubmVjdGVkOyB9LFxuXHRcdFx0XHRcdHNldDogZnVuY3Rpb24obmV3T25Db25uZWN0ZWQpIHtcblx0XHRcdFx0XHRcdGlmICh0eXBlb2YgbmV3T25Db25uZWN0ZWQgPT09IFwiZnVuY3Rpb25cIilcblx0XHRcdFx0XHRcdFx0Y2xpZW50Lm9uQ29ubmVjdGVkID0gbmV3T25Db25uZWN0ZWQ7XG5cdFx0XHRcdFx0XHRlbHNlXG5cdFx0XHRcdFx0XHRcdHRocm93IG5ldyBFcnJvcihmb3JtYXQoRVJST1IuSU5WQUxJRF9UWVBFLCBbdHlwZW9mIG5ld09uQ29ubmVjdGVkLCBcIm9uQ29ubmVjdGVkXCJdKSk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9LFxuXHRcdFx0XHRcImRpc2Nvbm5lY3RlZFB1Ymxpc2hpbmdcIjp7XG5cdFx0XHRcdFx0Z2V0OiBmdW5jdGlvbigpIHsgcmV0dXJuIGNsaWVudC5kaXNjb25uZWN0ZWRQdWJsaXNoaW5nOyB9LFxuXHRcdFx0XHRcdHNldDogZnVuY3Rpb24obmV3RGlzY29ubmVjdGVkUHVibGlzaGluZykge1xuXHRcdFx0XHRcdFx0Y2xpZW50LmRpc2Nvbm5lY3RlZFB1Ymxpc2hpbmcgPSBuZXdEaXNjb25uZWN0ZWRQdWJsaXNoaW5nO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSxcblx0XHRcdFx0XCJkaXNjb25uZWN0ZWRCdWZmZXJTaXplXCI6e1xuXHRcdFx0XHRcdGdldDogZnVuY3Rpb24oKSB7IHJldHVybiBjbGllbnQuZGlzY29ubmVjdGVkQnVmZmVyU2l6ZTsgfSxcblx0XHRcdFx0XHRzZXQ6IGZ1bmN0aW9uKG5ld0Rpc2Nvbm5lY3RlZEJ1ZmZlclNpemUpIHtcblx0XHRcdFx0XHRcdGNsaWVudC5kaXNjb25uZWN0ZWRCdWZmZXJTaXplID0gbmV3RGlzY29ubmVjdGVkQnVmZmVyU2l6ZTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0sXG5cdFx0XHRcdFwib25Db25uZWN0aW9uTG9zdFwiOntcblx0XHRcdFx0XHRnZXQ6IGZ1bmN0aW9uKCkgeyByZXR1cm4gY2xpZW50Lm9uQ29ubmVjdGlvbkxvc3Q7IH0sXG5cdFx0XHRcdFx0c2V0OiBmdW5jdGlvbihuZXdPbkNvbm5lY3Rpb25Mb3N0KSB7XG5cdFx0XHRcdFx0XHRpZiAodHlwZW9mIG5ld09uQ29ubmVjdGlvbkxvc3QgPT09IFwiZnVuY3Rpb25cIilcblx0XHRcdFx0XHRcdFx0Y2xpZW50Lm9uQ29ubmVjdGlvbkxvc3QgPSBuZXdPbkNvbm5lY3Rpb25Mb3N0O1xuXHRcdFx0XHRcdFx0ZWxzZVxuXHRcdFx0XHRcdFx0XHR0aHJvdyBuZXcgRXJyb3IoZm9ybWF0KEVSUk9SLklOVkFMSURfVFlQRSwgW3R5cGVvZiBuZXdPbkNvbm5lY3Rpb25Mb3N0LCBcIm9uQ29ubmVjdGlvbkxvc3RcIl0pKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0sXG5cdFx0XHRcdFwib25NZXNzYWdlRGVsaXZlcmVkXCI6e1xuXHRcdFx0XHRcdGdldDogZnVuY3Rpb24oKSB7IHJldHVybiBjbGllbnQub25NZXNzYWdlRGVsaXZlcmVkOyB9LFxuXHRcdFx0XHRcdHNldDogZnVuY3Rpb24obmV3T25NZXNzYWdlRGVsaXZlcmVkKSB7XG5cdFx0XHRcdFx0XHRpZiAodHlwZW9mIG5ld09uTWVzc2FnZURlbGl2ZXJlZCA9PT0gXCJmdW5jdGlvblwiKVxuXHRcdFx0XHRcdFx0XHRjbGllbnQub25NZXNzYWdlRGVsaXZlcmVkID0gbmV3T25NZXNzYWdlRGVsaXZlcmVkO1xuXHRcdFx0XHRcdFx0ZWxzZVxuXHRcdFx0XHRcdFx0XHR0aHJvdyBuZXcgRXJyb3IoZm9ybWF0KEVSUk9SLklOVkFMSURfVFlQRSwgW3R5cGVvZiBuZXdPbk1lc3NhZ2VEZWxpdmVyZWQsIFwib25NZXNzYWdlRGVsaXZlcmVkXCJdKSk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9LFxuXHRcdFx0XHRcIm9uTWVzc2FnZUFycml2ZWRcIjp7XG5cdFx0XHRcdFx0Z2V0OiBmdW5jdGlvbigpIHsgcmV0dXJuIGNsaWVudC5vbk1lc3NhZ2VBcnJpdmVkOyB9LFxuXHRcdFx0XHRcdHNldDogZnVuY3Rpb24obmV3T25NZXNzYWdlQXJyaXZlZCkge1xuXHRcdFx0XHRcdFx0aWYgKHR5cGVvZiBuZXdPbk1lc3NhZ2VBcnJpdmVkID09PSBcImZ1bmN0aW9uXCIpXG5cdFx0XHRcdFx0XHRcdGNsaWVudC5vbk1lc3NhZ2VBcnJpdmVkID0gbmV3T25NZXNzYWdlQXJyaXZlZDtcblx0XHRcdFx0XHRcdGVsc2Vcblx0XHRcdFx0XHRcdFx0dGhyb3cgbmV3IEVycm9yKGZvcm1hdChFUlJPUi5JTlZBTElEX1RZUEUsIFt0eXBlb2YgbmV3T25NZXNzYWdlQXJyaXZlZCwgXCJvbk1lc3NhZ2VBcnJpdmVkXCJdKSk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9LFxuXHRcdFx0XHRcInRyYWNlXCI6e1xuXHRcdFx0XHRcdGdldDogZnVuY3Rpb24oKSB7IHJldHVybiBjbGllbnQudHJhY2VGdW5jdGlvbjsgfSxcblx0XHRcdFx0XHRzZXQ6IGZ1bmN0aW9uKHRyYWNlKSB7XG5cdFx0XHRcdFx0XHRpZih0eXBlb2YgdHJhY2UgPT09IFwiZnVuY3Rpb25cIil7XG5cdFx0XHRcdFx0XHRcdGNsaWVudC50cmFjZUZ1bmN0aW9uID0gdHJhY2U7XG5cdFx0XHRcdFx0XHR9ZWxzZXtcblx0XHRcdFx0XHRcdFx0dGhyb3cgbmV3IEVycm9yKGZvcm1hdChFUlJPUi5JTlZBTElEX1RZUEUsIFt0eXBlb2YgdHJhY2UsIFwib25UcmFjZVwiXSkpO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSxcblx0XHRcdH0pO1xuXG5cdFx0XHQvKipcblx0XHQgKiBDb25uZWN0IHRoaXMgTWVzc2FnaW5nIGNsaWVudCB0byBpdHMgc2VydmVyLlxuXHRcdCAqXG5cdFx0ICogQG5hbWUgUGFoby5DbGllbnQjY29ubmVjdFxuXHRcdCAqIEBmdW5jdGlvblxuXHRcdCAqIEBwYXJhbSB7b2JqZWN0fSBjb25uZWN0T3B0aW9ucyAtIEF0dHJpYnV0ZXMgdXNlZCB3aXRoIHRoZSBjb25uZWN0aW9uLlxuXHRcdCAqIEBwYXJhbSB7bnVtYmVyfSBjb25uZWN0T3B0aW9ucy50aW1lb3V0IC0gSWYgdGhlIGNvbm5lY3QgaGFzIG5vdCBzdWNjZWVkZWQgd2l0aGluIHRoaXNcblx0XHQgKiAgICAgICAgICAgICAgICAgICAgbnVtYmVyIG9mIHNlY29uZHMsIGl0IGlzIGRlZW1lZCB0byBoYXZlIGZhaWxlZC5cblx0XHQgKiAgICAgICAgICAgICAgICAgICAgVGhlIGRlZmF1bHQgaXMgMzAgc2Vjb25kcy5cblx0XHQgKiBAcGFyYW0ge3N0cmluZ30gY29ubmVjdE9wdGlvbnMudXNlck5hbWUgLSBBdXRoZW50aWNhdGlvbiB1c2VybmFtZSBmb3IgdGhpcyBjb25uZWN0aW9uLlxuXHRcdCAqIEBwYXJhbSB7c3RyaW5nfSBjb25uZWN0T3B0aW9ucy5wYXNzd29yZCAtIEF1dGhlbnRpY2F0aW9uIHBhc3N3b3JkIGZvciB0aGlzIGNvbm5lY3Rpb24uXG5cdFx0ICogQHBhcmFtIHtQYWhvLk1lc3NhZ2V9IGNvbm5lY3RPcHRpb25zLndpbGxNZXNzYWdlIC0gc2VudCBieSB0aGUgc2VydmVyIHdoZW4gdGhlIGNsaWVudFxuXHRcdCAqICAgICAgICAgICAgICAgICAgICBkaXNjb25uZWN0cyBhYm5vcm1hbGx5LlxuXHRcdCAqIEBwYXJhbSB7bnVtYmVyfSBjb25uZWN0T3B0aW9ucy5rZWVwQWxpdmVJbnRlcnZhbCAtIHRoZSBzZXJ2ZXIgZGlzY29ubmVjdHMgdGhpcyBjbGllbnQgaWZcblx0XHQgKiAgICAgICAgICAgICAgICAgICAgdGhlcmUgaXMgbm8gYWN0aXZpdHkgZm9yIHRoaXMgbnVtYmVyIG9mIHNlY29uZHMuXG5cdFx0ICogICAgICAgICAgICAgICAgICAgIFRoZSBkZWZhdWx0IHZhbHVlIG9mIDYwIHNlY29uZHMgaXMgYXNzdW1lZCBpZiBub3Qgc2V0LlxuXHRcdCAqIEBwYXJhbSB7Ym9vbGVhbn0gY29ubmVjdE9wdGlvbnMuY2xlYW5TZXNzaW9uIC0gaWYgdHJ1ZShkZWZhdWx0KSB0aGUgY2xpZW50IGFuZCBzZXJ2ZXJcblx0XHQgKiAgICAgICAgICAgICAgICAgICAgcGVyc2lzdGVudCBzdGF0ZSBpcyBkZWxldGVkIG9uIHN1Y2Nlc3NmdWwgY29ubmVjdC5cblx0XHQgKiBAcGFyYW0ge2Jvb2xlYW59IGNvbm5lY3RPcHRpb25zLnVzZVNTTCAtIGlmIHByZXNlbnQgYW5kIHRydWUsIHVzZSBhbiBTU0wgV2Vic29ja2V0IGNvbm5lY3Rpb24uXG5cdFx0ICogQHBhcmFtIHtvYmplY3R9IGNvbm5lY3RPcHRpb25zLmludm9jYXRpb25Db250ZXh0IC0gcGFzc2VkIHRvIHRoZSBvblN1Y2Nlc3MgY2FsbGJhY2sgb3Igb25GYWlsdXJlIGNhbGxiYWNrLlxuXHRcdCAqIEBwYXJhbSB7ZnVuY3Rpb259IGNvbm5lY3RPcHRpb25zLm9uU3VjY2VzcyAtIGNhbGxlZCB3aGVuIHRoZSBjb25uZWN0IGFja25vd2xlZGdlbWVudFxuXHRcdCAqICAgICAgICAgICAgICAgICAgICBoYXMgYmVlbiByZWNlaXZlZCBmcm9tIHRoZSBzZXJ2ZXIuXG5cdFx0ICogQSBzaW5nbGUgcmVzcG9uc2Ugb2JqZWN0IHBhcmFtZXRlciBpcyBwYXNzZWQgdG8gdGhlIG9uU3VjY2VzcyBjYWxsYmFjayBjb250YWluaW5nIHRoZSBmb2xsb3dpbmcgZmllbGRzOlxuXHRcdCAqIDxvbD5cblx0XHQgKiA8bGk+aW52b2NhdGlvbkNvbnRleHQgYXMgcGFzc2VkIGluIHRvIHRoZSBvblN1Y2Nlc3MgbWV0aG9kIGluIHRoZSBjb25uZWN0T3B0aW9ucy5cblx0XHQgKiA8L29sPlxuXHQgKiBAcGFyYW0ge2Z1bmN0aW9ufSBjb25uZWN0T3B0aW9ucy5vbkZhaWx1cmUgLSBjYWxsZWQgd2hlbiB0aGUgY29ubmVjdCByZXF1ZXN0IGhhcyBmYWlsZWQgb3IgdGltZWQgb3V0LlxuXHRcdCAqIEEgc2luZ2xlIHJlc3BvbnNlIG9iamVjdCBwYXJhbWV0ZXIgaXMgcGFzc2VkIHRvIHRoZSBvbkZhaWx1cmUgY2FsbGJhY2sgY29udGFpbmluZyB0aGUgZm9sbG93aW5nIGZpZWxkczpcblx0XHQgKiA8b2w+XG5cdFx0ICogPGxpPmludm9jYXRpb25Db250ZXh0IGFzIHBhc3NlZCBpbiB0byB0aGUgb25GYWlsdXJlIG1ldGhvZCBpbiB0aGUgY29ubmVjdE9wdGlvbnMuXG5cdFx0ICogPGxpPmVycm9yQ29kZSBhIG51bWJlciBpbmRpY2F0aW5nIHRoZSBuYXR1cmUgb2YgdGhlIGVycm9yLlxuXHRcdCAqIDxsaT5lcnJvck1lc3NhZ2UgdGV4dCBkZXNjcmliaW5nIHRoZSBlcnJvci5cblx0XHQgKiA8L29sPlxuXHQgKiBAcGFyYW0ge2FycmF5fSBjb25uZWN0T3B0aW9ucy5ob3N0cyAtIElmIHByZXNlbnQgdGhpcyBjb250YWlucyBlaXRoZXIgYSBzZXQgb2YgaG9zdG5hbWVzIG9yIGZ1bGx5IHF1YWxpZmllZFxuXHRcdCAqIFdlYlNvY2tldCBVUklzICh3czovL2lvdC5lY2xpcHNlLm9yZzo4MC93cyksIHRoYXQgYXJlIHRyaWVkIGluIG9yZGVyIGluIHBsYWNlXG5cdFx0ICogb2YgdGhlIGhvc3QgYW5kIHBvcnQgcGFyYW1hdGVyIG9uIHRoZSBjb25zdHJ1dG9yLiBUaGUgaG9zdHMgYXJlIHRyaWVkIG9uZSBhdCBhdCB0aW1lIGluIG9yZGVyIHVudGlsXG5cdFx0ICogb25lIG9mIHRoZW4gc3VjY2VlZHMuXG5cdCAqIEBwYXJhbSB7YXJyYXl9IGNvbm5lY3RPcHRpb25zLnBvcnRzIC0gSWYgcHJlc2VudCB0aGUgc2V0IG9mIHBvcnRzIG1hdGNoaW5nIHRoZSBob3N0cy4gSWYgaG9zdHMgY29udGFpbnMgVVJJcywgdGhpcyBwcm9wZXJ0eVxuXHRcdCAqIGlzIG5vdCB1c2VkLlxuXHQgKiBAcGFyYW0ge2Jvb2xlYW59IGNvbm5lY3RPcHRpb25zLnJlY29ubmVjdCAtIFNldHMgd2hldGhlciB0aGUgY2xpZW50IHdpbGwgYXV0b21hdGljYWxseSBhdHRlbXB0IHRvIHJlY29ubmVjdFxuXHQgKiB0byB0aGUgc2VydmVyIGlmIHRoZSBjb25uZWN0aW9uIGlzIGxvc3QuXG5cdCAqPHVsPlxuXHQgKjxsaT5JZiBzZXQgdG8gZmFsc2UsIHRoZSBjbGllbnQgd2lsbCBub3QgYXR0ZW1wdCB0byBhdXRvbWF0aWNhbGx5IHJlY29ubmVjdCB0byB0aGUgc2VydmVyIGluIHRoZSBldmVudCB0aGF0IHRoZVxuXHQgKiBjb25uZWN0aW9uIGlzIGxvc3QuPC9saT5cblx0ICo8bGk+SWYgc2V0IHRvIHRydWUsIGluIHRoZSBldmVudCB0aGF0IHRoZSBjb25uZWN0aW9uIGlzIGxvc3QsIHRoZSBjbGllbnQgd2lsbCBhdHRlbXB0IHRvIHJlY29ubmVjdCB0byB0aGUgc2VydmVyLlxuXHQgKiBJdCB3aWxsIGluaXRpYWxseSB3YWl0IDEgc2Vjb25kIGJlZm9yZSBpdCBhdHRlbXB0cyB0byByZWNvbm5lY3QsIGZvciBldmVyeSBmYWlsZWQgcmVjb25uZWN0IGF0dGVtcHQsIHRoZSBkZWxheVxuXHQgKiB3aWxsIGRvdWJsZSB1bnRpbCBpdCBpcyBhdCAyIG1pbnV0ZXMgYXQgd2hpY2ggcG9pbnQgdGhlIGRlbGF5IHdpbGwgc3RheSBhdCAyIG1pbnV0ZXMuPC9saT5cblx0ICo8L3VsPlxuXHQgKiBAcGFyYW0ge251bWJlcn0gY29ubmVjdE9wdGlvbnMubXF0dFZlcnNpb24gLSBUaGUgdmVyc2lvbiBvZiBNUVRUIHRvIHVzZSB0byBjb25uZWN0IHRvIHRoZSBNUVRUIEJyb2tlci5cblx0ICo8dWw+XG5cdCAqPGxpPjMgLSBNUVRUIFYzLjE8L2xpPlxuXHQgKjxsaT40IC0gTVFUVCBWMy4xLjE8L2xpPlxuXHQgKjwvdWw+XG5cdCAqIEBwYXJhbSB7Ym9vbGVhbn0gY29ubmVjdE9wdGlvbnMubXF0dFZlcnNpb25FeHBsaWNpdCAtIElmIHNldCB0byB0cnVlLCB3aWxsIGZvcmNlIHRoZSBjb25uZWN0aW9uIHRvIHVzZSB0aGVcblx0ICogc2VsZWN0ZWQgTVFUVCBWZXJzaW9uIG9yIHdpbGwgZmFpbCB0byBjb25uZWN0LlxuXHQgKiBAcGFyYW0ge2FycmF5fSBjb25uZWN0T3B0aW9ucy51cmlzIC0gSWYgcHJlc2VudCwgc2hvdWxkIGNvbnRhaW4gYSBsaXN0IG9mIGZ1bGx5IHF1YWxpZmllZCBXZWJTb2NrZXQgdXJpc1xuXHQgKiAoZS5nLiB3czovL2lvdC5lY2xpcHNlLm9yZzo4MC93cyksIHRoYXQgYXJlIHRyaWVkIGluIG9yZGVyIGluIHBsYWNlIG9mIHRoZSBob3N0IGFuZCBwb3J0IHBhcmFtZXRlciBvZiB0aGUgY29uc3RydXRvci5cblx0ICogVGhlIHVyaXMgYXJlIHRyaWVkIG9uZSBhdCBhIHRpbWUgaW4gb3JkZXIgdW50aWwgb25lIG9mIHRoZW0gc3VjY2VlZHMuIERvIG5vdCB1c2UgdGhpcyBpbiBjb25qdW5jdGlvbiB3aXRoIGhvc3RzIGFzXG5cdCAqIHRoZSBob3N0cyBhcnJheSB3aWxsIGJlIGNvbnZlcnRlZCB0byB1cmlzIGFuZCB3aWxsIG92ZXJ3cml0ZSB0aGlzIHByb3BlcnR5LlxuXHRcdCAqIEB0aHJvd3Mge0ludmFsaWRTdGF0ZX0gSWYgdGhlIGNsaWVudCBpcyBub3QgaW4gZGlzY29ubmVjdGVkIHN0YXRlLiBUaGUgY2xpZW50IG11c3QgaGF2ZSByZWNlaXZlZCBjb25uZWN0aW9uTG9zdFxuXHRcdCAqIG9yIGRpc2Nvbm5lY3RlZCBiZWZvcmUgY2FsbGluZyBjb25uZWN0IGZvciBhIHNlY29uZCBvciBzdWJzZXF1ZW50IHRpbWUuXG5cdFx0ICovXG5cdFx0XHR0aGlzLmNvbm5lY3QgPSBmdW5jdGlvbiAoY29ubmVjdE9wdGlvbnMpIHtcblx0XHRcdFx0Y29ubmVjdE9wdGlvbnMgPSBjb25uZWN0T3B0aW9ucyB8fCB7fSA7XG5cdFx0XHRcdHZhbGlkYXRlKGNvbm5lY3RPcHRpb25zLCAge3RpbWVvdXQ6XCJudW1iZXJcIixcblx0XHRcdFx0XHR1c2VyTmFtZTpcInN0cmluZ1wiLFxuXHRcdFx0XHRcdHBhc3N3b3JkOlwic3RyaW5nXCIsXG5cdFx0XHRcdFx0d2lsbE1lc3NhZ2U6XCJvYmplY3RcIixcblx0XHRcdFx0XHRrZWVwQWxpdmVJbnRlcnZhbDpcIm51bWJlclwiLFxuXHRcdFx0XHRcdGNsZWFuU2Vzc2lvbjpcImJvb2xlYW5cIixcblx0XHRcdFx0XHR1c2VTU0w6XCJib29sZWFuXCIsXG5cdFx0XHRcdFx0aW52b2NhdGlvbkNvbnRleHQ6XCJvYmplY3RcIixcblx0XHRcdFx0XHRvblN1Y2Nlc3M6XCJmdW5jdGlvblwiLFxuXHRcdFx0XHRcdG9uRmFpbHVyZTpcImZ1bmN0aW9uXCIsXG5cdFx0XHRcdFx0aG9zdHM6XCJvYmplY3RcIixcblx0XHRcdFx0XHRwb3J0czpcIm9iamVjdFwiLFxuXHRcdFx0XHRcdHJlY29ubmVjdDpcImJvb2xlYW5cIixcblx0XHRcdFx0XHRtcXR0VmVyc2lvbjpcIm51bWJlclwiLFxuXHRcdFx0XHRcdG1xdHRWZXJzaW9uRXhwbGljaXQ6XCJib29sZWFuXCIsXG5cdFx0XHRcdFx0dXJpczogXCJvYmplY3RcIn0pO1xuXG5cdFx0XHRcdC8vIElmIG5vIGtlZXAgYWxpdmUgaW50ZXJ2YWwgaXMgc2V0LCBhc3N1bWUgNjAgc2Vjb25kcy5cblx0XHRcdFx0aWYgKGNvbm5lY3RPcHRpb25zLmtlZXBBbGl2ZUludGVydmFsID09PSB1bmRlZmluZWQpXG5cdFx0XHRcdFx0Y29ubmVjdE9wdGlvbnMua2VlcEFsaXZlSW50ZXJ2YWwgPSA2MDtcblxuXHRcdFx0XHRpZiAoY29ubmVjdE9wdGlvbnMubXF0dFZlcnNpb24gPiA0IHx8IGNvbm5lY3RPcHRpb25zLm1xdHRWZXJzaW9uIDwgMykge1xuXHRcdFx0XHRcdHRocm93IG5ldyBFcnJvcihmb3JtYXQoRVJST1IuSU5WQUxJRF9BUkdVTUVOVCwgW2Nvbm5lY3RPcHRpb25zLm1xdHRWZXJzaW9uLCBcImNvbm5lY3RPcHRpb25zLm1xdHRWZXJzaW9uXCJdKSk7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRpZiAoY29ubmVjdE9wdGlvbnMubXF0dFZlcnNpb24gPT09IHVuZGVmaW5lZCkge1xuXHRcdFx0XHRcdGNvbm5lY3RPcHRpb25zLm1xdHRWZXJzaW9uRXhwbGljaXQgPSBmYWxzZTtcblx0XHRcdFx0XHRjb25uZWN0T3B0aW9ucy5tcXR0VmVyc2lvbiA9IDQ7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0Y29ubmVjdE9wdGlvbnMubXF0dFZlcnNpb25FeHBsaWNpdCA9IHRydWU7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHQvL0NoZWNrIHRoYXQgaWYgcGFzc3dvcmQgaXMgc2V0LCBzbyBpcyB1c2VybmFtZVxuXHRcdFx0XHRpZiAoY29ubmVjdE9wdGlvbnMucGFzc3dvcmQgIT09IHVuZGVmaW5lZCAmJiBjb25uZWN0T3B0aW9ucy51c2VyTmFtZSA9PT0gdW5kZWZpbmVkKVxuXHRcdFx0XHRcdHRocm93IG5ldyBFcnJvcihmb3JtYXQoRVJST1IuSU5WQUxJRF9BUkdVTUVOVCwgW2Nvbm5lY3RPcHRpb25zLnBhc3N3b3JkLCBcImNvbm5lY3RPcHRpb25zLnBhc3N3b3JkXCJdKSk7XG5cblx0XHRcdFx0aWYgKGNvbm5lY3RPcHRpb25zLndpbGxNZXNzYWdlKSB7XG5cdFx0XHRcdFx0aWYgKCEoY29ubmVjdE9wdGlvbnMud2lsbE1lc3NhZ2UgaW5zdGFuY2VvZiBNZXNzYWdlKSlcblx0XHRcdFx0XHRcdHRocm93IG5ldyBFcnJvcihmb3JtYXQoRVJST1IuSU5WQUxJRF9UWVBFLCBbY29ubmVjdE9wdGlvbnMud2lsbE1lc3NhZ2UsIFwiY29ubmVjdE9wdGlvbnMud2lsbE1lc3NhZ2VcIl0pKTtcblx0XHRcdFx0XHQvLyBUaGUgd2lsbCBtZXNzYWdlIG11c3QgaGF2ZSBhIHBheWxvYWQgdGhhdCBjYW4gYmUgcmVwcmVzZW50ZWQgYXMgYSBzdHJpbmcuXG5cdFx0XHRcdFx0Ly8gQ2F1c2UgdGhlIHdpbGxNZXNzYWdlIHRvIHRocm93IGFuIGV4Y2VwdGlvbiBpZiB0aGlzIGlzIG5vdCB0aGUgY2FzZS5cblx0XHRcdFx0XHRjb25uZWN0T3B0aW9ucy53aWxsTWVzc2FnZS5zdHJpbmdQYXlsb2FkID0gbnVsbDtcblxuXHRcdFx0XHRcdGlmICh0eXBlb2YgY29ubmVjdE9wdGlvbnMud2lsbE1lc3NhZ2UuZGVzdGluYXRpb25OYW1lID09PSBcInVuZGVmaW5lZFwiKVxuXHRcdFx0XHRcdFx0dGhyb3cgbmV3IEVycm9yKGZvcm1hdChFUlJPUi5JTlZBTElEX1RZUEUsIFt0eXBlb2YgY29ubmVjdE9wdGlvbnMud2lsbE1lc3NhZ2UuZGVzdGluYXRpb25OYW1lLCBcImNvbm5lY3RPcHRpb25zLndpbGxNZXNzYWdlLmRlc3RpbmF0aW9uTmFtZVwiXSkpO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGlmICh0eXBlb2YgY29ubmVjdE9wdGlvbnMuY2xlYW5TZXNzaW9uID09PSBcInVuZGVmaW5lZFwiKVxuXHRcdFx0XHRcdGNvbm5lY3RPcHRpb25zLmNsZWFuU2Vzc2lvbiA9IHRydWU7XG5cdFx0XHRcdGlmIChjb25uZWN0T3B0aW9ucy5ob3N0cykge1xuXG5cdFx0XHRcdFx0aWYgKCEoY29ubmVjdE9wdGlvbnMuaG9zdHMgaW5zdGFuY2VvZiBBcnJheSkgKVxuXHRcdFx0XHRcdFx0dGhyb3cgbmV3IEVycm9yKGZvcm1hdChFUlJPUi5JTlZBTElEX0FSR1VNRU5ULCBbY29ubmVjdE9wdGlvbnMuaG9zdHMsIFwiY29ubmVjdE9wdGlvbnMuaG9zdHNcIl0pKTtcblx0XHRcdFx0XHRpZiAoY29ubmVjdE9wdGlvbnMuaG9zdHMubGVuZ3RoIDwxIClcblx0XHRcdFx0XHRcdHRocm93IG5ldyBFcnJvcihmb3JtYXQoRVJST1IuSU5WQUxJRF9BUkdVTUVOVCwgW2Nvbm5lY3RPcHRpb25zLmhvc3RzLCBcImNvbm5lY3RPcHRpb25zLmhvc3RzXCJdKSk7XG5cblx0XHRcdFx0XHR2YXIgdXNpbmdVUklzID0gZmFsc2U7XG5cdFx0XHRcdFx0Zm9yICh2YXIgaSA9IDA7IGk8Y29ubmVjdE9wdGlvbnMuaG9zdHMubGVuZ3RoOyBpKyspIHtcblx0XHRcdFx0XHRcdGlmICh0eXBlb2YgY29ubmVjdE9wdGlvbnMuaG9zdHNbaV0gIT09IFwic3RyaW5nXCIpXG5cdFx0XHRcdFx0XHRcdHRocm93IG5ldyBFcnJvcihmb3JtYXQoRVJST1IuSU5WQUxJRF9UWVBFLCBbdHlwZW9mIGNvbm5lY3RPcHRpb25zLmhvc3RzW2ldLCBcImNvbm5lY3RPcHRpb25zLmhvc3RzW1wiK2krXCJdXCJdKSk7XG5cdFx0XHRcdFx0XHRpZiAoL14od3NzPyk6XFwvXFwvKChcXFsoLispXFxdKXwoW15cXC9dKz8pKSg6KFxcZCspKT8oXFwvLiopJC8udGVzdChjb25uZWN0T3B0aW9ucy5ob3N0c1tpXSkpIHtcblx0XHRcdFx0XHRcdFx0aWYgKGkgPT09IDApIHtcblx0XHRcdFx0XHRcdFx0XHR1c2luZ1VSSXMgPSB0cnVlO1xuXHRcdFx0XHRcdFx0XHR9IGVsc2UgaWYgKCF1c2luZ1VSSXMpIHtcblx0XHRcdFx0XHRcdFx0XHR0aHJvdyBuZXcgRXJyb3IoZm9ybWF0KEVSUk9SLklOVkFMSURfQVJHVU1FTlQsIFtjb25uZWN0T3B0aW9ucy5ob3N0c1tpXSwgXCJjb25uZWN0T3B0aW9ucy5ob3N0c1tcIitpK1wiXVwiXSkpO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9IGVsc2UgaWYgKHVzaW5nVVJJcykge1xuXHRcdFx0XHRcdFx0XHR0aHJvdyBuZXcgRXJyb3IoZm9ybWF0KEVSUk9SLklOVkFMSURfQVJHVU1FTlQsIFtjb25uZWN0T3B0aW9ucy5ob3N0c1tpXSwgXCJjb25uZWN0T3B0aW9ucy5ob3N0c1tcIitpK1wiXVwiXSkpO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdGlmICghdXNpbmdVUklzKSB7XG5cdFx0XHRcdFx0XHRpZiAoIWNvbm5lY3RPcHRpb25zLnBvcnRzKVxuXHRcdFx0XHRcdFx0XHR0aHJvdyBuZXcgRXJyb3IoZm9ybWF0KEVSUk9SLklOVkFMSURfQVJHVU1FTlQsIFtjb25uZWN0T3B0aW9ucy5wb3J0cywgXCJjb25uZWN0T3B0aW9ucy5wb3J0c1wiXSkpO1xuXHRcdFx0XHRcdFx0aWYgKCEoY29ubmVjdE9wdGlvbnMucG9ydHMgaW5zdGFuY2VvZiBBcnJheSkgKVxuXHRcdFx0XHRcdFx0XHR0aHJvdyBuZXcgRXJyb3IoZm9ybWF0KEVSUk9SLklOVkFMSURfQVJHVU1FTlQsIFtjb25uZWN0T3B0aW9ucy5wb3J0cywgXCJjb25uZWN0T3B0aW9ucy5wb3J0c1wiXSkpO1xuXHRcdFx0XHRcdFx0aWYgKGNvbm5lY3RPcHRpb25zLmhvc3RzLmxlbmd0aCAhPT0gY29ubmVjdE9wdGlvbnMucG9ydHMubGVuZ3RoKVxuXHRcdFx0XHRcdFx0XHR0aHJvdyBuZXcgRXJyb3IoZm9ybWF0KEVSUk9SLklOVkFMSURfQVJHVU1FTlQsIFtjb25uZWN0T3B0aW9ucy5wb3J0cywgXCJjb25uZWN0T3B0aW9ucy5wb3J0c1wiXSkpO1xuXG5cdFx0XHRcdFx0XHRjb25uZWN0T3B0aW9ucy51cmlzID0gW107XG5cblx0XHRcdFx0XHRcdGZvciAodmFyIGkgPSAwOyBpPGNvbm5lY3RPcHRpb25zLmhvc3RzLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHRcdFx0XHRcdGlmICh0eXBlb2YgY29ubmVjdE9wdGlvbnMucG9ydHNbaV0gIT09IFwibnVtYmVyXCIgfHwgY29ubmVjdE9wdGlvbnMucG9ydHNbaV0gPCAwKVxuXHRcdFx0XHRcdFx0XHRcdHRocm93IG5ldyBFcnJvcihmb3JtYXQoRVJST1IuSU5WQUxJRF9UWVBFLCBbdHlwZW9mIGNvbm5lY3RPcHRpb25zLnBvcnRzW2ldLCBcImNvbm5lY3RPcHRpb25zLnBvcnRzW1wiK2krXCJdXCJdKSk7XG5cdFx0XHRcdFx0XHRcdHZhciBob3N0ID0gY29ubmVjdE9wdGlvbnMuaG9zdHNbaV07XG5cdFx0XHRcdFx0XHRcdHZhciBwb3J0ID0gY29ubmVjdE9wdGlvbnMucG9ydHNbaV07XG5cblx0XHRcdFx0XHRcdFx0dmFyIGlwdjYgPSAoaG9zdC5pbmRleE9mKFwiOlwiKSAhPT0gLTEpO1xuXHRcdFx0XHRcdFx0XHR1cmkgPSBcIndzOi8vXCIrKGlwdjY/XCJbXCIraG9zdCtcIl1cIjpob3N0KStcIjpcIitwb3J0K3BhdGg7XG5cdFx0XHRcdFx0XHRcdGNvbm5lY3RPcHRpb25zLnVyaXMucHVzaCh1cmkpO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRjb25uZWN0T3B0aW9ucy51cmlzID0gY29ubmVjdE9wdGlvbnMuaG9zdHM7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cblx0XHRcdFx0Y2xpZW50LmNvbm5lY3QoY29ubmVjdE9wdGlvbnMpO1xuXHRcdFx0fTtcblxuXHRcdFx0LyoqXG5cdFx0ICogU3Vic2NyaWJlIGZvciBtZXNzYWdlcywgcmVxdWVzdCByZWNlaXB0IG9mIGEgY29weSBvZiBtZXNzYWdlcyBzZW50IHRvIHRoZSBkZXN0aW5hdGlvbnMgZGVzY3JpYmVkIGJ5IHRoZSBmaWx0ZXIuXG5cdFx0ICpcblx0XHQgKiBAbmFtZSBQYWhvLkNsaWVudCNzdWJzY3JpYmVcblx0XHQgKiBAZnVuY3Rpb25cblx0XHQgKiBAcGFyYW0ge3N0cmluZ30gZmlsdGVyIGRlc2NyaWJpbmcgdGhlIGRlc3RpbmF0aW9ucyB0byByZWNlaXZlIG1lc3NhZ2VzIGZyb20uXG5cdFx0ICogPGJyPlxuXHRcdCAqIEBwYXJhbSB7b2JqZWN0fSBzdWJzY3JpYmVPcHRpb25zIC0gdXNlZCB0byBjb250cm9sIHRoZSBzdWJzY3JpcHRpb25cblx0XHQgKlxuXHRcdCAqIEBwYXJhbSB7bnVtYmVyfSBzdWJzY3JpYmVPcHRpb25zLnFvcyAtIHRoZSBtYXhpbXVtIHFvcyBvZiBhbnkgcHVibGljYXRpb25zIHNlbnRcblx0XHQgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcyBhIHJlc3VsdCBvZiBtYWtpbmcgdGhpcyBzdWJzY3JpcHRpb24uXG5cdFx0ICogQHBhcmFtIHtvYmplY3R9IHN1YnNjcmliZU9wdGlvbnMuaW52b2NhdGlvbkNvbnRleHQgLSBwYXNzZWQgdG8gdGhlIG9uU3VjY2VzcyBjYWxsYmFja1xuXHRcdCAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9yIG9uRmFpbHVyZSBjYWxsYmFjay5cblx0XHQgKiBAcGFyYW0ge2Z1bmN0aW9ufSBzdWJzY3JpYmVPcHRpb25zLm9uU3VjY2VzcyAtIGNhbGxlZCB3aGVuIHRoZSBzdWJzY3JpYmUgYWNrbm93bGVkZ2VtZW50XG5cdFx0ICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGFzIGJlZW4gcmVjZWl2ZWQgZnJvbSB0aGUgc2VydmVyLlxuXHRcdCAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEEgc2luZ2xlIHJlc3BvbnNlIG9iamVjdCBwYXJhbWV0ZXIgaXMgcGFzc2VkIHRvIHRoZSBvblN1Y2Nlc3MgY2FsbGJhY2sgY29udGFpbmluZyB0aGUgZm9sbG93aW5nIGZpZWxkczpcblx0XHQgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8b2w+XG5cdFx0ICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxpPmludm9jYXRpb25Db250ZXh0IGlmIHNldCBpbiB0aGUgc3Vic2NyaWJlT3B0aW9ucy5cblx0XHQgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L29sPlxuXHRcdCAqIEBwYXJhbSB7ZnVuY3Rpb259IHN1YnNjcmliZU9wdGlvbnMub25GYWlsdXJlIC0gY2FsbGVkIHdoZW4gdGhlIHN1YnNjcmliZSByZXF1ZXN0IGhhcyBmYWlsZWQgb3IgdGltZWQgb3V0LlxuXHRcdCAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEEgc2luZ2xlIHJlc3BvbnNlIG9iamVjdCBwYXJhbWV0ZXIgaXMgcGFzc2VkIHRvIHRoZSBvbkZhaWx1cmUgY2FsbGJhY2sgY29udGFpbmluZyB0aGUgZm9sbG93aW5nIGZpZWxkczpcblx0XHQgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8b2w+XG5cdFx0ICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxpPmludm9jYXRpb25Db250ZXh0IC0gaWYgc2V0IGluIHRoZSBzdWJzY3JpYmVPcHRpb25zLlxuXHRcdCAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsaT5lcnJvckNvZGUgLSBhIG51bWJlciBpbmRpY2F0aW5nIHRoZSBuYXR1cmUgb2YgdGhlIGVycm9yLlxuXHRcdCAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsaT5lcnJvck1lc3NhZ2UgLSB0ZXh0IGRlc2NyaWJpbmcgdGhlIGVycm9yLlxuXHRcdCAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvb2w+XG5cdFx0ICogQHBhcmFtIHtudW1iZXJ9IHN1YnNjcmliZU9wdGlvbnMudGltZW91dCAtIHdoaWNoLCBpZiBwcmVzZW50LCBkZXRlcm1pbmVzIHRoZSBudW1iZXIgb2Zcblx0XHQgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWNvbmRzIGFmdGVyIHdoaWNoIHRoZSBvbkZhaWx1cmUgY2FsYmFjayBpcyBjYWxsZWQuXG5cdFx0ICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVGhlIHByZXNlbmNlIG9mIGEgdGltZW91dCBkb2VzIG5vdCBwcmV2ZW50IHRoZSBvblN1Y2Nlc3Ncblx0XHQgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYWxsYmFjayBmcm9tIGJlaW5nIGNhbGxlZCB3aGVuIHRoZSBzdWJzY3JpYmUgY29tcGxldGVzLlxuXHRcdCAqIEB0aHJvd3Mge0ludmFsaWRTdGF0ZX0gaWYgdGhlIGNsaWVudCBpcyBub3QgaW4gY29ubmVjdGVkIHN0YXRlLlxuXHRcdCAqL1xuXHRcdFx0dGhpcy5zdWJzY3JpYmUgPSBmdW5jdGlvbiAoZmlsdGVyLCBzdWJzY3JpYmVPcHRpb25zKSB7XG5cdFx0XHRcdGlmICh0eXBlb2YgZmlsdGVyICE9PSBcInN0cmluZ1wiICYmIGZpbHRlci5jb25zdHJ1Y3RvciAhPT0gQXJyYXkpXG5cdFx0XHRcdFx0dGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCBhcmd1bWVudDpcIitmaWx0ZXIpO1xuXHRcdFx0XHRzdWJzY3JpYmVPcHRpb25zID0gc3Vic2NyaWJlT3B0aW9ucyB8fCB7fSA7XG5cdFx0XHRcdHZhbGlkYXRlKHN1YnNjcmliZU9wdGlvbnMsICB7cW9zOlwibnVtYmVyXCIsXG5cdFx0XHRcdFx0aW52b2NhdGlvbkNvbnRleHQ6XCJvYmplY3RcIixcblx0XHRcdFx0XHRvblN1Y2Nlc3M6XCJmdW5jdGlvblwiLFxuXHRcdFx0XHRcdG9uRmFpbHVyZTpcImZ1bmN0aW9uXCIsXG5cdFx0XHRcdFx0dGltZW91dDpcIm51bWJlclwiXG5cdFx0XHRcdH0pO1xuXHRcdFx0XHRpZiAoc3Vic2NyaWJlT3B0aW9ucy50aW1lb3V0ICYmICFzdWJzY3JpYmVPcHRpb25zLm9uRmFpbHVyZSlcblx0XHRcdFx0XHR0aHJvdyBuZXcgRXJyb3IoXCJzdWJzY3JpYmVPcHRpb25zLnRpbWVvdXQgc3BlY2lmaWVkIHdpdGggbm8gb25GYWlsdXJlIGNhbGxiYWNrLlwiKTtcblx0XHRcdFx0aWYgKHR5cGVvZiBzdWJzY3JpYmVPcHRpb25zLnFvcyAhPT0gXCJ1bmRlZmluZWRcIiAmJiAhKHN1YnNjcmliZU9wdGlvbnMucW9zID09PSAwIHx8IHN1YnNjcmliZU9wdGlvbnMucW9zID09PSAxIHx8IHN1YnNjcmliZU9wdGlvbnMucW9zID09PSAyICkpXG5cdFx0XHRcdFx0dGhyb3cgbmV3IEVycm9yKGZvcm1hdChFUlJPUi5JTlZBTElEX0FSR1VNRU5ULCBbc3Vic2NyaWJlT3B0aW9ucy5xb3MsIFwic3Vic2NyaWJlT3B0aW9ucy5xb3NcIl0pKTtcblx0XHRcdFx0Y2xpZW50LnN1YnNjcmliZShmaWx0ZXIsIHN1YnNjcmliZU9wdGlvbnMpO1xuXHRcdFx0fTtcblxuXHRcdC8qKlxuXHRcdCAqIFVuc3Vic2NyaWJlIGZvciBtZXNzYWdlcywgc3RvcCByZWNlaXZpbmcgbWVzc2FnZXMgc2VudCB0byBkZXN0aW5hdGlvbnMgZGVzY3JpYmVkIGJ5IHRoZSBmaWx0ZXIuXG5cdFx0ICpcblx0XHQgKiBAbmFtZSBQYWhvLkNsaWVudCN1bnN1YnNjcmliZVxuXHRcdCAqIEBmdW5jdGlvblxuXHRcdCAqIEBwYXJhbSB7c3RyaW5nfSBmaWx0ZXIgLSBkZXNjcmliaW5nIHRoZSBkZXN0aW5hdGlvbnMgdG8gcmVjZWl2ZSBtZXNzYWdlcyBmcm9tLlxuXHRcdCAqIEBwYXJhbSB7b2JqZWN0fSB1bnN1YnNjcmliZU9wdGlvbnMgLSB1c2VkIHRvIGNvbnRyb2wgdGhlIHN1YnNjcmlwdGlvblxuXHRcdCAqIEBwYXJhbSB7b2JqZWN0fSB1bnN1YnNjcmliZU9wdGlvbnMuaW52b2NhdGlvbkNvbnRleHQgLSBwYXNzZWQgdG8gdGhlIG9uU3VjY2VzcyBjYWxsYmFja1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdCAgb3Igb25GYWlsdXJlIGNhbGxiYWNrLlxuXHRcdCAqIEBwYXJhbSB7ZnVuY3Rpb259IHVuc3Vic2NyaWJlT3B0aW9ucy5vblN1Y2Nlc3MgLSBjYWxsZWQgd2hlbiB0aGUgdW5zdWJzY3JpYmUgYWNrbm93bGVkZ2VtZW50IGhhcyBiZWVuIHJlY2VpdmVkIGZyb20gdGhlIHNlcnZlci5cblx0XHQgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEEgc2luZ2xlIHJlc3BvbnNlIG9iamVjdCBwYXJhbWV0ZXIgaXMgcGFzc2VkIHRvIHRoZVxuXHRcdCAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25TdWNjZXNzIGNhbGxiYWNrIGNvbnRhaW5pbmcgdGhlIGZvbGxvd2luZyBmaWVsZHM6XG5cdFx0ICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8b2w+XG5cdFx0ICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGk+aW52b2NhdGlvbkNvbnRleHQgLSBpZiBzZXQgaW4gdGhlIHVuc3Vic2NyaWJlT3B0aW9ucy5cblx0XHQgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvb2w+XG5cdFx0ICogQHBhcmFtIHtmdW5jdGlvbn0gdW5zdWJzY3JpYmVPcHRpb25zLm9uRmFpbHVyZSBjYWxsZWQgd2hlbiB0aGUgdW5zdWJzY3JpYmUgcmVxdWVzdCBoYXMgZmFpbGVkIG9yIHRpbWVkIG91dC5cblx0XHQgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEEgc2luZ2xlIHJlc3BvbnNlIG9iamVjdCBwYXJhbWV0ZXIgaXMgcGFzc2VkIHRvIHRoZSBvbkZhaWx1cmUgY2FsbGJhY2sgY29udGFpbmluZyB0aGUgZm9sbG93aW5nIGZpZWxkczpcblx0XHQgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxvbD5cblx0XHQgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsaT5pbnZvY2F0aW9uQ29udGV4dCAtIGlmIHNldCBpbiB0aGUgdW5zdWJzY3JpYmVPcHRpb25zLlxuXHRcdCAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxpPmVycm9yQ29kZSAtIGEgbnVtYmVyIGluZGljYXRpbmcgdGhlIG5hdHVyZSBvZiB0aGUgZXJyb3IuXG5cdFx0ICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGk+ZXJyb3JNZXNzYWdlIC0gdGV4dCBkZXNjcmliaW5nIHRoZSBlcnJvci5cblx0XHQgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvb2w+XG5cdFx0ICogQHBhcmFtIHtudW1iZXJ9IHVuc3Vic2NyaWJlT3B0aW9ucy50aW1lb3V0IC0gd2hpY2gsIGlmIHByZXNlbnQsIGRldGVybWluZXMgdGhlIG51bWJlciBvZiBzZWNvbmRzXG5cdFx0ICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhZnRlciB3aGljaCB0aGUgb25GYWlsdXJlIGNhbGxiYWNrIGlzIGNhbGxlZC4gVGhlIHByZXNlbmNlIG9mXG5cdFx0ICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhIHRpbWVvdXQgZG9lcyBub3QgcHJldmVudCB0aGUgb25TdWNjZXNzIGNhbGxiYWNrIGZyb20gYmVpbmdcblx0XHQgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhbGxlZCB3aGVuIHRoZSB1bnN1YnNjcmliZSBjb21wbGV0ZXNcblx0XHQgKiBAdGhyb3dzIHtJbnZhbGlkU3RhdGV9IGlmIHRoZSBjbGllbnQgaXMgbm90IGluIGNvbm5lY3RlZCBzdGF0ZS5cblx0XHQgKi9cblx0XHRcdHRoaXMudW5zdWJzY3JpYmUgPSBmdW5jdGlvbiAoZmlsdGVyLCB1bnN1YnNjcmliZU9wdGlvbnMpIHtcblx0XHRcdFx0aWYgKHR5cGVvZiBmaWx0ZXIgIT09IFwic3RyaW5nXCIgJiYgZmlsdGVyLmNvbnN0cnVjdG9yICE9PSBBcnJheSlcblx0XHRcdFx0XHR0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIGFyZ3VtZW50OlwiK2ZpbHRlcik7XG5cdFx0XHRcdHVuc3Vic2NyaWJlT3B0aW9ucyA9IHVuc3Vic2NyaWJlT3B0aW9ucyB8fCB7fSA7XG5cdFx0XHRcdHZhbGlkYXRlKHVuc3Vic2NyaWJlT3B0aW9ucywgIHtpbnZvY2F0aW9uQ29udGV4dDpcIm9iamVjdFwiLFxuXHRcdFx0XHRcdG9uU3VjY2VzczpcImZ1bmN0aW9uXCIsXG5cdFx0XHRcdFx0b25GYWlsdXJlOlwiZnVuY3Rpb25cIixcblx0XHRcdFx0XHR0aW1lb3V0OlwibnVtYmVyXCJcblx0XHRcdFx0fSk7XG5cdFx0XHRcdGlmICh1bnN1YnNjcmliZU9wdGlvbnMudGltZW91dCAmJiAhdW5zdWJzY3JpYmVPcHRpb25zLm9uRmFpbHVyZSlcblx0XHRcdFx0XHR0aHJvdyBuZXcgRXJyb3IoXCJ1bnN1YnNjcmliZU9wdGlvbnMudGltZW91dCBzcGVjaWZpZWQgd2l0aCBubyBvbkZhaWx1cmUgY2FsbGJhY2suXCIpO1xuXHRcdFx0XHRjbGllbnQudW5zdWJzY3JpYmUoZmlsdGVyLCB1bnN1YnNjcmliZU9wdGlvbnMpO1xuXHRcdFx0fTtcblxuXHRcdFx0LyoqXG5cdFx0ICogU2VuZCBhIG1lc3NhZ2UgdG8gdGhlIGNvbnN1bWVycyBvZiB0aGUgZGVzdGluYXRpb24gaW4gdGhlIE1lc3NhZ2UuXG5cdFx0ICpcblx0XHQgKiBAbmFtZSBQYWhvLkNsaWVudCNzZW5kXG5cdFx0ICogQGZ1bmN0aW9uXG5cdFx0ICogQHBhcmFtIHtzdHJpbmd8UGFoby5NZXNzYWdlfSB0b3BpYyAtIDxiPm1hbmRhdG9yeTwvYj4gVGhlIG5hbWUgb2YgdGhlIGRlc3RpbmF0aW9uIHRvIHdoaWNoIHRoZSBtZXNzYWdlIGlzIHRvIGJlIHNlbnQuXG5cdFx0ICogXHRcdFx0XHRcdCAgIC0gSWYgaXQgaXMgdGhlIG9ubHkgcGFyYW1ldGVyLCB1c2VkIGFzIFBhaG8uTWVzc2FnZSBvYmplY3QuXG5cdFx0ICogQHBhcmFtIHtTdHJpbmd8QXJyYXlCdWZmZXJ9IHBheWxvYWQgLSBUaGUgbWVzc2FnZSBkYXRhIHRvIGJlIHNlbnQuXG5cdFx0ICogQHBhcmFtIHtudW1iZXJ9IHFvcyBUaGUgUXVhbGl0eSBvZiBTZXJ2aWNlIHVzZWQgdG8gZGVsaXZlciB0aGUgbWVzc2FnZS5cblx0XHQgKiBcdFx0PGRsPlxuXHRcdCAqIFx0XHRcdDxkdD4wIEJlc3QgZWZmb3J0IChkZWZhdWx0KS5cblx0XHQgKiAgICAgXHRcdFx0PGR0PjEgQXQgbGVhc3Qgb25jZS5cblx0XHQgKiAgICAgXHRcdFx0PGR0PjIgRXhhY3RseSBvbmNlLlxuXHRcdCAqIFx0XHQ8L2RsPlxuXHRcdCAqIEBwYXJhbSB7Qm9vbGVhbn0gcmV0YWluZWQgSWYgdHJ1ZSwgdGhlIG1lc3NhZ2UgaXMgdG8gYmUgcmV0YWluZWQgYnkgdGhlIHNlcnZlciBhbmQgZGVsaXZlcmVkXG5cdFx0ICogICAgICAgICAgICAgICAgICAgICB0byBib3RoIGN1cnJlbnQgYW5kIGZ1dHVyZSBzdWJzY3JpcHRpb25zLlxuXHRcdCAqICAgICAgICAgICAgICAgICAgICAgSWYgZmFsc2UgdGhlIHNlcnZlciBvbmx5IGRlbGl2ZXJzIHRoZSBtZXNzYWdlIHRvIGN1cnJlbnQgc3Vic2NyaWJlcnMsIHRoaXMgaXMgdGhlIGRlZmF1bHQgZm9yIG5ldyBNZXNzYWdlcy5cblx0XHQgKiAgICAgICAgICAgICAgICAgICAgIEEgcmVjZWl2ZWQgbWVzc2FnZSBoYXMgdGhlIHJldGFpbmVkIGJvb2xlYW4gc2V0IHRvIHRydWUgaWYgdGhlIG1lc3NhZ2Ugd2FzIHB1Ymxpc2hlZFxuXHRcdCAqICAgICAgICAgICAgICAgICAgICAgd2l0aCB0aGUgcmV0YWluZWQgYm9vbGVhbiBzZXQgdG8gdHJ1ZVxuXHRcdCAqICAgICAgICAgICAgICAgICAgICAgYW5kIHRoZSBzdWJzY3JwdGlvbiB3YXMgbWFkZSBhZnRlciB0aGUgbWVzc2FnZSBoYXMgYmVlbiBwdWJsaXNoZWQuXG5cdFx0ICogQHRocm93cyB7SW52YWxpZFN0YXRlfSBpZiB0aGUgY2xpZW50IGlzIG5vdCBjb25uZWN0ZWQuXG5cdFx0ICovXG5cdFx0XHR0aGlzLnNlbmQgPSBmdW5jdGlvbiAodG9waWMscGF5bG9hZCxxb3MscmV0YWluZWQpIHtcblx0XHRcdFx0dmFyIG1lc3NhZ2UgO1xuXG5cdFx0XHRcdGlmKGFyZ3VtZW50cy5sZW5ndGggPT09IDApe1xuXHRcdFx0XHRcdHRocm93IG5ldyBFcnJvcihcIkludmFsaWQgYXJndW1lbnQuXCIrXCJsZW5ndGhcIik7XG5cblx0XHRcdFx0fWVsc2UgaWYoYXJndW1lbnRzLmxlbmd0aCA9PSAxKSB7XG5cblx0XHRcdFx0XHRpZiAoISh0b3BpYyBpbnN0YW5jZW9mIE1lc3NhZ2UpICYmICh0eXBlb2YgdG9waWMgIT09IFwic3RyaW5nXCIpKVxuXHRcdFx0XHRcdFx0dGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCBhcmd1bWVudDpcIisgdHlwZW9mIHRvcGljKTtcblxuXHRcdFx0XHRcdG1lc3NhZ2UgPSB0b3BpYztcblx0XHRcdFx0XHRpZiAodHlwZW9mIG1lc3NhZ2UuZGVzdGluYXRpb25OYW1lID09PSBcInVuZGVmaW5lZFwiKVxuXHRcdFx0XHRcdFx0dGhyb3cgbmV3IEVycm9yKGZvcm1hdChFUlJPUi5JTlZBTElEX0FSR1VNRU5ULFttZXNzYWdlLmRlc3RpbmF0aW9uTmFtZSxcIk1lc3NhZ2UuZGVzdGluYXRpb25OYW1lXCJdKSk7XG5cdFx0XHRcdFx0Y2xpZW50LnNlbmQobWVzc2FnZSk7XG5cblx0XHRcdFx0fWVsc2Uge1xuXHRcdFx0XHQvL3BhcmFtZXRlciBjaGVja2luZyBpbiBNZXNzYWdlIG9iamVjdFxuXHRcdFx0XHRcdG1lc3NhZ2UgPSBuZXcgTWVzc2FnZShwYXlsb2FkKTtcblx0XHRcdFx0XHRtZXNzYWdlLmRlc3RpbmF0aW9uTmFtZSA9IHRvcGljO1xuXHRcdFx0XHRcdGlmKGFyZ3VtZW50cy5sZW5ndGggPj0gMylcblx0XHRcdFx0XHRcdG1lc3NhZ2UucW9zID0gcW9zO1xuXHRcdFx0XHRcdGlmKGFyZ3VtZW50cy5sZW5ndGggPj0gNClcblx0XHRcdFx0XHRcdG1lc3NhZ2UucmV0YWluZWQgPSByZXRhaW5lZDtcblx0XHRcdFx0XHRjbGllbnQuc2VuZChtZXNzYWdlKTtcblx0XHRcdFx0fVxuXHRcdFx0fTtcblxuXHRcdFx0LyoqXG5cdFx0ICogUHVibGlzaCBhIG1lc3NhZ2UgdG8gdGhlIGNvbnN1bWVycyBvZiB0aGUgZGVzdGluYXRpb24gaW4gdGhlIE1lc3NhZ2UuXG5cdFx0ICogU3lub255bSBmb3IgUGFoby5NcXR0LkNsaWVudCNzZW5kXG5cdFx0ICpcblx0XHQgKiBAbmFtZSBQYWhvLkNsaWVudCNwdWJsaXNoXG5cdFx0ICogQGZ1bmN0aW9uXG5cdFx0ICogQHBhcmFtIHtzdHJpbmd8UGFoby5NZXNzYWdlfSB0b3BpYyAtIDxiPm1hbmRhdG9yeTwvYj4gVGhlIG5hbWUgb2YgdGhlIHRvcGljIHRvIHdoaWNoIHRoZSBtZXNzYWdlIGlzIHRvIGJlIHB1Ymxpc2hlZC5cblx0XHQgKiBcdFx0XHRcdFx0ICAgLSBJZiBpdCBpcyB0aGUgb25seSBwYXJhbWV0ZXIsIHVzZWQgYXMgUGFoby5NZXNzYWdlIG9iamVjdC5cblx0XHQgKiBAcGFyYW0ge1N0cmluZ3xBcnJheUJ1ZmZlcn0gcGF5bG9hZCAtIFRoZSBtZXNzYWdlIGRhdGEgdG8gYmUgcHVibGlzaGVkLlxuXHRcdCAqIEBwYXJhbSB7bnVtYmVyfSBxb3MgVGhlIFF1YWxpdHkgb2YgU2VydmljZSB1c2VkIHRvIGRlbGl2ZXIgdGhlIG1lc3NhZ2UuXG5cdFx0ICogXHRcdDxkbD5cblx0XHQgKiBcdFx0XHQ8ZHQ+MCBCZXN0IGVmZm9ydCAoZGVmYXVsdCkuXG5cdFx0ICogICAgIFx0XHRcdDxkdD4xIEF0IGxlYXN0IG9uY2UuXG5cdFx0ICogICAgIFx0XHRcdDxkdD4yIEV4YWN0bHkgb25jZS5cblx0XHQgKiBcdFx0PC9kbD5cblx0XHQgKiBAcGFyYW0ge0Jvb2xlYW59IHJldGFpbmVkIElmIHRydWUsIHRoZSBtZXNzYWdlIGlzIHRvIGJlIHJldGFpbmVkIGJ5IHRoZSBzZXJ2ZXIgYW5kIGRlbGl2ZXJlZFxuXHRcdCAqICAgICAgICAgICAgICAgICAgICAgdG8gYm90aCBjdXJyZW50IGFuZCBmdXR1cmUgc3Vic2NyaXB0aW9ucy5cblx0XHQgKiAgICAgICAgICAgICAgICAgICAgIElmIGZhbHNlIHRoZSBzZXJ2ZXIgb25seSBkZWxpdmVycyB0aGUgbWVzc2FnZSB0byBjdXJyZW50IHN1YnNjcmliZXJzLCB0aGlzIGlzIHRoZSBkZWZhdWx0IGZvciBuZXcgTWVzc2FnZXMuXG5cdFx0ICogICAgICAgICAgICAgICAgICAgICBBIHJlY2VpdmVkIG1lc3NhZ2UgaGFzIHRoZSByZXRhaW5lZCBib29sZWFuIHNldCB0byB0cnVlIGlmIHRoZSBtZXNzYWdlIHdhcyBwdWJsaXNoZWRcblx0XHQgKiAgICAgICAgICAgICAgICAgICAgIHdpdGggdGhlIHJldGFpbmVkIGJvb2xlYW4gc2V0IHRvIHRydWVcblx0XHQgKiAgICAgICAgICAgICAgICAgICAgIGFuZCB0aGUgc3Vic2NycHRpb24gd2FzIG1hZGUgYWZ0ZXIgdGhlIG1lc3NhZ2UgaGFzIGJlZW4gcHVibGlzaGVkLlxuXHRcdCAqIEB0aHJvd3Mge0ludmFsaWRTdGF0ZX0gaWYgdGhlIGNsaWVudCBpcyBub3QgY29ubmVjdGVkLlxuXHRcdCAqL1xuXHRcdFx0dGhpcy5wdWJsaXNoID0gZnVuY3Rpb24odG9waWMscGF5bG9hZCxxb3MscmV0YWluZWQpIHtcblx0XHRcdFx0dmFyIG1lc3NhZ2UgO1xuXG5cdFx0XHRcdGlmKGFyZ3VtZW50cy5sZW5ndGggPT09IDApe1xuXHRcdFx0XHRcdHRocm93IG5ldyBFcnJvcihcIkludmFsaWQgYXJndW1lbnQuXCIrXCJsZW5ndGhcIik7XG5cblx0XHRcdFx0fWVsc2UgaWYoYXJndW1lbnRzLmxlbmd0aCA9PSAxKSB7XG5cblx0XHRcdFx0XHRpZiAoISh0b3BpYyBpbnN0YW5jZW9mIE1lc3NhZ2UpICYmICh0eXBlb2YgdG9waWMgIT09IFwic3RyaW5nXCIpKVxuXHRcdFx0XHRcdFx0dGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCBhcmd1bWVudDpcIisgdHlwZW9mIHRvcGljKTtcblxuXHRcdFx0XHRcdG1lc3NhZ2UgPSB0b3BpYztcblx0XHRcdFx0XHRpZiAodHlwZW9mIG1lc3NhZ2UuZGVzdGluYXRpb25OYW1lID09PSBcInVuZGVmaW5lZFwiKVxuXHRcdFx0XHRcdFx0dGhyb3cgbmV3IEVycm9yKGZvcm1hdChFUlJPUi5JTlZBTElEX0FSR1VNRU5ULFttZXNzYWdlLmRlc3RpbmF0aW9uTmFtZSxcIk1lc3NhZ2UuZGVzdGluYXRpb25OYW1lXCJdKSk7XG5cdFx0XHRcdFx0Y2xpZW50LnNlbmQobWVzc2FnZSk7XG5cblx0XHRcdFx0fWVsc2Uge1xuXHRcdFx0XHRcdC8vcGFyYW1ldGVyIGNoZWNraW5nIGluIE1lc3NhZ2Ugb2JqZWN0XG5cdFx0XHRcdFx0bWVzc2FnZSA9IG5ldyBNZXNzYWdlKHBheWxvYWQpO1xuXHRcdFx0XHRcdG1lc3NhZ2UuZGVzdGluYXRpb25OYW1lID0gdG9waWM7XG5cdFx0XHRcdFx0aWYoYXJndW1lbnRzLmxlbmd0aCA+PSAzKVxuXHRcdFx0XHRcdFx0bWVzc2FnZS5xb3MgPSBxb3M7XG5cdFx0XHRcdFx0aWYoYXJndW1lbnRzLmxlbmd0aCA+PSA0KVxuXHRcdFx0XHRcdFx0bWVzc2FnZS5yZXRhaW5lZCA9IHJldGFpbmVkO1xuXHRcdFx0XHRcdGNsaWVudC5zZW5kKG1lc3NhZ2UpO1xuXHRcdFx0XHR9XG5cdFx0XHR9O1xuXG5cdFx0XHQvKipcblx0XHQgKiBOb3JtYWwgZGlzY29ubmVjdCBvZiB0aGlzIE1lc3NhZ2luZyBjbGllbnQgZnJvbSBpdHMgc2VydmVyLlxuXHRcdCAqXG5cdFx0ICogQG5hbWUgUGFoby5DbGllbnQjZGlzY29ubmVjdFxuXHRcdCAqIEBmdW5jdGlvblxuXHRcdCAqIEB0aHJvd3Mge0ludmFsaWRTdGF0ZX0gaWYgdGhlIGNsaWVudCBpcyBhbHJlYWR5IGRpc2Nvbm5lY3RlZC5cblx0XHQgKi9cblx0XHRcdHRoaXMuZGlzY29ubmVjdCA9IGZ1bmN0aW9uICgpIHtcblx0XHRcdFx0Y2xpZW50LmRpc2Nvbm5lY3QoKTtcblx0XHRcdH07XG5cblx0XHRcdC8qKlxuXHRcdCAqIEdldCB0aGUgY29udGVudHMgb2YgdGhlIHRyYWNlIGxvZy5cblx0XHQgKlxuXHRcdCAqIEBuYW1lIFBhaG8uQ2xpZW50I2dldFRyYWNlTG9nXG5cdFx0ICogQGZ1bmN0aW9uXG5cdFx0ICogQHJldHVybiB7T2JqZWN0W119IHRyYWNlYnVmZmVyIGNvbnRhaW5pbmcgdGhlIHRpbWUgb3JkZXJlZCB0cmFjZSByZWNvcmRzLlxuXHRcdCAqL1xuXHRcdFx0dGhpcy5nZXRUcmFjZUxvZyA9IGZ1bmN0aW9uICgpIHtcblx0XHRcdFx0cmV0dXJuIGNsaWVudC5nZXRUcmFjZUxvZygpO1xuXHRcdFx0fTtcblxuXHRcdFx0LyoqXG5cdFx0ICogU3RhcnQgdHJhY2luZy5cblx0XHQgKlxuXHRcdCAqIEBuYW1lIFBhaG8uQ2xpZW50I3N0YXJ0VHJhY2Vcblx0XHQgKiBAZnVuY3Rpb25cblx0XHQgKi9cblx0XHRcdHRoaXMuc3RhcnRUcmFjZSA9IGZ1bmN0aW9uICgpIHtcblx0XHRcdFx0Y2xpZW50LnN0YXJ0VHJhY2UoKTtcblx0XHRcdH07XG5cblx0XHRcdC8qKlxuXHRcdCAqIFN0b3AgdHJhY2luZy5cblx0XHQgKlxuXHRcdCAqIEBuYW1lIFBhaG8uQ2xpZW50I3N0b3BUcmFjZVxuXHRcdCAqIEBmdW5jdGlvblxuXHRcdCAqL1xuXHRcdFx0dGhpcy5zdG9wVHJhY2UgPSBmdW5jdGlvbiAoKSB7XG5cdFx0XHRcdGNsaWVudC5zdG9wVHJhY2UoKTtcblx0XHRcdH07XG5cblx0XHRcdHRoaXMuaXNDb25uZWN0ZWQgPSBmdW5jdGlvbigpIHtcblx0XHRcdFx0cmV0dXJuIGNsaWVudC5jb25uZWN0ZWQ7XG5cdFx0XHR9O1xuXHRcdH07XG5cblx0XHQvKipcblx0ICogQW4gYXBwbGljYXRpb24gbWVzc2FnZSwgc2VudCBvciByZWNlaXZlZC5cblx0ICogPHA+XG5cdCAqIEFsbCBhdHRyaWJ1dGVzIG1heSBiZSBudWxsLCB3aGljaCBpbXBsaWVzIHRoZSBkZWZhdWx0IHZhbHVlcy5cblx0ICpcblx0ICogQG5hbWUgUGFoby5NZXNzYWdlXG5cdCAqIEBjb25zdHJ1Y3RvclxuXHQgKiBAcGFyYW0ge1N0cmluZ3xBcnJheUJ1ZmZlcn0gcGF5bG9hZCBUaGUgbWVzc2FnZSBkYXRhIHRvIGJlIHNlbnQuXG5cdCAqIDxwPlxuXHQgKiBAcHJvcGVydHkge3N0cmluZ30gcGF5bG9hZFN0cmluZyA8aT5yZWFkIG9ubHk8L2k+IFRoZSBwYXlsb2FkIGFzIGEgc3RyaW5nIGlmIHRoZSBwYXlsb2FkIGNvbnNpc3RzIG9mIHZhbGlkIFVURi04IGNoYXJhY3RlcnMuXG5cdCAqIEBwcm9wZXJ0eSB7QXJyYXlCdWZmZXJ9IHBheWxvYWRCeXRlcyA8aT5yZWFkIG9ubHk8L2k+IFRoZSBwYXlsb2FkIGFzIGFuIEFycmF5QnVmZmVyLlxuXHQgKiA8cD5cblx0ICogQHByb3BlcnR5IHtzdHJpbmd9IGRlc3RpbmF0aW9uTmFtZSA8Yj5tYW5kYXRvcnk8L2I+IFRoZSBuYW1lIG9mIHRoZSBkZXN0aW5hdGlvbiB0byB3aGljaCB0aGUgbWVzc2FnZSBpcyB0byBiZSBzZW50XG5cdCAqICAgICAgICAgICAgICAgICAgICAoZm9yIG1lc3NhZ2VzIGFib3V0IHRvIGJlIHNlbnQpIG9yIHRoZSBuYW1lIG9mIHRoZSBkZXN0aW5hdGlvbiBmcm9tIHdoaWNoIHRoZSBtZXNzYWdlIGhhcyBiZWVuIHJlY2VpdmVkLlxuXHQgKiAgICAgICAgICAgICAgICAgICAgKGZvciBtZXNzYWdlcyByZWNlaXZlZCBieSB0aGUgb25NZXNzYWdlIGZ1bmN0aW9uKS5cblx0ICogPHA+XG5cdCAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBxb3MgVGhlIFF1YWxpdHkgb2YgU2VydmljZSB1c2VkIHRvIGRlbGl2ZXIgdGhlIG1lc3NhZ2UuXG5cdCAqIDxkbD5cblx0ICogICAgIDxkdD4wIEJlc3QgZWZmb3J0IChkZWZhdWx0KS5cblx0ICogICAgIDxkdD4xIEF0IGxlYXN0IG9uY2UuXG5cdCAqICAgICA8ZHQ+MiBFeGFjdGx5IG9uY2UuXG5cdCAqIDwvZGw+XG5cdCAqIDxwPlxuXHQgKiBAcHJvcGVydHkge0Jvb2xlYW59IHJldGFpbmVkIElmIHRydWUsIHRoZSBtZXNzYWdlIGlzIHRvIGJlIHJldGFpbmVkIGJ5IHRoZSBzZXJ2ZXIgYW5kIGRlbGl2ZXJlZFxuXHQgKiAgICAgICAgICAgICAgICAgICAgIHRvIGJvdGggY3VycmVudCBhbmQgZnV0dXJlIHN1YnNjcmlwdGlvbnMuXG5cdCAqICAgICAgICAgICAgICAgICAgICAgSWYgZmFsc2UgdGhlIHNlcnZlciBvbmx5IGRlbGl2ZXJzIHRoZSBtZXNzYWdlIHRvIGN1cnJlbnQgc3Vic2NyaWJlcnMsIHRoaXMgaXMgdGhlIGRlZmF1bHQgZm9yIG5ldyBNZXNzYWdlcy5cblx0ICogICAgICAgICAgICAgICAgICAgICBBIHJlY2VpdmVkIG1lc3NhZ2UgaGFzIHRoZSByZXRhaW5lZCBib29sZWFuIHNldCB0byB0cnVlIGlmIHRoZSBtZXNzYWdlIHdhcyBwdWJsaXNoZWRcblx0ICogICAgICAgICAgICAgICAgICAgICB3aXRoIHRoZSByZXRhaW5lZCBib29sZWFuIHNldCB0byB0cnVlXG5cdCAqICAgICAgICAgICAgICAgICAgICAgYW5kIHRoZSBzdWJzY3JwdGlvbiB3YXMgbWFkZSBhZnRlciB0aGUgbWVzc2FnZSBoYXMgYmVlbiBwdWJsaXNoZWQuXG5cdCAqIDxwPlxuXHQgKiBAcHJvcGVydHkge0Jvb2xlYW59IGR1cGxpY2F0ZSA8aT5yZWFkIG9ubHk8L2k+IElmIHRydWUsIHRoaXMgbWVzc2FnZSBtaWdodCBiZSBhIGR1cGxpY2F0ZSBvZiBvbmUgd2hpY2ggaGFzIGFscmVhZHkgYmVlbiByZWNlaXZlZC5cblx0ICogICAgICAgICAgICAgICAgICAgICBUaGlzIGlzIG9ubHkgc2V0IG9uIG1lc3NhZ2VzIHJlY2VpdmVkIGZyb20gdGhlIHNlcnZlci5cblx0ICpcblx0ICovXG5cdFx0dmFyIE1lc3NhZ2UgPSBmdW5jdGlvbiAobmV3UGF5bG9hZCkge1xuXHRcdFx0dmFyIHBheWxvYWQ7XG5cdFx0XHRpZiAoICAgdHlwZW9mIG5ld1BheWxvYWQgPT09IFwic3RyaW5nXCIgfHxcblx0XHRuZXdQYXlsb2FkIGluc3RhbmNlb2YgQXJyYXlCdWZmZXIgfHxcblx0XHQoQXJyYXlCdWZmZXIuaXNWaWV3KG5ld1BheWxvYWQpICYmICEobmV3UGF5bG9hZCBpbnN0YW5jZW9mIERhdGFWaWV3KSlcblx0XHRcdCkge1xuXHRcdFx0XHRwYXlsb2FkID0gbmV3UGF5bG9hZDtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHRocm93IChmb3JtYXQoRVJST1IuSU5WQUxJRF9BUkdVTUVOVCwgW25ld1BheWxvYWQsIFwibmV3UGF5bG9hZFwiXSkpO1xuXHRcdFx0fVxuXG5cdFx0XHR2YXIgZGVzdGluYXRpb25OYW1lO1xuXHRcdFx0dmFyIHFvcyA9IDA7XG5cdFx0XHR2YXIgcmV0YWluZWQgPSBmYWxzZTtcblx0XHRcdHZhciBkdXBsaWNhdGUgPSBmYWxzZTtcblxuXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnRpZXModGhpcyx7XG5cdFx0XHRcdFwicGF5bG9hZFN0cmluZ1wiOntcblx0XHRcdFx0XHRlbnVtZXJhYmxlIDogdHJ1ZSxcblx0XHRcdFx0XHRnZXQgOiBmdW5jdGlvbiAoKSB7XG5cdFx0XHRcdFx0XHRpZiAodHlwZW9mIHBheWxvYWQgPT09IFwic3RyaW5nXCIpXG5cdFx0XHRcdFx0XHRcdHJldHVybiBwYXlsb2FkO1xuXHRcdFx0XHRcdFx0ZWxzZVxuXHRcdFx0XHRcdFx0XHRyZXR1cm4gcGFyc2VVVEY4KHBheWxvYWQsIDAsIHBheWxvYWQubGVuZ3RoKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0sXG5cdFx0XHRcdFwicGF5bG9hZEJ5dGVzXCI6e1xuXHRcdFx0XHRcdGVudW1lcmFibGU6IHRydWUsXG5cdFx0XHRcdFx0Z2V0OiBmdW5jdGlvbigpIHtcblx0XHRcdFx0XHRcdGlmICh0eXBlb2YgcGF5bG9hZCA9PT0gXCJzdHJpbmdcIikge1xuXHRcdFx0XHRcdFx0XHR2YXIgYnVmZmVyID0gbmV3IEFycmF5QnVmZmVyKFVURjhMZW5ndGgocGF5bG9hZCkpO1xuXHRcdFx0XHRcdFx0XHR2YXIgYnl0ZVN0cmVhbSA9IG5ldyBVaW50OEFycmF5KGJ1ZmZlcik7XG5cdFx0XHRcdFx0XHRcdHN0cmluZ1RvVVRGOChwYXlsb2FkLCBieXRlU3RyZWFtLCAwKTtcblxuXHRcdFx0XHRcdFx0XHRyZXR1cm4gYnl0ZVN0cmVhbTtcblx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRcdHJldHVybiBwYXlsb2FkO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSxcblx0XHRcdFx0XCJkZXN0aW5hdGlvbk5hbWVcIjp7XG5cdFx0XHRcdFx0ZW51bWVyYWJsZTogdHJ1ZSxcblx0XHRcdFx0XHRnZXQ6IGZ1bmN0aW9uKCkgeyByZXR1cm4gZGVzdGluYXRpb25OYW1lOyB9LFxuXHRcdFx0XHRcdHNldDogZnVuY3Rpb24obmV3RGVzdGluYXRpb25OYW1lKSB7XG5cdFx0XHRcdFx0XHRpZiAodHlwZW9mIG5ld0Rlc3RpbmF0aW9uTmFtZSA9PT0gXCJzdHJpbmdcIilcblx0XHRcdFx0XHRcdFx0ZGVzdGluYXRpb25OYW1lID0gbmV3RGVzdGluYXRpb25OYW1lO1xuXHRcdFx0XHRcdFx0ZWxzZVxuXHRcdFx0XHRcdFx0XHR0aHJvdyBuZXcgRXJyb3IoZm9ybWF0KEVSUk9SLklOVkFMSURfQVJHVU1FTlQsIFtuZXdEZXN0aW5hdGlvbk5hbWUsIFwibmV3RGVzdGluYXRpb25OYW1lXCJdKSk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9LFxuXHRcdFx0XHRcInFvc1wiOntcblx0XHRcdFx0XHRlbnVtZXJhYmxlOiB0cnVlLFxuXHRcdFx0XHRcdGdldDogZnVuY3Rpb24oKSB7IHJldHVybiBxb3M7IH0sXG5cdFx0XHRcdFx0c2V0OiBmdW5jdGlvbihuZXdRb3MpIHtcblx0XHRcdFx0XHRcdGlmIChuZXdRb3MgPT09IDAgfHwgbmV3UW9zID09PSAxIHx8IG5ld1FvcyA9PT0gMiApXG5cdFx0XHRcdFx0XHRcdHFvcyA9IG5ld1Fvcztcblx0XHRcdFx0XHRcdGVsc2Vcblx0XHRcdFx0XHRcdFx0dGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCBhcmd1bWVudDpcIituZXdRb3MpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSxcblx0XHRcdFx0XCJyZXRhaW5lZFwiOntcblx0XHRcdFx0XHRlbnVtZXJhYmxlOiB0cnVlLFxuXHRcdFx0XHRcdGdldDogZnVuY3Rpb24oKSB7IHJldHVybiByZXRhaW5lZDsgfSxcblx0XHRcdFx0XHRzZXQ6IGZ1bmN0aW9uKG5ld1JldGFpbmVkKSB7XG5cdFx0XHRcdFx0XHRpZiAodHlwZW9mIG5ld1JldGFpbmVkID09PSBcImJvb2xlYW5cIilcblx0XHRcdFx0XHRcdFx0cmV0YWluZWQgPSBuZXdSZXRhaW5lZDtcblx0XHRcdFx0XHRcdGVsc2Vcblx0XHRcdFx0XHRcdFx0dGhyb3cgbmV3IEVycm9yKGZvcm1hdChFUlJPUi5JTlZBTElEX0FSR1VNRU5ULCBbbmV3UmV0YWluZWQsIFwibmV3UmV0YWluZWRcIl0pKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0sXG5cdFx0XHRcdFwidG9waWNcIjp7XG5cdFx0XHRcdFx0ZW51bWVyYWJsZTogdHJ1ZSxcblx0XHRcdFx0XHRnZXQ6IGZ1bmN0aW9uKCkgeyByZXR1cm4gZGVzdGluYXRpb25OYW1lOyB9LFxuXHRcdFx0XHRcdHNldDogZnVuY3Rpb24obmV3VG9waWMpIHtkZXN0aW5hdGlvbk5hbWU9bmV3VG9waWM7fVxuXHRcdFx0XHR9LFxuXHRcdFx0XHRcImR1cGxpY2F0ZVwiOntcblx0XHRcdFx0XHRlbnVtZXJhYmxlOiB0cnVlLFxuXHRcdFx0XHRcdGdldDogZnVuY3Rpb24oKSB7IHJldHVybiBkdXBsaWNhdGU7IH0sXG5cdFx0XHRcdFx0c2V0OiBmdW5jdGlvbihuZXdEdXBsaWNhdGUpIHtkdXBsaWNhdGU9bmV3RHVwbGljYXRlO31cblx0XHRcdFx0fVxuXHRcdFx0fSk7XG5cdFx0fTtcblxuXHRcdC8vIE1vZHVsZSBjb250ZW50cy5cblx0XHRyZXR1cm4ge1xuXHRcdFx0Q2xpZW50OiBDbGllbnQsXG5cdFx0XHRNZXNzYWdlOiBNZXNzYWdlXG5cdFx0fTtcblx0Ly8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLW5lc3RlZC10ZXJuYXJ5XG5cdH0pKHR5cGVvZiBnbG9iYWwgIT09IFwidW5kZWZpbmVkXCIgPyBnbG9iYWwgOiB0eXBlb2Ygc2VsZiAhPT0gXCJ1bmRlZmluZWRcIiA/IHNlbGYgOiB0eXBlb2Ygd2luZG93ICE9PSBcInVuZGVmaW5lZFwiID8gd2luZG93IDoge30pO1xuXHRyZXR1cm4gUGFob01RVFQ7XG59KTtcbiJdLCJzb3VyY2VSb290IjoiIn0=