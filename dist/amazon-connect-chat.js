!function(e){var t={};function n(o){if(t[o])return t[o].exports;var r=t[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(o,r,function(t){return e[t]}.bind(null,r));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=4)}([function(e,t,n){var o;!function(){"use strict";var r={not_string:/[^s]/,not_bool:/[^t]/,not_type:/[^T]/,not_primitive:/[^v]/,number:/[diefg]/,numeric_arg:/[bcdiefguxX]/,json:/[j]/,not_json:/[^j]/,text:/^[^\x25]+/,modulo:/^\x25{2}/,placeholder:/^\x25(?:([1-9]\d*)\$|\(([^)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-gijostTuvxX])/,key:/^([a-z_][a-z_\d]*)/i,key_access:/^\.([a-z_][a-z_\d]*)/i,index_access:/^\[(\d+)\]/,sign:/^[+-]/};function i(e){return function(e,t){var n,o,s,c,a,u,l,f,h,p=1,d=e.length,g="";for(o=0;o<d;o++)if("string"==typeof e[o])g+=e[o];else if("object"==typeof e[o]){if((c=e[o]).keys)for(n=t[p],s=0;s<c.keys.length;s++){if(null==n)throw new Error(i('[sprintf] Cannot access property "%s" of undefined value "%s"',c.keys[s],c.keys[s-1]));n=n[c.keys[s]]}else n=c.param_no?t[c.param_no]:t[p++];if(r.not_type.test(c.type)&&r.not_primitive.test(c.type)&&n instanceof Function&&(n=n()),r.numeric_arg.test(c.type)&&"number"!=typeof n&&isNaN(n))throw new TypeError(i("[sprintf] expecting number but found %T",n));switch(r.number.test(c.type)&&(f=n>=0),c.type){case"b":n=parseInt(n,10).toString(2);break;case"c":n=String.fromCharCode(parseInt(n,10));break;case"d":case"i":n=parseInt(n,10);break;case"j":n=JSON.stringify(n,null,c.width?parseInt(c.width):0);break;case"e":n=c.precision?parseFloat(n).toExponential(c.precision):parseFloat(n).toExponential();break;case"f":n=c.precision?parseFloat(n).toFixed(c.precision):parseFloat(n);break;case"g":n=c.precision?String(Number(n.toPrecision(c.precision))):parseFloat(n);break;case"o":n=(parseInt(n,10)>>>0).toString(8);break;case"s":n=String(n),n=c.precision?n.substring(0,c.precision):n;break;case"t":n=String(!!n),n=c.precision?n.substring(0,c.precision):n;break;case"T":n=Object.prototype.toString.call(n).slice(8,-1).toLowerCase(),n=c.precision?n.substring(0,c.precision):n;break;case"u":n=parseInt(n,10)>>>0;break;case"v":n=n.valueOf(),n=c.precision?n.substring(0,c.precision):n;break;case"x":n=(parseInt(n,10)>>>0).toString(16);break;case"X":n=(parseInt(n,10)>>>0).toString(16).toUpperCase()}r.json.test(c.type)?g+=n:(!r.number.test(c.type)||f&&!c.sign?h="":(h=f?"+":"-",n=n.toString().replace(r.sign,"")),u=c.pad_char?"0"===c.pad_char?"0":c.pad_char.charAt(1):" ",l=c.width-(h+n).length,a=c.width&&l>0?u.repeat(l):"",g+=c.align?h+n+a:"0"===u?h+a+n:a+h+n)}return g}(function(e){if(c[e])return c[e];var t,n=e,o=[],i=0;for(;n;){if(null!==(t=r.text.exec(n)))o.push(t[0]);else if(null!==(t=r.modulo.exec(n)))o.push("%");else{if(null===(t=r.placeholder.exec(n)))throw new SyntaxError("[sprintf] unexpected placeholder");if(t[2]){i|=1;var s=[],a=t[2],u=[];if(null===(u=r.key.exec(a)))throw new SyntaxError("[sprintf] failed to parse named argument key");for(s.push(u[1]);""!==(a=a.substring(u[0].length));)if(null!==(u=r.key_access.exec(a)))s.push(u[1]);else{if(null===(u=r.index_access.exec(a)))throw new SyntaxError("[sprintf] failed to parse named argument key");s.push(u[1])}t[2]=s}else i|=2;if(3===i)throw new Error("[sprintf] mixing positional and named placeholders is not (yet) supported");o.push({placeholder:t[0],param_no:t[1],keys:t[2],sign:t[3],pad_char:t[4],align:t[5],width:t[6],precision:t[7],type:t[8]})}n=n.substring(t[0].length)}return c[e]=o}(e),arguments)}function s(e,t){return i.apply(null,[e].concat(t||[]))}var c=Object.create(null);t.sprintf=i,t.vsprintf=s,"undefined"!=typeof window&&(window.sprintf=i,window.vsprintf=s,void 0===(o=function(){return{sprintf:i,vsprintf:s}}.call(t,n,t,e))||(e.exports=o))}()},function(e,t,n){"use strict";function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}function c(e){var t="function"==typeof Map?new Map:void 0;return(c=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,o)}function o(){return a(e,arguments,l(this).constructor)}return o.prototype=Object.create(e.prototype,{constructor:{value:o,enumerable:!1,writable:!0,configurable:!0}}),u(o,e)})(e)}function a(e,t,n){return(a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}()?Reflect.construct:function(e,t,n){var o=[null];o.push.apply(o,t);var r=new(Function.bind.apply(e,o));return n&&u(r,n.prototype),r}).apply(null,arguments)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var f=function(e){function t(e){var n;return r(this,t),(n=i(this,l(t).call(this,e))).name="ValueError",console.log("EXCEPTION: "+n.name+" MESSAGE: "+n.message),n}return s(t,c(Error)),t}(),h=function(e){function t(e){var n;return r(this,t),(n=i(this,l(t).call(this,e))).name="UnImplementedMethod",console.log("EXCEPTION: "+n.name+" MESSAGE: "+n.message),n}return s(t,c(Error)),t}(),p=function(e){function t(e,n){var o;return r(this,t),(o=i(this,l(t).call(this,e))).name="IllegalArgument",o.argument=n,console.log("EXCEPTION: "+o.name+" MESSAGE: "+o.message),o}return s(t,c(Error)),t}(),d=function(e){function t(e){var n;return r(this,t),(n=i(this,l(t).call(this,e))).name="IllegalState",console.log("EXCEPTION: "+n.name+" MESSAGE: "+n.message),n}return s(t,c(Error)),t}(),g=function(e,t,n){var o=new XMLHttpRequest;o.open(e.method||"GET",e.url),e.headers&&Object.keys(e.headers).forEach(function(t){o.setRequestHeader(t,e.headers[t])}),o.onload=function(){o.status>=200&&o.status<300?t(o):n(o)},o.onerror=function(){return n(o)},o.send(e.body)};function y(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var v=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,o;return t=e,(n=[{key:"update",value:function(e){var t=e||{};this.region=t.region||this.region,this.endpointOverride=t.endpoint||this.endpointOverride,this.reconnect=t.reconnect||!1,this.reconnectInterval=t.reconnectInterval||1e3,this.maxReconnectAttempts=t.maxReconnectAttempts||30}},{key:"getRegion",value:function(){return this.region}},{key:"getEndpointOverride",value:function(){return this.endpointOverride}}])&&y(t.prototype,n),o&&y(t,o),e}()),b=n(0);function _(e){return(_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var C={assertTrue:function(e,t){if(!e)throw new f(t)},assertNotNull:function(e,t){return C.assertTrue(null!==e&&void 0!==_(e),Object(b.sprintf)("%s must be provided",t||"A value")),e},now:function(){return(new Date).getTime()},isString:function(e){return"string"==typeof e},randomId:function(){return Object(b.sprintf)("%s-%s",C.now(),Math.random().toString(36).slice(2))},assertIsNonEmptyString:function(e,t){if(!e||"string"!=typeof e)throw new p(t+" is not a non-empty string!")},assertIsList:function(e,t){if(!Array.isArray(e))throw new p(t+" is not an array")},assertIsEnum:function(e,t,n){var o;for(o=0;o<t.length;o++)if(t[o]===e)return;throw new p(n+" passed is not valid. Allowed values are: "+t)},makeEnum:function(e){var t={};return e.forEach(function(e){var n=e.replace(/\.?([a-z]+)_?/g,function(e,t){return t.toUpperCase()+"_"}).replace(/_$/,"");t[n]=e}),t},contains:function(e,t){return e instanceof Array?null!==C.find(e,function(e){return e===t}):t in e},find:function(e,t){for(var n=0;n<e.length;n++)if(t(e[n]))return e[n];return null},containsValue:function(e,t){return e instanceof Array?null!==C.find(e,function(e){return e===t}):null!==C.find(C.values(e),function(e){return e===t})},isFunction:function(e){return!!(e&&e.constructor&&e.call&&e.apply)},values:function(e){var t=[];for(var n in C.assertNotNull(e,"map"),e)t.push(e[n]);return t},isObject:function(e){return!("object"!==_(e)||null===e)},assertIsObject:function(e,t){if(!C.isObject(e))throw new p(t+" is not an object!")},delay:function(e){return new Promise(function(t){return setTimeout(t,e)})},asyncWhileInterval:function(e,t,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=new Date;return t(o)?e(o).catch(function(){var i=Math.max(0,n-(new Date).valueOf()+r.valueOf());return C.delay(i).then(function(){return C.asyncWhileInterval(e,t,n,o+1)})}):Promise.reject(new Error("async while aborted"))}},w=C,m="/contact/chat/participant/message",E="/contact/chat/participant/transcript",S="/contact/chat/participant/event",I="/contact/chat/participant/disconnect",k="/contact/chat/participant/connection-details",O="post",T="PERSISTED",N={textPlain:"text/plain"},A=w.makeEnum(["ALL","MANAGER","AGENT","CUSTOMER","THIRDPARTY"]),M=w.makeEnum(["PERSISTED","NON_PERSISTED"]),P={"us-west-2":{invokeUrl:"https://eap1w93j0k.execute-api.us-west-2.amazonaws.com/prod"},"us-east-1":{invokeUrl:"https://4agcjusx3k.execute-api.us-east-1.amazonaws.com/prod"},"ap-southeast-2":{invokeUrl:"https://v4u8oq0cve.execute-api.ap-southeast-2.amazonaws.com/prod"},"ap-northeast-1":{invokeUrl:"https://3fidunfyz7.execute-api.ap-northeast-1.amazonaws.com/prod"},"eu-central-1":{invokeUrl:"https://1gynaarm3e.execute-api.eu-central-1.amazonaws.com/prod"}},D=30,U=60,R={AGENT:"AGENT",CUSTOMER:"CUSTOMER"},L="INCOMING_MESSAGE",x="INCOMING_TYPING",j="CONNECTION_ESTABLISHED",B="CONNECTION_BROKEN",q=15,F="ASCENDING",V="BACKWARD",G="NULL",H="CLIENT_LOGGER",K="DEBUG",Q="us-west-2";function J(e){return(J="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function z(e,t){return!t||"object"!==J(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Y(e){return(Y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function W(e,t){return(W=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function X(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function $(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Z(e,t,n){return t&&$(e.prototype,t),n&&$(e,n),e}var ee=function(){function e(){X(this,e)}return Z(e,[{key:"debug",value:function(e){}},{key:"info",value:function(e){}},{key:"warn",value:function(e){}},{key:"error",value:function(e){}}]),e}(),te={DEBUG:10,INFO:20,WARN:30,ERROR:40},ne=function(){function e(){X(this,e),this.updateLoggerConfig(),this.consoleLoggerWrapper=ie()}return Z(e,[{key:"writeToClientLogger",value:function(e,t){if(this.hasClientLogger())switch(e){case te.DEBUG:return this._clientLogger.debug(t);case te.INFO:return this._clientLogger.info(t);case te.WARN:return this._clientLogger.warn(t);case te.ERROR:return this._clientLogger.error(t)}}},{key:"isLevelEnabled",value:function(e){return e>=this._level}},{key:"hasClientLogger",value:function(){return null!==this._clientLogger}},{key:"getLogger",value:function(e){var t=e.prefix||"";return this._logsDestination===K?this.consoleLoggerWrapper:new re(t)}},{key:"updateLoggerConfig",value:function(e){var t=e||{};this._level=t.level||te.INFO,this._clientLogger=t.logger||null,this._logsDestination=G,t.debug&&(this._logsDestination=K),t.logger&&(this._logsDestination=H)}}]),e}(),oe=function(){function e(){X(this,e)}return Z(e,[{key:"debug",value:function(){}},{key:"info",value:function(){}},{key:"warn",value:function(){}},{key:"error",value:function(){}}]),e}(),re=function(e){function t(e){var n;return X(this,t),(n=z(this,Y(t).call(this))).prefix=e||"",n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&W(e,t)}(t,oe),Z(t,[{key:"debug",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._log(te.DEBUG,t)}},{key:"info",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._log(te.INFO,t)}},{key:"warn",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._log(te.WARN,t)}},{key:"error",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._log(te.ERROR,t)}},{key:"_shouldLog",value:function(e){return se.hasClientLogger()&&se.isLevelEnabled(e)}},{key:"_writeToClientLogger",value:function(e,t){se.writeToClientLogger(e,t)}},{key:"_log",value:function(e,t){if(this._shouldLog(e)){var n=this._convertToSingleStatement(t);this._writeToClientLogger(e,n)}}},{key:"_convertToSingleStatement",value:function(e){var t="";this.prefix&&(t+=this.prefix+" ");for(var n=0;n<e.length;n++){var o=e[n];t+=this._convertToString(o)+" "}return t}},{key:"_convertToString",value:function(e){try{if(!e)return"";if(w.isString(e))return e;if(w.isObject(e)&&w.isFunction(e.toString)){var t=e.toString();if("[object Object]"!==t)return t}return JSON.stringify(e)}catch(t){return console.error("Error while converting argument to string",e,t),""}}}]),t}(),ie=function(){var e=new oe;return e.debug=console.debug.bind(window.console),e.info=console.info.bind(window.console),e.warn=console.warn.bind(window.console),e.error=console.error.bind(window.console),e},se=new ne;function ce(e){return(ce="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ae(e,t){return!t||"object"!==ce(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ue(e){return(ue=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function le(e,t){return(le=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function fe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function he(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function pe(e,t,n){return t&&he(e.prototype,t),n&&he(e,n),e}var de=function(){function e(){fe(this,e),this.clientCache={}}return pe(e,[{key:"getCachedClient",value:function(e){var t=Object.assign({},e),n=e.region||v.getRegion()||Q;if(t.region=n,this.clientCache[n])return this.clientCache[n];var o=this._createClient(t);return this.clientCache[n]=o,o}},{key:"_createClient",value:function(e){var t=e.region,n=v.getEndpointOverride(),o=P[t];return n&&(o.invokeUrl=n),new ye({stageConfig:o})}}]),e}(),ge=function(){function e(){fe(this,e)}return pe(e,[{key:"sendMessage",value:function(e,t,n){throw new h("sendTextMessage in ChatClient")}},{key:"disconnectChat",value:function(e){throw new h("disconnectChat in ChatClient")}},{key:"sendEvent",value:function(e,t,n,o){throw new h("sendEvent in ChatClient")}},{key:"createConnectionDetails",value:function(e){throw new h("reconnectChat in ChatClient")}}]),e}(),ye=function(e){function t(e){var n;return fe(this,t),(n=ae(this,ue(t).call(this))).invokeUrl=e.stageConfig.invokeUrl,n.callHttpClient=g,n.logger=se.getLogger({prefix:"ChatClient"}),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&le(e,t)}(t,ge),pe(t,[{key:"sendMessage",value:function(e,t,n){console.log(n);var o={Message:{ContentType:N.textPlain,Content:t,Persistence:T}},r={method:O,headers:{},url:this.invokeUrl+m,body:o};return r.headers["x-amzn-connect-connection-token"]=e,this._callHttpClient(r)}},{key:"getTranscript",value:function(e,t){var n={method:O,headers:{},url:this.invokeUrl+E,body:t};return n.headers["x-amzn-connect-connection-token"]=e,this._callHttpClient(n)}},{key:"sendEvent",value:function(e,t,n,o,r){console.log(n),console.log(r);var i={ParticipantEvent:{Visibility:o,ParticipantEventType:t}},s={method:O,headers:{},url:this.invokeUrl+S,body:i};return s.headers["x-amzn-connect-connection-token"]=e,this._callHttpClient(s)}},{key:"disconnectChat",value:function(e){var t={method:O,headers:{},url:this.invokeUrl+I,body:{}};return t.headers["x-amzn-connect-connection-token"]=e,this._callHttpClient(t)}},{key:"createConnectionDetails",value:function(e){var t={method:O,headers:{},url:this.invokeUrl+k,body:{}};return t.headers["x-amzn-connect-participant-token"]=e,this._callHttpClient(t)}},{key:"_callHttpClient",value:function(e){var t=this;return e.headers=Object.assign({"Content-Type":"application/json",Accept:"application/json"},e.headers),e.body=JSON.stringify(e.body),new Promise(function(n,o){t.callHttpClient(e,function(e){var t={};t.data=JSON.parse(e.responseText),n(t)},function(e){var n={};n.statusText=e.statusText;try{n.error=JSON.parse(e.responseText)}catch(e){t.logger.warn("invalid json error from server"),n.error=null}o(n)})})}}]),t}(),ve=new de;function be(e){return(be="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _e(e,t){return!t||"object"!==be(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ce(e){return(Ce=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function we(e,t){return(we=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function me(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ee(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Se(e,t,n){return t&&Ee(e.prototype,t),n&&Ee(e,n),e}var Ie=function(){function e(){me(this,e)}return Se(e,[{key:"validateNewControllerDetails",value:function(e){return!0}},{key:"validateSendMessage",value:function(e,t){w.isString(e)||w.assertIsObject(e,"message"),w.assertIsEnum(t,Object.values(N),"type")}},{key:"validateConnectChat",value:function(e){return!0}},{key:"validateLogger",value:function(e){w.assertIsObject(e,"logger"),["debug","info","warn","error"].forEach(function(t){if(!w.isFunction(e[t]))throw new p(t+" should be a valid function on the passed logger object!")})}},{key:"validateSendEvent",value:function(e){w.assertIsNonEmptyString(e.eventType,"eventType"),void 0!==e.messageIds&&w.assertIsList(e.messageIds),void 0!==e.visibility&&w.assertIsEnum(e.visibility,Object.values(A),"visibility"),void 0!==e.persistence&&w.assertIsEnum(e.persistence,Object.values(M),"persistence")}},{key:"validateGetMessages",value:function(e){return!0}}]),e}(),ke=function(e){function t(){return me(this,t),_e(this,Ce(t).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&we(e,t)}(t,Ie),Se(t,[{key:"validateChatDetails",value:function(e){w.assertIsObject(e,"chatDetails"),w.assertIsNonEmptyString(e.initialContactId,"chatDetails.initialContactId"),w.assertIsNonEmptyString(e.contactId,"chatDetails.contactId"),w.assertIsNonEmptyString(e.participantId,"chatDetails.participantId"),e.connectionDetails?(w.assertIsObject(e.connectionDetails,"chatDetails.connectionDetails"),w.assertIsNonEmptyString(e.connectionDetails.PreSignedConnectionUrl,"chatDetails.connectionDetails.PreSignedConnectionUrl"),w.assertIsNonEmptyString(e.connectionDetails.ConnectionId,"chatDetails.connectionDetails.ConnectionId"),w.assertIsNonEmptyString(e.connectionDetails.connectionToken,"chatDetails.connectionDetails.connectionToken")):w.assertIsNonEmptyString(e.participantToken,"chatDetails.participantToken")}},{key:"validateInitiateChatResponse",value:function(){return!0}}]),t}(),Oe=n(3),Te=n.n(Oe);function Ne(e){return(Ne="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ae(e){return(Ae=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Me(e,t){return(Me=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Pe(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function De(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ue(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Re(e,t,n){return t&&Ue(e.prototype,t),n&&Ue(e,n),e}var Le=function(){function e(){De(this,e)}return Re(e,[{key:"createNewMqttConnectionProvider",value:function(e,t){switch(t){case"PahoMqttConnection":return function(t){return e.callback=t,new qe(e)}}throw new p("type in ChatConnectionManager.createNewMqttConnectionProvider",t)}}]),e}(),xe=function(){function e(){De(this,e)}return Re(e,[{key:"connect",value:function(e){throw new h("connect in IotClient")}},{key:"disconnect",value:function(){throw new h("connect in IotClient")}},{key:"subscribe",value:function(e,t){throw new h("connect in IotClient")}},{key:"unsubscribe",value:function(e,t){throw new h("connect in IotClient")}}]),e}(),je=Object.freeze({NeverConnected:"NeverConnected",Connecting:"Connecting",Connected:"Connected",Disconnected:"Disconnected"}),Be=Object.freeze({MESSAGE:"Message",DISCONNECTED:"Disconnected"}),qe=function(e){function t(e){var n;De(this,t),(n=function(e,t){return!t||"object"!==Ne(t)&&"function"!=typeof t?Pe(e):t}(this,Ae(t).call(this))).preSignedUrl=e.preSignedUrl,n.connectionId=e.connectionId,n.status=je.NeverConnected,n.pahoClient=new Te.a.Client(n.preSignedUrl,n.connectionId);var o=Pe(Pe(n));return n.pahoClient.onMessageArrived=function(e){o._messageArrivedCallback(e)},n.pahoClient.onConnectionLost=function(e){o._connectionLostCallBack(e)},n.pahoClient.onMessageArrived=function(e){o._messageArrivedCallback(e)},n.callback=e.callback,n.neverConnected=!0,n._subscribedTopics=[],n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Me(e,t)}(t,xe),Re(t,[{key:"connect",value:function(e){var t=this;return new Promise(function(n,o){e.onSuccess=function(e){t.neverConnected=!1,t._onConnectSuccess(e),n({})},e.onFailure=function(e){var n={reason:e};t._onConnectFailure(n),o(n)},t.status=je.Connecting,t.pahoClient.connect(e)})}},{key:"_connectionLostCallBack",value:function(e){var t={reason:e};this._subscribedTopics=[],this.status!==je.Disconnected&&(this.status=je.Disconnected,this.callback(Be.DISCONNECTED,t))}},{key:"_messageArrivedCallback",value:function(e){var t={topic:e.topic,qos:e.qos,payloadString:e.payloadString};this.callback(Be.MESSAGE,t)}},{key:"_onConnectSuccess",value:function(e){this.status=je.Connected}},{key:"_onConnectFailure",value:function(e){this.neverConnected?this.status=je.NeverConnected:this.status=je.Disconnected}},{key:"disconnect",value:function(){this._subscribedTopics=[],this.status=je.Disconnected,this.pahoClient.disconnect()}},{key:"subscribe",value:function(e,t){var n=this;return new Promise(function(o,r){t.onSuccess=function(t){n._subscribeSuccess(e,t);var r={topic:e,qos:t.grantedQos};o(r)},t.onFailure=function(t){r({topic:e,error:t})},n.pahoClient.subscribe(e,t)})}},{key:"_addToTopics",value:function(e){this._subscribedTopics.indexOf(e)>=0||this._subscribedTopics.push(e)}},{key:"_subscribeSuccess",value:function(e,t){this._addToTopics(e)}},{key:"getSubscribedTopics",value:function(){return this._subscribedTopics.slice(0)}},{key:"unsubscribe",value:function(e,t){var n=this;return new Promise(function(o,r){t.onSuccess=function(t){var r={topic:e,response:t};n._unsubscribeSuccess(e,r),o(r)},t.onFailure=function(t){r({topic:e,error:t})},n.pahoClient.unsubscribe(e,t)})}},{key:"_unsubscribeSuccess",value:function(e,t){this._subscribedTopics=this._subscribedTopics.filter(function(t){return t!==e})}},{key:"getStatus",value:function(){return this.status}}]),t}();function Fe(e){return(Fe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ve(e,t){return!t||"object"!==Fe(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ge(e){return(Ge=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function He(e,t){return(He=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ke(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Qe(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Je(e,t,n){return t&&Qe(e.prototype,t),n&&Qe(e,n),e}var ze=function(){function e(){Ke(this,e)}return Je(e,[{key:"start",value:function(e){throw new h("start in ConnectionHelper")}},{key:"end",value:function(){throw new h("end in ConnectionHelper")}}]),e}(),Ye={NeverStarted:"NeverStarted",Starting:"Starting",Connected:"Connected",Ended:"Ended"},We="Ended",Xe="IncomingMessage",$e=function(e){function t(e){var n;Ke(this,t),n=Ve(this,Ge(t).call(this));var o="ContactId-"+e.contactId+": ";if(n.logger=se.getLogger({prefix:o}),n.preSignedUrl=e.connectionDetails.preSignedUrl,n.topic=e.connectionDetails.connectionId,n.considerParticipantAsDisconnected=!1,n.iotConnection=e.mqttConnectionProvider(function(e,t){return n._handleIotEvent(e,t)}),n.iotConnection.getStatus()!==je.NeverConnected)throw new p("iotConnection is expected to be in NeverConnected state but is not")();return n.chatControllerCallback=e.callback,n.status=Ye.NeverStarted,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&He(e,t)}(t,ze),Je(t,[{key:"cleanUpOnParticipantDisconnect",value:function(){this.considerParticipantAsDisconnected=!0}},{key:"start",value:function(){if(this.status!==Ye.NeverStarted)throw new d("Connection helper started twice!!");return this.status=Ye.Starting,new Promise(this._createStartPromise())}},{key:"_createStartPromise",value:function(){var e=this;return function(t,n){e._connect(t,n)}}},{key:"_connect",value:function(e,t){var n=this,o={useSSL:!0,keepAliveInterval:D,reconnect:!1,mqttVersion:4,timeout:U};n.iotConnection.connect(o).then(function(o){n._postConnect(e,t,o)}).catch(function(e){n._connectFailed(t,e)})}},{key:"_postConnect",value:function(e,t,n){this._subscribe(e,t,n)}},{key:"_connectFailed",value:function(e,t){var n={connectSuccess:!1,reason:"ConnectionToBrokerFailed",details:t};this.status=Ye.Ended,e(n)}},{key:"_subscribe",value:function(e,t,n){var o=this;o.iotConnection.subscribe(o.topic,{qos:1}).then(function(t){o._postSubscribe(e,t)}).catch(function(e){o._subscribeFailed(t,e)})}},{key:"_postSubscribe",value:function(e,t){var n={details:t,connectSuccess:!0};this.status=Ye.Connected,e(n)}},{key:"_subscribeFailed",value:function(e,t){var n={connectSuccess:!1,details:t,reason:"SubscribtionToTopicFailed"};this.status=Ye.Ended,this.iotConnection.disconnect(),e(n)}},{key:"_handleIotEvent",value:function(e,t){switch(e){case Be.MESSAGE:this.logger.debug("Received incoming data",t.payloadString),this.chatControllerCallback(Xe,t);break;case Be.DISCONNECTED:this.status=Ye.Ended,this.chatControllerCallback(We,t)}}},{key:"end",value:function(){this.status=Ye.Ended,this.iotConnection.disconnect()}},{key:"getStatus",value:function(){return this.status}}]),t}();function Ze(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var et=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,o;return t=e,(n=[{key:"fromConnectionHelperEvent",value:function(e,t,n){var o={type:null,data:{data:t,chatDetails:n}};switch(e){case We:return o.type=B,o;case Xe:return this._fromIncomingData(t,n)}}},{key:"_fromIncomingData",value:function(e,t){var n=JSON.parse(e.payloadString),o={type:null,data:{data:n,chatDetails:t}};switch(n.Data.Type){case"TYPING":return o.type=x,o}return o.type=L,o}}])&&Ze(t.prototype,n),o&&Ze(t,o),e}(),tt=function(e,t,n){this.subMap=e,this.id=w.randomId(),this.eventName=t,this.f=n};tt.prototype.unsubscribe=function(){this.subMap.unsubscribe(this.eventName,this.id)};var nt=function(){this.subIdMap={},this.subEventNameMap={}};nt.prototype.subscribe=function(e,t){var n=new tt(this,e,t);this.subIdMap[n.id]=n;var o=this.subEventNameMap[e]||[];o.push(n),this.subEventNameMap[e]=o},nt.prototype.unsubscribe=function(e,t){w.contains(this.subEventNameMap,e)&&(this.subEventNameMap[e]=this.subEventNameMap[e].filter(function(e){return e.id!==t}),this.subEventNameMap[e].length<1&&delete this.subEventNameMap[e]),w.contains(this.subIdMap,t)&&delete this.subIdMap[t]},nt.prototype.getAllSubscriptions=function(){return w.values(this.subEventNameMap).reduce(function(e,t){return e.concat(t)},[])},nt.prototype.getSubscriptions=function(e){return this.subEventNameMap[e]||[]};var ot=function(e){var t=e||{};this.subMap=new nt,this.logEvents=t.logEvents||!1};function rt(e){return(rt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function it(e,t){return!t||"object"!==rt(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function st(e){return(st=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ct(e,t){return(ct=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function at(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ut(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function lt(e,t,n){return t&&ut(e.prototype,t),n&&ut(e,n),e}ot.prototype.subscribe=function(e,t){return w.assertNotNull(e,"eventName"),w.assertNotNull(t,"f"),w.assertTrue(w.isFunction(t),"f must be a function"),this.subMap.subscribe(e,t)},ot.prototype.subscribeAll=function(e){return w.assertNotNull(e,"f"),w.assertTrue(w.isFunction(e),"f must be a function"),this.subMap.subscribe("<<all>>",e)},ot.prototype.getSubscriptions=function(e){return this.subMap.getSubscriptions(e)},ot.prototype.trigger=function(e,t){w.assertNotNull(e,"eventName");var n=this,o=this.subMap.getSubscriptions("<<all>>"),r=this.subMap.getSubscriptions(e);o.concat(r).forEach(function(o){try{o.f(t||null,e,n)}catch(e){}})},ot.prototype.triggerAsync=function(e,t){var n=this;setTimeout(function(){return n.trigger(e,t)},0)},ot.prototype.bridge=function(){var e=this;return function(t,n){e.trigger(n,t)}},ot.prototype.unsubscribeAll=function(){this.subMap.getAllSubscriptions().forEach(function(e){e.unsubscribe()})};var ft="NeverEstablished",ht="Establishing",pt="Established",dt="Broken",gt=function(){function e(){at(this,e)}return lt(e,[{key:"sendTextMessage",value:function(e){throw new h("sendTextMessage in ChatController")}},{key:"establishNetworkLink",value:function(e){throw new h("connectChat in ChatController")}},{key:"disconnectParticipant",value:function(){throw new h("endChat in ChatController")}},{key:"sendEvent",value:function(e){throw new h("sendEvent in ChatController")}},{key:"getTranscript",value:function(e){throw new h("getTranscript in ChatController")}},{key:"getConnectionStatus",value:function(){throw new h("getStatus in ChatController")}}]),e}(),yt=function(e){function t(e){var n;return at(this,t),(n=it(this,st(t).call(this))).setArguments(e),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ct(e,t)}(t,gt),lt(t,[{key:"setArguments",value:function(e){var t=this,n="ContactId-"+e.chatDetails.contactId+": ";this.logger=se.getLogger({prefix:n}),this.argsValidator=e.argsValidator,this.chatEventConstructor=e.chatEventConstructor,this.connectionDetails=e.chatDetails.connectionDetails,this.intialContactId=e.chatDetails.initialContactId,this.contactId=e.chatDetails.contactId,this.participantId=e.chatDetails.participantId,this.chatClient=e.chatClient,this.participantToken=e.chatDetails.participantToken,this.connectionHelperCallback=function(e,n){return t._handleConnectionHelperEvents(e,n)},this._hasConnectionDetails=e.hasConnectionDetails,this.chatControllerFactory=e.chatControllerFactory,e.hasConnectionDetails&&this._setConnectionHelper(e.chatDetails.connectionDetails,e.chatDetails.contactId),this._connectCalledAtleastOnce=!1,this._everConnected=!1,this.pubsub=e.pubsub,this._participantDisconnected=!1,this.sessionMetadata={}}},{key:"_setConnectionHelper",value:function(e,t){var n=this.chatControllerFactory.createConnectionHelperProvider(e,t);this.connectionHelper=n(this.connectionHelperCallback)}},{key:"cleanUpOnParticipantDisconnect",value:function(){this.pubsub.unsubscribeAll(),this.connectionHelper&&this.connectionHelper.cleanUpOnParticipantDisconnect()}},{key:"subscribe",value:function(e,t){this.pubsub.subscribe(e,t),this.logger.info("Subscribed successfully to eventName: ",e)}},{key:"sendMessage",value:function(e){var t=this,n=e.message,o=e.type||N.textPlain,r=e.metadata||null;t.argsValidator.validateSendMessage(n,o);var i=t.connectionDetails.connectionToken;return t.chatClient.sendMessage(i,n,o).then(function(n){return n.metadata=r,t.logger.debug("Successfully sent message, response: ",n," request: ",e),n},function(n){return n.metadata=r,t.logger.debug("Failed to send message, error: ",n," request: ",e),Promise.reject(n)})}},{key:"sendEvent",value:function(e){var t=this,n=e.metadata||null;t.argsValidator.validateSendEvent(e);var o=t.connectionDetails.connectionToken,r=e.persistence||M.PERSISTED,i=e.visibility||A.ALL;return t.chatClient.sendEvent(o,e.eventType,e.messageIds,i,r).then(function(o){return o.metadata=n,t.logger.debug("Successfully sent event, response: ",o," request: ",e),o},function(o){return o.metadata=n,t.logger.debug("Failed to send event, error: ",o," request: ",e),Promise.reject(o)})}},{key:"getTranscript",value:function(e){var t=this,n=e.metadata||null,o={};o.IntialContactId=this.intialContactId,o.StartKey=e.StartKey||{},o.ScanDirection=e.ScanDirection||V,o.SortKey=e.SortKey||F,o.MaxResults=e.MaxResults||q,e.NextToken&&(o.NextToken=e.NextToken);var r=this.connectionDetails.connectionToken;return this.chatClient.getTranscript(r,o).then(function(e){return e.metadata=n,t.logger.debug("Successfully retrieved transcript, response: ",e," request: ",o),e},function(e){return e.metadata=n,t.logger.debug("Failed to retrieve transcript, error: ",e," request: ",o),Promise.reject(e)})}},{key:"_mapConnectionHelperEventToChatEvent",value:function(e,t){try{return this.chatEventConstructor.fromConnectionHelperEvent(e,t,this.getChatDetails(),this.logger)}catch(n){return this.logger.error("Error occured while handling event from Connection. eventType and eventData: ",e,t," Causing exception: ",n),null}}},{key:"_forwardChatEvent",value:function(e){this.logger.debug("Triggering event for subscribers:",e),this.pubsub.triggerAsync(e.type,e.data)}},{key:"_handleConnectionHelperEvents",value:function(e,t){var n=this._mapConnectionHelperEventToChatEvent(e,t);n&&(this._handleChatEvent(n),this._forwardChatEvent(n))}},{key:"_handleChatEvent",value:function(e){e.type===B&&v.reconnect&&this._initiateReconnect()}},{key:"connect",value:function(e){var t=e||{};return this.sessionMetadata=t.metadata||null,this.argsValidator.validateConnectChat(t),this._connect()}},{key:"_connect",value:function(){var e=this;if(!this._canConnect())throw new d("Can call establishNetworkLink only when getConnectionStatus is Broken or NeverEstablished");var t=function(t){return e._onConnectSuccess(t,e.sessionMetadata)},n=function(t){return e._onConnectFailure(t,e.sessionMetadata)};return this._connectCalledAtleastOnce=!0,this._hasConnectionDetails?this.connectionHelper.start().then(t,n):this._fetchConnectionDetails().then(function(t){return e._setConnectionHelper(t,e.contactId),e.connectionDetails=t,e._hasConnectionDetails=!0,e.connectionHelper.start()}).then(t,n)}},{key:"_initiateReconnect",value:function(){var e=this;w.asyncWhileInterval(function(t){return e.logger.info("Reconnect - ".concat(t,". try")),e._hasConnectionDetails=!1,e.connectionDetails=null,e._connect()},function(t){return t<v.maxReconnectAttempts&&e._canReconnect()},v.reconnectInterval).then(function(){e.logger.info("Reconnect - Success")}).catch(function(){e.logger.info("Reconnect - Failed")})}},{key:"_canConnect",value:function(){return this.getConnectionStatus()===dt||this.getConnectionStatus()===ft}},{key:"_canReconnect",value:function(){return this.getConnectionStatus()===dt}},{key:"_onConnectSuccess",value:function(e,t){this.logger.info("Connect successful!");var n={_debug:e,connectSuccess:!0,connectCalled:!0,metadata:t},o=Object.assign({chatDetails:this.getChatDetails()},n);return this.pubsub.triggerAsync(j,o),n}},{key:"_onConnectFailure",value:function(e,t){var n={_debug:e,connectSuccess:!1,connectCalled:!0,metadata:t};return this.logger.error("Connect Failed with data: ",n),Promise.reject(n)}},{key:"_fetchConnectionDetails",value:function(){return this.chatClient.createConnectionDetails(this.participantToken).then(function(e){var t={};return t.ConnectionId=e.data.ConnectionId,t.PreSignedConnectionUrl=e.data.PreSignedConnectionUrl,t.connectionToken=e.data.ParticipantCredentials.ConnectionAuthenticationToken,t},function(e){return Promise.reject({reason:"Failed to fetch connectionDetails",_debug:e})})}},{key:"breakConnection",value:function(){return this.connectionHelper.end()}},{key:"disconnectParticipant",value:function(){var e=this,t=e.connectionDetails.connectionToken;return e.chatClient.disconnectChat(t).then(function(t){return e.logger.info("disconnect participant successful"),e._participantDisconnected=!0,t},function(t){return e.logger.error("disconnect participant failed with error: ",t),Promise.reject(t)})}},{key:"getChatDetails",value:function(){return{intialContactId:this.intialContactId,contactId:this.contactId,participantId:this.participantId,participantToken:this.participantToken,connectionDetails:this.connectionDetails}}},{key:"_convertConnectionHelperStatus",value:function(e){switch(e){case Ye.NeverStarted:return ft;case Ye.Starting:return ht;case Ye.Ended:return dt;case Ye.Connected:return pt}self.logger.error("Reached invalid state. Unknown connectionHelperStatus: ",e)}},{key:"getConnectionStatus",value:function(){return this._convertConnectionHelperStatus(this.connectionHelper.getStatus())}}]),t}();function vt(e){return(vt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function bt(e,t){return!t||"object"!==vt(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function _t(e){return(_t=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ct(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&wt(e,t)}function wt(e,t){return(wt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function mt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Et(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function St(e,t,n){return t&&Et(e.prototype,t),n&&Et(e,n),e}n.d(t,"a",function(){return Mt});var It=function(){function e(){mt(this,e)}return St(e,[{key:"createAgentChatController",value:function(e,t){throw new h("createAgentChatController in ChatControllerFactory.")}},{key:"createCustomerChatController",value:function(e,t){throw new h("createCustomerChatController in ChatControllerFactory.")}},{key:"createConnectionHelperProvider",value:function(e){throw new h("createIncomingChatController in ChatControllerFactory")}}]),e}(),kt=function(e){function t(){var e;return mt(this,t),(e=bt(this,_t(t).call(this))).argsValidator=new ke,e.chatConnectionManager=new Le,e.chatEventConstructor=new et,e}return Ct(t,It),St(t,[{key:"createAgentChatSession",value:function(e,t){var n=this._createChatSession(e,t);return new Tt(n)}},{key:"createCustomerChatSession",value:function(e,t){var n=this._createChatSession(e,t);return new Nt(n)}},{key:"_createChatSession",value:function(e,t){var n=this._normalizeChatDetails(e),o=!1;n.connectionDetails&&(o=!0);var r={chatDetails:n,chatControllerFactory:this,chatEventConstructor:this.chatEventConstructor,pubsub:new ot,chatClient:ve.getCachedClient(t),argsValidator:this.argsValidator,hasConnectionDetails:o};return new yt(r)}},{key:"_normalizeChatDetails",value:function(e){if(e.ChatConnectionAttributes&&e.ChatConnectionAttributes.ParticipantCredentials){this.argsValidator.validateInitiateChatResponse(e);var t={},n={};return n.connectionToken=e.ChatConnectionAttributes.ParticipantCredentials.ConnectionAuthenticationToken,n.ConnectionId=e.ChatConnectionAttributes.ConnectionId,n.PreSignedConnectionUrl=e.ChatConnectionAttributes.PreSignedConnectionUrl,t.connectionDetails=n,t.participantId=e.ParticipantId,t.contactId=e.ContactId,t.initialContactId=e.ContactId,t}return this.argsValidator.validateChatDetails(e),e}},{key:"createConnectionHelperProvider",value:function(e,t){var n={preSignedUrl:e.PreSignedConnectionUrl,connectionId:e.ConnectionId},o={mqttConnectionProvider:this.chatConnectionManager.createNewMqttConnectionProvider(n,"PahoMqttConnection"),connectionDetails:{preSignedUrl:e.PreSignedConnectionUrl,connectionId:e.ConnectionId},contactId:t};return function(e){return o.callback=e,new $e(o)}}}]),t}(),Ot=function(){function e(t){mt(this,e),this.controller=t}return St(e,[{key:"onMessage",value:function(e){this.controller.subscribe(L,e)}},{key:"onTyping",value:function(e){this.controller.subscribe(x,e)}},{key:"onConnectionBroken",value:function(e){this.controller.subscribe(B,e)}},{key:"onConnectionEstablished",value:function(e){this.controller.subscribe(j,e)}},{key:"sendMessage",value:function(e){return this.controller.sendMessage(e)}},{key:"connect",value:function(e){return this.controller.connect(e)}},{key:"sendEvent",value:function(e){return this.controller.sendEvent(e)}},{key:"getTranscript",value:function(e){return this.controller.getTranscript(e)}},{key:"getChatDetails",value:function(){return this.controller.getChatDetails()}}]),e}(),Tt=function(e){function t(e){return mt(this,t),bt(this,_t(t).call(this,e))}return Ct(t,Ot),St(t,[{key:"cleanUpOnParticipantDisconnect",value:function(){return this.controller.cleanUpOnParticipantDisconnect()}}]),t}(),Nt=function(e){function t(e){return mt(this,t),bt(this,_t(t).call(this,e))}return Ct(t,Ot),St(t,[{key:"disconnectParticipant",value:function(){var e=this;return this.controller.disconnectParticipant().then(function(t){return e.controller.cleanUpOnParticipantDisconnect(),e.controller.breakConnection(),t})}}]),t}(),At=new kt,Mt={create:function(e){var t=e.options||{},n=e.type||R.AGENT;if(n===R.AGENT)return At.createAgentChatSession(e.chatDetails,t);if(n===R.CUSTOMER)return At.createCustomerChatSession(e.chatDetails,t);throw new p("Unkown value for session type, Allowed values are: "+Object.values(R),n)},setGlobalConfig:function(e){var t=e.loggerConfig;v.update(e),se.updateLoggerConfig(t)},LogLevel:te,Logger:ee,SessionTypes:R}},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){(function(e,o){var r,i,s;function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}s=function(){return function(e){var t,n=e.localStorage||(t={},{setItem:function(e,n){t[e]=n},getItem:function(e){return t[e]},removeItem:function(e){delete t[e]}}),o={CONNECT:1,CONNACK:2,PUBLISH:3,PUBACK:4,PUBREC:5,PUBREL:6,PUBCOMP:7,SUBSCRIBE:8,SUBACK:9,UNSUBSCRIBE:10,UNSUBACK:11,PINGREQ:12,PINGRESP:13,DISCONNECT:14},r=function(e,t){for(var n in e)if(e.hasOwnProperty(n)){if(!t.hasOwnProperty(n)){var o="Unknown property, "+n+". Valid properties are:";for(var r in t)t.hasOwnProperty(r)&&(o=o+" "+r);throw new Error(o)}if(c(e[n])!==t[n])throw new Error(u(s.INVALID_TYPE,[c(e[n]),n]))}},i=function(e,t){return function(){return e.apply(t,arguments)}},s={OK:{code:0,text:"AMQJSC0000I OK."},CONNECT_TIMEOUT:{code:1,text:"AMQJSC0001E Connect timed out."},SUBSCRIBE_TIMEOUT:{code:2,text:"AMQJS0002E Subscribe timed out."},UNSUBSCRIBE_TIMEOUT:{code:3,text:"AMQJS0003E Unsubscribe timed out."},PING_TIMEOUT:{code:4,text:"AMQJS0004E Ping timed out."},INTERNAL_ERROR:{code:5,text:"AMQJS0005E Internal error. Error Message: {0}, Stack trace: {1}"},CONNACK_RETURNCODE:{code:6,text:"AMQJS0006E Bad Connack return code:{0} {1}."},SOCKET_ERROR:{code:7,text:"AMQJS0007E Socket error:{0}."},SOCKET_CLOSE:{code:8,text:"AMQJS0008I Socket closed."},MALFORMED_UTF:{code:9,text:"AMQJS0009E Malformed UTF data:{0} {1} {2}."},UNSUPPORTED:{code:10,text:"AMQJS0010E {0} is not supported by this browser."},INVALID_STATE:{code:11,text:"AMQJS0011E Invalid state {0}."},INVALID_TYPE:{code:12,text:"AMQJS0012E Invalid type {0} for {1}."},INVALID_ARGUMENT:{code:13,text:"AMQJS0013E Invalid argument {0} for {1}."},UNSUPPORTED_OPERATION:{code:14,text:"AMQJS0014E Unsupported operation."},INVALID_STORED_DATA:{code:15,text:"AMQJS0015E Invalid data in local storage key={0} value={1}."},INVALID_MQTT_MESSAGE_TYPE:{code:16,text:"AMQJS0016E Invalid MQTT message type {0}."},MALFORMED_UNICODE:{code:17,text:"AMQJS0017E Malformed Unicode string:{0} {1}."},BUFFER_FULL:{code:18,text:"AMQJS0018E Message buffer is full, maximum buffer size: {0}."}},a={0:"Connection Accepted",1:"Connection Refused: unacceptable protocol version",2:"Connection Refused: identifier rejected",3:"Connection Refused: server unavailable",4:"Connection Refused: bad user name or password",5:"Connection Refused: not authorized"},u=function(e,t){var n=e.text;if(t)for(var o,r,i=0;i<t.length;i++)if(o="{"+i+"}",(r=n.indexOf(o))>0){var s=n.substring(0,r),c=n.substring(r+o.length);n=s+t[i]+c}return n},l=[0,6,77,81,73,115,100,112,3],f=[0,4,77,81,84,84,4],h=function(e,t){for(var n in this.type=e,t)t.hasOwnProperty(n)&&(this[n]=t[n])};function p(e,t){var n,r=t,i=e[t],s=i>>4,c=i&=15;t+=1;var a=0,u=1;do{if(t==e.length)return[null,r];a+=(127&(n=e[t++]))*u,u*=128}while(0!=(128&n));var l=t+a;if(l>e.length)return[null,r];var f=new h(s);switch(s){case o.CONNACK:1&e[t++]&&(f.sessionPresent=!0),f.returnCode=e[t++];break;case o.PUBLISH:var p=c>>1&3,d=y(e,t),g=_(e,t+=2,d);t+=d,p>0&&(f.messageIdentifier=y(e,t),t+=2);var v=new E(e.subarray(t,l));1==(1&c)&&(v.retained=!0),8==(8&c)&&(v.duplicate=!0),v.qos=p,v.destinationName=g,f.payloadMessage=v;break;case o.PUBACK:case o.PUBREC:case o.PUBREL:case o.PUBCOMP:case o.UNSUBACK:f.messageIdentifier=y(e,t);break;case o.SUBACK:f.messageIdentifier=y(e,t),t+=2,f.returnCode=e.subarray(t,l)}return[f,l]}function d(e,t,n){return t[n++]=e>>8,t[n++]=e%256,n}function g(e,t,n,o){return b(e,n,o=d(t,n,o)),o+t}function y(e,t){return 256*e[t]+e[t+1]}function v(e){for(var t=0,n=0;n<e.length;n++){var o=e.charCodeAt(n);o>2047?(55296<=o&&o<=56319&&(n++,t++),t+=3):o>127?t+=2:t++}return t}function b(e,t,n){for(var o=n,r=0;r<e.length;r++){var i=e.charCodeAt(r);if(55296<=i&&i<=56319){var c=e.charCodeAt(++r);if(isNaN(c))throw new Error(u(s.MALFORMED_UNICODE,[i,c]));i=c-56320+(i-55296<<10)+65536}i<=127?t[o++]=i:i<=2047?(t[o++]=i>>6&31|192,t[o++]=63&i|128):i<=65535?(t[o++]=i>>12&15|224,t[o++]=i>>6&63|128,t[o++]=63&i|128):(t[o++]=i>>18&7|240,t[o++]=i>>12&63|128,t[o++]=i>>6&63|128,t[o++]=63&i|128)}return t}function _(e,t,n){for(var o,r="",i=t;i<t+n;){var c=e[i++];if(c<128)o=c;else{var a=e[i++]-128;if(a<0)throw new Error(u(s.MALFORMED_UTF,[c.toString(16),a.toString(16),""]));if(c<224)o=64*(c-192)+a;else{var l=e[i++]-128;if(l<0)throw new Error(u(s.MALFORMED_UTF,[c.toString(16),a.toString(16),l.toString(16)]));if(c<240)o=4096*(c-224)+64*a+l;else{var f=e[i++]-128;if(f<0)throw new Error(u(s.MALFORMED_UTF,[c.toString(16),a.toString(16),l.toString(16),f.toString(16)]));if(!(c<248))throw new Error(u(s.MALFORMED_UTF,[c.toString(16),a.toString(16),l.toString(16),f.toString(16)]));o=262144*(c-240)+4096*a+64*l+f}}}o>65535&&(o-=65536,r+=String.fromCharCode(55296+(o>>10)),o=56320+(1023&o)),r+=String.fromCharCode(o)}return r}h.prototype.encode=function(){var e,t=(15&this.type)<<4,n=0,r=[],i=0;switch(void 0!==this.messageIdentifier&&(n+=2),this.type){case o.CONNECT:switch(this.mqttVersion){case 3:n+=l.length+3;break;case 4:n+=f.length+3}n+=v(this.clientId)+2,void 0!==this.willMessage&&(n+=v(this.willMessage.destinationName)+2,(e=this.willMessage.payloadBytes)instanceof Uint8Array||(e=new Uint8Array(c)),n+=e.byteLength+2),void 0!==this.userName&&(n+=v(this.userName)+2),void 0!==this.password&&(n+=v(this.password)+2);break;case o.SUBSCRIBE:t|=2;for(var s=0;s<this.topics.length;s++)r[s]=v(this.topics[s]),n+=r[s]+2;n+=this.requestedQos.length;break;case o.UNSUBSCRIBE:t|=2;for(s=0;s<this.topics.length;s++)r[s]=v(this.topics[s]),n+=r[s]+2;break;case o.PUBREL:t|=2;break;case o.PUBLISH:this.payloadMessage.duplicate&&(t|=8),t=t|=this.payloadMessage.qos<<1,this.payloadMessage.retained&&(t|=1),n+=(i=v(this.payloadMessage.destinationName))+2;var c=this.payloadMessage.payloadBytes;n+=c.byteLength,c instanceof ArrayBuffer?c=new Uint8Array(c):c instanceof Uint8Array||(c=new Uint8Array(c.buffer));break;case o.DISCONNECT:}var a=function(e){var t=new Array(1),n=0;do{var o=e%128;(e>>=7)>0&&(o|=128),t[n++]=o}while(e>0&&n<4);return t}(n),u=a.length+1,h=new ArrayBuffer(n+u),p=new Uint8Array(h);if(p[0]=t,p.set(a,1),this.type==o.PUBLISH)u=g(this.payloadMessage.destinationName,i,p,u);else if(this.type==o.CONNECT){switch(this.mqttVersion){case 3:p.set(l,u),u+=l.length;break;case 4:p.set(f,u),u+=f.length}var y=0;this.cleanSession&&(y=2),void 0!==this.willMessage&&(y|=4,y|=this.willMessage.qos<<3,this.willMessage.retained&&(y|=32)),void 0!==this.userName&&(y|=128),void 0!==this.password&&(y|=64),p[u++]=y,u=d(this.keepAliveInterval,p,u)}switch(void 0!==this.messageIdentifier&&(u=d(this.messageIdentifier,p,u)),this.type){case o.CONNECT:u=g(this.clientId,v(this.clientId),p,u),void 0!==this.willMessage&&(u=g(this.willMessage.destinationName,v(this.willMessage.destinationName),p,u),u=d(e.byteLength,p,u),p.set(e,u),u+=e.byteLength),void 0!==this.userName&&(u=g(this.userName,v(this.userName),p,u)),void 0!==this.password&&(u=g(this.password,v(this.password),p,u));break;case o.PUBLISH:p.set(c,u);break;case o.SUBSCRIBE:for(s=0;s<this.topics.length;s++)u=g(this.topics[s],r[s],p,u),p[u++]=this.requestedQos[s];break;case o.UNSUBSCRIBE:for(s=0;s<this.topics.length;s++)u=g(this.topics[s],r[s],p,u)}return h};var C=function(e,t){this._client=e,this._keepAliveInterval=1e3*t,this.isReset=!1;var n=new h(o.PINGREQ).encode(),r=function(e){return function(){return i.apply(e)}},i=function(){this.isReset?(this.isReset=!1,this._client._trace("Pinger.doPing","send PINGREQ"),this._client.socket.send(n),this.timeout=setTimeout(r(this),this._keepAliveInterval)):(this._client._trace("Pinger.doPing","Timed out"),this._client._disconnected(s.PING_TIMEOUT.code,u(s.PING_TIMEOUT)))};this.reset=function(){this.isReset=!0,clearTimeout(this.timeout),this._keepAliveInterval>0&&(this.timeout=setTimeout(r(this),this._keepAliveInterval))},this.cancel=function(){clearTimeout(this.timeout)}},w=function(e,t,n,o){t||(t=30);this.timeout=setTimeout(function(e,t,n){return function(){return e.apply(t,n)}}(n,e,o),1e3*t),this.cancel=function(){clearTimeout(this.timeout)}},m=function(t,o,r,i,c){if(!("WebSocket"in e&&null!==e.WebSocket))throw new Error(u(s.UNSUPPORTED,["WebSocket"]));if(!("ArrayBuffer"in e&&null!==e.ArrayBuffer))throw new Error(u(s.UNSUPPORTED,["ArrayBuffer"]));for(var a in this._trace("Paho.Client",t,o,r,i,c),this.host=o,this.port=r,this.path=i,this.uri=t,this.clientId=c,this._wsuri=null,this._localKey=o+":"+r+("/mqtt"!=i?":"+i:"")+":"+c+":",this._msg_queue=[],this._buffered_msg_queue=[],this._sentMessages={},this._receivedMessages={},this._notify_msg_sent={},this._message_identifier=1,this._sequence=0,n)0!==a.indexOf("Sent:"+this._localKey)&&0!==a.indexOf("Received:"+this._localKey)||this.restore(a)};m.prototype.host=null,m.prototype.port=null,m.prototype.path=null,m.prototype.uri=null,m.prototype.clientId=null,m.prototype.socket=null,m.prototype.connected=!1,m.prototype.maxMessageIdentifier=65536,m.prototype.connectOptions=null,m.prototype.hostIndex=null,m.prototype.onConnected=null,m.prototype.onConnectionLost=null,m.prototype.onMessageDelivered=null,m.prototype.onMessageArrived=null,m.prototype.traceFunction=null,m.prototype._msg_queue=null,m.prototype._buffered_msg_queue=null,m.prototype._connectTimeout=null,m.prototype.sendPinger=null,m.prototype.receivePinger=null,m.prototype._reconnectInterval=1,m.prototype._reconnecting=!1,m.prototype._reconnectTimeout=null,m.prototype.disconnectedPublishing=!1,m.prototype.disconnectedBufferSize=5e3,m.prototype.receiveBuffer=null,m.prototype._traceBuffer=null,m.prototype._MAX_TRACE_ENTRIES=100,m.prototype.connect=function(e){var t=this._traceMask(e,"password");if(this._trace("Client.connect",t,this.socket,this.connected),this.connected)throw new Error(u(s.INVALID_STATE,["already connected"]));if(this.socket)throw new Error(u(s.INVALID_STATE,["already connected"]));this._reconnecting&&(this._reconnectTimeout.cancel(),this._reconnectTimeout=null,this._reconnecting=!1),this.connectOptions=e,this._reconnectInterval=1,this._reconnecting=!1,e.uris?(this.hostIndex=0,this._doConnect(e.uris[0])):this._doConnect(this.uri)},m.prototype.subscribe=function(e,t){if(this._trace("Client.subscribe",e,t),!this.connected)throw new Error(u(s.INVALID_STATE,["not connected"]));var n=new h(o.SUBSCRIBE);n.topics=e.constructor===Array?e:[e],void 0===t.qos&&(t.qos=0),n.requestedQos=[];for(var r=0;r<n.topics.length;r++)n.requestedQos[r]=t.qos;t.onSuccess&&(n.onSuccess=function(e){t.onSuccess({invocationContext:t.invocationContext,grantedQos:e})}),t.onFailure&&(n.onFailure=function(e){t.onFailure({invocationContext:t.invocationContext,errorCode:e,errorMessage:u(e)})}),t.timeout&&(n.timeOut=new w(this,t.timeout,t.onFailure,[{invocationContext:t.invocationContext,errorCode:s.SUBSCRIBE_TIMEOUT.code,errorMessage:u(s.SUBSCRIBE_TIMEOUT)}])),this._requires_ack(n),this._schedule_message(n)},m.prototype.unsubscribe=function(e,t){if(this._trace("Client.unsubscribe",e,t),!this.connected)throw new Error(u(s.INVALID_STATE,["not connected"]));var n=new h(o.UNSUBSCRIBE);n.topics=e.constructor===Array?e:[e],t.onSuccess&&(n.callback=function(){t.onSuccess({invocationContext:t.invocationContext})}),t.timeout&&(n.timeOut=new w(this,t.timeout,t.onFailure,[{invocationContext:t.invocationContext,errorCode:s.UNSUBSCRIBE_TIMEOUT.code,errorMessage:u(s.UNSUBSCRIBE_TIMEOUT)}])),this._requires_ack(n),this._schedule_message(n)},m.prototype.send=function(e){this._trace("Client.send",e);var t=new h(o.PUBLISH);if(t.payloadMessage=e,this.connected)e.qos>0?this._requires_ack(t):this.onMessageDelivered&&(this._notify_msg_sent[t]=this.onMessageDelivered(t.payloadMessage)),this._schedule_message(t);else{if(!this._reconnecting||!this.disconnectedPublishing)throw new Error(u(s.INVALID_STATE,["not connected"]));if(Object.keys(this._sentMessages).length+this._buffered_msg_queue.length>this.disconnectedBufferSize)throw new Error(u(s.BUFFER_FULL,[this.disconnectedBufferSize]));e.qos>0?this._requires_ack(t):(t.sequence=++this._sequence,this._buffered_msg_queue.unshift(t))}},m.prototype.disconnect=function(){if(this._trace("Client.disconnect"),this._reconnecting&&(this._reconnectTimeout.cancel(),this._reconnectTimeout=null,this._reconnecting=!1),!this.socket)throw new Error(u(s.INVALID_STATE,["not connecting or connected"]));var e=new h(o.DISCONNECT);this._notify_msg_sent[e]=i(this._disconnected,this),this._schedule_message(e)},m.prototype.getTraceLog=function(){if(null!==this._traceBuffer){for(var e in this._trace("Client.getTraceLog",new Date),this._trace("Client.getTraceLog in flight messages",this._sentMessages.length),this._sentMessages)this._trace("_sentMessages ",e,this._sentMessages[e]);for(var e in this._receivedMessages)this._trace("_receivedMessages ",e,this._receivedMessages[e]);return this._traceBuffer}},m.prototype.startTrace=function(){null===this._traceBuffer&&(this._traceBuffer=[]),this._trace("Client.startTrace",new Date,"@VERSION@-@BUILDLEVEL@")},m.prototype.stopTrace=function(){delete this._traceBuffer},m.prototype._doConnect=function(e){if(this.connectOptions.useSSL){var t=e.split(":");t[0]="wss",e=t.join(":")}this._wsuri=e,this.connected=!1,this.connectOptions.mqttVersion<4?this.socket=new WebSocket(e,["mqttv3.1"]):this.socket=new WebSocket(e,["mqtt"]),this.socket.binaryType="arraybuffer",this.socket.onopen=i(this._on_socket_open,this),this.socket.onmessage=i(this._on_socket_message,this),this.socket.onerror=i(this._on_socket_error,this),this.socket.onclose=i(this._on_socket_close,this),this.sendPinger=new C(this,this.connectOptions.keepAliveInterval),this.receivePinger=new C(this,this.connectOptions.keepAliveInterval),this._connectTimeout&&(this._connectTimeout.cancel(),this._connectTimeout=null),this._connectTimeout=new w(this,this.connectOptions.timeout,this._disconnected,[s.CONNECT_TIMEOUT.code,u(s.CONNECT_TIMEOUT)])},m.prototype._schedule_message=function(e){this._msg_queue.unshift(e),this.connected&&this._process_queue()},m.prototype.store=function(e,t){var r={type:t.type,messageIdentifier:t.messageIdentifier,version:1};switch(t.type){case o.PUBLISH:t.pubRecReceived&&(r.pubRecReceived=!0),r.payloadMessage={};for(var i="",c=t.payloadMessage.payloadBytes,a=0;a<c.length;a++)c[a]<=15?i=i+"0"+c[a].toString(16):i+=c[a].toString(16);r.payloadMessage.payloadHex=i,r.payloadMessage.qos=t.payloadMessage.qos,r.payloadMessage.destinationName=t.payloadMessage.destinationName,t.payloadMessage.duplicate&&(r.payloadMessage.duplicate=!0),t.payloadMessage.retained&&(r.payloadMessage.retained=!0),0===e.indexOf("Sent:")&&(void 0===t.sequence&&(t.sequence=++this._sequence),r.sequence=t.sequence);break;default:throw Error(u(s.INVALID_STORED_DATA,[e+this._localKey+t.messageIdentifier,r]))}n.setItem(e+this._localKey+t.messageIdentifier,JSON.stringify(r))},m.prototype.restore=function(e){var t=n.getItem(e),r=JSON.parse(t),i=new h(r.type,r);switch(r.type){case o.PUBLISH:for(var c=r.payloadMessage.payloadHex,a=new ArrayBuffer(c.length/2),l=new Uint8Array(a),f=0;c.length>=2;){var p=parseInt(c.substring(0,2),16);c=c.substring(2,c.length),l[f++]=p}var d=new E(l);d.qos=r.payloadMessage.qos,d.destinationName=r.payloadMessage.destinationName,r.payloadMessage.duplicate&&(d.duplicate=!0),r.payloadMessage.retained&&(d.retained=!0),i.payloadMessage=d;break;default:throw Error(u(s.INVALID_STORED_DATA,[e,t]))}0===e.indexOf("Sent:"+this._localKey)?(i.payloadMessage.duplicate=!0,this._sentMessages[i.messageIdentifier]=i):0===e.indexOf("Received:"+this._localKey)&&(this._receivedMessages[i.messageIdentifier]=i)},m.prototype._process_queue=function(){for(var e=null;e=this._msg_queue.pop();)this._socket_send(e),this._notify_msg_sent[e]&&(this._notify_msg_sent[e](),delete this._notify_msg_sent[e])},m.prototype._requires_ack=function(e){var t=Object.keys(this._sentMessages).length;if(t>this.maxMessageIdentifier)throw Error("Too many messages:"+t);for(;void 0!==this._sentMessages[this._message_identifier];)this._message_identifier++;e.messageIdentifier=this._message_identifier,this._sentMessages[e.messageIdentifier]=e,e.type===o.PUBLISH&&this.store("Sent:",e),this._message_identifier===this.maxMessageIdentifier&&(this._message_identifier=1)},m.prototype._on_socket_open=function(){var e=new h(o.CONNECT,this.connectOptions);e.clientId=this.clientId,this._socket_send(e)},m.prototype._on_socket_message=function(e){this._trace("Client._on_socket_message",e.data);for(var t=this._deframeMessages(e.data),n=0;n<t.length;n+=1)this._handleMessage(t[n])},m.prototype._deframeMessages=function(e){var t=new Uint8Array(e),n=[];if(this.receiveBuffer){var o=new Uint8Array(this.receiveBuffer.length+t.length);o.set(this.receiveBuffer),o.set(t,this.receiveBuffer.length),t=o,delete this.receiveBuffer}try{for(var r=0;r<t.length;){var i=p(t,r),c=i[0];if(r=i[1],null===c)break;n.push(c)}r<t.length&&(this.receiveBuffer=t.subarray(r))}catch(e){var a="undefined"==e.hasOwnProperty("stack")?e.stack.toString():"No Error Stack Available";return void this._disconnected(s.INTERNAL_ERROR.code,u(s.INTERNAL_ERROR,[e.message,a]))}return n},m.prototype._handleMessage=function(e){this._trace("Client._handleMessage",e);try{switch(e.type){case o.CONNACK:if(this._connectTimeout.cancel(),this._reconnectTimeout&&this._reconnectTimeout.cancel(),this.connectOptions.cleanSession){for(var t in this._sentMessages){var r=this._sentMessages[t];n.removeItem("Sent:"+this._localKey+r.messageIdentifier)}for(var t in this._sentMessages={},this._receivedMessages){var i=this._receivedMessages[t];n.removeItem("Received:"+this._localKey+i.messageIdentifier)}this._receivedMessages={}}if(0!==e.returnCode){this._disconnected(s.CONNACK_RETURNCODE.code,u(s.CONNACK_RETURNCODE,[e.returnCode,a[e.returnCode]]));break}this.connected=!0,this.connectOptions.uris&&(this.hostIndex=this.connectOptions.uris.length);var c=[];for(var l in this._sentMessages)this._sentMessages.hasOwnProperty(l)&&c.push(this._sentMessages[l]);if(this._buffered_msg_queue.length>0)for(var f=null;f=this._buffered_msg_queue.pop();)c.push(f),this.onMessageDelivered&&(this._notify_msg_sent[f]=this.onMessageDelivered(f.payloadMessage));c=c.sort(function(e,t){return e.sequence-t.sequence});for(var p=0,d=c.length;p<d;p++){if((r=c[p]).type==o.PUBLISH&&r.pubRecReceived){var g=new h(o.PUBREL,{messageIdentifier:r.messageIdentifier});this._schedule_message(g)}else this._schedule_message(r)}this.connectOptions.onSuccess&&this.connectOptions.onSuccess({invocationContext:this.connectOptions.invocationContext});var y=!1;this._reconnecting&&(y=!0,this._reconnectInterval=1,this._reconnecting=!1),this._connected(y,this._wsuri),this._process_queue();break;case o.PUBLISH:this._receivePublish(e);break;case o.PUBACK:(r=this._sentMessages[e.messageIdentifier])&&(delete this._sentMessages[e.messageIdentifier],n.removeItem("Sent:"+this._localKey+e.messageIdentifier),this.onMessageDelivered&&this.onMessageDelivered(r.payloadMessage));break;case o.PUBREC:if(r=this._sentMessages[e.messageIdentifier]){r.pubRecReceived=!0;g=new h(o.PUBREL,{messageIdentifier:e.messageIdentifier});this.store("Sent:",r),this._schedule_message(g)}break;case o.PUBREL:i=this._receivedMessages[e.messageIdentifier];n.removeItem("Received:"+this._localKey+e.messageIdentifier),i&&(this._receiveMessage(i),delete this._receivedMessages[e.messageIdentifier]);var v=new h(o.PUBCOMP,{messageIdentifier:e.messageIdentifier});this._schedule_message(v);break;case o.PUBCOMP:r=this._sentMessages[e.messageIdentifier];delete this._sentMessages[e.messageIdentifier],n.removeItem("Sent:"+this._localKey+e.messageIdentifier),this.onMessageDelivered&&this.onMessageDelivered(r.payloadMessage);break;case o.SUBACK:(r=this._sentMessages[e.messageIdentifier])&&(r.timeOut&&r.timeOut.cancel(),128===e.returnCode[0]?r.onFailure&&r.onFailure(e.returnCode):r.onSuccess&&r.onSuccess(e.returnCode),delete this._sentMessages[e.messageIdentifier]);break;case o.UNSUBACK:(r=this._sentMessages[e.messageIdentifier])&&(r.timeOut&&r.timeOut.cancel(),r.callback&&r.callback(),delete this._sentMessages[e.messageIdentifier]);break;case o.PINGRESP:this.sendPinger.reset();break;case o.DISCONNECT:this._disconnected(s.INVALID_MQTT_MESSAGE_TYPE.code,u(s.INVALID_MQTT_MESSAGE_TYPE,[e.type]));break;default:this._disconnected(s.INVALID_MQTT_MESSAGE_TYPE.code,u(s.INVALID_MQTT_MESSAGE_TYPE,[e.type]))}}catch(e){var b="undefined"==e.hasOwnProperty("stack")?e.stack.toString():"No Error Stack Available";return void this._disconnected(s.INTERNAL_ERROR.code,u(s.INTERNAL_ERROR,[e.message,b]))}},m.prototype._on_socket_error=function(e){this._reconnecting||this._disconnected(s.SOCKET_ERROR.code,u(s.SOCKET_ERROR,[e.data]))},m.prototype._on_socket_close=function(){this._reconnecting||this._disconnected(s.SOCKET_CLOSE.code,u(s.SOCKET_CLOSE))},m.prototype._socket_send=function(e){if(1==e.type){var t=this._traceMask(e,"password");this._trace("Client._socket_send",t)}else this._trace("Client._socket_send",e);this.socket.send(e.encode()),this.sendPinger.reset()},m.prototype._receivePublish=function(e){switch(e.payloadMessage.qos){case"undefined":case 0:this._receiveMessage(e);break;case 1:var t=new h(o.PUBACK,{messageIdentifier:e.messageIdentifier});this._schedule_message(t),this._receiveMessage(e);break;case 2:this._receivedMessages[e.messageIdentifier]=e,this.store("Received:",e);var n=new h(o.PUBREC,{messageIdentifier:e.messageIdentifier});this._schedule_message(n);break;default:throw Error("Invaild qos="+e.payloadMessage.qos)}},m.prototype._receiveMessage=function(e){this.onMessageArrived&&this.onMessageArrived(e.payloadMessage)},m.prototype._connected=function(e,t){this.onConnected&&this.onConnected(e,t)},m.prototype._reconnect=function(){this._trace("Client._reconnect"),this.connected||(this._reconnecting=!0,this.sendPinger.cancel(),this.receivePinger.cancel(),this._reconnectInterval<128&&(this._reconnectInterval=2*this._reconnectInterval),this.connectOptions.uris?(this.hostIndex=0,this._doConnect(this.connectOptions.uris[0])):this._doConnect(this.uri))},m.prototype._disconnected=function(e,t){if(this._trace("Client._disconnected",e,t),void 0!==e&&this._reconnecting)this._reconnectTimeout=new w(this,this._reconnectInterval,this._reconnect);else if(this.sendPinger.cancel(),this.receivePinger.cancel(),this._connectTimeout&&(this._connectTimeout.cancel(),this._connectTimeout=null),this._msg_queue=[],this._buffered_msg_queue=[],this._notify_msg_sent={},this.socket&&(this.socket.onopen=null,this.socket.onmessage=null,this.socket.onerror=null,this.socket.onclose=null,1===this.socket.readyState&&this.socket.close(),delete this.socket),this.connectOptions.uris&&this.hostIndex<this.connectOptions.uris.length-1)this.hostIndex++,this._doConnect(this.connectOptions.uris[this.hostIndex]);else if(void 0===e&&(e=s.OK.code,t=u(s.OK)),this.connected){if(this.connected=!1,this.onConnectionLost&&this.onConnectionLost({errorCode:e,errorMessage:t,reconnect:this.connectOptions.reconnect,uri:this._wsuri}),e!==s.OK.code&&this.connectOptions.reconnect)return this._reconnectInterval=1,void this._reconnect()}else 4===this.connectOptions.mqttVersion&&!1===this.connectOptions.mqttVersionExplicit?(this._trace("Failed to connect V4, dropping back to V3"),this.connectOptions.mqttVersion=3,this.connectOptions.uris?(this.hostIndex=0,this._doConnect(this.connectOptions.uris[0])):this._doConnect(this.uri)):this.connectOptions.onFailure&&this.connectOptions.onFailure({invocationContext:this.connectOptions.invocationContext,errorCode:e,errorMessage:t})},m.prototype._trace=function(){if(this.traceFunction){var e=Array.prototype.slice.call(arguments);for(var t in e)void 0!==e[t]&&e.splice(t,1,JSON.stringify(e[t]));var n=e.join("");this.traceFunction({severity:"Debug",message:n})}if(null!==this._traceBuffer){t=0;for(var o=arguments.length;t<o;t++)this._traceBuffer.length==this._MAX_TRACE_ENTRIES&&this._traceBuffer.shift(),0===t?this._traceBuffer.push(arguments[t]):void 0===arguments[t]?this._traceBuffer.push(arguments[t]):this._traceBuffer.push("  "+JSON.stringify(arguments[t]))}},m.prototype._traceMask=function(e,t){var n={};for(var o in e)e.hasOwnProperty(o)&&(n[o]=o==t?"******":e[o]);return n};var E=function(e){var t,n;if(!("string"==typeof e||e instanceof ArrayBuffer||ArrayBuffer.isView(e)&&!(e instanceof DataView)))throw u(s.INVALID_ARGUMENT,[e,"newPayload"]);t=e;var o=0,r=!1,i=!1;Object.defineProperties(this,{payloadString:{enumerable:!0,get:function(){return"string"==typeof t?t:_(t,0,t.length)}},payloadBytes:{enumerable:!0,get:function(){if("string"==typeof t){var e=new ArrayBuffer(v(t)),n=new Uint8Array(e);return b(t,n,0),n}return t}},destinationName:{enumerable:!0,get:function(){return n},set:function(e){if("string"!=typeof e)throw new Error(u(s.INVALID_ARGUMENT,[e,"newDestinationName"]));n=e}},qos:{enumerable:!0,get:function(){return o},set:function(e){if(0!==e&&1!==e&&2!==e)throw new Error("Invalid argument:"+e);o=e}},retained:{enumerable:!0,get:function(){return r},set:function(e){if("boolean"!=typeof e)throw new Error(u(s.INVALID_ARGUMENT,[e,"newRetained"]));r=e}},topic:{enumerable:!0,get:function(){return n},set:function(e){n=e}},duplicate:{enumerable:!0,get:function(){return i},set:function(e){i=e}}})};return{Client:function(e,t,n,o){var i;if("string"!=typeof e)throw new Error(u(s.INVALID_TYPE,[c(e),"host"]));if(2==arguments.length){o=t;var a=(i=e).match(/^(wss?):\/\/((\[(.+)\])|([^\/]+?))(:(\d+))?(\/.*)$/);if(!a)throw new Error(u(s.INVALID_ARGUMENT,[e,"host"]));e=a[4]||a[2],t=parseInt(a[7]),n=a[8]}else{if(3==arguments.length&&(o=n,n="/mqtt"),"number"!=typeof t||t<0)throw new Error(u(s.INVALID_TYPE,[c(t),"port"]));if("string"!=typeof n)throw new Error(u(s.INVALID_TYPE,[c(n),"path"]));var l=-1!==e.indexOf(":")&&"["!==e.slice(0,1)&&"]"!==e.slice(-1);i="ws://"+(l?"["+e+"]":e)+":"+t+n}for(var f=0,h=0;h<o.length;h++){var p=o.charCodeAt(h);55296<=p&&p<=56319&&h++,f++}if("string"!=typeof o||f>65535)throw new Error(u(s.INVALID_ARGUMENT,[o,"clientId"]));var d=new m(i,e,t,n,o);Object.defineProperties(this,{host:{get:function(){return e},set:function(){throw new Error(u(s.UNSUPPORTED_OPERATION))}},port:{get:function(){return t},set:function(){throw new Error(u(s.UNSUPPORTED_OPERATION))}},path:{get:function(){return n},set:function(){throw new Error(u(s.UNSUPPORTED_OPERATION))}},uri:{get:function(){return i},set:function(){throw new Error(u(s.UNSUPPORTED_OPERATION))}},clientId:{get:function(){return d.clientId},set:function(){throw new Error(u(s.UNSUPPORTED_OPERATION))}},onConnected:{get:function(){return d.onConnected},set:function(e){if("function"!=typeof e)throw new Error(u(s.INVALID_TYPE,[c(e),"onConnected"]));d.onConnected=e}},disconnectedPublishing:{get:function(){return d.disconnectedPublishing},set:function(e){d.disconnectedPublishing=e}},disconnectedBufferSize:{get:function(){return d.disconnectedBufferSize},set:function(e){d.disconnectedBufferSize=e}},onConnectionLost:{get:function(){return d.onConnectionLost},set:function(e){if("function"!=typeof e)throw new Error(u(s.INVALID_TYPE,[c(e),"onConnectionLost"]));d.onConnectionLost=e}},onMessageDelivered:{get:function(){return d.onMessageDelivered},set:function(e){if("function"!=typeof e)throw new Error(u(s.INVALID_TYPE,[c(e),"onMessageDelivered"]));d.onMessageDelivered=e}},onMessageArrived:{get:function(){return d.onMessageArrived},set:function(e){if("function"!=typeof e)throw new Error(u(s.INVALID_TYPE,[c(e),"onMessageArrived"]));d.onMessageArrived=e}},trace:{get:function(){return d.traceFunction},set:function(e){if("function"!=typeof e)throw new Error(u(s.INVALID_TYPE,[c(e),"onTrace"]));d.traceFunction=e}}}),this.connect=function(e){if(r(e=e||{},{timeout:"number",userName:"string",password:"string",willMessage:"object",keepAliveInterval:"number",cleanSession:"boolean",useSSL:"boolean",invocationContext:"object",onSuccess:"function",onFailure:"function",hosts:"object",ports:"object",reconnect:"boolean",mqttVersion:"number",mqttVersionExplicit:"boolean",uris:"object"}),void 0===e.keepAliveInterval&&(e.keepAliveInterval=60),e.mqttVersion>4||e.mqttVersion<3)throw new Error(u(s.INVALID_ARGUMENT,[e.mqttVersion,"connectOptions.mqttVersion"]));if(void 0===e.mqttVersion?(e.mqttVersionExplicit=!1,e.mqttVersion=4):e.mqttVersionExplicit=!0,void 0!==e.password&&void 0===e.userName)throw new Error(u(s.INVALID_ARGUMENT,[e.password,"connectOptions.password"]));if(e.willMessage){if(!(e.willMessage instanceof E))throw new Error(u(s.INVALID_TYPE,[e.willMessage,"connectOptions.willMessage"]));if(e.willMessage.stringPayload=null,void 0===e.willMessage.destinationName)throw new Error(u(s.INVALID_TYPE,[c(e.willMessage.destinationName),"connectOptions.willMessage.destinationName"]))}if(void 0===e.cleanSession&&(e.cleanSession=!0),e.hosts){if(!(e.hosts instanceof Array))throw new Error(u(s.INVALID_ARGUMENT,[e.hosts,"connectOptions.hosts"]));if(e.hosts.length<1)throw new Error(u(s.INVALID_ARGUMENT,[e.hosts,"connectOptions.hosts"]));for(var t=!1,o=0;o<e.hosts.length;o++){if("string"!=typeof e.hosts[o])throw new Error(u(s.INVALID_TYPE,[c(e.hosts[o]),"connectOptions.hosts["+o+"]"]));if(/^(wss?):\/\/((\[(.+)\])|([^\/]+?))(:(\d+))?(\/.*)$/.test(e.hosts[o])){if(0===o)t=!0;else if(!t)throw new Error(u(s.INVALID_ARGUMENT,[e.hosts[o],"connectOptions.hosts["+o+"]"]))}else if(t)throw new Error(u(s.INVALID_ARGUMENT,[e.hosts[o],"connectOptions.hosts["+o+"]"]))}if(t)e.uris=e.hosts;else{if(!e.ports)throw new Error(u(s.INVALID_ARGUMENT,[e.ports,"connectOptions.ports"]));if(!(e.ports instanceof Array))throw new Error(u(s.INVALID_ARGUMENT,[e.ports,"connectOptions.ports"]));if(e.hosts.length!==e.ports.length)throw new Error(u(s.INVALID_ARGUMENT,[e.ports,"connectOptions.ports"]));for(e.uris=[],o=0;o<e.hosts.length;o++){if("number"!=typeof e.ports[o]||e.ports[o]<0)throw new Error(u(s.INVALID_TYPE,[c(e.ports[o]),"connectOptions.ports["+o+"]"]));var a=e.hosts[o],l=e.ports[o],f=-1!==a.indexOf(":");i="ws://"+(f?"["+a+"]":a)+":"+l+n,e.uris.push(i)}}}d.connect(e)},this.subscribe=function(e,t){if("string"!=typeof e&&e.constructor!==Array)throw new Error("Invalid argument:"+e);if(r(t=t||{},{qos:"number",invocationContext:"object",onSuccess:"function",onFailure:"function",timeout:"number"}),t.timeout&&!t.onFailure)throw new Error("subscribeOptions.timeout specified with no onFailure callback.");if(void 0!==t.qos&&0!==t.qos&&1!==t.qos&&2!==t.qos)throw new Error(u(s.INVALID_ARGUMENT,[t.qos,"subscribeOptions.qos"]));d.subscribe(e,t)},this.unsubscribe=function(e,t){if("string"!=typeof e&&e.constructor!==Array)throw new Error("Invalid argument:"+e);if(r(t=t||{},{invocationContext:"object",onSuccess:"function",onFailure:"function",timeout:"number"}),t.timeout&&!t.onFailure)throw new Error("unsubscribeOptions.timeout specified with no onFailure callback.");d.unsubscribe(e,t)},this.send=function(e,t,n,o){var r;if(0===arguments.length)throw new Error("Invalid argument.length");if(1==arguments.length){if(!(e instanceof E)&&"string"!=typeof e)throw new Error("Invalid argument:"+c(e));if(void 0===(r=e).destinationName)throw new Error(u(s.INVALID_ARGUMENT,[r.destinationName,"Message.destinationName"]));d.send(r)}else(r=new E(t)).destinationName=e,arguments.length>=3&&(r.qos=n),arguments.length>=4&&(r.retained=o),d.send(r)},this.publish=function(e,t,n,o){var r;if(0===arguments.length)throw new Error("Invalid argument.length");if(1==arguments.length){if(!(e instanceof E)&&"string"!=typeof e)throw new Error("Invalid argument:"+c(e));if(void 0===(r=e).destinationName)throw new Error(u(s.INVALID_ARGUMENT,[r.destinationName,"Message.destinationName"]));d.send(r)}else(r=new E(t)).destinationName=e,arguments.length>=3&&(r.qos=n),arguments.length>=4&&(r.retained=o),d.send(r)},this.disconnect=function(){d.disconnect()},this.getTraceLog=function(){return d.getTraceLog()},this.startTrace=function(){d.startTrace()},this.stopTrace=function(){d.stopTrace()},this.isConnected=function(){return d.connected}},Message:E}}(void 0!==e?e:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},"object"===c(t)&&"object"===c(o)?o.exports=s():void 0===(i="function"==typeof(r=s)?r.call(t,n,t,o):r)||(o.exports=i)}).call(this,n(2),n(5)(e))},function(e,t,n){"use strict";n.r(t),function(e){n.d(t,"ChatSession",function(){return r});var o=n(1);e.connect=e.connect||{},connect.ChatSession=o.a;var r=o.a}.call(this,n(2))},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL3NwcmludGYtanMvc3JjL3NwcmludGYuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvcmUvZXhjZXB0aW9ucy5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvY2xpZW50L1htbEh0dHBDbGllbnQuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dsb2JhbENvbmZpZy5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvdXRpbHMuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbnN0YW50cy5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvbG9nLmpzIiwid2VicGFjazovLy8uL3NyYy9jbGllbnQvY2xpZW50LmpzIiwid2VicGFjazovLy8uL3NyYy9jb3JlL2NoYXRBcmdzVmFsaWRhdG9yLmpzIiwid2VicGFjazovLy8uL3NyYy9jb3JlL2Nvbm5lY3Rpb25NYW5hZ2VyLmpzIiwid2VicGFjazovLy8uL3NyYy9jb3JlL2Nvbm5lY3Rpb25IZWxwZXIuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvcmUvZXZlbnRDb25zdHJ1Y3Rvci5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvY29yZS9ldmVudGJ1cy5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvY29yZS9jaGF0Q29udHJvbGxlci5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvY29yZS9jaGF0U2Vzc2lvbi5qcyIsIndlYnBhY2s6Ly8vKHdlYnBhY2spL2J1aWxkaW4vZ2xvYmFsLmpzIiwid2VicGFjazovLy8uL3NyYy9wYWhvLW1xdHQuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2luZGV4LmpzIiwid2VicGFjazovLy8od2VicGFjaykvYnVpbGRpbi9tb2R1bGUuanMiXSwibmFtZXMiOlsiaW5zdGFsbGVkTW9kdWxlcyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImV4cG9ydHMiLCJtb2R1bGUiLCJpIiwibCIsIm1vZHVsZXMiLCJjYWxsIiwibSIsImMiLCJkIiwibmFtZSIsImdldHRlciIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJyIiwiU3ltYm9sIiwidG9TdHJpbmdUYWciLCJ2YWx1ZSIsInQiLCJtb2RlIiwiX19lc01vZHVsZSIsIm5zIiwiY3JlYXRlIiwia2V5IiwiYmluZCIsIm4iLCJvYmplY3QiLCJwcm9wZXJ0eSIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwicCIsInMiLCJfX1dFQlBBQ0tfQU1EX0RFRklORV9SRVNVTFRfXyIsInJlIiwibm90X3N0cmluZyIsIm5vdF9ib29sIiwibm90X3R5cGUiLCJub3RfcHJpbWl0aXZlIiwibnVtYmVyIiwibnVtZXJpY19hcmciLCJqc29uIiwibm90X2pzb24iLCJ0ZXh0IiwibW9kdWxvIiwicGxhY2Vob2xkZXIiLCJrZXlfYWNjZXNzIiwiaW5kZXhfYWNjZXNzIiwic2lnbiIsInNwcmludGYiLCJwYXJzZV90cmVlIiwiYXJndiIsImFyZyIsImsiLCJwaCIsInBhZCIsInBhZF9jaGFyYWN0ZXIiLCJwYWRfbGVuZ3RoIiwiaXNfcG9zaXRpdmUiLCJjdXJzb3IiLCJ0cmVlX2xlbmd0aCIsImxlbmd0aCIsIm91dHB1dCIsImtleXMiLCJ1bmRlZmluZWQiLCJFcnJvciIsInBhcmFtX25vIiwidGVzdCIsInR5cGUiLCJGdW5jdGlvbiIsImlzTmFOIiwiVHlwZUVycm9yIiwicGFyc2VJbnQiLCJ0b1N0cmluZyIsIlN0cmluZyIsImZyb21DaGFyQ29kZSIsIkpTT04iLCJzdHJpbmdpZnkiLCJ3aWR0aCIsInByZWNpc2lvbiIsInBhcnNlRmxvYXQiLCJ0b0V4cG9uZW50aWFsIiwidG9GaXhlZCIsIk51bWJlciIsInRvUHJlY2lzaW9uIiwic3Vic3RyaW5nIiwic2xpY2UiLCJ0b0xvd2VyQ2FzZSIsInZhbHVlT2YiLCJ0b1VwcGVyQ2FzZSIsInJlcGxhY2UiLCJwYWRfY2hhciIsImNoYXJBdCIsInJlcGVhdCIsImFsaWduIiwic3ByaW50Zl9mb3JtYXQiLCJmbXQiLCJzcHJpbnRmX2NhY2hlIiwibWF0Y2giLCJfZm10IiwiYXJnX25hbWVzIiwiZXhlYyIsInB1c2giLCJTeW50YXhFcnJvciIsImZpZWxkX2xpc3QiLCJyZXBsYWNlbWVudF9maWVsZCIsImZpZWxkX21hdGNoIiwic3ByaW50Zl9wYXJzZSIsImFyZ3VtZW50cyIsInZzcHJpbnRmIiwiYXBwbHkiLCJjb25jYXQiLCJ3aW5kb3ciLCJWYWx1ZUVycm9yIiwibWVzc2FnZSIsIl90aGlzIiwiX2NsYXNzQ2FsbENoZWNrIiwidGhpcyIsIl9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuIiwiX2dldFByb3RvdHlwZU9mIiwiY29uc29sZSIsImxvZyIsIlVuSW1wbGVtZW50ZWRNZXRob2RFeGNlcHRpb24iLCJfdGhpczIiLCJJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24iLCJhcmd1bWVudCIsIl90aGlzMyIsIklsbGVnYWxTdGF0ZUV4Y2VwdGlvbiIsIl90aGlzNCIsIm1ha2VIdHRwUmVxdWVzdCIsIm9iaiIsInN1Y2Nlc3MiLCJmYWlsdXJlIiwieGhyIiwiWE1MSHR0cFJlcXVlc3QiLCJvcGVuIiwibWV0aG9kIiwidXJsIiwiaGVhZGVycyIsImZvckVhY2giLCJzZXRSZXF1ZXN0SGVhZGVyIiwib25sb2FkIiwic3RhdHVzIiwib25lcnJvciIsInNlbmQiLCJib2R5IiwiR2xvYmFsQ29uZmlnIiwiY29uZmlnSW5wdXQiLCJjb25maWciLCJyZWdpb24iLCJlbmRwb2ludE92ZXJyaWRlIiwiZW5kcG9pbnQiLCJyZWNvbm5lY3QiLCJyZWNvbm5lY3RJbnRlcnZhbCIsIm1heFJlY29ubmVjdEF0dGVtcHRzIiwiVXRpbHMiLCJwcmVtaXNlIiwiYXNzZXJ0VHJ1ZSIsInV0aWxzX3R5cGVvZiIsIkRhdGUiLCJnZXRUaW1lIiwibm93IiwiTWF0aCIsInJhbmRvbSIsIkFycmF5IiwiaXNBcnJheSIsImFsbG93ZWRWYWx1ZXMiLCJ2YWx1ZXMiLCJlbnVtT2JqIiwieCIsInkiLCJmaW5kIiwidiIsImFycmF5IiwicHJlZGljYXRlIiwiY29uc3RydWN0b3IiLCJtYXAiLCJhc3NlcnROb3ROdWxsIiwiaXNPYmplY3QiLCJtcyIsIlByb21pc2UiLCJyZXNvbHZlIiwic2V0VGltZW91dCIsImYiLCJpbnRlcnZhbCIsImNvdW50IiwiY2F0Y2giLCJkZWxheSIsIm1heCIsInRoZW4iLCJhc3luY1doaWxlSW50ZXJ2YWwiLCJyZWplY3QiLCJSRVNPVVJDRV9QQVRIIiwiSFRUUF9NRVRIT0RTIiwiTUVTU0FHRV9QRVJTSVNURU5DRSIsIkNPTlRFTlRfVFlQRSIsInRleHRQbGFpbiIsIlZJU0lCSUxJVFkiLCJtYWtlRW51bSIsIlBFUlNJU1RFTkNFIiwiUkVHSU9OX0NPTkZJRyIsInVzLXdlc3QtMiIsImludm9rZVVybCIsInVzLWVhc3QtMSIsImFwLXNvdXRoZWFzdC0yIiwiYXAtbm9ydGhlYXN0LTEiLCJldS1jZW50cmFsLTEiLCJNUVRUX0NPTlNUQU5UUyIsIlNFU1NJT05fVFlQRVMiLCJBR0VOVCIsIkNVU1RPTUVSIiwiQ0hBVF9FVkVOVFMiLCJUUkFOU0NSSVBUX0RFRkFVTFRfUEFSQU1TIiwiTE9HU19ERVNUSU5BVElPTiIsIlJFR0lPTlMiLCJMb2dnZXIiLCJkYXRhIiwiTG9nTGV2ZWwiLCJERUJVRyIsIklORk8iLCJXQVJOIiwiRVJST1IiLCJMb2dNYW5hZ2VySW1wbCIsImxvZ19jbGFzc0NhbGxDaGVjayIsInVwZGF0ZUxvZ2dlckNvbmZpZyIsImNvbnNvbGVMb2dnZXJXcmFwcGVyIiwiY3JlYXRlQ29uc29sZUxvZ2dlciIsImxldmVsIiwibG9nU3RhdGVtZW50IiwiaGFzQ2xpZW50TG9nZ2VyIiwiX2NsaWVudExvZ2dlciIsImRlYnVnIiwiaW5mbyIsIndhcm4iLCJlcnJvciIsIl9sZXZlbCIsIm9wdGlvbnMiLCJwcmVmaXgiLCJfbG9nc0Rlc3RpbmF0aW9uIiwiTG9nZ2VyV3JhcHBlckltcGwiLCJpbnB1dENvbmZpZyIsImxvZ2dlciIsIkxvZ2dlcldyYXBwZXIiLCJsb2dfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybiIsImxvZ19nZXRQcm90b3R5cGVPZiIsIl9sZW4iLCJhcmdzIiwiX2tleSIsIl9sb2ciLCJfbGVuMiIsIl9rZXkyIiwiX2xlbjMiLCJfa2V5MyIsIl9sZW40IiwiX2tleTQiLCJMb2dNYW5hZ2VyIiwiaXNMZXZlbEVuYWJsZWQiLCJ3cml0ZVRvQ2xpZW50TG9nZ2VyIiwiX3Nob3VsZExvZyIsIl9jb252ZXJ0VG9TaW5nbGVTdGF0ZW1lbnQiLCJfd3JpdGVUb0NsaWVudExvZ2dlciIsImluZGV4IiwiX2NvbnZlcnRUb1N0cmluZyIsImlzU3RyaW5nIiwiaXNGdW5jdGlvbiIsInRvU3RyaW5nUmVzdWx0IiwiQ2hhdENsaWVudEZhY3RvcnlJbXBsIiwiY2xpZW50X2NsYXNzQ2FsbENoZWNrIiwiY2xpZW50Q2FjaGUiLCJvcHRpb25zSW5wdXQiLCJhc3NpZ24iLCJnZXRSZWdpb24iLCJjbGllbnQiLCJfY3JlYXRlQ2xpZW50IiwiZ2V0RW5kcG9pbnRPdmVycmlkZSIsInN0YWdlQ29uZmlnIiwiSHR0cENoYXRDbGllbnQiLCJDaGF0Q2xpZW50IiwicGFydGljaXBhbnRUb2tlbiIsImV2ZW50VHlwZSIsIm1lc3NhZ2VJZHMiLCJ2aXNpYmlsaXR5IiwicGVyc2lzdGVuY2UiLCJjbGllbnRfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybiIsImNsaWVudF9nZXRQcm90b3R5cGVPZiIsImNhbGxIdHRwQ2xpZW50IiwiZ2V0TG9nZ2VyIiwiY29ubmVjdGlvblRva2VuIiwiTWVzc2FnZSIsIkNvbnRlbnRUeXBlIiwiQ29udGVudCIsIlBlcnNpc3RlbmNlIiwicmVxdWVzdElucHV0IiwiX2NhbGxIdHRwQ2xpZW50IiwiUGFydGljaXBhbnRFdmVudCIsIlZpc2liaWxpdHkiLCJQYXJ0aWNpcGFudEV2ZW50VHlwZSIsInNlbGYiLCJDb250ZW50LVR5cGUiLCJBY2NlcHQiLCJyZXF1ZXN0IiwicmVzcG9uc2VPYmplY3QiLCJwYXJzZSIsInJlc3BvbnNlVGV4dCIsImVycm9yT2JqZWN0Iiwic3RhdHVzVGV4dCIsImUiLCJDaGF0Q2xpZW50RmFjdG9yeSIsIkNoYXRDb250cm9sbGVyQXJnc1ZhbGlkYXRvciIsImNoYXREZXRhaWxzIiwiYXNzZXJ0SXNPYmplY3QiLCJhc3NlcnRJc0VudW0iLCJtZXRob2ROYW1lIiwiYXNzZXJ0SXNOb25FbXB0eVN0cmluZyIsImFzc2VydElzTGlzdCIsIkNoYXRTZXJ2aWNlQXJnc1ZhbGlkYXRvciIsImluaXRpYWxDb250YWN0SWQiLCJjb250YWN0SWQiLCJwYXJ0aWNpcGFudElkIiwiY29ubmVjdGlvbkRldGFpbHMiLCJQcmVTaWduZWRDb25uZWN0aW9uVXJsIiwiQ29ubmVjdGlvbklkIiwiQ2hhdENvbm5lY3Rpb25NYW5hZ2VyIiwiY29ubmVjdGlvbkFyZ3MiLCJjYWxsYmFjayIsIlBhaG9NcXR0Q29ubmVjdGlvbiIsIk1RVFRDbGllbnQiLCJjb25uZWN0T3B0aW9ucyIsInRvcGljIiwic3Vic2NyaWJlT3B0aW9ucyIsInVuc3Vic2NyaWJlT3B0aW9ucyIsIk1xdHRDb25uZWN0aW9uU3RhdHVzIiwiZnJlZXplIiwiTmV2ZXJDb25uZWN0ZWQiLCJDb25uZWN0aW5nIiwiQ29ubmVjdGVkIiwiRGlzY29ubmVjdGVkIiwiTXF0dEV2ZW50cyIsIk1FU1NBR0UiLCJESVNDT05ORUNURUQiLCJjb25uZWN0aW9uTWFuYWdlcl9jbGFzc0NhbGxDaGVjayIsImNvbm5lY3Rpb25NYW5hZ2VyX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4iLCJjb25uZWN0aW9uTWFuYWdlcl9nZXRQcm90b3R5cGVPZiIsInByZVNpZ25lZFVybCIsImNvbm5lY3Rpb25JZCIsInBhaG9DbGllbnQiLCJQYWhvIiwiQ2xpZW50IiwiY29ubmVjdGlvbk1hbmFnZXJfYXNzZXJ0VGhpc0luaXRpYWxpemVkIiwib25NZXNzYWdlQXJyaXZlZCIsIl9tZXNzYWdlQXJyaXZlZENhbGxiYWNrIiwib25Db25uZWN0aW9uTG9zdCIsIl9jb25uZWN0aW9uTG9zdENhbGxCYWNrIiwibmV2ZXJDb25uZWN0ZWQiLCJfc3Vic2NyaWJlZFRvcGljcyIsIm9uU3VjY2VzcyIsInJlc3BvbnNlIiwiX29uQ29ubmVjdFN1Y2Nlc3MiLCJvbkZhaWx1cmUiLCJlcnJvckRldGFpbHMiLCJyZWFzb24iLCJfb25Db25uZWN0RmFpbHVyZSIsImNvbm5lY3QiLCJpbmNvbWluZ01lc3NhZ2UiLCJxb3MiLCJwYXlsb2FkU3RyaW5nIiwiZGlzY29ubmVjdCIsIl9zdWJzY3JpYmVTdWNjZXNzIiwiZ3JhbnRlZFFvcyIsInN1YnNjcmliZSIsImluZGV4T2YiLCJfYWRkVG9Ub3BpY3MiLCJfdW5zdWJzY3JpYmVTdWNjZXNzIiwidW5zdWJzY3JpYmUiLCJmaWx0ZXIiLCJDb25uZWN0aW9uSGVscGVyIiwiQ29ubmVjdGlvbkhlbHBlclN0YXR1cyIsIk5ldmVyU3RhcnRlZCIsIlN0YXJ0aW5nIiwiRW5kZWQiLCJDb25uZWN0aW9uSGVscGVyRXZlbnRzIiwiU29sb0NoYXRDb25uZWN0aW9uTXF0dEhlbHBlciIsImNvbm5lY3Rpb25IZWxwZXJfY2xhc3NDYWxsQ2hlY2siLCJjb25uZWN0aW9uSGVscGVyX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4iLCJjb25uZWN0aW9uSGVscGVyX2dldFByb3RvdHlwZU9mIiwiY29uc2lkZXJQYXJ0aWNpcGFudEFzRGlzY29ubmVjdGVkIiwiaW90Q29ubmVjdGlvbiIsIm1xdHRDb25uZWN0aW9uUHJvdmlkZXIiLCJldmVudERhdGEiLCJfaGFuZGxlSW90RXZlbnQiLCJnZXRTdGF0dXMiLCJjaGF0Q29udHJvbGxlckNhbGxiYWNrIiwiX2NyZWF0ZVN0YXJ0UHJvbWlzZSIsInJlc292bGUiLCJfY29ubmVjdCIsInVzZVNTTCIsImtlZXBBbGl2ZUludGVydmFsIiwibXF0dFZlcnNpb24iLCJ0aW1lb3V0IiwiX3Bvc3RDb25uZWN0IiwiX2Nvbm5lY3RGYWlsZWQiLCJjb25uZWN0UmVzcG9uc2UiLCJfc3Vic2NyaWJlIiwiY29ubmVjdEVycm9yIiwiY29ubmVjdFN1Y2Nlc3MiLCJkZXRhaWxzIiwiX3Bvc3RTdWJzY3JpYmUiLCJfc3Vic2NyaWJlRmFpbGVkIiwic3Vic2NyaWJlUmVzcG9uc2UiLCJzdWJzY3JpYmVFcnJvciIsIkV2ZW50Q29uc3RydWN0b3IiLCJyZXR1cm5PYmplY3QiLCJfZnJvbUluY29taW5nRGF0YSIsImluY29taW5nRGF0YSIsIkRhdGEiLCJUeXBlIiwiU3Vic2NyaXB0aW9uIiwic3ViTWFwIiwiZXZlbnROYW1lIiwiaWQiLCJyYW5kb21JZCIsIlN1YnNjcmlwdGlvbk1hcCIsInN1YklkTWFwIiwic3ViRXZlbnROYW1lTWFwIiwic3ViIiwic3ViTGlzdCIsInN1YklkIiwiY29udGFpbnMiLCJnZXRBbGxTdWJzY3JpcHRpb25zIiwicmVkdWNlIiwiYSIsImIiLCJnZXRTdWJzY3JpcHRpb25zIiwiRXZlbnRCdXMiLCJwYXJhbXNJbiIsInBhcmFtcyIsImxvZ0V2ZW50cyIsInN1YnNjcmliZUFsbCIsInRyaWdnZXIiLCJhbGxFdmVudFN1YnMiLCJldmVudFN1YnMiLCJ0cmlnZ2VyQXN5bmMiLCJicmlkZ2UiLCJldmVudCIsInVuc3Vic2NyaWJlQWxsIiwiTmV0d29ya0xpbmtTdGF0dXMiLCJDaGF0Q29udHJvbGxlciIsInRleHRNZXNzYWdlIiwiUGVyc2lzdGVudENvbm5lY3Rpb25BbmRDaGF0U2VydmljZUNvbnRyb2xsZXIiLCJjaGF0Q29udHJvbGxlcl9jbGFzc0NhbGxDaGVjayIsImNoYXRDb250cm9sbGVyX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4iLCJjaGF0Q29udHJvbGxlcl9nZXRQcm90b3R5cGVPZiIsInNldEFyZ3VtZW50cyIsImFyZ3NWYWxpZGF0b3IiLCJjaGF0RXZlbnRDb25zdHJ1Y3RvciIsImludGlhbENvbnRhY3RJZCIsImNoYXRDbGllbnQiLCJjb25uZWN0aW9uSGVscGVyQ2FsbGJhY2siLCJfaGFuZGxlQ29ubmVjdGlvbkhlbHBlckV2ZW50cyIsIl9oYXNDb25uZWN0aW9uRGV0YWlscyIsImhhc0Nvbm5lY3Rpb25EZXRhaWxzIiwiY2hhdENvbnRyb2xsZXJGYWN0b3J5IiwiX3NldENvbm5lY3Rpb25IZWxwZXIiLCJfY29ubmVjdENhbGxlZEF0bGVhc3RPbmNlIiwiX2V2ZXJDb25uZWN0ZWQiLCJwdWJzdWIiLCJfcGFydGljaXBhbnREaXNjb25uZWN0ZWQiLCJzZXNzaW9uTWV0YWRhdGEiLCJjb25uZWN0aW9uSGVscGVyUHJvdmlkZXIiLCJjcmVhdGVDb25uZWN0aW9uSGVscGVyUHJvdmlkZXIiLCJjb25uZWN0aW9uSGVscGVyIiwiY2xlYW5VcE9uUGFydGljaXBhbnREaXNjb25uZWN0IiwibWV0YWRhdGEiLCJ2YWxpZGF0ZVNlbmRNZXNzYWdlIiwic2VuZE1lc3NhZ2UiLCJ2YWxpZGF0ZVNlbmRFdmVudCIsInBlcnNpc3RlbmNlQXJndW1lbnQiLCJQRVJTSVNURUQiLCJ2aXNpYmlsaXR5QXJndW1lbnQiLCJBTEwiLCJzZW5kRXZlbnQiLCJpbnB1dEFyZ3MiLCJJbnRpYWxDb250YWN0SWQiLCJTdGFydEtleSIsIlNjYW5EaXJlY3Rpb24iLCJTb3J0S2V5IiwiTWF4UmVzdWx0cyIsIk5leHRUb2tlbiIsImdldFRyYW5zY3JpcHQiLCJmcm9tQ29ubmVjdGlvbkhlbHBlckV2ZW50IiwiZ2V0Q2hhdERldGFpbHMiLCJleGMiLCJjaGF0RXZlbnQiLCJfbWFwQ29ubmVjdGlvbkhlbHBlckV2ZW50VG9DaGF0RXZlbnQiLCJfaGFuZGxlQ2hhdEV2ZW50IiwiX2ZvcndhcmRDaGF0RXZlbnQiLCJfaW5pdGlhdGVSZWNvbm5lY3QiLCJ2YWxpZGF0ZUNvbm5lY3RDaGF0IiwiX2NhbkNvbm5lY3QiLCJfb25TdWNjZXNzIiwiX29uRmFpbHVyZSIsInN0YXJ0IiwiX2ZldGNoQ29ubmVjdGlvbkRldGFpbHMiLCJfY2FuUmVjb25uZWN0IiwiZ2V0Q29ubmVjdGlvblN0YXR1cyIsIl9kZWJ1ZyIsImNvbm5lY3RDYWxsZWQiLCJjcmVhdGVDb25uZWN0aW9uRGV0YWlscyIsIlBhcnRpY2lwYW50Q3JlZGVudGlhbHMiLCJDb25uZWN0aW9uQXV0aGVudGljYXRpb25Ub2tlbiIsImVuZCIsImRpc2Nvbm5lY3RDaGF0IiwiY29ubmVjdGlvbkhlbHBlclN0YXR1cyIsIl9jb252ZXJ0Q29ubmVjdGlvbkhlbHBlclN0YXR1cyIsIkNoYXRTZXNzaW9uRmFjdG9yeSIsInBhcnRpY2lwYW50VHlwZSIsIlBlcnNpc3RlbnRDb25uZWN0aW9uQW5kQ2hhdFNlcnZpY2VTZXNzaW9uRmFjdG9yeSIsImNoYXRTZXNzaW9uX2NsYXNzQ2FsbENoZWNrIiwiY2hhdFNlc3Npb25fcG9zc2libGVDb25zdHJ1Y3RvclJldHVybiIsImNoYXRTZXNzaW9uX2dldFByb3RvdHlwZU9mIiwiY2hhdENvbm5lY3Rpb25NYW5hZ2VyIiwiY2hhdENvbnRyb2xsZXIiLCJfY3JlYXRlQ2hhdFNlc3Npb24iLCJBZ2VudENoYXRTZXNzaW9uIiwiQ3VzdG9tZXJDaGF0U2Vzc2lvbiIsImNoYXREZXRhaWxzSW5wdXQiLCJfbm9ybWFsaXplQ2hhdERldGFpbHMiLCJnZXRDYWNoZWRDbGllbnQiLCJDaGF0Q29ubmVjdGlvbkF0dHJpYnV0ZXMiLCJ2YWxpZGF0ZUluaXRpYXRlQ2hhdFJlc3BvbnNlIiwiUGFydGljaXBhbnRJZCIsIkNvbnRhY3RJZCIsInZhbGlkYXRlQ2hhdERldGFpbHMiLCJjcmVhdGVOZXdNcXR0Q29ubmVjdGlvblByb3ZpZGVyIiwiQ2hhdFNlc3Npb24iLCJjb250cm9sbGVyIiwiZGlzY29ubmVjdFBhcnRpY2lwYW50IiwiYnJlYWtDb25uZWN0aW9uIiwiQ0hBVF9TRVNTSU9OX0ZBQ1RPUlkiLCJDaGF0U2Vzc2lvbk9iamVjdCIsImNyZWF0ZUFnZW50Q2hhdFNlc3Npb24iLCJjcmVhdGVDdXN0b21lckNoYXRTZXNzaW9uIiwic2V0R2xvYmFsQ29uZmlnIiwibG9nZ2VyQ29uZmlnIiwidXBkYXRlIiwiU2Vzc2lvblR5cGVzIiwiZyIsImZhY3RvcnkiLCJnbG9iYWwiLCJsb2NhbFN0b3JhZ2UiLCJzZXRJdGVtIiwiaXRlbSIsImdldEl0ZW0iLCJyZW1vdmVJdGVtIiwiTUVTU0FHRV9UWVBFIiwiQ09OTkVDVCIsIkNPTk5BQ0siLCJQVUJMSVNIIiwiUFVCQUNLIiwiUFVCUkVDIiwiUFVCUkVMIiwiUFVCQ09NUCIsIlNVQlNDUklCRSIsIlNVQkFDSyIsIlVOU1VCU0NSSUJFIiwiVU5TVUJBQ0siLCJQSU5HUkVRIiwiUElOR1JFU1AiLCJESVNDT05ORUNUIiwidmFsaWRhdGUiLCJlcnJvclN0ciIsInZhbGlkS2V5IiwiX3R5cGVvZiIsImZvcm1hdCIsIklOVkFMSURfVFlQRSIsInNjb3BlIiwiT0siLCJjb2RlIiwiQ09OTkVDVF9USU1FT1VUIiwiU1VCU0NSSUJFX1RJTUVPVVQiLCJVTlNVQlNDUklCRV9USU1FT1VUIiwiUElOR19USU1FT1VUIiwiSU5URVJOQUxfRVJST1IiLCJDT05OQUNLX1JFVFVSTkNPREUiLCJTT0NLRVRfRVJST1IiLCJTT0NLRVRfQ0xPU0UiLCJNQUxGT1JNRURfVVRGIiwiVU5TVVBQT1JURUQiLCJJTlZBTElEX1NUQVRFIiwiSU5WQUxJRF9BUkdVTUVOVCIsIlVOU1VQUE9SVEVEX09QRVJBVElPTiIsIklOVkFMSURfU1RPUkVEX0RBVEEiLCJJTlZBTElEX01RVFRfTUVTU0FHRV9UWVBFIiwiTUFMRk9STUVEX1VOSUNPREUiLCJCVUZGRVJfRlVMTCIsIkNPTk5BQ0tfUkMiLCIwIiwiMSIsIjIiLCIzIiwiNCIsIjUiLCJzdWJzdGl0dXRpb25zIiwiZmllbGQiLCJwYXJ0MSIsInBhcnQyIiwiTXF0dFByb3RvSWRlbnRpZmllcnYzIiwiTXF0dFByb3RvSWRlbnRpZmllcnY0IiwiV2lyZU1lc3NhZ2UiLCJkZWNvZGVNZXNzYWdlIiwiaW5wdXQiLCJwb3MiLCJkaWdpdCIsInN0YXJ0aW5nUG9zIiwiZmlyc3QiLCJtZXNzYWdlSW5mbyIsInJlbUxlbmd0aCIsIm11bHRpcGxpZXIiLCJlbmRQb3MiLCJ3aXJlTWVzc2FnZSIsInNlc3Npb25QcmVzZW50IiwicmV0dXJuQ29kZSIsImxlbiIsInJlYWRVaW50MTYiLCJ0b3BpY05hbWUiLCJwYXJzZVVURjgiLCJtZXNzYWdlSWRlbnRpZmllciIsInN1YmFycmF5IiwicmV0YWluZWQiLCJkdXBsaWNhdGUiLCJkZXN0aW5hdGlvbk5hbWUiLCJwYXlsb2FkTWVzc2FnZSIsIndyaXRlVWludDE2IiwiYnVmZmVyIiwib2Zmc2V0Iiwid3JpdGVTdHJpbmciLCJ1dGY4TGVuZ3RoIiwic3RyaW5nVG9VVEY4IiwiVVRGOExlbmd0aCIsImNoYXJDb2RlIiwiY2hhckNvZGVBdCIsImxvd0NoYXJDb2RlIiwidXRmMTYiLCJieXRlMSIsImJ5dGUyIiwiYnl0ZTMiLCJieXRlNCIsImVuY29kZSIsIndpbGxNZXNzYWdlUGF5bG9hZEJ5dGVzIiwidG9waWNTdHJMZW5ndGgiLCJkZXN0aW5hdGlvbk5hbWVMZW5ndGgiLCJjbGllbnRJZCIsIndpbGxNZXNzYWdlIiwicGF5bG9hZEJ5dGVzIiwiVWludDhBcnJheSIsImJ5dGVMZW5ndGgiLCJ1c2VyTmFtZSIsInBhc3N3b3JkIiwidG9waWNzIiwicmVxdWVzdGVkUW9zIiwiQXJyYXlCdWZmZXIiLCJtYmkiLCJudW1CeXRlcyIsImVuY29kZU1CSSIsImJ5dGVTdHJlYW0iLCJzZXQiLCJjb25uZWN0RmxhZ3MiLCJjbGVhblNlc3Npb24iLCJQaW5nZXIiLCJfY2xpZW50IiwiX2tlZXBBbGl2ZUludGVydmFsIiwiaXNSZXNldCIsInBpbmdSZXEiLCJkb1RpbWVvdXQiLCJwaW5nZXIiLCJkb1BpbmciLCJfdHJhY2UiLCJzb2NrZXQiLCJfZGlzY29ubmVjdGVkIiwicmVzZXQiLCJjbGVhclRpbWVvdXQiLCJjYW5jZWwiLCJUaW1lb3V0IiwidGltZW91dFNlY29uZHMiLCJhY3Rpb24iLCJDbGllbnRJbXBsIiwidXJpIiwiaG9zdCIsInBvcnQiLCJwYXRoIiwiV2ViU29ja2V0IiwiX3dzdXJpIiwiX2xvY2FsS2V5IiwiX21zZ19xdWV1ZSIsIl9idWZmZXJlZF9tc2dfcXVldWUiLCJfc2VudE1lc3NhZ2VzIiwiX3JlY2VpdmVkTWVzc2FnZXMiLCJfbm90aWZ5X21zZ19zZW50IiwiX21lc3NhZ2VfaWRlbnRpZmllciIsIl9zZXF1ZW5jZSIsInJlc3RvcmUiLCJjb25uZWN0ZWQiLCJtYXhNZXNzYWdlSWRlbnRpZmllciIsImhvc3RJbmRleCIsIm9uQ29ubmVjdGVkIiwib25NZXNzYWdlRGVsaXZlcmVkIiwidHJhY2VGdW5jdGlvbiIsIl9jb25uZWN0VGltZW91dCIsInNlbmRQaW5nZXIiLCJyZWNlaXZlUGluZ2VyIiwiX3JlY29ubmVjdEludGVydmFsIiwiX3JlY29ubmVjdGluZyIsIl9yZWNvbm5lY3RUaW1lb3V0IiwiZGlzY29ubmVjdGVkUHVibGlzaGluZyIsImRpc2Nvbm5lY3RlZEJ1ZmZlclNpemUiLCJyZWNlaXZlQnVmZmVyIiwiX3RyYWNlQnVmZmVyIiwiX01BWF9UUkFDRV9FTlRSSUVTIiwiY29ubmVjdE9wdGlvbnNNYXNrZWQiLCJfdHJhY2VNYXNrIiwidXJpcyIsIl9kb0Nvbm5lY3QiLCJpbnZvY2F0aW9uQ29udGV4dCIsImVycm9yQ29kZSIsImVycm9yTWVzc2FnZSIsInRpbWVPdXQiLCJfcmVxdWlyZXNfYWNrIiwiX3NjaGVkdWxlX21lc3NhZ2UiLCJzZXF1ZW5jZSIsInVuc2hpZnQiLCJnZXRUcmFjZUxvZyIsInN0YXJ0VHJhY2UiLCJzdG9wVHJhY2UiLCJ3c3VybCIsInVyaVBhcnRzIiwic3BsaXQiLCJqb2luIiwiYmluYXJ5VHlwZSIsIm9ub3BlbiIsIl9vbl9zb2NrZXRfb3BlbiIsIm9ubWVzc2FnZSIsIl9vbl9zb2NrZXRfbWVzc2FnZSIsIl9vbl9zb2NrZXRfZXJyb3IiLCJvbmNsb3NlIiwiX29uX3NvY2tldF9jbG9zZSIsIl9wcm9jZXNzX3F1ZXVlIiwic3RvcmUiLCJzdG9yZWRNZXNzYWdlIiwidmVyc2lvbiIsInB1YlJlY1JlY2VpdmVkIiwiaGV4IiwibWVzc2FnZUJ5dGVzIiwicGF5bG9hZEhleCIsInBvcCIsIl9zb2NrZXRfc2VuZCIsIm1lc3NhZ2VDb3VudCIsIm1lc3NhZ2VzIiwiX2RlZnJhbWVNZXNzYWdlcyIsIl9oYW5kbGVNZXNzYWdlIiwiYnl0ZUFycmF5IiwibmV3RGF0YSIsInJlc3VsdCIsImVycm9yU3RhY2siLCJzdGFjayIsInNlbnRNZXNzYWdlIiwicmVjZWl2ZWRNZXNzYWdlIiwic2VxdWVuY2VkTWVzc2FnZXMiLCJtc2dJZCIsIm1zZyIsInNvcnQiLCJwdWJSZWxNZXNzYWdlIiwicmVjb25uZWN0ZWQiLCJfY29ubmVjdGVkIiwiX3JlY2VpdmVQdWJsaXNoIiwiX3JlY2VpdmVNZXNzYWdlIiwicHViQ29tcE1lc3NhZ2UiLCJ3aXJlTWVzc2FnZU1hc2tlZCIsInB1YkFja01lc3NhZ2UiLCJwdWJSZWNNZXNzYWdlIiwiX3JlY29ubmVjdCIsImVycm9yVGV4dCIsInJlYWR5U3RhdGUiLCJjbG9zZSIsIm1xdHRWZXJzaW9uRXhwbGljaXQiLCJzcGxpY2UiLCJyZWNvcmQiLCJzZXZlcml0eSIsInNoaWZ0IiwidHJhY2VPYmplY3QiLCJtYXNrZWQiLCJ0cmFjZU9iamVjdE1hc2tlZCIsImF0dHIiLCJuZXdQYXlsb2FkIiwicGF5bG9hZCIsImlzVmlldyIsIkRhdGFWaWV3IiwiZGVmaW5lUHJvcGVydGllcyIsIm5ld0Rlc3RpbmF0aW9uTmFtZSIsIm5ld1FvcyIsIm5ld1JldGFpbmVkIiwibmV3VG9waWMiLCJuZXdEdXBsaWNhdGUiLCJpcHY2QWRkU0JyYWNrZXQiLCJjbGllbnRJZExlbmd0aCIsIm5ld09uQ29ubmVjdGVkIiwibmV3RGlzY29ubmVjdGVkUHVibGlzaGluZyIsIm5ld0Rpc2Nvbm5lY3RlZEJ1ZmZlclNpemUiLCJuZXdPbkNvbm5lY3Rpb25Mb3N0IiwibmV3T25NZXNzYWdlRGVsaXZlcmVkIiwibmV3T25NZXNzYWdlQXJyaXZlZCIsInRyYWNlIiwiaG9zdHMiLCJwb3J0cyIsInN0cmluZ1BheWxvYWQiLCJ1c2luZ1VSSXMiLCJpcHY2IiwicHVibGlzaCIsImlzQ29ubmVjdGVkIiwiZGVmaW5lIiwiX19XRUJQQUNLX0FNRF9ERUZJTkVfRkFDVE9SWV9fIiwiX193ZWJwYWNrX2V4cG9ydHNfXyIsIl9jb3JlX2NoYXRTZXNzaW9uX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18iLCJ3ZWJwYWNrUG9seWZpbGwiLCJkZXByZWNhdGUiLCJwYXRocyIsImNoaWxk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bmUsS0FBQS9CLEVBQUEsbUJBQU5peEIsS0FBTUMsRUFBQS95QixLQUFBTCxFQUFBRixFQUFBRSxFQUFBQyxHQUFBbXpCLEtBQUFuekIsRUFBQUQsUUFBQWtDLDJEQ3pGVnBDLEVBQUFrQixFQUFBcXlCLEdBQUEsU0FBQWhSLEdBQUF2aUIsRUFBQVUsRUFBQTZ5QixFQUFBLGdDQUFBOVIsSUFBQSxJQUFBK1IsRUFBQXh6QixFQUFBLEdBR0F1aUIsRUFBTzFMLFFBQVUwTCxFQUFPMUwsU0FBVyxHQUNuQ0EsUUFBUTRLLFlBQWNLLElBRWYsSUFBTUwsRUFBY0ssb0NDTjNCM2hCLEVBQUFELFFBQUEsU0FBQUMsR0FvQkEsT0FuQkFBLEVBQUFzekIsa0JBQ0F0ekIsRUFBQXV6QixVQUFBLGFBQ0F2ekIsRUFBQXd6QixNQUFBLEdBRUF4ekIsRUFBQXl6QixXQUFBenpCLEVBQUF5ekIsU0FBQSxJQUNBOXlCLE9BQUFDLGVBQUFaLEVBQUEsVUFDQWEsWUFBQSxFQUNBQyxJQUFBLFdBQ0EsT0FBQWQsRUFBQUUsS0FHQVMsT0FBQUMsZUFBQVosRUFBQSxNQUNBYSxZQUFBLEVBQ0FDLElBQUEsV0FDQSxPQUFBZCxFQUFBQyxLQUdBRCxFQUFBc3pCLGdCQUFBLEdBRUF0ekIiLCJmaWxlIjoiYW1hem9uLWNvbm5lY3QtY2hhdC5qcyIsInNvdXJjZXNDb250ZW50IjpbIiBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKSB7XG4gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4gXHRcdH1cbiBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbiBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuIFx0XHRcdGk6IG1vZHVsZUlkLFxuIFx0XHRcdGw6IGZhbHNlLFxuIFx0XHRcdGV4cG9ydHM6IHt9XG4gXHRcdH07XG5cbiBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG4gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbiBcdFx0bW9kdWxlLmwgPSB0cnVlO1xuXG4gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiBcdH1cblxuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb24gZm9yIGhhcm1vbnkgZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7XG4gXHRcdGlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywgbmFtZSkpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgbmFtZSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGdldHRlciB9KTtcbiBcdFx0fVxuIFx0fTtcblxuIFx0Ly8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yID0gZnVuY3Rpb24oZXhwb3J0cykge1xuIFx0XHRpZih0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wudG9TdHJpbmdUYWcpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiAnTW9kdWxlJyB9KTtcbiBcdFx0fVxuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xuIFx0fTtcblxuIFx0Ly8gY3JlYXRlIGEgZmFrZSBuYW1lc3BhY2Ugb2JqZWN0XG4gXHQvLyBtb2RlICYgMTogdmFsdWUgaXMgYSBtb2R1bGUgaWQsIHJlcXVpcmUgaXRcbiBcdC8vIG1vZGUgJiAyOiBtZXJnZSBhbGwgcHJvcGVydGllcyBvZiB2YWx1ZSBpbnRvIHRoZSBuc1xuIFx0Ly8gbW9kZSAmIDQ6IHJldHVybiB2YWx1ZSB3aGVuIGFscmVhZHkgbnMgb2JqZWN0XG4gXHQvLyBtb2RlICYgOHwxOiBiZWhhdmUgbGlrZSByZXF1aXJlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnQgPSBmdW5jdGlvbih2YWx1ZSwgbW9kZSkge1xuIFx0XHRpZihtb2RlICYgMSkgdmFsdWUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKHZhbHVlKTtcbiBcdFx0aWYobW9kZSAmIDgpIHJldHVybiB2YWx1ZTtcbiBcdFx0aWYoKG1vZGUgJiA0KSAmJiB0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnICYmIHZhbHVlICYmIHZhbHVlLl9fZXNNb2R1bGUpIHJldHVybiB2YWx1ZTtcbiBcdFx0dmFyIG5zID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yKG5zKTtcbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KG5zLCAnZGVmYXVsdCcsIHsgZW51bWVyYWJsZTogdHJ1ZSwgdmFsdWU6IHZhbHVlIH0pO1xuIFx0XHRpZihtb2RlICYgMiAmJiB0eXBlb2YgdmFsdWUgIT0gJ3N0cmluZycpIGZvcih2YXIga2V5IGluIHZhbHVlKSBfX3dlYnBhY2tfcmVxdWlyZV9fLmQobnMsIGtleSwgZnVuY3Rpb24oa2V5KSB7IHJldHVybiB2YWx1ZVtrZXldOyB9LmJpbmQobnVsbCwga2V5KSk7XG4gXHRcdHJldHVybiBucztcbiBcdH07XG5cbiBcdC8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSBmdW5jdGlvbihtb2R1bGUpIHtcbiBcdFx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0RGVmYXVsdCgpIHsgcmV0dXJuIG1vZHVsZVsnZGVmYXVsdCddOyB9IDpcbiBcdFx0XHRmdW5jdGlvbiBnZXRNb2R1bGVFeHBvcnRzKCkgeyByZXR1cm4gbW9kdWxlOyB9O1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCAnYScsIGdldHRlcik7XG4gXHRcdHJldHVybiBnZXR0ZXI7XG4gXHR9O1xuXG4gXHQvLyBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGxcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iamVjdCwgcHJvcGVydHkpIHsgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KTsgfTtcblxuIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbiBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7XG5cblxuIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXyhfX3dlYnBhY2tfcmVxdWlyZV9fLnMgPSA0KTtcbiIsIi8qIGdsb2JhbCB3aW5kb3csIGV4cG9ydHMsIGRlZmluZSAqL1xuXG4hZnVuY3Rpb24oKSB7XG4gICAgJ3VzZSBzdHJpY3QnXG5cbiAgICB2YXIgcmUgPSB7XG4gICAgICAgIG5vdF9zdHJpbmc6IC9bXnNdLyxcbiAgICAgICAgbm90X2Jvb2w6IC9bXnRdLyxcbiAgICAgICAgbm90X3R5cGU6IC9bXlRdLyxcbiAgICAgICAgbm90X3ByaW1pdGl2ZTogL1tedl0vLFxuICAgICAgICBudW1iZXI6IC9bZGllZmddLyxcbiAgICAgICAgbnVtZXJpY19hcmc6IC9bYmNkaWVmZ3V4WF0vLFxuICAgICAgICBqc29uOiAvW2pdLyxcbiAgICAgICAgbm90X2pzb246IC9bXmpdLyxcbiAgICAgICAgdGV4dDogL15bXlxceDI1XSsvLFxuICAgICAgICBtb2R1bG86IC9eXFx4MjV7Mn0vLFxuICAgICAgICBwbGFjZWhvbGRlcjogL15cXHgyNSg/OihbMS05XVxcZCopXFwkfFxcKChbXildKylcXCkpPyhcXCspPygwfCdbXiRdKT8oLSk/KFxcZCspPyg/OlxcLihcXGQrKSk/KFtiLWdpam9zdFR1dnhYXSkvLFxuICAgICAgICBrZXk6IC9eKFthLXpfXVthLXpfXFxkXSopL2ksXG4gICAgICAgIGtleV9hY2Nlc3M6IC9eXFwuKFthLXpfXVthLXpfXFxkXSopL2ksXG4gICAgICAgIGluZGV4X2FjY2VzczogL15cXFsoXFxkKylcXF0vLFxuICAgICAgICBzaWduOiAvXlsrLV0vXG4gICAgfVxuXG4gICAgZnVuY3Rpb24gc3ByaW50ZihrZXkpIHtcbiAgICAgICAgLy8gYGFyZ3VtZW50c2AgaXMgbm90IGFuIGFycmF5LCBidXQgc2hvdWxkIGJlIGZpbmUgZm9yIHRoaXMgY2FsbFxuICAgICAgICByZXR1cm4gc3ByaW50Zl9mb3JtYXQoc3ByaW50Zl9wYXJzZShrZXkpLCBhcmd1bWVudHMpXG4gICAgfVxuXG4gICAgZnVuY3Rpb24gdnNwcmludGYoZm10LCBhcmd2KSB7XG4gICAgICAgIHJldHVybiBzcHJpbnRmLmFwcGx5KG51bGwsIFtmbXRdLmNvbmNhdChhcmd2IHx8IFtdKSlcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBzcHJpbnRmX2Zvcm1hdChwYXJzZV90cmVlLCBhcmd2KSB7XG4gICAgICAgIHZhciBjdXJzb3IgPSAxLCB0cmVlX2xlbmd0aCA9IHBhcnNlX3RyZWUubGVuZ3RoLCBhcmcsIG91dHB1dCA9ICcnLCBpLCBrLCBwaCwgcGFkLCBwYWRfY2hhcmFjdGVyLCBwYWRfbGVuZ3RoLCBpc19wb3NpdGl2ZSwgc2lnblxuICAgICAgICBmb3IgKGkgPSAwOyBpIDwgdHJlZV9sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBwYXJzZV90cmVlW2ldID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICAgIG91dHB1dCArPSBwYXJzZV90cmVlW2ldXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmICh0eXBlb2YgcGFyc2VfdHJlZVtpXSA9PT0gJ29iamVjdCcpIHtcbiAgICAgICAgICAgICAgICBwaCA9IHBhcnNlX3RyZWVbaV0gLy8gY29udmVuaWVuY2UgcHVycG9zZXMgb25seVxuICAgICAgICAgICAgICAgIGlmIChwaC5rZXlzKSB7IC8vIGtleXdvcmQgYXJndW1lbnRcbiAgICAgICAgICAgICAgICAgICAgYXJnID0gYXJndltjdXJzb3JdXG4gICAgICAgICAgICAgICAgICAgIGZvciAoayA9IDA7IGsgPCBwaC5rZXlzLmxlbmd0aDsgaysrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoYXJnID09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihzcHJpbnRmKCdbc3ByaW50Zl0gQ2Fubm90IGFjY2VzcyBwcm9wZXJ0eSBcIiVzXCIgb2YgdW5kZWZpbmVkIHZhbHVlIFwiJXNcIicsIHBoLmtleXNba10sIHBoLmtleXNbay0xXSkpXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBhcmcgPSBhcmdbcGgua2V5c1trXV1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmIChwaC5wYXJhbV9ubykgeyAvLyBwb3NpdGlvbmFsIGFyZ3VtZW50IChleHBsaWNpdClcbiAgICAgICAgICAgICAgICAgICAgYXJnID0gYXJndltwaC5wYXJhbV9ub11cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7IC8vIHBvc2l0aW9uYWwgYXJndW1lbnQgKGltcGxpY2l0KVxuICAgICAgICAgICAgICAgICAgICBhcmcgPSBhcmd2W2N1cnNvcisrXVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmIChyZS5ub3RfdHlwZS50ZXN0KHBoLnR5cGUpICYmIHJlLm5vdF9wcmltaXRpdmUudGVzdChwaC50eXBlKSAmJiBhcmcgaW5zdGFuY2VvZiBGdW5jdGlvbikge1xuICAgICAgICAgICAgICAgICAgICBhcmcgPSBhcmcoKVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmIChyZS5udW1lcmljX2FyZy50ZXN0KHBoLnR5cGUpICYmICh0eXBlb2YgYXJnICE9PSAnbnVtYmVyJyAmJiBpc05hTihhcmcpKSkge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKHNwcmludGYoJ1tzcHJpbnRmXSBleHBlY3RpbmcgbnVtYmVyIGJ1dCBmb3VuZCAlVCcsIGFyZykpXG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYgKHJlLm51bWJlci50ZXN0KHBoLnR5cGUpKSB7XG4gICAgICAgICAgICAgICAgICAgIGlzX3Bvc2l0aXZlID0gYXJnID49IDBcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBzd2l0Y2ggKHBoLnR5cGUpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnYic6XG4gICAgICAgICAgICAgICAgICAgICAgICBhcmcgPSBwYXJzZUludChhcmcsIDEwKS50b1N0cmluZygyKVxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnYyc6XG4gICAgICAgICAgICAgICAgICAgICAgICBhcmcgPSBTdHJpbmcuZnJvbUNoYXJDb2RlKHBhcnNlSW50KGFyZywgMTApKVxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnZCc6XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ2knOlxuICAgICAgICAgICAgICAgICAgICAgICAgYXJnID0gcGFyc2VJbnQoYXJnLCAxMClcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ2onOlxuICAgICAgICAgICAgICAgICAgICAgICAgYXJnID0gSlNPTi5zdHJpbmdpZnkoYXJnLCBudWxsLCBwaC53aWR0aCA/IHBhcnNlSW50KHBoLndpZHRoKSA6IDApXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVha1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdlJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIGFyZyA9IHBoLnByZWNpc2lvbiA/IHBhcnNlRmxvYXQoYXJnKS50b0V4cG9uZW50aWFsKHBoLnByZWNpc2lvbikgOiBwYXJzZUZsb2F0KGFyZykudG9FeHBvbmVudGlhbCgpXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVha1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdmJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIGFyZyA9IHBoLnByZWNpc2lvbiA/IHBhcnNlRmxvYXQoYXJnKS50b0ZpeGVkKHBoLnByZWNpc2lvbikgOiBwYXJzZUZsb2F0KGFyZylcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ2cnOlxuICAgICAgICAgICAgICAgICAgICAgICAgYXJnID0gcGgucHJlY2lzaW9uID8gU3RyaW5nKE51bWJlcihhcmcudG9QcmVjaXNpb24ocGgucHJlY2lzaW9uKSkpIDogcGFyc2VGbG9hdChhcmcpXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVha1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdvJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIGFyZyA9IChwYXJzZUludChhcmcsIDEwKSA+Pj4gMCkudG9TdHJpbmcoOClcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ3MnOlxuICAgICAgICAgICAgICAgICAgICAgICAgYXJnID0gU3RyaW5nKGFyZylcbiAgICAgICAgICAgICAgICAgICAgICAgIGFyZyA9IChwaC5wcmVjaXNpb24gPyBhcmcuc3Vic3RyaW5nKDAsIHBoLnByZWNpc2lvbikgOiBhcmcpXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVha1xuICAgICAgICAgICAgICAgICAgICBjYXNlICd0JzpcbiAgICAgICAgICAgICAgICAgICAgICAgIGFyZyA9IFN0cmluZyghIWFyZylcbiAgICAgICAgICAgICAgICAgICAgICAgIGFyZyA9IChwaC5wcmVjaXNpb24gPyBhcmcuc3Vic3RyaW5nKDAsIHBoLnByZWNpc2lvbikgOiBhcmcpXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVha1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdUJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIGFyZyA9IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChhcmcpLnNsaWNlKDgsIC0xKS50b0xvd2VyQ2FzZSgpXG4gICAgICAgICAgICAgICAgICAgICAgICBhcmcgPSAocGgucHJlY2lzaW9uID8gYXJnLnN1YnN0cmluZygwLCBwaC5wcmVjaXNpb24pIDogYXJnKVxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAndSc6XG4gICAgICAgICAgICAgICAgICAgICAgICBhcmcgPSBwYXJzZUludChhcmcsIDEwKSA+Pj4gMFxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAndic6XG4gICAgICAgICAgICAgICAgICAgICAgICBhcmcgPSBhcmcudmFsdWVPZigpXG4gICAgICAgICAgICAgICAgICAgICAgICBhcmcgPSAocGgucHJlY2lzaW9uID8gYXJnLnN1YnN0cmluZygwLCBwaC5wcmVjaXNpb24pIDogYXJnKVxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAneCc6XG4gICAgICAgICAgICAgICAgICAgICAgICBhcmcgPSAocGFyc2VJbnQoYXJnLCAxMCkgPj4+IDApLnRvU3RyaW5nKDE2KVxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnWCc6XG4gICAgICAgICAgICAgICAgICAgICAgICBhcmcgPSAocGFyc2VJbnQoYXJnLCAxMCkgPj4+IDApLnRvU3RyaW5nKDE2KS50b1VwcGVyQ2FzZSgpXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVha1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAocmUuanNvbi50ZXN0KHBoLnR5cGUpKSB7XG4gICAgICAgICAgICAgICAgICAgIG91dHB1dCArPSBhcmdcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChyZS5udW1iZXIudGVzdChwaC50eXBlKSAmJiAoIWlzX3Bvc2l0aXZlIHx8IHBoLnNpZ24pKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzaWduID0gaXNfcG9zaXRpdmUgPyAnKycgOiAnLSdcbiAgICAgICAgICAgICAgICAgICAgICAgIGFyZyA9IGFyZy50b1N0cmluZygpLnJlcGxhY2UocmUuc2lnbiwgJycpXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzaWduID0gJydcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBwYWRfY2hhcmFjdGVyID0gcGgucGFkX2NoYXIgPyBwaC5wYWRfY2hhciA9PT0gJzAnID8gJzAnIDogcGgucGFkX2NoYXIuY2hhckF0KDEpIDogJyAnXG4gICAgICAgICAgICAgICAgICAgIHBhZF9sZW5ndGggPSBwaC53aWR0aCAtIChzaWduICsgYXJnKS5sZW5ndGhcbiAgICAgICAgICAgICAgICAgICAgcGFkID0gcGgud2lkdGggPyAocGFkX2xlbmd0aCA+IDAgPyBwYWRfY2hhcmFjdGVyLnJlcGVhdChwYWRfbGVuZ3RoKSA6ICcnKSA6ICcnXG4gICAgICAgICAgICAgICAgICAgIG91dHB1dCArPSBwaC5hbGlnbiA/IHNpZ24gKyBhcmcgKyBwYWQgOiAocGFkX2NoYXJhY3RlciA9PT0gJzAnID8gc2lnbiArIHBhZCArIGFyZyA6IHBhZCArIHNpZ24gKyBhcmcpXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBvdXRwdXRcbiAgICB9XG5cbiAgICB2YXIgc3ByaW50Zl9jYWNoZSA9IE9iamVjdC5jcmVhdGUobnVsbClcblxuICAgIGZ1bmN0aW9uIHNwcmludGZfcGFyc2UoZm10KSB7XG4gICAgICAgIGlmIChzcHJpbnRmX2NhY2hlW2ZtdF0pIHtcbiAgICAgICAgICAgIHJldHVybiBzcHJpbnRmX2NhY2hlW2ZtdF1cbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBfZm10ID0gZm10LCBtYXRjaCwgcGFyc2VfdHJlZSA9IFtdLCBhcmdfbmFtZXMgPSAwXG4gICAgICAgIHdoaWxlIChfZm10KSB7XG4gICAgICAgICAgICBpZiAoKG1hdGNoID0gcmUudGV4dC5leGVjKF9mbXQpKSAhPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIHBhcnNlX3RyZWUucHVzaChtYXRjaFswXSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKChtYXRjaCA9IHJlLm1vZHVsby5leGVjKF9mbXQpKSAhPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIHBhcnNlX3RyZWUucHVzaCgnJScpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmICgobWF0Y2ggPSByZS5wbGFjZWhvbGRlci5leGVjKF9mbXQpKSAhPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIGlmIChtYXRjaFsyXSkge1xuICAgICAgICAgICAgICAgICAgICBhcmdfbmFtZXMgfD0gMVxuICAgICAgICAgICAgICAgICAgICB2YXIgZmllbGRfbGlzdCA9IFtdLCByZXBsYWNlbWVudF9maWVsZCA9IG1hdGNoWzJdLCBmaWVsZF9tYXRjaCA9IFtdXG4gICAgICAgICAgICAgICAgICAgIGlmICgoZmllbGRfbWF0Y2ggPSByZS5rZXkuZXhlYyhyZXBsYWNlbWVudF9maWVsZCkpICE9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBmaWVsZF9saXN0LnB1c2goZmllbGRfbWF0Y2hbMV0pXG4gICAgICAgICAgICAgICAgICAgICAgICB3aGlsZSAoKHJlcGxhY2VtZW50X2ZpZWxkID0gcmVwbGFjZW1lbnRfZmllbGQuc3Vic3RyaW5nKGZpZWxkX21hdGNoWzBdLmxlbmd0aCkpICE9PSAnJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgoZmllbGRfbWF0Y2ggPSByZS5rZXlfYWNjZXNzLmV4ZWMocmVwbGFjZW1lbnRfZmllbGQpKSAhPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWVsZF9saXN0LnB1c2goZmllbGRfbWF0Y2hbMV0pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKChmaWVsZF9tYXRjaCA9IHJlLmluZGV4X2FjY2Vzcy5leGVjKHJlcGxhY2VtZW50X2ZpZWxkKSkgIT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmllbGRfbGlzdC5wdXNoKGZpZWxkX21hdGNoWzFdKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IFN5bnRheEVycm9yKCdbc3ByaW50Zl0gZmFpbGVkIHRvIHBhcnNlIG5hbWVkIGFyZ3VtZW50IGtleScpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IFN5bnRheEVycm9yKCdbc3ByaW50Zl0gZmFpbGVkIHRvIHBhcnNlIG5hbWVkIGFyZ3VtZW50IGtleScpXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgbWF0Y2hbMl0gPSBmaWVsZF9saXN0XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBhcmdfbmFtZXMgfD0gMlxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoYXJnX25hbWVzID09PSAzKSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignW3NwcmludGZdIG1peGluZyBwb3NpdGlvbmFsIGFuZCBuYW1lZCBwbGFjZWhvbGRlcnMgaXMgbm90ICh5ZXQpIHN1cHBvcnRlZCcpXG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgcGFyc2VfdHJlZS5wdXNoKFxuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcjogbWF0Y2hbMF0sXG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJhbV9ubzogICAgbWF0Y2hbMV0sXG4gICAgICAgICAgICAgICAgICAgICAgICBrZXlzOiAgICAgICAgbWF0Y2hbMl0sXG4gICAgICAgICAgICAgICAgICAgICAgICBzaWduOiAgICAgICAgbWF0Y2hbM10sXG4gICAgICAgICAgICAgICAgICAgICAgICBwYWRfY2hhcjogICAgbWF0Y2hbNF0sXG4gICAgICAgICAgICAgICAgICAgICAgICBhbGlnbjogICAgICAgbWF0Y2hbNV0sXG4gICAgICAgICAgICAgICAgICAgICAgICB3aWR0aDogICAgICAgbWF0Y2hbNl0sXG4gICAgICAgICAgICAgICAgICAgICAgICBwcmVjaXNpb246ICAgbWF0Y2hbN10sXG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAgICAgICAgbWF0Y2hbOF1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBTeW50YXhFcnJvcignW3NwcmludGZdIHVuZXhwZWN0ZWQgcGxhY2Vob2xkZXInKVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgX2ZtdCA9IF9mbXQuc3Vic3RyaW5nKG1hdGNoWzBdLmxlbmd0aClcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gc3ByaW50Zl9jYWNoZVtmbXRdID0gcGFyc2VfdHJlZVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIGV4cG9ydCB0byBlaXRoZXIgYnJvd3NlciBvciBub2RlLmpzXG4gICAgICovXG4gICAgLyogZXNsaW50LWRpc2FibGUgcXVvdGUtcHJvcHMgKi9cbiAgICBpZiAodHlwZW9mIGV4cG9ydHMgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIGV4cG9ydHNbJ3NwcmludGYnXSA9IHNwcmludGZcbiAgICAgICAgZXhwb3J0c1sndnNwcmludGYnXSA9IHZzcHJpbnRmXG4gICAgfVxuICAgIGlmICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICB3aW5kb3dbJ3NwcmludGYnXSA9IHNwcmludGZcbiAgICAgICAgd2luZG93Wyd2c3ByaW50ZiddID0gdnNwcmludGZcblxuICAgICAgICBpZiAodHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmVbJ2FtZCddKSB7XG4gICAgICAgICAgICBkZWZpbmUoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgJ3NwcmludGYnOiBzcHJpbnRmLFxuICAgICAgICAgICAgICAgICAgICAndnNwcmludGYnOiB2c3ByaW50ZlxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICB9XG4gICAgLyogZXNsaW50LWVuYWJsZSBxdW90ZS1wcm9wcyAqL1xufSgpOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lXG4iLCJjbGFzcyBWYWx1ZUVycm9yIGV4dGVuZHMgRXJyb3Ige1xuICBjb25zdHJ1Y3RvcihtZXNzYWdlKSB7XG4gICAgc3VwZXIobWVzc2FnZSk7XG4gICAgdGhpcy5uYW1lID0gXCJWYWx1ZUVycm9yXCI7XG4gICAgY29uc29sZS5sb2coXCJFWENFUFRJT046IFwiICsgdGhpcy5uYW1lICsgXCIgTUVTU0FHRTogXCIgKyB0aGlzLm1lc3NhZ2UpO1xuICB9XG59XG5cbmNsYXNzIFVuSW1wbGVtZW50ZWRNZXRob2RFeGNlcHRpb24gZXh0ZW5kcyBFcnJvciB7XG4gIGNvbnN0cnVjdG9yKG1lc3NhZ2UpIHtcbiAgICBzdXBlcihtZXNzYWdlKTtcbiAgICB0aGlzLm5hbWUgPSBcIlVuSW1wbGVtZW50ZWRNZXRob2RcIjtcbiAgICBjb25zb2xlLmxvZyhcIkVYQ0VQVElPTjogXCIgKyB0aGlzLm5hbWUgKyBcIiBNRVNTQUdFOiBcIiArIHRoaXMubWVzc2FnZSk7XG4gIH1cbn1cblxuY2xhc3MgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uIGV4dGVuZHMgRXJyb3Ige1xuICBjb25zdHJ1Y3RvcihtZXNzYWdlLCBhcmd1bWVudCkge1xuICAgIHN1cGVyKG1lc3NhZ2UpO1xuICAgIHRoaXMubmFtZSA9IFwiSWxsZWdhbEFyZ3VtZW50XCI7XG4gICAgdGhpcy5hcmd1bWVudCA9IGFyZ3VtZW50O1xuICAgIGNvbnNvbGUubG9nKFwiRVhDRVBUSU9OOiBcIiArIHRoaXMubmFtZSArIFwiIE1FU1NBR0U6IFwiICsgdGhpcy5tZXNzYWdlKTtcbiAgfVxufVxuXG5jbGFzcyBJbGxlZ2FsU3RhdGVFeGNlcHRpb24gZXh0ZW5kcyBFcnJvciB7XG4gIGNvbnN0cnVjdG9yKG1lc3NhZ2UpIHtcbiAgICBzdXBlcihtZXNzYWdlKTtcbiAgICB0aGlzLm5hbWUgPSBcIklsbGVnYWxTdGF0ZVwiO1xuICAgIGNvbnNvbGUubG9nKFwiRVhDRVBUSU9OOiBcIiArIHRoaXMubmFtZSArIFwiIE1FU1NBR0U6IFwiICsgdGhpcy5tZXNzYWdlKTtcbiAgfVxufVxuXG5jbGFzcyBJbGxlZ2FsSnNvbkV4Y2VwdGlvbiBleHRlbmRzIEVycm9yIHtcbiAgY29uc3RydWN0b3IobWVzc2FnZSwgYXJncykge1xuICAgIHN1cGVyKG1lc3NhZ2UpO1xuICAgIHRoaXMubmFtZSA9IFwiSWxsZWdhbFN0YXRlXCI7XG4gICAgdGhpcy5jYXVzZUV4Y2VwdGlvbiA9IGFyZ3MuY2F1c2VFeGNlcHRpb247XG4gICAgdGhpcy5vcmlnaW5hbEpzb25TdHJpbmcgPSBhcmdzLm9yaWdpbmFsSnNvblN0cmluZztcbiAgICBjb25zb2xlLmxvZyhcbiAgICAgIFwiRVhDRVBUSU9OOiBcIiArXG4gICAgICAgIHRoaXMubmFtZSArXG4gICAgICAgIFwiIE1FU1NBR0U6IFwiICtcbiAgICAgICAgdGhpcy5tZXNzYWdlICtcbiAgICAgICAgXCIgY2F1c2U6IFwiICtcbiAgICAgICAgdGhpcy5jYXVzZUV4Y2VwdGlvblxuICAgICk7XG4gIH1cbn1cblxuZXhwb3J0IHtcbiAgVW5JbXBsZW1lbnRlZE1ldGhvZEV4Y2VwdGlvbixcbiAgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uLFxuICBJbGxlZ2FsU3RhdGVFeGNlcHRpb24sXG4gIElsbGVnYWxKc29uRXhjZXB0aW9uLFxuICBWYWx1ZUVycm9yXG59O1xuIiwidmFyIG1ha2VIdHRwUmVxdWVzdCA9IChvYmosIHN1Y2Nlc3MsIGZhaWx1cmUpID0+IHtcbiAgbGV0IHhociA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xuICB4aHIub3BlbihvYmoubWV0aG9kIHx8IFwiR0VUXCIsIG9iai51cmwpO1xuICBpZiAob2JqLmhlYWRlcnMpIHtcbiAgICBPYmplY3Qua2V5cyhvYmouaGVhZGVycykuZm9yRWFjaChrZXkgPT4ge1xuICAgICAgeGhyLnNldFJlcXVlc3RIZWFkZXIoa2V5LCBvYmouaGVhZGVyc1trZXldKTtcbiAgICB9KTtcbiAgfVxuICB4aHIub25sb2FkID0gKCkgPT4ge1xuICAgIGlmICh4aHIuc3RhdHVzID49IDIwMCAmJiB4aHIuc3RhdHVzIDwgMzAwKSB7XG4gICAgICBzdWNjZXNzKHhocik7XG4gICAgfSBlbHNlIHtcbiAgICAgIGZhaWx1cmUoeGhyKTtcbiAgICB9XG4gIH07XG4gIHhoci5vbmVycm9yID0gKCkgPT4gZmFpbHVyZSh4aHIpO1xuICB4aHIuc2VuZChvYmouYm9keSk7XG59O1xuXG5leHBvcnQgeyBtYWtlSHR0cFJlcXVlc3QgfTtcbiIsImNsYXNzIEdsb2JhbENvbmZpZ0ltcGwge1xuICB1cGRhdGUoY29uZmlnSW5wdXQpIHtcbiAgICB2YXIgY29uZmlnID0gY29uZmlnSW5wdXQgfHwge307XG4gICAgdGhpcy5yZWdpb24gPSBjb25maWcucmVnaW9uIHx8IHRoaXMucmVnaW9uO1xuICAgIHRoaXMuZW5kcG9pbnRPdmVycmlkZSA9IGNvbmZpZy5lbmRwb2ludCB8fCB0aGlzLmVuZHBvaW50T3ZlcnJpZGU7XG4gICAgdGhpcy5yZWNvbm5lY3QgPSBjb25maWcucmVjb25uZWN0IHx8IGZhbHNlO1xuICAgIHRoaXMucmVjb25uZWN0SW50ZXJ2YWwgPSBjb25maWcucmVjb25uZWN0SW50ZXJ2YWwgfHwgMTAwMDtcbiAgICB0aGlzLm1heFJlY29ubmVjdEF0dGVtcHRzID0gY29uZmlnLm1heFJlY29ubmVjdEF0dGVtcHRzIHx8IDMwO1xuICB9XG5cbiAgZ2V0UmVnaW9uKCkge1xuICAgIHJldHVybiB0aGlzLnJlZ2lvbjtcbiAgfVxuXG4gIGdldEVuZHBvaW50T3ZlcnJpZGUoKSB7XG4gICAgcmV0dXJuIHRoaXMuZW5kcG9pbnRPdmVycmlkZTtcbiAgfVxufVxuXG5jb25zdCBHbG9iYWxDb25maWcgPSBuZXcgR2xvYmFsQ29uZmlnSW1wbCgpO1xuXG5leHBvcnQgeyBHbG9iYWxDb25maWcgfTtcbiIsImltcG9ydCB7IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiB9IGZyb20gXCIuL2NvcmUvZXhjZXB0aW9uc1wiO1xuaW1wb3J0IHsgVmFsdWVFcnJvciB9IGZyb20gXCIuL2NvcmUvZXhjZXB0aW9uc1wiO1xuaW1wb3J0IHsgc3ByaW50ZiB9IGZyb20gXCJzcHJpbnRmLWpzXCI7XG5jb25zdCBVdGlscyA9IHt9O1xuXG4vKipcbiAqIEFzc2VydHMgdGhhdCBhIHByZW1pc2UgaXMgdHJ1ZS5cbiAqL1xuVXRpbHMuYXNzZXJ0VHJ1ZSA9IGZ1bmN0aW9uKHByZW1pc2UsIG1lc3NhZ2UpIHtcbiAgaWYgKCFwcmVtaXNlKSB7XG4gICAgdGhyb3cgbmV3IFZhbHVlRXJyb3IobWVzc2FnZSk7XG4gIH1cbn07XG5cbi8qKlxuICogQXNzZXJ0cyB0aGF0IGEgdmFsdWUgaXMgbm90IG51bGwgb3IgdW5kZWZpbmVkLlxuICovXG5VdGlscy5hc3NlcnROb3ROdWxsID0gZnVuY3Rpb24odmFsdWUsIG5hbWUpIHtcbiAgVXRpbHMuYXNzZXJ0VHJ1ZShcbiAgICB2YWx1ZSAhPT0gbnVsbCAmJiB0eXBlb2YgdmFsdWUgIT09IHVuZGVmaW5lZCxcbiAgICBzcHJpbnRmKFwiJXMgbXVzdCBiZSBwcm92aWRlZFwiLCBuYW1lIHx8IFwiQSB2YWx1ZVwiKVxuICApO1xuICByZXR1cm4gdmFsdWU7XG59O1xuXG5VdGlscy5ub3cgPSBmdW5jdGlvbigpIHtcbiAgcmV0dXJuIG5ldyBEYXRlKCkuZ2V0VGltZSgpO1xufTtcblxuVXRpbHMuaXNTdHJpbmcgPSBmdW5jdGlvbih2YWx1ZSkge1xuICByZXR1cm4gdHlwZW9mIHZhbHVlID09PSBcInN0cmluZ1wiO1xufTtcblxuLyoqXG4gKiBHZW5lcmF0ZSBhIHJhbmRvbSBJRCBjb25zaXN0aW5nIG9mIHRoZSBjdXJyZW50IHRpbWVzdGFtcFxuICogYW5kIGEgcmFuZG9tIGJhc2UtMzYgbnVtYmVyIGJhc2VkIG9uIE1hdGgucmFuZG9tKCkuXG4gKi9cblV0aWxzLnJhbmRvbUlkID0gZnVuY3Rpb24oKSB7XG4gIHJldHVybiBzcHJpbnRmKFxuICAgIFwiJXMtJXNcIixcbiAgICBVdGlscy5ub3coKSxcbiAgICBNYXRoLnJhbmRvbSgpXG4gICAgICAudG9TdHJpbmcoMzYpXG4gICAgICAuc2xpY2UoMilcbiAgKTtcbn07XG5cblV0aWxzLmFzc2VydElzTm9uRW1wdHlTdHJpbmcgPSBmdW5jdGlvbih2YWx1ZSwga2V5KSB7XG4gIGlmICghdmFsdWUgfHwgdHlwZW9mIHZhbHVlICE9PSBcInN0cmluZ1wiKSB7XG4gICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbihrZXkgKyBcIiBpcyBub3QgYSBub24tZW1wdHkgc3RyaW5nIVwiKTtcbiAgfVxufTtcblxuVXRpbHMuYXNzZXJ0SXNMaXN0ID0gZnVuY3Rpb24odmFsdWUsIGtleSkge1xuICBpZiAoIUFycmF5LmlzQXJyYXkodmFsdWUpKSB7XG4gICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbihrZXkgKyBcIiBpcyBub3QgYW4gYXJyYXlcIik7XG4gIH1cbn07XG5cblV0aWxzLmFzc2VydElzRW51bSA9IGZ1bmN0aW9uKHZhbHVlLCBhbGxvd2VkVmFsdWVzLCBrZXkpIHtcbiAgdmFyIGk7XG4gIGZvciAoaSA9IDA7IGkgPCBhbGxvd2VkVmFsdWVzLmxlbmd0aDsgaSsrKSB7XG4gICAgaWYgKGFsbG93ZWRWYWx1ZXNbaV0gPT09IHZhbHVlKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICB9XG4gIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24oXG4gICAga2V5ICsgXCIgcGFzc2VkIGlzIG5vdCB2YWxpZC4gXCIgKyBcIkFsbG93ZWQgdmFsdWVzIGFyZTogXCIgKyBhbGxvd2VkVmFsdWVzXG4gICk7XG59O1xuXG4vKipcbiAqIEdlbmVyYXRlIGFuIGVudW0gZnJvbSB0aGUgZ2l2ZW4gbGlzdCBvZiBsb3dlci1jYXNlIGVudW0gdmFsdWVzLFxuICogd2hlcmUgdGhlIGVudW0ga2V5cyB3aWxsIGJlIHVwcGVyIGNhc2UuXG4gKlxuICogQ29udmVyc2lvbiBmcm9tIHBhc2NhbCBjYXNlIGJhc2VkIG9uIGNvZGUgZnJvbSBoZXJlOlxuICogaHR0cDovL3N0YWNrb3ZlcmZsb3cuY29tL3F1ZXN0aW9ucy8zMDUyMTIyNFxuICovXG5VdGlscy5tYWtlRW51bSA9IGZ1bmN0aW9uKHZhbHVlcykge1xuICB2YXIgZW51bU9iaiA9IHt9O1xuXG4gIHZhbHVlcy5mb3JFYWNoKGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgdmFyIGtleSA9IHZhbHVlXG4gICAgICAucmVwbGFjZSgvXFwuPyhbYS16XSspXz8vZywgZnVuY3Rpb24oeCwgeSkge1xuICAgICAgICByZXR1cm4geS50b1VwcGVyQ2FzZSgpICsgXCJfXCI7XG4gICAgICB9KVxuICAgICAgLnJlcGxhY2UoL18kLywgXCJcIik7XG5cbiAgICBlbnVtT2JqW2tleV0gPSB2YWx1ZTtcbiAgfSk7XG5cbiAgcmV0dXJuIGVudW1PYmo7XG59O1xuXG5VdGlscy5jb250YWlucyA9IGZ1bmN0aW9uKG9iaiwgdmFsdWUpIHtcbiAgaWYgKG9iaiBpbnN0YW5jZW9mIEFycmF5KSB7XG4gICAgcmV0dXJuIChcbiAgICAgIFV0aWxzLmZpbmQob2JqLCBmdW5jdGlvbih2KSB7XG4gICAgICAgIHJldHVybiB2ID09PSB2YWx1ZTtcbiAgICAgIH0pICE9PSBudWxsXG4gICAgKTtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gdmFsdWUgaW4gb2JqO1xuICB9XG59O1xuXG5VdGlscy5maW5kID0gZnVuY3Rpb24oYXJyYXksIHByZWRpY2F0ZSkge1xuICBmb3IgKHZhciB4ID0gMDsgeCA8IGFycmF5Lmxlbmd0aDsgeCsrKSB7XG4gICAgaWYgKHByZWRpY2F0ZShhcnJheVt4XSkpIHtcbiAgICAgIHJldHVybiBhcnJheVt4XTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gbnVsbDtcbn07XG5cblV0aWxzLmNvbnRhaW5zVmFsdWUgPSBmdW5jdGlvbihvYmosIHZhbHVlKSB7XG4gIGlmIChvYmogaW5zdGFuY2VvZiBBcnJheSkge1xuICAgIHJldHVybiAoXG4gICAgICBVdGlscy5maW5kKG9iaiwgZnVuY3Rpb24odikge1xuICAgICAgICByZXR1cm4gdiA9PT0gdmFsdWU7XG4gICAgICB9KSAhPT0gbnVsbFxuICAgICk7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIChcbiAgICAgIFV0aWxzLmZpbmQoVXRpbHMudmFsdWVzKG9iaiksIGZ1bmN0aW9uKHYpIHtcbiAgICAgICAgcmV0dXJuIHYgPT09IHZhbHVlO1xuICAgICAgfSkgIT09IG51bGxcbiAgICApO1xuICB9XG59O1xuXG4vKipcbiAqIERldGVybWluZSBpZiB0aGUgZ2l2ZW4gdmFsdWUgaXMgYSBjYWxsYWJsZSBmdW5jdGlvbiB0eXBlLlxuICogQm9ycm93ZWQgZnJvbSBVbmRlcnNjb3JlLmpzLlxuICovXG5VdGlscy5pc0Z1bmN0aW9uID0gZnVuY3Rpb24ob2JqKSB7XG4gIHJldHVybiAhIShvYmogJiYgb2JqLmNvbnN0cnVjdG9yICYmIG9iai5jYWxsICYmIG9iai5hcHBseSk7XG59O1xuXG4vKipcbiAqIEdldCBhIGxpc3Qgb2YgdmFsdWVzIGZyb20gYSBKYXZhc2NyaXB0IG9iamVjdCB1c2VkXG4gKiBhcyBhIGhhc2ggbWFwLlxuICovXG5VdGlscy52YWx1ZXMgPSBmdW5jdGlvbihtYXApIHtcbiAgdmFyIHZhbHVlcyA9IFtdO1xuXG4gIFV0aWxzLmFzc2VydE5vdE51bGwobWFwLCBcIm1hcFwiKTtcblxuICBmb3IgKHZhciBrIGluIG1hcCkge1xuICAgIHZhbHVlcy5wdXNoKG1hcFtrXSk7XG4gIH1cblxuICByZXR1cm4gdmFsdWVzO1xufTtcblxuVXRpbHMuaXNPYmplY3QgPSBmdW5jdGlvbih2YWx1ZSkge1xuICByZXR1cm4gISh0eXBlb2YgdmFsdWUgIT09IFwib2JqZWN0XCIgfHwgdmFsdWUgPT09IG51bGwpO1xufTtcblxuVXRpbHMuYXNzZXJ0SXNPYmplY3QgPSBmdW5jdGlvbih2YWx1ZSwga2V5KSB7XG4gIGlmICghVXRpbHMuaXNPYmplY3QodmFsdWUpKSB7XG4gICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbihrZXkgKyBcIiBpcyBub3QgYW4gb2JqZWN0IVwiKTtcbiAgfVxufTtcblxuVXRpbHMuZGVsYXkgPSAobXMpID0+IG5ldyBQcm9taXNlKHJlc29sdmUgPT4gc2V0VGltZW91dChyZXNvbHZlLCBtcykpO1xuXG5VdGlscy5hc3luY1doaWxlSW50ZXJ2YWwgPSBmdW5jdGlvbihmLCBwcmVkaWNhdGUsIGludGVydmFsLCBjb3VudD0wKSB7XG4gIGNvbnN0IG5vdyA9IG5ldyBEYXRlKCk7XG4gIGlmIChwcmVkaWNhdGUoY291bnQpKSB7XG4gICAgcmV0dXJuIGYoY291bnQpLmNhdGNoKCgpID0+IHtcbiAgICAgIGNvbnN0IGRlbGF5ID0gTWF0aC5tYXgoMCwgaW50ZXJ2YWwgLSAobmV3IERhdGUoKSkudmFsdWVPZigpICsgbm93LnZhbHVlT2YoKSk7XG4gICAgICByZXR1cm4gVXRpbHNcbiAgICAgICAgLmRlbGF5KGRlbGF5KVxuICAgICAgICAudGhlbigoKSA9PiBVdGlscy5hc3luY1doaWxlSW50ZXJ2YWwoZiwgcHJlZGljYXRlLCBpbnRlcnZhbCwgY291bnQgKyAxKSk7XG4gICAgfSk7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIFByb21pc2UucmVqZWN0KG5ldyBFcnJvcihcImFzeW5jIHdoaWxlIGFib3J0ZWRcIikpO1xuICB9XG59O1xuXG5leHBvcnQgZGVmYXVsdCBVdGlscztcbiIsImltcG9ydCBVdGlscyBmcm9tIFwiLi91dGlsc1wiO1xuLy9QbGFjZWhvbGRlclxuZXhwb3J0IGNvbnN0IENIQVRfQ09ORklHVVJBVElPTlMgPSB7XG4gIENPTkNVUlJFTlRfQ0hBVFM6IDEwXG59O1xuXG5leHBvcnQgY29uc3QgQ09OTkVDVElPTl9UT0tFTl9LRVkgPSBcIngtYW16bi1jb25uZWN0LWNvbm5lY3Rpb24tdG9rZW5cIjtcbmV4cG9ydCBjb25zdCBQQVJUSUNJUEFOVF9UT0tFTl9LRVkgPSBcIngtYW16bi1jb25uZWN0LXBhcnRpY2lwYW50LXRva2VuXCI7XG5cbmV4cG9ydCBjb25zdCBSRVNPVVJDRV9QQVRIID0ge1xuICBNRVNTQUdFOiBcIi9jb250YWN0L2NoYXQvcGFydGljaXBhbnQvbWVzc2FnZVwiLFxuICBUUkFOU0NSSVBUOiBcIi9jb250YWN0L2NoYXQvcGFydGljaXBhbnQvdHJhbnNjcmlwdFwiLFxuICBFVkVOVDogXCIvY29udGFjdC9jaGF0L3BhcnRpY2lwYW50L2V2ZW50XCIsXG4gIERJU0NPTk5FQ1Q6IFwiL2NvbnRhY3QvY2hhdC9wYXJ0aWNpcGFudC9kaXNjb25uZWN0XCIsXG4gIENPTk5FQ1RJT05fREVUQUlMUzogXCIvY29udGFjdC9jaGF0L3BhcnRpY2lwYW50L2Nvbm5lY3Rpb24tZGV0YWlsc1wiXG59O1xuXG5leHBvcnQgY29uc3QgSFRUUF9NRVRIT0RTID0ge1xuICBQT1NUOiBcInBvc3RcIlxufTtcblxuZXhwb3J0IGNvbnN0IE1FU1NBR0VfUEVSU0lTVEVOQ0UgPSB7XG4gIFBFUlNJU1RFRDogXCJQRVJTSVNURURcIixcbiAgTk9OX1BFUlNJU1RFRDogXCJOT05fUEVSU0lTVEVEXCJcbn07XG5cbmV4cG9ydCBjb25zdCBDT05URU5UX1RZUEUgPSB7XG4gIHRleHRQbGFpbjogXCJ0ZXh0L3BsYWluXCJcbn07XG5cbmV4cG9ydCBjb25zdCBWSVNJQklMSVRZID0gVXRpbHMubWFrZUVudW0oW1xuICBcIkFMTFwiLFxuICBcIk1BTkFHRVJcIixcbiAgXCJBR0VOVFwiLFxuICBcIkNVU1RPTUVSXCIsXG4gIFwiVEhJUkRQQVJUWVwiXG5dKTtcblxuZXhwb3J0IGNvbnN0IFBFUlNJU1RFTkNFID0gVXRpbHMubWFrZUVudW0oW1wiUEVSU0lTVEVEXCIsIFwiTk9OX1BFUlNJU1RFRFwiXSk7XG5cbmV4cG9ydCBjb25zdCBSRUdJT05fQ09ORklHID0ge1xuICBcInVzLXdlc3QtMlwiOiB7XG4gICAgaW52b2tlVXJsOiBcImh0dHBzOi8vZWFwMXc5M2oway5leGVjdXRlLWFwaS51cy13ZXN0LTIuYW1hem9uYXdzLmNvbS9wcm9kXCJcbiAgfSxcbiAgXCJ1cy1lYXN0LTFcIjoge1xuICAgIGludm9rZVVybDogXCJodHRwczovLzRhZ2NqdXN4M2suZXhlY3V0ZS1hcGkudXMtZWFzdC0xLmFtYXpvbmF3cy5jb20vcHJvZFwiXG4gIH0sXG4gIFwiYXAtc291dGhlYXN0LTJcIjoge1xuICAgIGludm9rZVVybDpcbiAgICAgIFwiaHR0cHM6Ly92NHU4b3EwY3ZlLmV4ZWN1dGUtYXBpLmFwLXNvdXRoZWFzdC0yLmFtYXpvbmF3cy5jb20vcHJvZFwiXG4gIH0sXG4gIFwiYXAtbm9ydGhlYXN0LTFcIjoge1xuICAgIGludm9rZVVybDpcbiAgICAgIFwiaHR0cHM6Ly8zZmlkdW5meXo3LmV4ZWN1dGUtYXBpLmFwLW5vcnRoZWFzdC0xLmFtYXpvbmF3cy5jb20vcHJvZFwiXG4gIH0sXG4gIFwiZXUtY2VudHJhbC0xXCI6IHtcbiAgICBpbnZva2VVcmw6IFwiaHR0cHM6Ly8xZ3luYWFybTNlLmV4ZWN1dGUtYXBpLmV1LWNlbnRyYWwtMS5hbWF6b25hd3MuY29tL3Byb2RcIlxuICB9XG59O1xuXG5leHBvcnQgY29uc3QgTVFUVF9DT05TVEFOVFMgPSB7XG4gIEtFRVBfQUxJVkU6IDMwLFxuICBDT05ORUNUX1RJTUVPVVQ6IDYwXG59O1xuXG5leHBvcnQgY29uc3QgU0VTU0lPTl9UWVBFUyA9IHtcbiAgQUdFTlQ6IFwiQUdFTlRcIixcbiAgQ1VTVE9NRVI6IFwiQ1VTVE9NRVJcIlxufTtcblxuZXhwb3J0IGNvbnN0IENIQVRfRVZFTlRTID0ge1xuICBJTkNPTUlOR19NRVNTQUdFOiBcIklOQ09NSU5HX01FU1NBR0VcIixcbiAgSU5DT01JTkdfVFlQSU5HOiBcIklOQ09NSU5HX1RZUElOR1wiLFxuICBDT05ORUNUSU9OX0VTVEFCTElTSEVEOiBcIkNPTk5FQ1RJT05fRVNUQUJMSVNIRURcIixcbiAgQ09OTkVDVElPTl9CUk9LRU46IFwiQ09OTkVDVElPTl9CUk9LRU5cIlxufTtcblxuZXhwb3J0IGNvbnN0IFRSQU5TQ1JJUFRfREVGQVVMVF9QQVJBTVMgPSB7XG4gIE1BWF9SRVNVTFRTOiAxNSxcbiAgU09SVF9LRVk6IFwiQVNDRU5ESU5HXCIsXG4gIFNDQU5fRElSRUNUSU9OOiBcIkJBQ0tXQVJEXCJcbn07XG5cbmV4cG9ydCBjb25zdCBMT0dTX0RFU1RJTkFUSU9OID0ge1xuICBOVUxMOiBcIk5VTExcIixcbiAgQ0xJRU5UX0xPR0dFUjogXCJDTElFTlRfTE9HR0VSXCIsXG4gIERFQlVHOiBcIkRFQlVHXCJcbn07XG5cbmV4cG9ydCBjb25zdCBSRUdJT05TID0ge1xuICBwZHg6IFwidXMtd2VzdC0yXCIsXG4gIGlhZDogXCJ1cy1lYXN0LTFcIixcbiAgc3lkOiBcImFwLXNvdXRoZWFzdC0yXCIsXG4gIG5ydDogXCJhcC1ub3J0aGVhc3QtMVwiLFxuICBmcmE6IFwiZXUtY2VudHJhbC0xXCJcbn07XG4iLCJpbXBvcnQgVXRpbHMgZnJvbSBcIi4vdXRpbHNcIjtcbmltcG9ydCB7IExPR1NfREVTVElOQVRJT04gfSBmcm9tIFwiLi9jb25zdGFudHNcIjtcblxuLyplc2xpbnQtZGlzYWJsZSBuby11bnVzZWQtdmFycyovXG5jbGFzcyBMb2dnZXIge1xuICBkZWJ1ZyhkYXRhKSB7fVxuXG4gIGluZm8oZGF0YSkge31cblxuICB3YXJuKGRhdGEpIHt9XG5cbiAgZXJyb3IoZGF0YSkge31cbn1cbi8qZXNsaW50LWVuYWJsZSBuby11bnVzZWQtdmFycyovXG5cbmNvbnN0IExvZ0xldmVsID0ge1xuICBERUJVRzogMTAsXG4gIElORk86IDIwLFxuICBXQVJOOiAzMCxcbiAgRVJST1I6IDQwXG59O1xuXG5jbGFzcyBMb2dNYW5hZ2VySW1wbCB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHRoaXMudXBkYXRlTG9nZ2VyQ29uZmlnKCk7XG4gICAgdGhpcy5jb25zb2xlTG9nZ2VyV3JhcHBlciA9IGNyZWF0ZUNvbnNvbGVMb2dnZXIoKTtcbiAgfVxuXG4gIHdyaXRlVG9DbGllbnRMb2dnZXIobGV2ZWwsIGxvZ1N0YXRlbWVudCkge1xuICAgIGlmICghdGhpcy5oYXNDbGllbnRMb2dnZXIoKSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBzd2l0Y2ggKGxldmVsKSB7XG4gICAgICBjYXNlIExvZ0xldmVsLkRFQlVHOlxuICAgICAgICByZXR1cm4gdGhpcy5fY2xpZW50TG9nZ2VyLmRlYnVnKGxvZ1N0YXRlbWVudCk7XG4gICAgICBjYXNlIExvZ0xldmVsLklORk86XG4gICAgICAgIHJldHVybiB0aGlzLl9jbGllbnRMb2dnZXIuaW5mbyhsb2dTdGF0ZW1lbnQpO1xuICAgICAgY2FzZSBMb2dMZXZlbC5XQVJOOlxuICAgICAgICByZXR1cm4gdGhpcy5fY2xpZW50TG9nZ2VyLndhcm4obG9nU3RhdGVtZW50KTtcbiAgICAgIGNhc2UgTG9nTGV2ZWwuRVJST1I6XG4gICAgICAgIHJldHVybiB0aGlzLl9jbGllbnRMb2dnZXIuZXJyb3IobG9nU3RhdGVtZW50KTtcbiAgICB9XG4gIH1cblxuICBpc0xldmVsRW5hYmxlZChsZXZlbCkge1xuICAgIHJldHVybiBsZXZlbCA+PSB0aGlzLl9sZXZlbDtcbiAgfVxuXG4gIGhhc0NsaWVudExvZ2dlcigpIHtcbiAgICByZXR1cm4gdGhpcy5fY2xpZW50TG9nZ2VyICE9PSBudWxsO1xuICB9XG5cbiAgZ2V0TG9nZ2VyKG9wdGlvbnMpIHtcbiAgICB2YXIgcHJlZml4ID0gb3B0aW9ucy5wcmVmaXggfHwgXCJcIjtcbiAgICBpZiAodGhpcy5fbG9nc0Rlc3RpbmF0aW9uID09PSBMT0dTX0RFU1RJTkFUSU9OLkRFQlVHKSB7XG4gICAgICByZXR1cm4gdGhpcy5jb25zb2xlTG9nZ2VyV3JhcHBlcjtcbiAgICB9XG4gICAgcmV0dXJuIG5ldyBMb2dnZXJXcmFwcGVySW1wbChwcmVmaXgpO1xuICB9XG5cbiAgdXBkYXRlTG9nZ2VyQ29uZmlnKGlucHV0Q29uZmlnKSB7XG4gICAgdmFyIGNvbmZpZyA9IGlucHV0Q29uZmlnIHx8IHt9O1xuICAgIHRoaXMuX2xldmVsID0gY29uZmlnLmxldmVsIHx8IExvZ0xldmVsLklORk87XG4gICAgdGhpcy5fY2xpZW50TG9nZ2VyID0gY29uZmlnLmxvZ2dlciB8fCBudWxsO1xuICAgIHRoaXMuX2xvZ3NEZXN0aW5hdGlvbiA9IExPR1NfREVTVElOQVRJT04uTlVMTDtcbiAgICBpZiAoY29uZmlnLmRlYnVnKSB7XG4gICAgICB0aGlzLl9sb2dzRGVzdGluYXRpb24gPSBMT0dTX0RFU1RJTkFUSU9OLkRFQlVHO1xuICAgIH1cbiAgICBpZiAoY29uZmlnLmxvZ2dlcikge1xuICAgICAgdGhpcy5fbG9nc0Rlc3RpbmF0aW9uID0gTE9HU19ERVNUSU5BVElPTi5DTElFTlRfTE9HR0VSO1xuICAgIH1cbiAgfVxufVxuXG5jbGFzcyBMb2dnZXJXcmFwcGVyIHtcbiAgZGVidWcoKSB7fVxuXG4gIGluZm8oKSB7fVxuXG4gIHdhcm4oKSB7fVxuXG4gIGVycm9yKCkge31cbn1cblxuY2xhc3MgTG9nZ2VyV3JhcHBlckltcGwgZXh0ZW5kcyBMb2dnZXJXcmFwcGVyIHtcbiAgY29uc3RydWN0b3IocHJlZml4KSB7XG4gICAgc3VwZXIoKTtcbiAgICB0aGlzLnByZWZpeCA9IHByZWZpeCB8fCBcIlwiO1xuICB9XG5cbiAgZGVidWcoLi4uYXJncykge1xuICAgIHRoaXMuX2xvZyhMb2dMZXZlbC5ERUJVRywgYXJncyk7XG4gIH1cblxuICBpbmZvKC4uLmFyZ3MpIHtcbiAgICB0aGlzLl9sb2coTG9nTGV2ZWwuSU5GTywgYXJncyk7XG4gIH1cblxuICB3YXJuKC4uLmFyZ3MpIHtcbiAgICB0aGlzLl9sb2coTG9nTGV2ZWwuV0FSTiwgYXJncyk7XG4gIH1cblxuICBlcnJvciguLi5hcmdzKSB7XG4gICAgdGhpcy5fbG9nKExvZ0xldmVsLkVSUk9SLCBhcmdzKTtcbiAgfVxuXG4gIF9zaG91bGRMb2cobGV2ZWwpIHtcbiAgICByZXR1cm4gTG9nTWFuYWdlci5oYXNDbGllbnRMb2dnZXIoKSAmJiBMb2dNYW5hZ2VyLmlzTGV2ZWxFbmFibGVkKGxldmVsKTtcbiAgfVxuXG4gIF93cml0ZVRvQ2xpZW50TG9nZ2VyKGxldmVsLCBsb2dTdGF0ZW1lbnQpIHtcbiAgICBMb2dNYW5hZ2VyLndyaXRlVG9DbGllbnRMb2dnZXIobGV2ZWwsIGxvZ1N0YXRlbWVudCk7XG4gIH1cblxuICBfbG9nKGxldmVsLCBhcmdzKSB7XG4gICAgaWYgKHRoaXMuX3Nob3VsZExvZyhsZXZlbCkpIHtcbiAgICAgIHZhciBsb2dTdGF0ZW1lbnQgPSB0aGlzLl9jb252ZXJ0VG9TaW5nbGVTdGF0ZW1lbnQoYXJncyk7XG4gICAgICB0aGlzLl93cml0ZVRvQ2xpZW50TG9nZ2VyKGxldmVsLCBsb2dTdGF0ZW1lbnQpO1xuICAgIH1cbiAgfVxuXG4gIF9jb252ZXJ0VG9TaW5nbGVTdGF0ZW1lbnQoYXJncykge1xuICAgIHZhciBsb2dTdGF0ZW1lbnQgPSBcIlwiO1xuICAgIGlmICh0aGlzLnByZWZpeCkge1xuICAgICAgbG9nU3RhdGVtZW50ICs9IHRoaXMucHJlZml4ICsgXCIgXCI7XG4gICAgfVxuICAgIGZvciAodmFyIGluZGV4ID0gMDsgaW5kZXggPCBhcmdzLmxlbmd0aDsgaW5kZXgrKykge1xuICAgICAgdmFyIGFyZyA9IGFyZ3NbaW5kZXhdO1xuICAgICAgbG9nU3RhdGVtZW50ICs9IHRoaXMuX2NvbnZlcnRUb1N0cmluZyhhcmcpICsgXCIgXCI7XG4gICAgfVxuICAgIHJldHVybiBsb2dTdGF0ZW1lbnQ7XG4gIH1cblxuICBfY29udmVydFRvU3RyaW5nKGFyZykge1xuICAgIHRyeSB7XG4gICAgICBpZiAoIWFyZykge1xuICAgICAgICByZXR1cm4gXCJcIjtcbiAgICAgIH1cbiAgICAgIGlmIChVdGlscy5pc1N0cmluZyhhcmcpKSB7XG4gICAgICAgIHJldHVybiBhcmc7XG4gICAgICB9XG4gICAgICBpZiAoVXRpbHMuaXNPYmplY3QoYXJnKSAmJiBVdGlscy5pc0Z1bmN0aW9uKGFyZy50b1N0cmluZykpIHtcbiAgICAgICAgdmFyIHRvU3RyaW5nUmVzdWx0ID0gYXJnLnRvU3RyaW5nKCk7XG4gICAgICAgIGlmICh0b1N0cmluZ1Jlc3VsdCAhPT0gXCJbb2JqZWN0IE9iamVjdF1cIikge1xuICAgICAgICAgIHJldHVybiB0b1N0cmluZ1Jlc3VsdDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KGFyZyk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciB3aGlsZSBjb252ZXJ0aW5nIGFyZ3VtZW50IHRvIHN0cmluZ1wiLCBhcmcsIGVycm9yKTtcbiAgICAgIHJldHVybiBcIlwiO1xuICAgIH1cbiAgfVxufVxuXG52YXIgY3JlYXRlQ29uc29sZUxvZ2dlciA9ICgpID0+IHtcbiAgdmFyIGxvZ2dlciA9IG5ldyBMb2dnZXJXcmFwcGVyKCk7XG4gIGxvZ2dlci5kZWJ1ZyA9IGNvbnNvbGUuZGVidWcuYmluZCh3aW5kb3cuY29uc29sZSk7XG4gIGxvZ2dlci5pbmZvID0gY29uc29sZS5pbmZvLmJpbmQod2luZG93LmNvbnNvbGUpO1xuICBsb2dnZXIud2FybiA9IGNvbnNvbGUud2Fybi5iaW5kKHdpbmRvdy5jb25zb2xlKTtcbiAgbG9nZ2VyLmVycm9yID0gY29uc29sZS5lcnJvci5iaW5kKHdpbmRvdy5jb25zb2xlKTtcbiAgcmV0dXJuIGxvZ2dlcjtcbn07XG5cbmNvbnN0IExvZ01hbmFnZXIgPSBuZXcgTG9nTWFuYWdlckltcGwoKTtcblxuZXhwb3J0IHsgTG9nTWFuYWdlciwgTG9nZ2VyLCBMb2dMZXZlbCB9O1xuIiwiaW1wb3J0IHsgVW5JbXBsZW1lbnRlZE1ldGhvZEV4Y2VwdGlvbiB9IGZyb20gXCIuLi9jb3JlL2V4Y2VwdGlvbnNcIjtcbmltcG9ydCB7IG1ha2VIdHRwUmVxdWVzdCB9IGZyb20gXCIuL1htbEh0dHBDbGllbnRcIjtcbmltcG9ydCB7IEdsb2JhbENvbmZpZyB9IGZyb20gXCIuLi9nbG9iYWxDb25maWdcIjtcbmltcG9ydCB7XG4gIFJFU09VUkNFX1BBVEgsXG4gIEhUVFBfTUVUSE9EUyxcbiAgUkVHSU9OX0NPTkZJRyxcbiAgQ09OVEVOVF9UWVBFLFxuICBNRVNTQUdFX1BFUlNJU1RFTkNFLFxuICBDT05ORUNUSU9OX1RPS0VOX0tFWSxcbiAgUEFSVElDSVBBTlRfVE9LRU5fS0VZLFxuICBSRUdJT05TXG59IGZyb20gXCIuLi9jb25zdGFudHNcIjtcbmltcG9ydCB7IExvZ01hbmFnZXIgfSBmcm9tIFwiLi4vbG9nXCI7XG5cbmNsYXNzIENoYXRDbGllbnRGYWN0b3J5SW1wbCB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHRoaXMuY2xpZW50Q2FjaGUgPSB7fTtcbiAgfVxuXG4gIGdldENhY2hlZENsaWVudChvcHRpb25zSW5wdXQpIHtcbiAgICB2YXIgb3B0aW9ucyA9IE9iamVjdC5hc3NpZ24oe30sIG9wdGlvbnNJbnB1dCk7XG4gICAgdmFyIHJlZ2lvbiA9IG9wdGlvbnNJbnB1dC5yZWdpb24gfHwgR2xvYmFsQ29uZmlnLmdldFJlZ2lvbigpIHx8IFJFR0lPTlMucGR4O1xuICAgIG9wdGlvbnMucmVnaW9uID0gcmVnaW9uO1xuICAgIGlmICh0aGlzLmNsaWVudENhY2hlW3JlZ2lvbl0pIHtcbiAgICAgIHJldHVybiB0aGlzLmNsaWVudENhY2hlW3JlZ2lvbl07XG4gICAgfVxuICAgIHZhciBjbGllbnQgPSB0aGlzLl9jcmVhdGVDbGllbnQob3B0aW9ucyk7XG4gICAgdGhpcy5jbGllbnRDYWNoZVtyZWdpb25dID0gY2xpZW50O1xuICAgIHJldHVybiBjbGllbnQ7XG4gIH1cblxuICBfY3JlYXRlQ2xpZW50KG9wdGlvbnMpIHtcbiAgICB2YXIgcmVnaW9uID0gb3B0aW9ucy5yZWdpb247XG4gICAgdmFyIGVuZHBvaW50T3ZlcnJpZGUgPSBHbG9iYWxDb25maWcuZ2V0RW5kcG9pbnRPdmVycmlkZSgpO1xuICAgIHZhciBzdGFnZUNvbmZpZyA9IFJFR0lPTl9DT05GSUdbcmVnaW9uXTtcbiAgICBpZiAoZW5kcG9pbnRPdmVycmlkZSkge1xuICAgICAgc3RhZ2VDb25maWcuaW52b2tlVXJsID0gZW5kcG9pbnRPdmVycmlkZTtcbiAgICB9XG4gICAgcmV0dXJuIG5ldyBIdHRwQ2hhdENsaWVudCh7XG4gICAgICBzdGFnZUNvbmZpZzogc3RhZ2VDb25maWdcbiAgICB9KTtcbiAgfVxufVxuXG4vKmVzbGludC1kaXNhYmxlKi9cbmNsYXNzIENoYXRDbGllbnQge1xuICBzZW5kTWVzc2FnZShwYXJ0aWNpcGFudFRva2VuLCBtZXNzYWdlLCB0eXBlKSB7XG4gICAgdGhyb3cgbmV3IFVuSW1wbGVtZW50ZWRNZXRob2RFeGNlcHRpb24oXCJzZW5kVGV4dE1lc3NhZ2UgaW4gQ2hhdENsaWVudFwiKTtcbiAgfVxuXG4gIGRpc2Nvbm5lY3RDaGF0KHBhcnRpY2lwYW50VG9rZW4pIHtcbiAgICB0aHJvdyBuZXcgVW5JbXBsZW1lbnRlZE1ldGhvZEV4Y2VwdGlvbihcImRpc2Nvbm5lY3RDaGF0IGluIENoYXRDbGllbnRcIik7XG4gIH1cblxuICBzZW5kRXZlbnQoZXZlbnRUeXBlLCBtZXNzYWdlSWRzLCB2aXNpYmlsaXR5LCBwZXJzaXN0ZW5jZSkge1xuICAgIHRocm93IG5ldyBVbkltcGxlbWVudGVkTWV0aG9kRXhjZXB0aW9uKFwic2VuZEV2ZW50IGluIENoYXRDbGllbnRcIik7XG4gIH1cblxuICBjcmVhdGVDb25uZWN0aW9uRGV0YWlscyhwYXJ0aWNpcGFudFRva2VuKSB7XG4gICAgdGhyb3cgbmV3IFVuSW1wbGVtZW50ZWRNZXRob2RFeGNlcHRpb24oXCJyZWNvbm5lY3RDaGF0IGluIENoYXRDbGllbnRcIik7XG4gIH1cbn1cbi8qZXNsaW50LWVuYWJsZSovXG5cbnZhciBjcmVhdGVEZWZhdWx0SGVhZGVycyA9ICgpID0+ICh7XG4gIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxuICBBY2NlcHQ6IFwiYXBwbGljYXRpb24vanNvblwiXG59KTtcblxuY2xhc3MgSHR0cENoYXRDbGllbnQgZXh0ZW5kcyBDaGF0Q2xpZW50IHtcbiAgY29uc3RydWN0b3IoYXJncykge1xuICAgIHN1cGVyKCk7XG4gICAgdGhpcy5pbnZva2VVcmwgPSBhcmdzLnN0YWdlQ29uZmlnLmludm9rZVVybDtcbiAgICB0aGlzLmNhbGxIdHRwQ2xpZW50ID0gbWFrZUh0dHBSZXF1ZXN0O1xuICAgIHRoaXMubG9nZ2VyID0gTG9nTWFuYWdlci5nZXRMb2dnZXIoeyBwcmVmaXg6IFwiQ2hhdENsaWVudFwiIH0pO1xuICB9XG5cbiAgc2VuZE1lc3NhZ2UoY29ubmVjdGlvblRva2VuLCBtZXNzYWdlLCB0eXBlKSB7XG4gICAgY29uc29sZS5sb2codHlwZSk7XG4gICAgdmFyIGJvZHkgPSB7XG4gICAgICBNZXNzYWdlOiB7XG4gICAgICAgIENvbnRlbnRUeXBlOiBDT05URU5UX1RZUEUudGV4dFBsYWluLFxuICAgICAgICBDb250ZW50OiBtZXNzYWdlLFxuICAgICAgICBQZXJzaXN0ZW5jZTogTUVTU0FHRV9QRVJTSVNURU5DRS5QRVJTSVNURURcbiAgICAgIH1cbiAgICB9O1xuICAgIHZhciByZXF1ZXN0SW5wdXQgPSB7XG4gICAgICBtZXRob2Q6IEhUVFBfTUVUSE9EUy5QT1NULFxuICAgICAgaGVhZGVyczoge30sXG4gICAgICB1cmw6IHRoaXMuaW52b2tlVXJsICsgUkVTT1VSQ0VfUEFUSC5NRVNTQUdFLFxuICAgICAgYm9keTogYm9keVxuICAgIH07XG4gICAgcmVxdWVzdElucHV0LmhlYWRlcnNbQ09OTkVDVElPTl9UT0tFTl9LRVldID0gY29ubmVjdGlvblRva2VuO1xuICAgIHJldHVybiB0aGlzLl9jYWxsSHR0cENsaWVudChyZXF1ZXN0SW5wdXQpO1xuICB9XG5cbiAgZ2V0VHJhbnNjcmlwdChjb25uZWN0aW9uVG9rZW4sIGFyZ3MpIHtcbiAgICB2YXIgcmVxdWVzdElucHV0ID0ge1xuICAgICAgbWV0aG9kOiBIVFRQX01FVEhPRFMuUE9TVCxcbiAgICAgIGhlYWRlcnM6IHt9LFxuICAgICAgdXJsOiB0aGlzLmludm9rZVVybCArIFJFU09VUkNFX1BBVEguVFJBTlNDUklQVCxcbiAgICAgIGJvZHk6IGFyZ3NcbiAgICB9O1xuICAgIHJlcXVlc3RJbnB1dC5oZWFkZXJzW0NPTk5FQ1RJT05fVE9LRU5fS0VZXSA9IGNvbm5lY3Rpb25Ub2tlbjtcbiAgICByZXR1cm4gdGhpcy5fY2FsbEh0dHBDbGllbnQocmVxdWVzdElucHV0KTtcbiAgfVxuXG4gIHNlbmRFdmVudChjb25uZWN0aW9uVG9rZW4sIGV2ZW50VHlwZSwgbWVzc2FnZUlkcywgdmlzaWJpbGl0eSwgcGVyc2lzdGVuY2UpIHtcbiAgICBjb25zb2xlLmxvZyhtZXNzYWdlSWRzKTtcbiAgICBjb25zb2xlLmxvZyhwZXJzaXN0ZW5jZSk7XG4gICAgdmFyIGJvZHkgPSB7XG4gICAgICBQYXJ0aWNpcGFudEV2ZW50OiB7XG4gICAgICAgIFZpc2liaWxpdHk6IHZpc2liaWxpdHksXG4gICAgICAgIFBhcnRpY2lwYW50RXZlbnRUeXBlOiBldmVudFR5cGVcbiAgICAgIH1cbiAgICB9O1xuICAgIHZhciByZXF1ZXN0SW5wdXQgPSB7XG4gICAgICBtZXRob2Q6IEhUVFBfTUVUSE9EUy5QT1NULFxuICAgICAgaGVhZGVyczoge30sXG4gICAgICB1cmw6IHRoaXMuaW52b2tlVXJsICsgUkVTT1VSQ0VfUEFUSC5FVkVOVCxcbiAgICAgIGJvZHk6IGJvZHlcbiAgICB9O1xuICAgIHJlcXVlc3RJbnB1dC5oZWFkZXJzW0NPTk5FQ1RJT05fVE9LRU5fS0VZXSA9IGNvbm5lY3Rpb25Ub2tlbjtcbiAgICByZXR1cm4gdGhpcy5fY2FsbEh0dHBDbGllbnQocmVxdWVzdElucHV0KTtcbiAgfVxuXG4gIGRpc2Nvbm5lY3RDaGF0KGNvbm5lY3Rpb25Ub2tlbikge1xuICAgIHZhciByZXF1ZXN0SW5wdXQgPSB7XG4gICAgICBtZXRob2Q6IEhUVFBfTUVUSE9EUy5QT1NULFxuICAgICAgaGVhZGVyczoge30sXG4gICAgICB1cmw6IHRoaXMuaW52b2tlVXJsICsgUkVTT1VSQ0VfUEFUSC5ESVNDT05ORUNULFxuICAgICAgYm9keToge31cbiAgICB9O1xuICAgIHJlcXVlc3RJbnB1dC5oZWFkZXJzW0NPTk5FQ1RJT05fVE9LRU5fS0VZXSA9IGNvbm5lY3Rpb25Ub2tlbjtcbiAgICByZXR1cm4gdGhpcy5fY2FsbEh0dHBDbGllbnQocmVxdWVzdElucHV0KTtcbiAgfVxuXG4gIGNyZWF0ZUNvbm5lY3Rpb25EZXRhaWxzKHBhcnRpY2lwYW50VG9rZW4pIHtcbiAgICB2YXIgcmVxdWVzdElucHV0ID0ge1xuICAgICAgbWV0aG9kOiBIVFRQX01FVEhPRFMuUE9TVCxcbiAgICAgIGhlYWRlcnM6IHt9LFxuICAgICAgdXJsOiB0aGlzLmludm9rZVVybCArIFJFU09VUkNFX1BBVEguQ09OTkVDVElPTl9ERVRBSUxTLFxuICAgICAgYm9keToge31cbiAgICB9O1xuICAgIHJlcXVlc3RJbnB1dC5oZWFkZXJzW1BBUlRJQ0lQQU5UX1RPS0VOX0tFWV0gPSBwYXJ0aWNpcGFudFRva2VuO1xuICAgIHJldHVybiB0aGlzLl9jYWxsSHR0cENsaWVudChyZXF1ZXN0SW5wdXQpO1xuICB9XG5cbiAgX2NhbGxIdHRwQ2xpZW50KHJlcXVlc3RJbnB1dCkge1xuICAgIHZhciBzZWxmID0gdGhpcztcbiAgICByZXF1ZXN0SW5wdXQuaGVhZGVycyA9IE9iamVjdC5hc3NpZ24oXG4gICAgICBjcmVhdGVEZWZhdWx0SGVhZGVycygpLFxuICAgICAgcmVxdWVzdElucHV0LmhlYWRlcnNcbiAgICApO1xuICAgIHJlcXVlc3RJbnB1dC5ib2R5ID0gSlNPTi5zdHJpbmdpZnkocmVxdWVzdElucHV0LmJvZHkpO1xuICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgIHZhciBzdWNjZXNzID0gcmVxdWVzdCA9PiB7XG4gICAgICAgIHZhciByZXNwb25zZU9iamVjdCA9IHt9O1xuICAgICAgICByZXNwb25zZU9iamVjdC5kYXRhID0gSlNPTi5wYXJzZShyZXF1ZXN0LnJlc3BvbnNlVGV4dCk7XG4gICAgICAgIHJlc29sdmUocmVzcG9uc2VPYmplY3QpO1xuICAgICAgfTtcbiAgICAgIHZhciBmYWlsdXJlID0gcmVxdWVzdCA9PiB7XG4gICAgICAgIHZhciBlcnJvck9iamVjdCA9IHt9O1xuICAgICAgICBlcnJvck9iamVjdC5zdGF0dXNUZXh0ID0gcmVxdWVzdC5zdGF0dXNUZXh0O1xuICAgICAgICB0cnkge1xuICAgICAgICAgIGVycm9yT2JqZWN0LmVycm9yID0gSlNPTi5wYXJzZShyZXF1ZXN0LnJlc3BvbnNlVGV4dCk7XG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICBzZWxmLmxvZ2dlci53YXJuKFwiaW52YWxpZCBqc29uIGVycm9yIGZyb20gc2VydmVyXCIpO1xuICAgICAgICAgIGVycm9yT2JqZWN0LmVycm9yID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICByZWplY3QoZXJyb3JPYmplY3QpO1xuICAgICAgfTtcbiAgICAgIHNlbGYuY2FsbEh0dHBDbGllbnQocmVxdWVzdElucHV0LCBzdWNjZXNzLCBmYWlsdXJlKTtcbiAgICB9KTtcbiAgfVxufVxuXG52YXIgQ2hhdENsaWVudEZhY3RvcnkgPSBuZXcgQ2hhdENsaWVudEZhY3RvcnlJbXBsKCk7XG5leHBvcnQgeyBDaGF0Q2xpZW50RmFjdG9yeSB9O1xuIiwiaW1wb3J0IFV0aWxzIGZyb20gXCIuLi91dGlsc1wiO1xuaW1wb3J0IHsgQ09OVEVOVF9UWVBFLCBWSVNJQklMSVRZLCBQRVJTSVNURU5DRSB9IGZyb20gXCIuLi9jb25zdGFudHNcIjtcbmltcG9ydCB7IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiB9IGZyb20gXCIuL2V4Y2VwdGlvbnNcIjtcblxuY2xhc3MgQ2hhdENvbnRyb2xsZXJBcmdzVmFsaWRhdG9yIHtcbiAgLyplc2xpbnQtZGlzYWJsZSBuby11bnVzZWQtdmFycyovXG4gIHZhbGlkYXRlTmV3Q29udHJvbGxlckRldGFpbHMoY2hhdERldGFpbHMpIHtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuICAvKmVzbGludC1lbmFibGUgbm8tdW51c2VkLXZhcnMqL1xuXG4gIHZhbGlkYXRlU2VuZE1lc3NhZ2UobWVzc2FnZSwgdHlwZSkge1xuICAgIGlmICghVXRpbHMuaXNTdHJpbmcobWVzc2FnZSkpIHtcbiAgICAgIFV0aWxzLmFzc2VydElzT2JqZWN0KG1lc3NhZ2UsIFwibWVzc2FnZVwiKTtcbiAgICB9XG4gICAgVXRpbHMuYXNzZXJ0SXNFbnVtKHR5cGUsIE9iamVjdC52YWx1ZXMoQ09OVEVOVF9UWVBFKSwgXCJ0eXBlXCIpO1xuICB9XG5cbiAgLyplc2xpbnQtZGlzYWJsZSBuby11bnVzZWQtdmFycyovXG4gIHZhbGlkYXRlQ29ubmVjdENoYXQoYXJncykge1xuICAgIHJldHVybiB0cnVlO1xuICB9XG4gIC8qZXNsaW50LWVuYWJsZSBuby11bnVzZWQtdmFycyovXG5cbiAgdmFsaWRhdGVMb2dnZXIobG9nZ2VyKSB7XG4gICAgVXRpbHMuYXNzZXJ0SXNPYmplY3QobG9nZ2VyLCBcImxvZ2dlclwiKTtcbiAgICBbXCJkZWJ1Z1wiLCBcImluZm9cIiwgXCJ3YXJuXCIsIFwiZXJyb3JcIl0uZm9yRWFjaChtZXRob2ROYW1lID0+IHtcbiAgICAgIGlmICghVXRpbHMuaXNGdW5jdGlvbihsb2dnZXJbbWV0aG9kTmFtZV0pKSB7XG4gICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24oXG4gICAgICAgICAgbWV0aG9kTmFtZSArXG4gICAgICAgICAgICBcIiBzaG91bGQgYmUgYSB2YWxpZCBmdW5jdGlvbiBvbiB0aGUgcGFzc2VkIGxvZ2dlciBvYmplY3QhXCJcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIHZhbGlkYXRlU2VuZEV2ZW50KGFyZ3MpIHtcbiAgICBVdGlscy5hc3NlcnRJc05vbkVtcHR5U3RyaW5nKGFyZ3MuZXZlbnRUeXBlLCBcImV2ZW50VHlwZVwiKTtcbiAgICBpZiAoYXJncy5tZXNzYWdlSWRzICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIFV0aWxzLmFzc2VydElzTGlzdChhcmdzLm1lc3NhZ2VJZHMpO1xuICAgIH1cbiAgICBpZiAoYXJncy52aXNpYmlsaXR5ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIFV0aWxzLmFzc2VydElzRW51bShcbiAgICAgICAgYXJncy52aXNpYmlsaXR5LFxuICAgICAgICBPYmplY3QudmFsdWVzKFZJU0lCSUxJVFkpLFxuICAgICAgICBcInZpc2liaWxpdHlcIlxuICAgICAgKTtcbiAgICB9XG4gICAgaWYgKGFyZ3MucGVyc2lzdGVuY2UgIT09IHVuZGVmaW5lZCkge1xuICAgICAgVXRpbHMuYXNzZXJ0SXNFbnVtKFxuICAgICAgICBhcmdzLnBlcnNpc3RlbmNlLFxuICAgICAgICBPYmplY3QudmFsdWVzKFBFUlNJU1RFTkNFKSxcbiAgICAgICAgXCJwZXJzaXN0ZW5jZVwiXG4gICAgICApO1xuICAgIH1cbiAgfVxuXG4gIC8vIFRPRE86IE5vdCBzdXJlIGFib3V0IHRoaXMgQVBJLlxuICAvKmVzbGludC1kaXNhYmxlIG5vLXVudXNlZC12YXJzKi9cbiAgdmFsaWRhdGVHZXRNZXNzYWdlcyhhcmdzKSB7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cbiAgLyplc2xpbnQtZW5hYmxlIG5vLXVudXNlZC12YXJzKi9cbn1cblxuY2xhc3MgQ2hhdFNlcnZpY2VBcmdzVmFsaWRhdG9yIGV4dGVuZHMgQ2hhdENvbnRyb2xsZXJBcmdzVmFsaWRhdG9yIHtcbiAgdmFsaWRhdGVDaGF0RGV0YWlscyhjaGF0RGV0YWlscykge1xuICAgIFV0aWxzLmFzc2VydElzT2JqZWN0KGNoYXREZXRhaWxzLCBcImNoYXREZXRhaWxzXCIpO1xuICAgIFV0aWxzLmFzc2VydElzTm9uRW1wdHlTdHJpbmcoXG4gICAgICBjaGF0RGV0YWlscy5pbml0aWFsQ29udGFjdElkLFxuICAgICAgXCJjaGF0RGV0YWlscy5pbml0aWFsQ29udGFjdElkXCJcbiAgICApO1xuICAgIFV0aWxzLmFzc2VydElzTm9uRW1wdHlTdHJpbmcoXG4gICAgICBjaGF0RGV0YWlscy5jb250YWN0SWQsXG4gICAgICBcImNoYXREZXRhaWxzLmNvbnRhY3RJZFwiXG4gICAgKTtcbiAgICBVdGlscy5hc3NlcnRJc05vbkVtcHR5U3RyaW5nKFxuICAgICAgY2hhdERldGFpbHMucGFydGljaXBhbnRJZCxcbiAgICAgIFwiY2hhdERldGFpbHMucGFydGljaXBhbnRJZFwiXG4gICAgKTtcbiAgICBpZiAoY2hhdERldGFpbHMuY29ubmVjdGlvbkRldGFpbHMpIHtcbiAgICAgIFV0aWxzLmFzc2VydElzT2JqZWN0KFxuICAgICAgICBjaGF0RGV0YWlscy5jb25uZWN0aW9uRGV0YWlscyxcbiAgICAgICAgXCJjaGF0RGV0YWlscy5jb25uZWN0aW9uRGV0YWlsc1wiXG4gICAgICApO1xuICAgICAgVXRpbHMuYXNzZXJ0SXNOb25FbXB0eVN0cmluZyhcbiAgICAgICAgY2hhdERldGFpbHMuY29ubmVjdGlvbkRldGFpbHMuUHJlU2lnbmVkQ29ubmVjdGlvblVybCxcbiAgICAgICAgXCJjaGF0RGV0YWlscy5jb25uZWN0aW9uRGV0YWlscy5QcmVTaWduZWRDb25uZWN0aW9uVXJsXCJcbiAgICAgICk7XG4gICAgICBVdGlscy5hc3NlcnRJc05vbkVtcHR5U3RyaW5nKFxuICAgICAgICBjaGF0RGV0YWlscy5jb25uZWN0aW9uRGV0YWlscy5Db25uZWN0aW9uSWQsXG4gICAgICAgIFwiY2hhdERldGFpbHMuY29ubmVjdGlvbkRldGFpbHMuQ29ubmVjdGlvbklkXCJcbiAgICAgICk7XG4gICAgICBVdGlscy5hc3NlcnRJc05vbkVtcHR5U3RyaW5nKFxuICAgICAgICBjaGF0RGV0YWlscy5jb25uZWN0aW9uRGV0YWlscy5jb25uZWN0aW9uVG9rZW4sXG4gICAgICAgIFwiY2hhdERldGFpbHMuY29ubmVjdGlvbkRldGFpbHMuY29ubmVjdGlvblRva2VuXCJcbiAgICAgICk7XG4gICAgfSBlbHNlIHtcbiAgICAgIFV0aWxzLmFzc2VydElzTm9uRW1wdHlTdHJpbmcoXG4gICAgICAgIGNoYXREZXRhaWxzLnBhcnRpY2lwYW50VG9rZW4sXG4gICAgICAgIFwiY2hhdERldGFpbHMucGFydGljaXBhbnRUb2tlblwiXG4gICAgICApO1xuICAgIH1cbiAgfVxuXG4gIHZhbGlkYXRlSW5pdGlhdGVDaGF0UmVzcG9uc2UoKSB7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cbn1cblxuZXhwb3J0IHsgQ2hhdFNlcnZpY2VBcmdzVmFsaWRhdG9yIH07XG4iLCJpbXBvcnQge1xuICBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24sXG4gIFVuSW1wbGVtZW50ZWRNZXRob2RFeGNlcHRpb25cbn0gZnJvbSBcIi4vZXhjZXB0aW9uc1wiO1xuXG5pbXBvcnQgUGFobyBmcm9tIFwiLi4vcGFoby1tcXR0XCI7XG5cbmNsYXNzIENoYXRDb25uZWN0aW9uTWFuYWdlciB7XG4gIGNyZWF0ZU5ld01xdHRDb25uZWN0aW9uUHJvdmlkZXIoY29ubmVjdGlvbkFyZ3MsIHR5cGUpIHtcbiAgICBzd2l0Y2ggKHR5cGUpIHtcbiAgICAgIGNhc2UgXCJQYWhvTXF0dENvbm5lY3Rpb25cIjpcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKGNhbGxiYWNrKSB7XG4gICAgICAgICAgY29ubmVjdGlvbkFyZ3MuY2FsbGJhY2sgPSBjYWxsYmFjaztcbiAgICAgICAgICByZXR1cm4gbmV3IFBhaG9NcXR0Q29ubmVjdGlvbihjb25uZWN0aW9uQXJncyk7XG4gICAgICAgIH07XG4gICAgfVxuICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24oXG4gICAgICBcInR5cGUgaW4gQ2hhdENvbm5lY3Rpb25NYW5hZ2VyLmNyZWF0ZU5ld01xdHRDb25uZWN0aW9uUHJvdmlkZXJcIixcbiAgICAgIHR5cGVcbiAgICApO1xuICB9XG59XG5cbi8vIFdoYXQgaXMgdGhlIGV4cGVjdGF0aW9uIGZyb20gdGhpcyBjbGFzcz9cbi8vIFRoaXMgc2hvdWxkIHByb3ZpZGUgYW4gaW50ZXJmYWNlIGZvciBjb25uZWN0aW5nICsgc3Vic2NyaWJpbmcgJiYgZGlzY29ubmVjdGluZyArIHVuc3Vic2NyaWJpbmcgdG8gZW5kcG9pbnQgKyB0b3BpYy5cbi8vIFRoaXMgY2xhc3Mgc2hvdWxkIGNhbGwgYmFja1xuLyplc2xpbnQtZGlzYWJsZSBuby11bnVzZWQtdmFycyovXG5jbGFzcyBNUVRUQ2xpZW50IHtcbiAgLyoqXG4gICAqIEBwYXJhbSBjb25uZWN0aW9uT3B0aW9ucyAob2JqZWN0KSAtXG4gICAqICAgICAgY29ubmVjdE9wdGlvbnMudXNlU1NMIC0gaWYgcHJlc2VudCBhbmQgdHJ1ZSwgdXNlIGFuIFNTTCBXZWJzb2NrZXQgY29ubmVjdGlvbi5cbiAgICogICAgICBjb25uZWN0T3B0aW9ucy5rZWVwQWxpdmVJbnRlcnZhbCAtIHRoZSBzZXJ2ZXIgZGlzY29ubmVjdHMgdGhpcyBjbGllbnQgaWYgdGhlcmUgaXMgbm8gYWN0aXZpdHkgZm9yIHRoaXMgbnVtYmVyIG9mIHNlY29uZHMuXG4gICAqICAgICAgY29ubmVjdE9wdGlvbnMucmVjb25uZWN0IC0gU2V0cyB3aGV0aGVyIHRoZSBjbGllbnQgd2lsbCBhdXRvbWF0aWNhbGx5IGF0dGVtcHQgdG8gcmVjb25uZWN0XG4gICAqICAgICAgY29ubmVjdE9wdGlvbnMubXF0dFZlcnNpb24gLSBUaGUgdmVyc2lvbiBvZiBNUVRUIHRvIHVzZSB0byBjb25uZWN0IHRvIHRoZSBNUVRUIEJyb2tlci5cbiAgICogICAgICBjb25uZWN0T3B0aW9ucy50aW1lb3V0IC0gSWYgdGhlIGNvbm5lY3QgaGFzIG5vdCBzdWNjZWVkZWQgd2l0aGluIHRoaXMgbnVtYmVyIG9mIHNlY29uZHMsIGl0IGlzIGRlZW1lZCB0byBoYXZlIGZhaWxlZC5cbiAgICpcbiAgICogQHJldHVybnMgYSBQcm9taXNlIG9iamVjdCAtXG4gICAqICAgICAgcmVzcG9uc2UgPSB7fVxuICAgKiAgICAgIGVycm9yID0ge1wicmVhc29uXCI6IHt9IC8vIEltcGxlbWVudGF0aW9uIHNwZWNpZmljXG4gICAqICAgICAgICAgIH1cbiAgICovXG4gIGNvbm5lY3QoY29ubmVjdE9wdGlvbnMpIHtcbiAgICB0aHJvdyBuZXcgVW5JbXBsZW1lbnRlZE1ldGhvZEV4Y2VwdGlvbihcImNvbm5lY3QgaW4gSW90Q2xpZW50XCIpO1xuICB9XG5cbiAgZGlzY29ubmVjdCgpIHtcbiAgICB0aHJvdyBuZXcgVW5JbXBsZW1lbnRlZE1ldGhvZEV4Y2VwdGlvbihcImNvbm5lY3QgaW4gSW90Q2xpZW50XCIpO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSBzdWJzY3JpYmVPcHRpb25zIChvYmplY3QpIC1cbiAgICogICAgICBzdWJzY3JpYmVPcHRpb25zLnFvcyAtIHRoZSBtYWl4aW11bSBxb3Mgb2YgYW55IHB1YmxpY2F0aW9ucyBzZW50IGFzIGEgcmVzdWx0IG9mIG1ha2luZyB0aGlzIHN1YnNjcmlwdGlvbi5cbiAgICogICAgICBjb25uZWN0T3B0aW9ucy50aW1lb3V0IC0gd2hpY2gsIGlmIHByZXNlbnQsIGRldGVybWluZXMgdGhlIG51bWJlciBvZiBzZWNvbmRzIGFmdGVyIHdoaWNoIHRoZSBvbkZhaWx1cmUgY2FsYmFjayBpcyBjYWxsZWQuXG4gICAqICAgICAgICAgIFRoZSBwcmVzZW5jZSBvZiBhIHRpbWVvdXQgZG9lcyBub3QgcHJldmVudCB0aGUgb25TdWNjZXNzIGNhbGxiYWNrIGZyb20gYmVpbmcgY2FsbGVkIHdoZW4gdGhlIHN1YnNjcmliZSBjb21wbGV0ZXMuXG4gICAqXG4gICAqIEByZXR1cm5zIGEgUHJvbWlzZSBvYmplY3QgLVxuICAgKiAgICAgIHJlc3BvbnNlID0ge1widG9waWNcIjogPHN0cmluZz4sXG4gICAqICAgICAgICAgICAgICAgICAgXCJxb3NcIjogcW9zLFxuICAgKiAgICAgIH1cbiAgICogICAgICBlcnJvciA9IHtcInRvcGljXCI6IDxzdHJpbmc+LFxuICAgKiAgICAgICAgICBcImVycm9yXCI6IHt9IC8vIEltcGxlbWVudGF0aW9uIHNwZWNpZmljXG4gICAqICAgICAgfVxuICAgKi9cbiAgc3Vic2NyaWJlKHRvcGljLCBzdWJzY3JpYmVPcHRpb25zKSB7XG4gICAgdGhyb3cgbmV3IFVuSW1wbGVtZW50ZWRNZXRob2RFeGNlcHRpb24oXCJjb25uZWN0IGluIElvdENsaWVudFwiKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0gc3Vic2NyaWJlT3B0aW9ucyAob2JqZWN0KSAtXG4gICAqICAgICAgY29ubmVjdE9wdGlvbnMudGltZW91dCAtIHdoaWNoLCBpZiBwcmVzZW50LCBkZXRlcm1pbmVzIHRoZSBudW1iZXIgb2Ygc2Vjb25kcyBhZnRlciB3aGljaCB0aGUgb25GYWlsdXJlIGNhbGxiYWNrIGlzIGNhbGxlZC5cbiAgICogICAgICAgICAgVGhlIHByZXNlbmNlIG9mIGEgdGltZW91dCBkb2VzIG5vdCBwcmV2ZW50IHRoZSBvblN1Y2Nlc3MgY2FsbGJhY2sgZnJvbSBiZWluZyBjYWxsZWQgd2hlbiB0aGUgdW5zdWJzY3JpYmUgY29tcGxldGVzLlxuICAgKlxuICAgKiBAcmV0dXJucyBhIFByb21pc2Ugb2JqZWN0IC1cbiAgICogICAgICByZXNwb25zZSA9IHtcInRvcGljXCI6IDxzdHJpbmc+LFxuICAgKiAgICAgICAgICAgICAgICAgIFwicW9zXCI6IHFvcyxcbiAgICogICAgICB9XG4gICAqICAgICAgZXJyb3IgPSB7XCJ0b3BpY1wiOiA8c3RyaW5nPixcbiAgICogICAgICAgICAgXCJlcnJvclwiOiB7fSAvLyBJbXBsZW1lbnRhdGlvbiBzcGVjaWZpY1xuICAgKiAgICAgIH1cbiAgICpcbiAgICovXG4gIHVuc3Vic2NyaWJlKHRvcGljLCB1bnN1YnNjcmliZU9wdGlvbnMpIHtcbiAgICB0aHJvdyBuZXcgVW5JbXBsZW1lbnRlZE1ldGhvZEV4Y2VwdGlvbihcImNvbm5lY3QgaW4gSW90Q2xpZW50XCIpO1xuICB9XG59XG4vKmVzbGludC1lbmFibGUgbm8tdW51c2VkLXZhcnMqL1xuXG52YXIgTXF0dENvbm5lY3Rpb25TdGF0dXMgPSBPYmplY3QuZnJlZXplKHtcbiAgTmV2ZXJDb25uZWN0ZWQ6IFwiTmV2ZXJDb25uZWN0ZWRcIixcbiAgQ29ubmVjdGluZzogXCJDb25uZWN0aW5nXCIsXG4gIENvbm5lY3RlZDogXCJDb25uZWN0ZWRcIixcbiAgRGlzY29ubmVjdGVkOiBcIkRpc2Nvbm5lY3RlZFwiXG59KTtcblxudmFyIE1xdHRFdmVudHMgPSBPYmplY3QuZnJlZXplKHtcbiAgTUVTU0FHRTogXCJNZXNzYWdlXCIsIC8vIHRvcGljLCBxb3MsIHBheWxvYWRTdHJpbmdcbiAgRElTQ09OTkVDVEVEOiBcIkRpc2Nvbm5lY3RlZFwiLCAvLyByZWFzb246IHBhaG9PYmplY3QvIFwiVGltZU91dEluUmVjb25uZWN0XCJcbn0pOyAvLyB7fVxuXG5jbGFzcyBQYWhvTXF0dENvbm5lY3Rpb24gZXh0ZW5kcyBNUVRUQ2xpZW50IHtcbiAgY29uc3RydWN0b3IoYXJncykge1xuICAgIHN1cGVyKCk7XG4gICAgdGhpcy5wcmVTaWduZWRVcmwgPSBhcmdzLnByZVNpZ25lZFVybDtcbiAgICB0aGlzLmNvbm5lY3Rpb25JZCA9IGFyZ3MuY29ubmVjdGlvbklkO1xuICAgIHRoaXMuc3RhdHVzID0gTXF0dENvbm5lY3Rpb25TdGF0dXMuTmV2ZXJDb25uZWN0ZWQ7XG4gICAgdGhpcy5wYWhvQ2xpZW50ID0gbmV3IFBhaG8uQ2xpZW50KHRoaXMucHJlU2lnbmVkVXJsLCB0aGlzLmNvbm5lY3Rpb25JZCk7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgIHRoaXMucGFob0NsaWVudC5vbk1lc3NhZ2VBcnJpdmVkID0gZnVuY3Rpb24obWVzc2FnZSkge1xuICAgICAgc2VsZi5fbWVzc2FnZUFycml2ZWRDYWxsYmFjayhtZXNzYWdlKTtcbiAgICB9O1xuICAgIHRoaXMucGFob0NsaWVudC5vbkNvbm5lY3Rpb25Mb3N0ID0gZnVuY3Rpb24oZGF0YSkge1xuICAgICAgc2VsZi5fY29ubmVjdGlvbkxvc3RDYWxsQmFjayhkYXRhKTtcbiAgICB9O1xuICAgIHRoaXMucGFob0NsaWVudC5vbk1lc3NhZ2VBcnJpdmVkID0gZnVuY3Rpb24obWVzc2FnZSkge1xuICAgICAgc2VsZi5fbWVzc2FnZUFycml2ZWRDYWxsYmFjayhtZXNzYWdlKTtcbiAgICB9O1xuICAgIHRoaXMuY2FsbGJhY2sgPSBhcmdzLmNhbGxiYWNrO1xuICAgIHRoaXMubmV2ZXJDb25uZWN0ZWQgPSB0cnVlO1xuICAgIHRoaXMuX3N1YnNjcmliZWRUb3BpY3MgPSBbXTtcbiAgfVxuXG4gIGNvbm5lY3QoY29ubmVjdE9wdGlvbnMpIHtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgY29ubmVjdE9wdGlvbnMub25TdWNjZXNzID0gZnVuY3Rpb24ocmVzcG9uc2UpIHtcbiAgICAgICAgc2VsZi5uZXZlckNvbm5lY3RlZCA9IGZhbHNlO1xuICAgICAgICBzZWxmLl9vbkNvbm5lY3RTdWNjZXNzKHJlc3BvbnNlKTtcbiAgICAgICAgcmVzb2x2ZSh7fSk7XG4gICAgICB9O1xuICAgICAgY29ubmVjdE9wdGlvbnMub25GYWlsdXJlID0gZnVuY3Rpb24oZXJyb3IpIHtcbiAgICAgICAgdmFyIGVycm9yRGV0YWlscyA9IHtcbiAgICAgICAgICByZWFzb246IGVycm9yXG4gICAgICAgIH07XG4gICAgICAgIHNlbGYuX29uQ29ubmVjdEZhaWx1cmUoZXJyb3JEZXRhaWxzKTtcbiAgICAgICAgcmVqZWN0KGVycm9yRGV0YWlscyk7XG4gICAgICB9O1xuICAgICAgc2VsZi5zdGF0dXMgPSBNcXR0Q29ubmVjdGlvblN0YXR1cy5Db25uZWN0aW5nO1xuICAgICAgc2VsZi5wYWhvQ2xpZW50LmNvbm5lY3QoY29ubmVjdE9wdGlvbnMpO1xuICAgIH0pO1xuICB9XG5cbiAgX2Nvbm5lY3Rpb25Mb3N0Q2FsbEJhY2soZXJyb3IpIHtcbiAgICB2YXIgZGF0YSA9IHtcbiAgICAgIHJlYXNvbjogZXJyb3JcbiAgICB9O1xuICAgIHRoaXMuX3N1YnNjcmliZWRUb3BpY3MgPSBbXTtcbiAgICBpZiAodGhpcy5zdGF0dXMgPT09IE1xdHRDb25uZWN0aW9uU3RhdHVzLkRpc2Nvbm5lY3RlZCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0aGlzLnN0YXR1cyA9IE1xdHRDb25uZWN0aW9uU3RhdHVzLkRpc2Nvbm5lY3RlZDtcbiAgICB0aGlzLmNhbGxiYWNrKE1xdHRFdmVudHMuRElTQ09OTkVDVEVELCBkYXRhKTtcbiAgfVxuXG4gIF9tZXNzYWdlQXJyaXZlZENhbGxiYWNrKG1lc3NhZ2UpIHtcbiAgICB2YXIgaW5jb21pbmdNZXNzYWdlID0ge1xuICAgICAgdG9waWM6IG1lc3NhZ2UudG9waWMsXG4gICAgICBxb3M6IG1lc3NhZ2UucW9zLFxuICAgICAgcGF5bG9hZFN0cmluZzogbWVzc2FnZS5wYXlsb2FkU3RyaW5nXG4gICAgfTtcbiAgICB0aGlzLmNhbGxiYWNrKE1xdHRFdmVudHMuTUVTU0FHRSwgaW5jb21pbmdNZXNzYWdlKTtcbiAgfVxuXG4gIC8qZXNsaW50LWRpc2FibGUgbm8tdW51c2VkLXZhcnMqL1xuICBfb25Db25uZWN0U3VjY2VzcyhyZXNwb25zZSkge1xuICAgIC8qZXNsaW50LWVuYWJsZSBuby11bnVzZWQtdmFycyovXG4gICAgdGhpcy5zdGF0dXMgPSBNcXR0Q29ubmVjdGlvblN0YXR1cy5Db25uZWN0ZWQ7XG4gIH1cblxuICAvKmVzbGludC1kaXNhYmxlIG5vLXVudXNlZC12YXJzKi9cbiAgX29uQ29ubmVjdEZhaWx1cmUoZXJyb3IpIHtcbiAgICAvKmVzbGludC1lbmFibGUgbm8tdW51c2VkLXZhcnMqL1xuICAgIHZhciBzZWxmID0gdGhpcztcbiAgICBpZiAoc2VsZi5uZXZlckNvbm5lY3RlZCkge1xuICAgICAgc2VsZi5zdGF0dXMgPSBNcXR0Q29ubmVjdGlvblN0YXR1cy5OZXZlckNvbm5lY3RlZDtcbiAgICB9IGVsc2Uge1xuICAgICAgc2VsZi5zdGF0dXMgPSBNcXR0Q29ubmVjdGlvblN0YXR1cy5EaXNjb25uZWN0ZWQ7XG4gICAgfVxuICB9XG5cbiAgZGlzY29ubmVjdCgpIHtcbiAgICB0aGlzLl9zdWJzY3JpYmVkVG9waWNzID0gW107XG4gICAgdGhpcy5zdGF0dXMgPSBNcXR0Q29ubmVjdGlvblN0YXR1cy5EaXNjb25uZWN0ZWQ7XG4gICAgdGhpcy5wYWhvQ2xpZW50LmRpc2Nvbm5lY3QoKTtcbiAgfVxuXG4gIHN1YnNjcmliZSh0b3BpYywgc3Vic2NyaWJlT3B0aW9ucykge1xuICAgIC8vIHNob3VsZCB3ZSBjaGVjayBpZiB0aGlzIHRvcGljIGlzIGFscmVhZHkgc3Vic2NyaWJlZD9cbiAgICAvLyBOTywgbGVhdmUgdGhpcyBiZWhhdmlvdXIgdG8gUEFITyAtIHdoYXRldmVyIFBBSE8gZG9lc1xuICAgIC8vIGluIGNhc2Ugb2YgZHVwbGljYXRlIHN1YnNjcmliZSAtIHdlIHdpbGwgZm9sbG93IHRoZSBzYW1lLlxuICAgIHZhciBzZWxmID0gdGhpcztcbiAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICBzdWJzY3JpYmVPcHRpb25zLm9uU3VjY2VzcyA9IGZ1bmN0aW9uKHJlc3BvbnNlKSB7XG4gICAgICAgIHNlbGYuX3N1YnNjcmliZVN1Y2Nlc3ModG9waWMsIHJlc3BvbnNlKTtcbiAgICAgICAgdmFyIHJlc3BvbnNlT2JqZWN0ID0ge1xuICAgICAgICAgIHRvcGljOiB0b3BpYyxcbiAgICAgICAgICBxb3M6IHJlc3BvbnNlLmdyYW50ZWRRb3NcbiAgICAgICAgfTtcbiAgICAgICAgcmVzb2x2ZShyZXNwb25zZU9iamVjdCk7XG4gICAgICB9O1xuICAgICAgc3Vic2NyaWJlT3B0aW9ucy5vbkZhaWx1cmUgPSBmdW5jdGlvbihlcnJvcikge1xuICAgICAgICB2YXIgZXJyb3JPYmplY3QgPSB7XG4gICAgICAgICAgdG9waWM6IHRvcGljLFxuICAgICAgICAgIGVycm9yOiBlcnJvclxuICAgICAgICB9O1xuICAgICAgICByZWplY3QoZXJyb3JPYmplY3QpO1xuICAgICAgfTtcbiAgICAgIHNlbGYucGFob0NsaWVudC5zdWJzY3JpYmUodG9waWMsIHN1YnNjcmliZU9wdGlvbnMpO1xuICAgIH0pO1xuICB9XG5cbiAgX2FkZFRvVG9waWNzKHRvcGljKSB7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgIGlmIChzZWxmLl9zdWJzY3JpYmVkVG9waWNzLmluZGV4T2YodG9waWMpID49IDApIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgc2VsZi5fc3Vic2NyaWJlZFRvcGljcy5wdXNoKHRvcGljKTtcbiAgfVxuXG4gIC8qZXNsaW50LWRpc2FibGUgbm8tdW51c2VkLXZhcnMqL1xuICBfc3Vic2NyaWJlU3VjY2Vzcyh0b3BpYywgcmVzcG9uc2UpIHtcbiAgICAvKmVzbGludC1lbmFibGUgbm8tdW51c2VkLXZhcnMqL1xuICAgIHRoaXMuX2FkZFRvVG9waWNzKHRvcGljKTtcbiAgfVxuXG4gIGdldFN1YnNjcmliZWRUb3BpY3MoKSB7XG4gICAgcmV0dXJuIHRoaXMuX3N1YnNjcmliZWRUb3BpY3Muc2xpY2UoMCk7XG4gIH1cblxuICB1bnN1YnNjcmliZSh0b3BpYywgdW5zdWJzY3JpYmVPcHRpb25zKSB7XG4gICAgLy8gc2hvdWxkIHdlIGNoZWNrIGlmIHRoaXMgdG9waWMgaXMgZXZlbiBzdWJzY3JpYmVkP1xuICAgIC8vIE5PLCBsZWF2ZSB0aGlzIGJlaGF2aW91ciB0byBQQUhPIC0gd2hhdGV2ZXIgUEFITyBkb2VzXG4gICAgLy8gaW4gY2FzZSBvZiB1bnN1YnNjcmliZSBvZiB0b3BpY3Mgbm90IGV2ZW50IHN1YnNjcmliZWRcbiAgICAvLyAtIHdlIHdpbGwgZm9sbG93IHRoZSBzYW1lLlxuICAgIHZhciBzZWxmID0gdGhpcztcbiAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICB1bnN1YnNjcmliZU9wdGlvbnMub25TdWNjZXNzID0gZnVuY3Rpb24ocmVzcG9uc2UpIHtcbiAgICAgICAgdmFyIHJlc3BvbnNlT2JqZWN0ID0ge1xuICAgICAgICAgIHRvcGljOiB0b3BpYyxcbiAgICAgICAgICByZXNwb25zZTogcmVzcG9uc2VcbiAgICAgICAgfTtcbiAgICAgICAgc2VsZi5fdW5zdWJzY3JpYmVTdWNjZXNzKHRvcGljLCByZXNwb25zZU9iamVjdCk7XG4gICAgICAgIHJlc29sdmUocmVzcG9uc2VPYmplY3QpO1xuICAgICAgfTtcbiAgICAgIHVuc3Vic2NyaWJlT3B0aW9ucy5vbkZhaWx1cmUgPSBmdW5jdGlvbihlcnJvcikge1xuICAgICAgICB2YXIgZXJyb3JPYmplY3QgPSB7XG4gICAgICAgICAgdG9waWM6IHRvcGljLFxuICAgICAgICAgIGVycm9yOiBlcnJvclxuICAgICAgICB9O1xuICAgICAgICByZWplY3QoZXJyb3JPYmplY3QpO1xuICAgICAgfTtcbiAgICAgIHNlbGYucGFob0NsaWVudC51bnN1YnNjcmliZSh0b3BpYywgdW5zdWJzY3JpYmVPcHRpb25zKTtcbiAgICB9KTtcbiAgfVxuXG4gIC8qZXNsaW50LWRpc2FibGUgbm8tdW51c2VkLXZhcnMqL1xuICBfdW5zdWJzY3JpYmVTdWNjZXNzKHRvcGljLCByZXNwb25zZSkge1xuICAgIC8qZXNsaW50LWVuYWJsZSBuby11bnVzZWQtdmFycyovXG4gICAgdGhpcy5fc3Vic2NyaWJlZFRvcGljcyA9IHRoaXMuX3N1YnNjcmliZWRUb3BpY3MuZmlsdGVyKHQgPT4gdCAhPT0gdG9waWMpO1xuICB9XG5cbiAgZ2V0U3RhdHVzKCkge1xuICAgIHJldHVybiB0aGlzLnN0YXR1cztcbiAgfVxufVxuXG5leHBvcnQgeyBDaGF0Q29ubmVjdGlvbk1hbmFnZXIsIE1xdHRFdmVudHMsIE1xdHRDb25uZWN0aW9uU3RhdHVzLCBNUVRUQ2xpZW50IH07XG4iLCJpbXBvcnQge1xuICBVbkltcGxlbWVudGVkTWV0aG9kRXhjZXB0aW9uLFxuICBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24sXG4gIElsbGVnYWxTdGF0ZUV4Y2VwdGlvblxufSBmcm9tIFwiLi9leGNlcHRpb25zXCI7XG5pbXBvcnQgeyBNcXR0Q29ubmVjdGlvblN0YXR1cywgTXF0dEV2ZW50cyB9IGZyb20gXCIuL2Nvbm5lY3Rpb25NYW5hZ2VyXCI7XG5pbXBvcnQgeyBNUVRUX0NPTlNUQU5UUyB9IGZyb20gXCIuLi9jb25zdGFudHNcIjtcbmltcG9ydCB7IExvZ01hbmFnZXIgfSBmcm9tIFwiLi4vbG9nXCI7XG5cbi8qKlxuICogVGhpcyBjbGFzcyBpcyB1c2VkIGZvciBlc3RhYmxpc2hpbmcgYSBjb25uZWN0aW9uIGZvciB0aGUgY2hhdC5cbiAqIFRoZSBvYmplY3Qgb2YgdGhpcyBjbGFzcyBjYW4gb25seSBiZSBzdGFydGVkIG9uY2UgYW5kIGNhbiBvbmx5IGJlIGNsb3NlZCBvbmNlLlxuICogSWYgdGhlIGNvbm5lY3Rpb24gZmFpbHMgdG8gZXN0YWJsaXNoLCBvciBpZiBpdCBlbmRzIGFicnVwdGx5IGR1ZSB0b1xuICogIGRvd25zdHJlYW0gaXNzdWVzLCBvciBpdCBpcyBlbmRlZCBleHBsaWNpdGx5IGJ5IGNhbGxpbmcgZW5kKClcbiAqICB0aGVuIHRoaXMgb2JqZWN0IGNhbiBubyBsb25nZXIgYmUgdXNlZC4gQSBuZXcgb2JqZWN0IG11c3QgYmUgY3JlYXRlZCB0byBjYWxsIHN0YXJ0IGFnYWluLlxuICogc3RhcnQoKSBhdHRlbXB0cyB0byBzdGFydCBhIGNvbm5lY3Rpb24uXG4gKi9cbi8qZXNsaW50LWRpc2FibGUgbm8tdW51c2VkLXZhcnMqL1xuY2xhc3MgQ29ubmVjdGlvbkhlbHBlciB7XG4gIC8qKlxuICAgKiAgIHJldHVybnMgUHJvbWlzZSBvYmplY3Qgd2l0aFxuICAgKiAgICAgICByZXNwb25zZSA9IHtcbiAgICogICAgICAgICBjb25uZWN0U3VjY2VzczogdHJ1ZSxcbiAgICogICAgICAgICBkZXRhaWxzOiB7fSAvLyBJbXBsZW1lbnRhdGlvbiBzcGVjaWZpY1xuICAgKiAgICAgICB9O1xuICAgKiAgICAgICBlcnJvciA9IHtcbiAgICogICAgICAgICBjb25uZWN0U3VjY2VzczogZmFsc2UsXG4gICAqICAgICAgICAgcmVhc29uOiBcIlwiIC8vIEltcGxlbWVudGF0aW9uIHNwZWNpZmljXG4gICAqICAgICAgICAgZGV0YWlsczoge30gLy8gSW1wbGVtZW50YXRpb24gc3BlY2lmaWNcbiAgICogICAgICAgfTtcbiAgICovXG4gIHN0YXJ0KGFyZ3MpIHtcbiAgICB0aHJvdyBuZXcgVW5JbXBsZW1lbnRlZE1ldGhvZEV4Y2VwdGlvbihcInN0YXJ0IGluIENvbm5lY3Rpb25IZWxwZXJcIik7XG4gIH1cblxuICBlbmQoKSB7XG4gICAgdGhyb3cgbmV3IFVuSW1wbGVtZW50ZWRNZXRob2RFeGNlcHRpb24oXCJlbmQgaW4gQ29ubmVjdGlvbkhlbHBlclwiKTtcbiAgfVxufVxuLyplc2xpbnQtZW5hYmxlIG5vLXVudXNlZC12YXJzKi9cblxudmFyIENvbm5lY3Rpb25IZWxwZXJTdGF0dXMgPSB7XG4gIE5ldmVyU3RhcnRlZDogXCJOZXZlclN0YXJ0ZWRcIixcbiAgU3RhcnRpbmc6IFwiU3RhcnRpbmdcIixcbiAgQ29ubmVjdGVkOiBcIkNvbm5lY3RlZFwiLFxuICBFbmRlZDogXCJFbmRlZFwiXG59O1xuXG52YXIgQ29ubmVjdGlvbkhlbHBlckV2ZW50cyA9IHtcbiAgRW5kZWQ6IFwiRW5kZWRcIiwgLy8gZXZlbnQgZGF0YSBpczoge3JlYXNvbjogLi4ufVxuICBJbmNvbWluZ01lc3NhZ2U6IFwiSW5jb21pbmdNZXNzYWdlXCIgLy8gZXZlbnQgZGF0YSBpczoge3BheWxvYWRTdHJpbmc6IC4uLn1cbn07XG5cbi8qXG5UaGlzIGltcGxlbWVudGF0aW9uIGFzc3VtZXMgdGhhdCBpdCBoYXMgaXRzIG93biBNUVRUIGNsaWVudCBcbndoaWNoIGhhcyBuZXZlciBiZWVuIGNvbm5lY3RlZCBhbmQgd2lsbCBub3QgYmUgc2hhcmVkIHdpdGggYW55b25lLlxuKi9cbi8vIFRPRE8gLSBiZWxvdyBjYW4gYmUgY2hhbmdlZCB3aXRoIFByb21pc2UgQ2hhaW5pbmcuXG5jbGFzcyBTb2xvQ2hhdENvbm5lY3Rpb25NcXR0SGVscGVyIGV4dGVuZHMgQ29ubmVjdGlvbkhlbHBlciB7XG4gIGNvbnN0cnVjdG9yKGFyZ3MpIHtcbiAgICBzdXBlcigpO1xuICAgIHZhciBwcmVmaXggPSBcIkNvbnRhY3RJZC1cIiArIGFyZ3MuY29udGFjdElkICsgXCI6IFwiO1xuICAgIHRoaXMubG9nZ2VyID0gTG9nTWFuYWdlci5nZXRMb2dnZXIoe1xuICAgICAgcHJlZml4OiBwcmVmaXhcbiAgICB9KTtcbiAgICB0aGlzLnByZVNpZ25lZFVybCA9IGFyZ3MuY29ubmVjdGlvbkRldGFpbHMucHJlU2lnbmVkVXJsO1xuICAgIHRoaXMudG9waWMgPSBhcmdzLmNvbm5lY3Rpb25EZXRhaWxzLmNvbm5lY3Rpb25JZDtcbiAgICB0aGlzLmNvbnNpZGVyUGFydGljaXBhbnRBc0Rpc2Nvbm5lY3RlZCA9IGZhbHNlO1xuICAgIHRoaXMuaW90Q29ubmVjdGlvbiA9IGFyZ3MubXF0dENvbm5lY3Rpb25Qcm92aWRlcigoZXZlbnRUeXBlLCBldmVudERhdGEpID0+XG4gICAgICB0aGlzLl9oYW5kbGVJb3RFdmVudChldmVudFR5cGUsIGV2ZW50RGF0YSlcbiAgICApO1xuICAgIGlmIChcbiAgICAgIHRoaXMuaW90Q29ubmVjdGlvbi5nZXRTdGF0dXMoKSAhPT0gTXF0dENvbm5lY3Rpb25TdGF0dXMuTmV2ZXJDb25uZWN0ZWRcbiAgICApIHtcbiAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24oXG4gICAgICAgIFwiaW90Q29ubmVjdGlvbiBpcyBleHBlY3RlZCB0byBiZSBpbiBOZXZlckNvbm5lY3RlZCBzdGF0ZSBidXQgaXMgbm90XCJcbiAgICAgICkoKTtcbiAgICB9XG4gICAgdGhpcy5jaGF0Q29udHJvbGxlckNhbGxiYWNrID0gYXJncy5jYWxsYmFjaztcbiAgICB0aGlzLnN0YXR1cyA9IENvbm5lY3Rpb25IZWxwZXJTdGF0dXMuTmV2ZXJTdGFydGVkO1xuICB9XG5cbiAgLy8gQWRkIGFueSBmdW5jdGlvbmFsaXR5IHRoYXQgeW91IHdhbnQgdGhpcyB0byBkbyxcbiAgLy8gaWYgdGhlIHBhcnRpY2lwYW50IGlzIHRvIGJlIGNvbnNpZGVyZWQgYXMgZGlzY29ubmVjdGVkLlxuICAvLyBkaXNjb25uZWN0IGhlcmUgbWVhbnMgdGhhdCB0aGUgcGFydGljaXBhbnQgaXMgbm8gbG9uZ2VyIHBhcnQgb2YgdGhlciBjaGF0LlxuICAvLyBpdCBpcyBpbmRlcGVuZGVudCBvZiB0aGUgYWN0dWFsIHdlYnNvY2tldCBjb25uZWN0aW9uIGJlaW5nIGNvbm5lY3RlZCBvciBub3QuXG4gIC8vIHBhcnRpY2lwYW50IGNhbiBubyBsb25nZXIgc2VuZCBhbmQgcmVjaWV2ZSBtZXNzYWdlcyB0byB0aGUgYmFja2VuZC5cbiAgY2xlYW5VcE9uUGFydGljaXBhbnREaXNjb25uZWN0KCkge1xuICAgIC8vIFJpZ2h0IG5vdywgbm90aGluZyBkZXBlbmRzIG9uIHRoaXMgZmllbGQuXG4gICAgLy8gSG93ZXZlciBpbiBmdXR1cmUgd2UgbWlnaHQgcHJldmVudCByZXRpcmVzIG9uIGNvbm5lY3Rpb24gaWYgdGhpcyBmaWVsZCBpcyBzZXQgdG8gdHJ1ZS5cbiAgICB0aGlzLmNvbnNpZGVyUGFydGljaXBhbnRBc0Rpc2Nvbm5lY3RlZCA9IHRydWU7XG4gIH1cblxuICBzdGFydCgpIHtcbiAgICBpZiAodGhpcy5zdGF0dXMgIT09IENvbm5lY3Rpb25IZWxwZXJTdGF0dXMuTmV2ZXJTdGFydGVkKSB7XG4gICAgICB0aHJvdyBuZXcgSWxsZWdhbFN0YXRlRXhjZXB0aW9uKFwiQ29ubmVjdGlvbiBoZWxwZXIgc3RhcnRlZCB0d2ljZSEhXCIpO1xuICAgIH1cbiAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgdGhpcy5zdGF0dXMgPSBDb25uZWN0aW9uSGVscGVyU3RhdHVzLlN0YXJ0aW5nO1xuICAgIHJldHVybiBuZXcgUHJvbWlzZShzZWxmLl9jcmVhdGVTdGFydFByb21pc2UoKSk7XG4gIH1cblxuICBfY3JlYXRlU3RhcnRQcm9taXNlKCkge1xuICAgIHZhciBzZWxmID0gdGhpcztcbiAgICByZXR1cm4gZnVuY3Rpb24ocmVzb3ZsZSwgcmVqZWN0KSB7XG4gICAgICBzZWxmLl9jb25uZWN0KHJlc292bGUsIHJlamVjdCk7XG4gICAgfTtcbiAgfVxuXG4gIF9jb25uZWN0KHJlc29sdmUsIHJlamVjdCkge1xuICAgIHZhciBzZWxmID0gdGhpcztcbiAgICB2YXIgY29ubmVjdE9wdGlvbnMgPSB7XG4gICAgICB1c2VTU0w6IHRydWUsXG4gICAgICBrZWVwQWxpdmVJbnRlcnZhbDogTVFUVF9DT05TVEFOVFMuS0VFUF9BTElWRSxcbiAgICAgIHJlY29ubmVjdDogZmFsc2UsXG4gICAgICBtcXR0VmVyc2lvbjogNCxcbiAgICAgIHRpbWVvdXQ6IE1RVFRfQ09OU1RBTlRTLkNPTk5FQ1RfVElNRU9VVFxuICAgIH07XG4gICAgc2VsZi5pb3RDb25uZWN0aW9uXG4gICAgICAuY29ubmVjdChjb25uZWN0T3B0aW9ucylcbiAgICAgIC50aGVuKGZ1bmN0aW9uKHJlc3BvbnNlKSB7XG4gICAgICAgIHNlbGYuX3Bvc3RDb25uZWN0KHJlc29sdmUsIHJlamVjdCwgcmVzcG9uc2UpO1xuICAgICAgfSlcbiAgICAgIC5jYXRjaChmdW5jdGlvbihlcnJvcikge1xuICAgICAgICBzZWxmLl9jb25uZWN0RmFpbGVkKHJlamVjdCwgZXJyb3IpO1xuICAgICAgfSk7XG4gIH1cblxuICBfcG9zdENvbm5lY3QocmVzb2x2ZSwgcmVqZWN0LCBjb25uZWN0UmVzcG9uc2UpIHtcbiAgICB0aGlzLl9zdWJzY3JpYmUocmVzb2x2ZSwgcmVqZWN0LCBjb25uZWN0UmVzcG9uc2UpO1xuICB9XG5cbiAgX2Nvbm5lY3RGYWlsZWQocmVqZWN0LCBjb25uZWN0RXJyb3IpIHtcbiAgICB2YXIgZXJyb3IgPSB7XG4gICAgICBjb25uZWN0U3VjY2VzczogZmFsc2UsXG4gICAgICByZWFzb246IFwiQ29ubmVjdGlvblRvQnJva2VyRmFpbGVkXCIsXG4gICAgICBkZXRhaWxzOiBjb25uZWN0RXJyb3JcbiAgICB9O1xuICAgIHRoaXMuc3RhdHVzID0gQ29ubmVjdGlvbkhlbHBlclN0YXR1cy5FbmRlZDtcbiAgICByZWplY3QoZXJyb3IpO1xuICB9XG5cbiAgLyplc2xpbnQtZGlzYWJsZSBuby11bnVzZWQtdmFycyovXG4gIF9zdWJzY3JpYmUocmVzb2x2ZSwgcmVqZWN0LCBjb25uZWN0UmVzcG9uc2UpIHtcbiAgICAvKmVzbGludC1lbmFibGUgbm8tdW51c2VkLXZhcnMqL1xuICAgIHZhciBzZWxmID0gdGhpcztcbiAgICB2YXIgc3Vic2NyaWJlT3B0aW9ucyA9IHtcbiAgICAgIHFvczogMVxuICAgIH07XG4gICAgc2VsZi5pb3RDb25uZWN0aW9uXG4gICAgICAuc3Vic2NyaWJlKHNlbGYudG9waWMsIHN1YnNjcmliZU9wdGlvbnMpXG4gICAgICAudGhlbihmdW5jdGlvbihyZXNwb25zZSkge1xuICAgICAgICBzZWxmLl9wb3N0U3Vic2NyaWJlKHJlc29sdmUsIHJlc3BvbnNlKTtcbiAgICAgIH0pXG4gICAgICAuY2F0Y2goZnVuY3Rpb24oZXJyb3IpIHtcbiAgICAgICAgc2VsZi5fc3Vic2NyaWJlRmFpbGVkKHJlamVjdCwgZXJyb3IpO1xuICAgICAgfSk7XG4gIH1cblxuICBfcG9zdFN1YnNjcmliZShyZXNvbHZlLCBzdWJzY3JpYmVSZXNwb25zZSkge1xuICAgIHZhciByZXNwb25zZSA9IHtcbiAgICAgIGRldGFpbHM6IHN1YnNjcmliZVJlc3BvbnNlLFxuICAgICAgY29ubmVjdFN1Y2Nlc3M6IHRydWVcbiAgICB9O1xuICAgIHRoaXMuc3RhdHVzID0gQ29ubmVjdGlvbkhlbHBlclN0YXR1cy5Db25uZWN0ZWQ7XG4gICAgcmVzb2x2ZShyZXNwb25zZSk7XG4gIH1cblxuICBfc3Vic2NyaWJlRmFpbGVkKHJlamVjdCwgc3Vic2NyaWJlRXJyb3IpIHtcbiAgICB2YXIgZXJyb3IgPSB7XG4gICAgICBjb25uZWN0U3VjY2VzczogZmFsc2UsXG4gICAgICBkZXRhaWxzOiBzdWJzY3JpYmVFcnJvcixcbiAgICAgIHJlYXNvbjogXCJTdWJzY3JpYnRpb25Ub1RvcGljRmFpbGVkXCJcbiAgICB9O1xuICAgIHZhciBzZWxmID0gdGhpcztcbiAgICBzZWxmLnN0YXR1cyA9IENvbm5lY3Rpb25IZWxwZXJTdGF0dXMuRW5kZWQ7XG4gICAgc2VsZi5pb3RDb25uZWN0aW9uLmRpc2Nvbm5lY3QoKTtcbiAgICByZWplY3QoZXJyb3IpO1xuICB9XG5cbiAgX2hhbmRsZUlvdEV2ZW50KGV2ZW50VHlwZSwgZXZlbnREYXRhKSB7XG4gICAgc3dpdGNoIChldmVudFR5cGUpIHtcbiAgICAgIGNhc2UgTXF0dEV2ZW50cy5NRVNTQUdFOlxuICAgICAgICB0aGlzLmxvZ2dlci5kZWJ1ZyhcIlJlY2VpdmVkIGluY29taW5nIGRhdGFcIiwgZXZlbnREYXRhLnBheWxvYWRTdHJpbmcpO1xuICAgICAgICB0aGlzLmNoYXRDb250cm9sbGVyQ2FsbGJhY2soXG4gICAgICAgICAgQ29ubmVjdGlvbkhlbHBlckV2ZW50cy5JbmNvbWluZ01lc3NhZ2UsXG4gICAgICAgICAgZXZlbnREYXRhXG4gICAgICAgICk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBNcXR0RXZlbnRzLkRJU0NPTk5FQ1RFRDpcbiAgICAgICAgdGhpcy5zdGF0dXMgPSBDb25uZWN0aW9uSGVscGVyU3RhdHVzLkVuZGVkO1xuICAgICAgICB0aGlzLmNoYXRDb250cm9sbGVyQ2FsbGJhY2soQ29ubmVjdGlvbkhlbHBlckV2ZW50cy5FbmRlZCwgZXZlbnREYXRhKTtcbiAgICAgICAgYnJlYWs7XG4gICAgfVxuICB9XG5cbiAgZW5kKCkge1xuICAgIHRoaXMuc3RhdHVzID0gQ29ubmVjdGlvbkhlbHBlclN0YXR1cy5FbmRlZDtcbiAgICAvLyBEbyB3ZSBleHBsaWNpdGx5IGhhdmUgdG8gdW5zdWJzY3JpYmUgYmVmb3JlIGRpc2Nvbm5lY3RpbmcgTVFUVD9cbiAgICB0aGlzLmlvdENvbm5lY3Rpb24uZGlzY29ubmVjdCgpO1xuICB9XG5cbiAgZ2V0U3RhdHVzKCkge1xuICAgIHJldHVybiB0aGlzLnN0YXR1cztcbiAgfVxufVxuXG5leHBvcnQge1xuICBTb2xvQ2hhdENvbm5lY3Rpb25NcXR0SGVscGVyLFxuICBDb25uZWN0aW9uSGVscGVyRXZlbnRzLFxuICBDb25uZWN0aW9uSGVscGVyU3RhdHVzLFxuICBDb25uZWN0aW9uSGVscGVyXG59O1xuIiwiaW1wb3J0IHsgQ0hBVF9FVkVOVFMgfSBmcm9tIFwiLi4vY29uc3RhbnRzXCI7XG5pbXBvcnQgeyBDb25uZWN0aW9uSGVscGVyRXZlbnRzIH0gZnJvbSBcIi4vY29ubmVjdGlvbkhlbHBlclwiO1xuXG5cbmNsYXNzIEV2ZW50Q29uc3RydWN0b3Ige1xuICBmcm9tQ29ubmVjdGlvbkhlbHBlckV2ZW50KGV2ZW50VHlwZSwgZXZlbnREYXRhLCBjaGF0RGV0YWlscykge1xuICAgIHZhciBkYXRhID0ge1xuICAgICAgZGF0YTogZXZlbnREYXRhLFxuICAgICAgY2hhdERldGFpbHM6IGNoYXREZXRhaWxzXG4gICAgfTtcbiAgICB2YXIgcmV0dXJuT2JqZWN0ID0ge1xuICAgICAgdHlwZTogbnVsbCxcbiAgICAgIGRhdGE6IGRhdGFcbiAgICB9O1xuICAgIHN3aXRjaCAoZXZlbnRUeXBlKSB7XG4gICAgICBjYXNlIENvbm5lY3Rpb25IZWxwZXJFdmVudHMuRW5kZWQ6XG4gICAgICAgIHJldHVybk9iamVjdC50eXBlID0gQ0hBVF9FVkVOVFMuQ09OTkVDVElPTl9CUk9LRU47XG4gICAgICAgIHJldHVybiByZXR1cm5PYmplY3Q7XG4gICAgICBjYXNlIENvbm5lY3Rpb25IZWxwZXJFdmVudHMuSW5jb21pbmdNZXNzYWdlOlxuICAgICAgICByZXR1cm4gdGhpcy5fZnJvbUluY29taW5nRGF0YShldmVudERhdGEsIGNoYXREZXRhaWxzKTtcbiAgICB9XG4gIH1cblxuICBfZnJvbUluY29taW5nRGF0YShldmVudERhdGEsIGNoYXREZXRhaWxzKSB7XG4gICAgdmFyIGluY29taW5nRGF0YSA9IEpTT04ucGFyc2UoZXZlbnREYXRhLnBheWxvYWRTdHJpbmcpO1xuICAgIHZhciBkYXRhID0ge1xuICAgICAgZGF0YTogaW5jb21pbmdEYXRhLFxuICAgICAgY2hhdERldGFpbHM6IGNoYXREZXRhaWxzXG4gICAgfTtcbiAgICB2YXIgcmV0dXJuT2JqZWN0ID0ge1xuICAgICAgdHlwZTogbnVsbCxcbiAgICAgIGRhdGE6IGRhdGFcbiAgICB9O1xuICAgIHN3aXRjaCAoaW5jb21pbmdEYXRhLkRhdGEuVHlwZSkge1xuICAgICAgY2FzZSBcIlRZUElOR1wiOlxuICAgICAgICByZXR1cm5PYmplY3QudHlwZSA9IENIQVRfRVZFTlRTLklOQ09NSU5HX1RZUElORztcbiAgICAgICAgcmV0dXJuIHJldHVybk9iamVjdDtcbiAgICB9XG4gICAgLy8gVE9ETyB0aGlzIGlzIG5vdCByaWdodCEgV2UgYXJlIHJldHVybmluZ1xuICAgIC8vIGEgTUVTU0FHRSBldmVudCBldmVuIHRob3VnaCB0aGlzIGNvdWxkIGJlIGEgY3VzdG9tIGV2ZW50LFxuICAgIC8vIHNob3VsZCB0aGVyZSBiZSBhbiBleGhhdXN0aXZlIGxpc3Qgb2YgZXZlbnRzIGxpa2UgUEFSVElDSVBBTlRfSk9JTkVEXG4gICAgLy8gcmVjb2duaXplZCBhcyBNRVNTQUdFP1xuICAgIHJldHVybk9iamVjdC50eXBlID0gQ0hBVF9FVkVOVFMuSU5DT01JTkdfTUVTU0FHRTtcbiAgICByZXR1cm4gcmV0dXJuT2JqZWN0O1xuICB9XG59XG5cbmV4cG9ydCB7IEV2ZW50Q29uc3RydWN0b3IgfTtcbiIsImltcG9ydCBVdGlscyBmcm9tIFwiLi4vdXRpbHNcIjtcblxuY29uc3QgQUxMX0VWRU5UUyA9IFwiPDxhbGw+PlwiO1xuXG4vKipcbiAqIEFuIG9iamVjdCByZXByZXNlbnRpbmcgYW4gZXZlbnQgc3Vic2NyaXB0aW9uIGluIGFuIEV2ZW50QnVzLlxuICovXG52YXIgU3Vic2NyaXB0aW9uID0gZnVuY3Rpb24oc3ViTWFwLCBldmVudE5hbWUsIGYpIHtcbiAgdGhpcy5zdWJNYXAgPSBzdWJNYXA7XG4gIHRoaXMuaWQgPSBVdGlscy5yYW5kb21JZCgpO1xuICB0aGlzLmV2ZW50TmFtZSA9IGV2ZW50TmFtZTtcbiAgdGhpcy5mID0gZjtcbn07XG5cbi8qKlxuICogVW5zdWJzY3JpYmUgdGhlIGhhbmRsZXIgb2YgdGhpcyBzdWJzY3JpcHRpb24gZnJvbSB0aGUgRXZlbnRCdXNcbiAqIGZyb20gd2hpY2ggaXQgd2FzIGNyZWF0ZWQuXG4gKi9cblN1YnNjcmlwdGlvbi5wcm90b3R5cGUudW5zdWJzY3JpYmUgPSBmdW5jdGlvbigpIHtcbiAgdGhpcy5zdWJNYXAudW5zdWJzY3JpYmUodGhpcy5ldmVudE5hbWUsIHRoaXMuaWQpO1xufTtcblxuLyoqXG4gKiBBIG1hcCBvZiBldmVudCBzdWJzY3JpcHRpb25zLCB1c2VkIGJ5IHRoZSBFdmVudEJ1cy5cbiAqL1xudmFyIFN1YnNjcmlwdGlvbk1hcCA9IGZ1bmN0aW9uKCkge1xuICB0aGlzLnN1YklkTWFwID0ge307XG4gIHRoaXMuc3ViRXZlbnROYW1lTWFwID0ge307XG59O1xuXG4vKipcbiAqIEFkZCBhIHN1YnNjcmlwdGlvbiBmb3IgdGhlIG5hbWVkIGV2ZW50LiAgQ3JlYXRlcyBhIG5ldyBTdWJzY3JpcHRpb25cbiAqIG9iamVjdCBhbmQgcmV0dXJucyBpdC4gIFRoaXMgb2JqZWN0IGNhbiBiZSB1c2VkIHRvIHVuc3Vic2NyaWJlLlxuICovXG5TdWJzY3JpcHRpb25NYXAucHJvdG90eXBlLnN1YnNjcmliZSA9IGZ1bmN0aW9uKGV2ZW50TmFtZSwgZikge1xuICB2YXIgc3ViID0gbmV3IFN1YnNjcmlwdGlvbih0aGlzLCBldmVudE5hbWUsIGYpO1xuXG4gIHRoaXMuc3ViSWRNYXBbc3ViLmlkXSA9IHN1YjtcbiAgdmFyIHN1Ykxpc3QgPSB0aGlzLnN1YkV2ZW50TmFtZU1hcFtldmVudE5hbWVdIHx8IFtdO1xuICBzdWJMaXN0LnB1c2goc3ViKTtcbiAgdGhpcy5zdWJFdmVudE5hbWVNYXBbZXZlbnROYW1lXSA9IHN1Ykxpc3Q7XG59O1xuXG4vKipcbiAqIFVuc3Vic2NyaWJlIGEgc3Vic2NyaXB0aW9uIG1hdGNoaW5nIHRoZSBnaXZlbiBldmVudCBuYW1lIGFuZCBpZC5cbiAqL1xuU3Vic2NyaXB0aW9uTWFwLnByb3RvdHlwZS51bnN1YnNjcmliZSA9IGZ1bmN0aW9uKGV2ZW50TmFtZSwgc3ViSWQpIHtcbiAgaWYgKFV0aWxzLmNvbnRhaW5zKHRoaXMuc3ViRXZlbnROYW1lTWFwLCBldmVudE5hbWUpKSB7XG4gICAgdGhpcy5zdWJFdmVudE5hbWVNYXBbZXZlbnROYW1lXSA9IHRoaXMuc3ViRXZlbnROYW1lTWFwW2V2ZW50TmFtZV0uZmlsdGVyKFxuICAgICAgZnVuY3Rpb24ocykge1xuICAgICAgICByZXR1cm4gcy5pZCAhPT0gc3ViSWQ7XG4gICAgICB9XG4gICAgKTtcblxuICAgIGlmICh0aGlzLnN1YkV2ZW50TmFtZU1hcFtldmVudE5hbWVdLmxlbmd0aCA8IDEpIHtcbiAgICAgIGRlbGV0ZSB0aGlzLnN1YkV2ZW50TmFtZU1hcFtldmVudE5hbWVdO1xuICAgIH1cbiAgfVxuXG4gIGlmIChVdGlscy5jb250YWlucyh0aGlzLnN1YklkTWFwLCBzdWJJZCkpIHtcbiAgICBkZWxldGUgdGhpcy5zdWJJZE1hcFtzdWJJZF07XG4gIH1cbn07XG5cbi8qKlxuICogR2V0IGEgbGlzdCBvZiBhbGwgc3Vic2NyaXB0aW9ucyBpbiB0aGUgc3Vic2NyaXB0aW9uIG1hcC5cbiAqL1xuU3Vic2NyaXB0aW9uTWFwLnByb3RvdHlwZS5nZXRBbGxTdWJzY3JpcHRpb25zID0gZnVuY3Rpb24oKSB7XG4gIHJldHVybiBVdGlscy52YWx1ZXModGhpcy5zdWJFdmVudE5hbWVNYXApLnJlZHVjZShmdW5jdGlvbihhLCBiKSB7XG4gICAgcmV0dXJuIGEuY29uY2F0KGIpO1xuICB9LCBbXSk7XG59O1xuXG4vKipcbiAqIEdldCBhIGxpc3Qgb2Ygc3Vic2NyaXB0aW9ucyBmb3IgdGhlIGdpdmVuIGV2ZW50IG5hbWUsIG9yIGFuIGVtcHR5XG4gKiBsaXN0IGlmIHRoZXJlIGFyZSBubyBzdWJzY3JpcHRpb25zLlxuICovXG5TdWJzY3JpcHRpb25NYXAucHJvdG90eXBlLmdldFN1YnNjcmlwdGlvbnMgPSBmdW5jdGlvbihldmVudE5hbWUpIHtcbiAgcmV0dXJuIHRoaXMuc3ViRXZlbnROYW1lTWFwW2V2ZW50TmFtZV0gfHwgW107XG59O1xuXG4vKipcbiAqIEFuIG9iamVjdCB3aGljaCBtYWludGFpbnMgYSBtYXAgb2Ygc3Vic2NyaXB0aW9ucyBhbmQgc2VydmVzIGFzIHRoZVxuICogbWVjaGFuaXNtIGZvciB0cmlnZ2VyaW5nIGV2ZW50cyB0byBiZSBoYW5kbGVkIGJ5IHN1YnNjcmliZXJzLlxuICovXG52YXIgRXZlbnRCdXMgPSBmdW5jdGlvbihwYXJhbXNJbikge1xuICB2YXIgcGFyYW1zID0gcGFyYW1zSW4gfHwge307XG5cbiAgdGhpcy5zdWJNYXAgPSBuZXcgU3Vic2NyaXB0aW9uTWFwKCk7XG4gIHRoaXMubG9nRXZlbnRzID0gcGFyYW1zLmxvZ0V2ZW50cyB8fCBmYWxzZTtcbn07XG5cbi8qKlxuICogU3Vic2NyaWJlIHRvIHRoZSBuYW1lZCBldmVudC4gIFJldHVybnMgYSBuZXcgU3Vic2NyaXB0aW9uIG9iamVjdFxuICogd2hpY2ggY2FuIGJlIHVzZWQgdG8gdW5zdWJzY3JpYmUuXG4gKi9cbkV2ZW50QnVzLnByb3RvdHlwZS5zdWJzY3JpYmUgPSBmdW5jdGlvbihldmVudE5hbWUsIGYpIHtcbiAgVXRpbHMuYXNzZXJ0Tm90TnVsbChldmVudE5hbWUsIFwiZXZlbnROYW1lXCIpO1xuICBVdGlscy5hc3NlcnROb3ROdWxsKGYsIFwiZlwiKTtcbiAgVXRpbHMuYXNzZXJ0VHJ1ZShVdGlscy5pc0Z1bmN0aW9uKGYpLCBcImYgbXVzdCBiZSBhIGZ1bmN0aW9uXCIpO1xuICByZXR1cm4gdGhpcy5zdWJNYXAuc3Vic2NyaWJlKGV2ZW50TmFtZSwgZik7XG59O1xuXG4vKipcbiAqIFN1YnNjcmliZSBhIGZ1bmN0aW9uIHRvIGJlIGNhbGxlZCBvbiBhbGwgZXZlbnRzLlxuICovXG5FdmVudEJ1cy5wcm90b3R5cGUuc3Vic2NyaWJlQWxsID0gZnVuY3Rpb24oZikge1xuICBVdGlscy5hc3NlcnROb3ROdWxsKGYsIFwiZlwiKTtcbiAgVXRpbHMuYXNzZXJ0VHJ1ZShVdGlscy5pc0Z1bmN0aW9uKGYpLCBcImYgbXVzdCBiZSBhIGZ1bmN0aW9uXCIpO1xuICByZXR1cm4gdGhpcy5zdWJNYXAuc3Vic2NyaWJlKEFMTF9FVkVOVFMsIGYpO1xufTtcblxuLyoqXG4gKiBHZXQgYSBsaXN0IG9mIHN1YnNjcmlwdGlvbnMgZm9yIHRoZSBnaXZlbiBldmVudCBuYW1lLCBvciBhbiBlbXB0eVxuICogbGlzdCBpZiB0aGVyZSBhcmUgbm8gc3Vic2NyaXB0aW9ucy5cbiAqL1xuRXZlbnRCdXMucHJvdG90eXBlLmdldFN1YnNjcmlwdGlvbnMgPSBmdW5jdGlvbihldmVudE5hbWUpIHtcbiAgcmV0dXJuIHRoaXMuc3ViTWFwLmdldFN1YnNjcmlwdGlvbnMoZXZlbnROYW1lKTtcbn07XG5cbi8qKlxuICogVHJpZ2dlciB0aGUgZ2l2ZW4gZXZlbnQgd2l0aCB0aGUgZ2l2ZW4gZGF0YS4gIEFsbCBtZXRob2RzIHN1YnNjcmliZWRcbiAqIHRvIHRoaXMgZXZlbnQgd2lsbCBiZSBjYWxsZWQgYW5kIGFyZSBwcm92aWRlZCB3aXRoIHRoZSBnaXZlbiBhcmJpdHJhcnlcbiAqIGRhdGEgb2JqZWN0IGFuZCB0aGUgbmFtZSBvZiB0aGUgZXZlbnQsIGluIHRoYXQgb3JkZXIuXG4gKi9cbkV2ZW50QnVzLnByb3RvdHlwZS50cmlnZ2VyID0gZnVuY3Rpb24oZXZlbnROYW1lLCBkYXRhKSB7XG4gIFV0aWxzLmFzc2VydE5vdE51bGwoZXZlbnROYW1lLCBcImV2ZW50TmFtZVwiKTtcbiAgdmFyIHNlbGYgPSB0aGlzO1xuICB2YXIgYWxsRXZlbnRTdWJzID0gdGhpcy5zdWJNYXAuZ2V0U3Vic2NyaXB0aW9ucyhBTExfRVZFTlRTKTtcbiAgdmFyIGV2ZW50U3VicyA9IHRoaXMuc3ViTWFwLmdldFN1YnNjcmlwdGlvbnMoZXZlbnROYW1lKTtcblxuICAvLyBpZiAodGhpcy5sb2dFdmVudHMgJiYgKGV2ZW50TmFtZSAhPT0gY29ubmVjdC5FdmVudFR5cGUuTE9HICYmIGV2ZW50TmFtZSAhPT0gY29ubmVjdC5FdmVudFR5cGUuTUFTVEVSX1JFU1BPTlNFICYmIGV2ZW50TmFtZSAhPT0gY29ubmVjdC5FdmVudFR5cGUuQVBJX01FVFJJQykpIHtcbiAgLy8gICAgY29ubmVjdC5nZXRMb2coKS50cmFjZShcIlB1Ymxpc2hpbmcgZXZlbnQ6ICVzXCIsIGV2ZW50TmFtZSk7XG4gIC8vIH1cblxuICBhbGxFdmVudFN1YnMuY29uY2F0KGV2ZW50U3VicykuZm9yRWFjaChmdW5jdGlvbihzdWIpIHtcbiAgICB0cnkge1xuICAgICAgc3ViLmYoZGF0YSB8fCBudWxsLCBldmVudE5hbWUsIHNlbGYpO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIC8vICAgY29ubmVjdFxuICAgICAgLy8gICAgIC5nZXRMb2coKVxuICAgICAgLy8gICAgIC5lcnJvcihcIiclcycgZXZlbnQgaGFuZGxlciBmYWlsZWQuXCIsIGV2ZW50TmFtZSlcbiAgICAgIC8vICAgICAud2l0aEV4Y2VwdGlvbihlKTtcbiAgICB9XG4gIH0pO1xufTtcblxuLyoqXG4gKiBUcmlnZ2VyIHRoZSBnaXZlbiBldmVudCB3aXRoIHRoZSBnaXZlbiBkYXRhLiAgQWxsIG1ldGhvZHMgc3Vic2NyaWJlZFxuICogdG8gdGhpcyBldmVudCB3aWxsIGJlIGNhbGxlZCBhbmQgYXJlIHByb3ZpZGVkIHdpdGggdGhlIGdpdmVuIGFyYml0cmFyeVxuICogZGF0YSBvYmplY3QgYW5kIHRoZSBuYW1lIG9mIHRoZSBldmVudCwgaW4gdGhhdCBvcmRlci5cbiAqL1xuRXZlbnRCdXMucHJvdG90eXBlLnRyaWdnZXJBc3luYyA9IGZ1bmN0aW9uKGV2ZW50TmFtZSwgZGF0YSkge1xuICBzZXRUaW1lb3V0KCgpID0+IHRoaXMudHJpZ2dlcihldmVudE5hbWUsIGRhdGEpLCAwKTtcbn07XG5cbi8qKlxuICogUmV0dXJucyBhIGNsb3N1cmUgd2hpY2ggYnJpZGdlcyBhbiBldmVudCBmcm9tIGFub3RoZXIgRXZlbnRCdXMgdG8gdGhpcyBidXMuXG4gKlxuICogVXNhZ2U6XG4gKiBjb25kdWl0Lm9uVXBzdHJlYW0oXCJNeUV2ZW50XCIsIGJ1cy5icmlkZ2UoKSk7XG4gKi9cbkV2ZW50QnVzLnByb3RvdHlwZS5icmlkZ2UgPSBmdW5jdGlvbigpIHtcbiAgdmFyIHNlbGYgPSB0aGlzO1xuICByZXR1cm4gZnVuY3Rpb24oZGF0YSwgZXZlbnQpIHtcbiAgICBzZWxmLnRyaWdnZXIoZXZlbnQsIGRhdGEpO1xuICB9O1xufTtcblxuLyoqXG4gKiBVbnN1YnNjcmliZSBhbGwgZXZlbnRzIGluIHRoZSBldmVudCBidXMuXG4gKi9cbkV2ZW50QnVzLnByb3RvdHlwZS51bnN1YnNjcmliZUFsbCA9IGZ1bmN0aW9uKCkge1xuICB0aGlzLnN1Yk1hcC5nZXRBbGxTdWJzY3JpcHRpb25zKCkuZm9yRWFjaChmdW5jdGlvbihzdWIpIHtcbiAgICBzdWIudW5zdWJzY3JpYmUoKTtcbiAgfSk7XG59O1xuXG5leHBvcnQgeyBFdmVudEJ1cyB9O1xuIiwiaW1wb3J0IHtcbiAgVW5JbXBsZW1lbnRlZE1ldGhvZEV4Y2VwdGlvbixcbiAgSWxsZWdhbFN0YXRlRXhjZXB0aW9uXG59IGZyb20gXCIuL2V4Y2VwdGlvbnNcIjtcbmltcG9ydCB7IENvbm5lY3Rpb25IZWxwZXJTdGF0dXMgfSBmcm9tIFwiLi9jb25uZWN0aW9uSGVscGVyXCI7XG5pbXBvcnQge1xuICBQRVJTSVNURU5DRSxcbiAgVklTSUJJTElUWSxcbiAgQ0hBVF9FVkVOVFMsXG4gIFRSQU5TQ1JJUFRfREVGQVVMVF9QQVJBTVMsXG4gIENPTlRFTlRfVFlQRVxufSBmcm9tIFwiLi4vY29uc3RhbnRzXCI7XG5pbXBvcnQgeyBHbG9iYWxDb25maWcgfSBmcm9tIFwiLi4vZ2xvYmFsQ29uZmlnXCI7XG5pbXBvcnQgeyBMb2dNYW5hZ2VyIH0gZnJvbSBcIi4uL2xvZ1wiO1xuaW1wb3J0IFV0aWxzIGZyb20gXCIuLi91dGlsc1wiO1xuXG52YXIgTmV0d29ya0xpbmtTdGF0dXMgPSB7XG4gIE5ldmVyRXN0YWJsaXNoZWQ6IFwiTmV2ZXJFc3RhYmxpc2hlZFwiLFxuICBFc3RhYmxpc2hpbmc6IFwiRXN0YWJsaXNoaW5nXCIsXG4gIEVzdGFibGlzaGVkOiBcIkVzdGFibGlzaGVkXCIsXG4gIEJyb2tlbjogXCJCcm9rZW5cIlxufTtcblxuLyplc2xpbnQtZGlzYWJsZSBuby11bnVzZWQtdmFycyovXG5jbGFzcyBDaGF0Q29udHJvbGxlciB7XG4gIC8qKlxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gdGV4dE1lc3NhZ2VcbiAgICogQHJldHVybiBhIHByb21pc2Ugb2JqZWN0IHdpdGhcbiAgICogc3VjY2VzcyA9IHtcbiAgICogIFwic3RhdHVzQ29kZVwiOiAyMDAsXG4gICAqICBcImRhdGFcIjoge1xuICAgKiAgICAgIFwiTWVzc2FnZUlkXCI6IDxzdHJpbmc+XG4gICAqICAgICAgfVxuICAgKiAgfVxuICAgKiBlcnJvciA9IHtcbiAgICogIFwic3RhdHVzQ29kZVwiOiA8ZXJyb3JTdGF0dXNDb2RlPixcbiAgICogIFwiZXhjZXB0aW9uXCI6IHt9IC8vIHNvbWUgb2JqZWN0Li4uXG4gICAqIH1cbiAgICovXG4gIHNlbmRUZXh0TWVzc2FnZSh0ZXh0TWVzc2FnZSkge1xuICAgIHRocm93IG5ldyBVbkltcGxlbWVudGVkTWV0aG9kRXhjZXB0aW9uKFwic2VuZFRleHRNZXNzYWdlIGluIENoYXRDb250cm9sbGVyXCIpO1xuICB9XG5cbiAgLyoqXG4gICAqXG4gICAqIEBwYXJhbSB7Kn0gYXJnc1xuICAgKiBAcmV0dXJuIFByb21pc2Ugb2JqZWN0IHdpdGhcbiAgICogICAgICByZXNwb25zZSA9IHtcbiAgICogICAgICAgICAgICAgIFwiZGV0YWlsc1wiOiB7fSwgLy8gSW1wbGVtZW50YXRpb24gc3BlY2lmaWNcbiAgICogICAgICAgICAgICAgIFwiaW5pdGlhbENvbnRhY3RJZFwiOiA8SW5pdGlhbENvbnRhY3RJZD4sXG4gICAqICAgICAgICAgICAgICBcImNvbnRhY3RJZFwiOiAgPGNvbnRhY3RJZD4sXG4gICAqICAgICAgICAgICAgICBcImNvbm5lY3RTdWNjZXNzXCI6IHRydWVcbiAgICogICAgICB9XG4gICAqICAgICAgZXJyb3IgPSB7XG4gICAqICAgICAgICAgICAgICBcImRldGFpbHNcIjoge30sIC8vIEltcGxlbWVudGF0aW9uIHNwZWNpZmljXG4gICAqICAgICAgICAgICAgICBcImluaXRpYWxDb250YWN0SWRcIjogPEluaXRpYWxDb250YWN0SWQ+LFxuICAgKiAgICAgICAgICAgICAgXCJjb250YWN0SWRcIjogIDxjb250YWN0SWQ+LFxuICAgKiAgICAgICAgICAgICAgXCJjb25uZWN0U3VjY2Vzc1wiOiBmYWxzZVxuICAgKiAgICAgIH1cbiAgICovXG4gIGVzdGFibGlzaE5ldHdvcmtMaW5rKGFyZ3MpIHtcbiAgICB0aHJvdyBuZXcgVW5JbXBsZW1lbnRlZE1ldGhvZEV4Y2VwdGlvbihcImNvbm5lY3RDaGF0IGluIENoYXRDb250cm9sbGVyXCIpO1xuICB9XG5cbiAgLyoqXG4gICAqIEByZXR1cm4gbnVsbFxuICAgKi9cbiAgZGlzY29ubmVjdFBhcnRpY2lwYW50KCkge1xuICAgIHRocm93IG5ldyBVbkltcGxlbWVudGVkTWV0aG9kRXhjZXB0aW9uKFwiZW5kQ2hhdCBpbiBDaGF0Q29udHJvbGxlclwiKTtcbiAgfVxuXG4gIC8qKlxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gZXZlbnRUeXBlXG4gICAqIEByZXR1cm4gUHJvbWlzZSBvYmplY3Qgd2l0aFxuICAgKiAgc3VjY2VzcyA9IHtcbiAgICogICAgICBcInN0YXR1c0NvZGVcIjogMjAwLFxuICAgKiAgICAgIFwiZGF0YVwiOiB7fSAvLyBlbXB0eSBvYmplY3Q/IFRPRE9cbiAgICogIH1cbiAgICogIGVycm9yID0ge1xuICAgKiAgICAgIFwic3RhdHVzQ29kZVwiOiA8ZXJyb3JDb2RlPixcbiAgICogICAgICBcImV4Y2VwdGlvblwiOiB7fSAvLyBzb21lIG9iamVjdFxuICAgKiAgfVxuICAgKi9cbiAgc2VuZEV2ZW50KGV2ZW50VHlwZSkge1xuICAgIHRocm93IG5ldyBVbkltcGxlbWVudGVkTWV0aG9kRXhjZXB0aW9uKFwic2VuZEV2ZW50IGluIENoYXRDb250cm9sbGVyXCIpO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7b2JqZWN0fSBhcmdzIC8vVE9ET1xuICAgKiBAcmV0dXJuIC8vIFRPRE9cbiAgICovXG4gIGdldFRyYW5zY3JpcHQoYXJncykge1xuICAgIHRocm93IG5ldyBVbkltcGxlbWVudGVkTWV0aG9kRXhjZXB0aW9uKFwiZ2V0VHJhbnNjcmlwdCBpbiBDaGF0Q29udHJvbGxlclwiKTtcbiAgfVxuXG4gIGdldENvbm5lY3Rpb25TdGF0dXMoKSB7XG4gICAgdGhyb3cgbmV3IFVuSW1wbGVtZW50ZWRNZXRob2RFeGNlcHRpb24oXCJnZXRTdGF0dXMgaW4gQ2hhdENvbnRyb2xsZXJcIik7XG4gIH1cbn1cbi8qZXNsaW50LWVuYWJsZSBuby11bnVzZWQtdmFycyovXG5cbmNsYXNzIFBlcnNpc3RlbnRDb25uZWN0aW9uQW5kQ2hhdFNlcnZpY2VDb250cm9sbGVyIGV4dGVuZHMgQ2hhdENvbnRyb2xsZXIge1xuICBjb25zdHJ1Y3RvcihhcmdzKSB7XG4gICAgc3VwZXIoKTtcbiAgICB0aGlzLnNldEFyZ3VtZW50cyhhcmdzKTtcbiAgfVxuXG4gIHNldEFyZ3VtZW50cyhhcmdzKSB7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgIHZhciBwcmVmaXggPSBcIkNvbnRhY3RJZC1cIiArIGFyZ3MuY2hhdERldGFpbHMuY29udGFjdElkICsgXCI6IFwiO1xuICAgIHRoaXMubG9nZ2VyID0gTG9nTWFuYWdlci5nZXRMb2dnZXIoe1xuICAgICAgcHJlZml4OiBwcmVmaXhcbiAgICB9KTtcbiAgICB0aGlzLmFyZ3NWYWxpZGF0b3IgPSBhcmdzLmFyZ3NWYWxpZGF0b3I7XG4gICAgdGhpcy5jaGF0RXZlbnRDb25zdHJ1Y3RvciA9IGFyZ3MuY2hhdEV2ZW50Q29uc3RydWN0b3I7XG4gICAgdGhpcy5jb25uZWN0aW9uRGV0YWlscyA9IGFyZ3MuY2hhdERldGFpbHMuY29ubmVjdGlvbkRldGFpbHM7XG4gICAgdGhpcy5pbnRpYWxDb250YWN0SWQgPSBhcmdzLmNoYXREZXRhaWxzLmluaXRpYWxDb250YWN0SWQ7XG4gICAgdGhpcy5jb250YWN0SWQgPSBhcmdzLmNoYXREZXRhaWxzLmNvbnRhY3RJZDtcbiAgICB0aGlzLnBhcnRpY2lwYW50SWQgPSBhcmdzLmNoYXREZXRhaWxzLnBhcnRpY2lwYW50SWQ7XG4gICAgdGhpcy5jaGF0Q2xpZW50ID0gYXJncy5jaGF0Q2xpZW50O1xuICAgIHRoaXMucGFydGljaXBhbnRUb2tlbiA9IGFyZ3MuY2hhdERldGFpbHMucGFydGljaXBhbnRUb2tlbjtcbiAgICB0aGlzLmNvbm5lY3Rpb25IZWxwZXJDYWxsYmFjayA9IChldmVudFR5cGUsIGV2ZW50RGF0YSkgPT5cbiAgICAgIHNlbGYuX2hhbmRsZUNvbm5lY3Rpb25IZWxwZXJFdmVudHMoZXZlbnRUeXBlLCBldmVudERhdGEpO1xuICAgIHRoaXMuX2hhc0Nvbm5lY3Rpb25EZXRhaWxzID0gYXJncy5oYXNDb25uZWN0aW9uRGV0YWlscztcbiAgICB0aGlzLmNoYXRDb250cm9sbGVyRmFjdG9yeSA9IGFyZ3MuY2hhdENvbnRyb2xsZXJGYWN0b3J5O1xuICAgIGlmIChhcmdzLmhhc0Nvbm5lY3Rpb25EZXRhaWxzKSB7XG4gICAgICB0aGlzLl9zZXRDb25uZWN0aW9uSGVscGVyKFxuICAgICAgICBhcmdzLmNoYXREZXRhaWxzLmNvbm5lY3Rpb25EZXRhaWxzLFxuICAgICAgICBhcmdzLmNoYXREZXRhaWxzLmNvbnRhY3RJZFxuICAgICAgKTtcbiAgICB9XG4gICAgdGhpcy5fY29ubmVjdENhbGxlZEF0bGVhc3RPbmNlID0gZmFsc2U7XG4gICAgdGhpcy5fZXZlckNvbm5lY3RlZCA9IGZhbHNlO1xuICAgIHRoaXMucHVic3ViID0gYXJncy5wdWJzdWI7XG4gICAgdGhpcy5fcGFydGljaXBhbnREaXNjb25uZWN0ZWQgPSBmYWxzZTtcbiAgICB0aGlzLnNlc3Npb25NZXRhZGF0YSA9IHt9O1xuICB9XG5cbiAgX3NldENvbm5lY3Rpb25IZWxwZXIoY29ubmVjdGlvbkRldGFpbHMsIGNvbnRhY3RJZCkge1xuICAgIHZhciBjb25uZWN0aW9uSGVscGVyUHJvdmlkZXIgPSB0aGlzLmNoYXRDb250cm9sbGVyRmFjdG9yeS5jcmVhdGVDb25uZWN0aW9uSGVscGVyUHJvdmlkZXIoXG4gICAgICBjb25uZWN0aW9uRGV0YWlscyxcbiAgICAgIGNvbnRhY3RJZFxuICAgICk7XG4gICAgdGhpcy5jb25uZWN0aW9uSGVscGVyID0gY29ubmVjdGlvbkhlbHBlclByb3ZpZGVyKFxuICAgICAgdGhpcy5jb25uZWN0aW9uSGVscGVyQ2FsbGJhY2tcbiAgICApO1xuICB9XG5cbiAgLy8gRG8gYW55IGNsZWFuIHVwIHRoYXQgbmVlZHMgdG8gYmUgZG9uZSB1cG9uIHRoZSBwYXJ0aWNpcGFudCBiZWluZyBkaXNjb25uZWN0ZWQgZnJvbSB0aGUgY2hhdCAtXG4gIC8vIGRpc2Nvbm5lY3RlZCBoZXJlIG1lYW5zIHRoYXQgdGhlIHBhcnRpY2lwYW50IGlzIG5vIGxvbmdlciBwYXJ0IG9mIHRoZXIgY2hhdC5cbiAgY2xlYW5VcE9uUGFydGljaXBhbnREaXNjb25uZWN0KCkge1xuICAgIHRoaXMucHVic3ViLnVuc3Vic2NyaWJlQWxsKCk7XG4gICAgdGhpcy5jb25uZWN0aW9uSGVscGVyICYmXG4gICAgICB0aGlzLmNvbm5lY3Rpb25IZWxwZXIuY2xlYW5VcE9uUGFydGljaXBhbnREaXNjb25uZWN0KCk7XG4gIH1cblxuICBzdWJzY3JpYmUoZXZlbnROYW1lLCBjYWxsYmFjaykge1xuICAgIHRoaXMucHVic3ViLnN1YnNjcmliZShldmVudE5hbWUsIGNhbGxiYWNrKTtcbiAgICB0aGlzLmxvZ2dlci5pbmZvKFwiU3Vic2NyaWJlZCBzdWNjZXNzZnVsbHkgdG8gZXZlbnROYW1lOiBcIiwgZXZlbnROYW1lKTtcbiAgfVxuXG4gIHNlbmRNZXNzYWdlKGFyZ3MpIHtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgdmFyIG1lc3NhZ2UgPSBhcmdzLm1lc3NhZ2U7XG4gICAgdmFyIHR5cGUgPSBhcmdzLnR5cGUgfHwgQ09OVEVOVF9UWVBFLnRleHRQbGFpbjtcbiAgICB2YXIgbWV0YWRhdGEgPSBhcmdzLm1ldGFkYXRhIHx8IG51bGw7XG4gICAgc2VsZi5hcmdzVmFsaWRhdG9yLnZhbGlkYXRlU2VuZE1lc3NhZ2UobWVzc2FnZSwgdHlwZSk7XG4gICAgdmFyIGNvbm5lY3Rpb25Ub2tlbiA9IHNlbGYuY29ubmVjdGlvbkRldGFpbHMuY29ubmVjdGlvblRva2VuO1xuICAgIHJldHVybiBzZWxmLmNoYXRDbGllbnQuc2VuZE1lc3NhZ2UoY29ubmVjdGlvblRva2VuLCBtZXNzYWdlLCB0eXBlKS50aGVuKFxuICAgICAgZnVuY3Rpb24ocmVzcG9uc2UpIHtcbiAgICAgICAgcmVzcG9uc2UubWV0YWRhdGEgPSBtZXRhZGF0YTtcbiAgICAgICAgc2VsZi5sb2dnZXIuZGVidWcoXG4gICAgICAgICAgXCJTdWNjZXNzZnVsbHkgc2VudCBtZXNzYWdlLCByZXNwb25zZTogXCIsXG4gICAgICAgICAgcmVzcG9uc2UsXG4gICAgICAgICAgXCIgcmVxdWVzdDogXCIsXG4gICAgICAgICAgYXJnc1xuICAgICAgICApO1xuICAgICAgICByZXR1cm4gcmVzcG9uc2U7XG4gICAgICB9LFxuICAgICAgZnVuY3Rpb24oZXJyb3IpIHtcbiAgICAgICAgZXJyb3IubWV0YWRhdGEgPSBtZXRhZGF0YTtcbiAgICAgICAgc2VsZi5sb2dnZXIuZGVidWcoXG4gICAgICAgICAgXCJGYWlsZWQgdG8gc2VuZCBtZXNzYWdlLCBlcnJvcjogXCIsXG4gICAgICAgICAgZXJyb3IsXG4gICAgICAgICAgXCIgcmVxdWVzdDogXCIsXG4gICAgICAgICAgYXJnc1xuICAgICAgICApO1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoZXJyb3IpO1xuICAgICAgfVxuICAgICk7XG4gIH1cblxuICBzZW5kRXZlbnQoYXJncykge1xuICAgIHZhciBzZWxmID0gdGhpcztcbiAgICB2YXIgbWV0YWRhdGEgPSBhcmdzLm1ldGFkYXRhIHx8IG51bGw7XG4gICAgc2VsZi5hcmdzVmFsaWRhdG9yLnZhbGlkYXRlU2VuZEV2ZW50KGFyZ3MpO1xuICAgIHZhciBjb25uZWN0aW9uVG9rZW4gPSBzZWxmLmNvbm5lY3Rpb25EZXRhaWxzLmNvbm5lY3Rpb25Ub2tlbjtcbiAgICB2YXIgcGVyc2lzdGVuY2VBcmd1bWVudCA9IGFyZ3MucGVyc2lzdGVuY2UgfHwgUEVSU0lTVEVOQ0UuUEVSU0lTVEVEO1xuICAgIHZhciB2aXNpYmlsaXR5QXJndW1lbnQgPSBhcmdzLnZpc2liaWxpdHkgfHwgVklTSUJJTElUWS5BTEw7XG5cbiAgICByZXR1cm4gc2VsZi5jaGF0Q2xpZW50XG4gICAgICAuc2VuZEV2ZW50KFxuICAgICAgICBjb25uZWN0aW9uVG9rZW4sXG4gICAgICAgIGFyZ3MuZXZlbnRUeXBlLFxuICAgICAgICBhcmdzLm1lc3NhZ2VJZHMsXG4gICAgICAgIHZpc2liaWxpdHlBcmd1bWVudCxcbiAgICAgICAgcGVyc2lzdGVuY2VBcmd1bWVudFxuICAgICAgKVxuICAgICAgLnRoZW4oXG4gICAgICAgIGZ1bmN0aW9uKHJlc3BvbnNlKSB7XG4gICAgICAgICAgcmVzcG9uc2UubWV0YWRhdGEgPSBtZXRhZGF0YTtcbiAgICAgICAgICBzZWxmLmxvZ2dlci5kZWJ1ZyhcbiAgICAgICAgICAgIFwiU3VjY2Vzc2Z1bGx5IHNlbnQgZXZlbnQsIHJlc3BvbnNlOiBcIixcbiAgICAgICAgICAgIHJlc3BvbnNlLFxuICAgICAgICAgICAgXCIgcmVxdWVzdDogXCIsXG4gICAgICAgICAgICBhcmdzXG4gICAgICAgICAgKTtcbiAgICAgICAgICByZXR1cm4gcmVzcG9uc2U7XG4gICAgICAgIH0sXG4gICAgICAgIGZ1bmN0aW9uKGVycm9yKSB7XG4gICAgICAgICAgZXJyb3IubWV0YWRhdGEgPSBtZXRhZGF0YTtcbiAgICAgICAgICBzZWxmLmxvZ2dlci5kZWJ1ZyhcbiAgICAgICAgICAgIFwiRmFpbGVkIHRvIHNlbmQgZXZlbnQsIGVycm9yOiBcIixcbiAgICAgICAgICAgIGVycm9yLFxuICAgICAgICAgICAgXCIgcmVxdWVzdDogXCIsXG4gICAgICAgICAgICBhcmdzXG4gICAgICAgICAgKTtcbiAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoZXJyb3IpO1xuICAgICAgICB9XG4gICAgICApO1xuICB9XG5cbiAgZ2V0VHJhbnNjcmlwdChpbnB1dEFyZ3MpIHtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgdmFyIG1ldGFkYXRhID0gaW5wdXRBcmdzLm1ldGFkYXRhIHx8IG51bGw7XG4gICAgdmFyIGFyZ3MgPSB7fTtcbiAgICBhcmdzLkludGlhbENvbnRhY3RJZCA9IHRoaXMuaW50aWFsQ29udGFjdElkO1xuICAgIGFyZ3MuU3RhcnRLZXkgPSBpbnB1dEFyZ3MuU3RhcnRLZXkgfHwge307XG4gICAgYXJncy5TY2FuRGlyZWN0aW9uID1cbiAgICAgIGlucHV0QXJncy5TY2FuRGlyZWN0aW9uIHx8IFRSQU5TQ1JJUFRfREVGQVVMVF9QQVJBTVMuU0NBTl9ESVJFQ1RJT047XG4gICAgYXJncy5Tb3J0S2V5ID0gaW5wdXRBcmdzLlNvcnRLZXkgfHwgVFJBTlNDUklQVF9ERUZBVUxUX1BBUkFNUy5TT1JUX0tFWTtcbiAgICBhcmdzLk1heFJlc3VsdHMgPVxuICAgICAgaW5wdXRBcmdzLk1heFJlc3VsdHMgfHwgVFJBTlNDUklQVF9ERUZBVUxUX1BBUkFNUy5NQVhfUkVTVUxUUztcbiAgICBpZiAoaW5wdXRBcmdzLk5leHRUb2tlbikge1xuICAgICAgYXJncy5OZXh0VG9rZW4gPSBpbnB1dEFyZ3MuTmV4dFRva2VuO1xuICAgIH1cbiAgICB2YXIgY29ubmVjdGlvblRva2VuID0gdGhpcy5jb25uZWN0aW9uRGV0YWlscy5jb25uZWN0aW9uVG9rZW47XG4gICAgcmV0dXJuIHRoaXMuY2hhdENsaWVudC5nZXRUcmFuc2NyaXB0KGNvbm5lY3Rpb25Ub2tlbiwgYXJncykudGhlbihcbiAgICAgIGZ1bmN0aW9uKHJlc3BvbnNlKSB7XG4gICAgICAgIHJlc3BvbnNlLm1ldGFkYXRhID0gbWV0YWRhdGE7XG4gICAgICAgIHNlbGYubG9nZ2VyLmRlYnVnKFxuICAgICAgICAgIFwiU3VjY2Vzc2Z1bGx5IHJldHJpZXZlZCB0cmFuc2NyaXB0LCByZXNwb25zZTogXCIsXG4gICAgICAgICAgcmVzcG9uc2UsXG4gICAgICAgICAgXCIgcmVxdWVzdDogXCIsXG4gICAgICAgICAgYXJnc1xuICAgICAgICApO1xuICAgICAgICByZXR1cm4gcmVzcG9uc2U7XG4gICAgICB9LFxuICAgICAgZnVuY3Rpb24oZXJyb3IpIHtcbiAgICAgICAgZXJyb3IubWV0YWRhdGEgPSBtZXRhZGF0YTtcbiAgICAgICAgc2VsZi5sb2dnZXIuZGVidWcoXG4gICAgICAgICAgXCJGYWlsZWQgdG8gcmV0cmlldmUgdHJhbnNjcmlwdCwgZXJyb3I6IFwiLFxuICAgICAgICAgIGVycm9yLFxuICAgICAgICAgIFwiIHJlcXVlc3Q6IFwiLFxuICAgICAgICAgIGFyZ3NcbiAgICAgICAgKTtcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGVycm9yKTtcbiAgICAgIH1cbiAgICApO1xuICB9XG5cbiAgX21hcENvbm5lY3Rpb25IZWxwZXJFdmVudFRvQ2hhdEV2ZW50KGV2ZW50VHlwZSwgZXZlbnREYXRhKSB7XG4gICAgdHJ5IHtcbiAgICAgIHJldHVybiB0aGlzLmNoYXRFdmVudENvbnN0cnVjdG9yLmZyb21Db25uZWN0aW9uSGVscGVyRXZlbnQoXG4gICAgICAgIGV2ZW50VHlwZSxcbiAgICAgICAgZXZlbnREYXRhLFxuICAgICAgICB0aGlzLmdldENoYXREZXRhaWxzKCksXG4gICAgICAgIHRoaXMubG9nZ2VyXG4gICAgICApO1xuICAgIH0gY2F0Y2ggKGV4Yykge1xuICAgICAgdGhpcy5sb2dnZXIuZXJyb3IoXG4gICAgICAgIFwiRXJyb3Igb2NjdXJlZCB3aGlsZSBoYW5kbGluZyBldmVudCBmcm9tIENvbm5lY3Rpb24uIGV2ZW50VHlwZSBhbmQgZXZlbnREYXRhOiBcIixcbiAgICAgICAgZXZlbnRUeXBlLFxuICAgICAgICBldmVudERhdGEsXG4gICAgICAgIFwiIENhdXNpbmcgZXhjZXB0aW9uOiBcIixcbiAgICAgICAgZXhjXG4gICAgICApO1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICB9XG5cbiAgX2ZvcndhcmRDaGF0RXZlbnQoY2hhdEV2ZW50KSB7XG4gICAgdGhpcy5sb2dnZXIuZGVidWcoXCJUcmlnZ2VyaW5nIGV2ZW50IGZvciBzdWJzY3JpYmVyczpcIiwgY2hhdEV2ZW50KTtcbiAgICB0aGlzLnB1YnN1Yi50cmlnZ2VyQXN5bmMoY2hhdEV2ZW50LnR5cGUsIGNoYXRFdmVudC5kYXRhKTtcbiAgfVxuXG4gIF9oYW5kbGVDb25uZWN0aW9uSGVscGVyRXZlbnRzKGV2ZW50VHlwZSwgZXZlbnREYXRhKSB7XG4gICAgY29uc3QgY2hhdEV2ZW50ID0gdGhpcy5fbWFwQ29ubmVjdGlvbkhlbHBlckV2ZW50VG9DaGF0RXZlbnQoZXZlbnRUeXBlLCBldmVudERhdGEpO1xuICAgIGlmICghY2hhdEV2ZW50KSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHRoaXMuX2hhbmRsZUNoYXRFdmVudChjaGF0RXZlbnQpO1xuICAgIHRoaXMuX2ZvcndhcmRDaGF0RXZlbnQoY2hhdEV2ZW50KTtcbiAgfVxuXG4gIF9oYW5kbGVDaGF0RXZlbnQoY2hhdEV2ZW50KSB7XG4gICAgaWYgKGNoYXRFdmVudC50eXBlID09PSBDSEFUX0VWRU5UUy5DT05ORUNUSU9OX0JST0tFTiAmJiBHbG9iYWxDb25maWcucmVjb25uZWN0KSB7XG4gICAgICB0aGlzLl9pbml0aWF0ZVJlY29ubmVjdCgpO1xuICAgIH1cbiAgfVxuXG4gIGNvbm5lY3QoaW5wdXRBcmdzKSB7XG4gICAgdmFyIGFyZ3MgPSBpbnB1dEFyZ3MgfHwge307XG4gICAgdGhpcy5zZXNzaW9uTWV0YWRhdGEgPSBhcmdzLm1ldGFkYXRhIHx8IG51bGw7XG4gICAgdGhpcy5hcmdzVmFsaWRhdG9yLnZhbGlkYXRlQ29ubmVjdENoYXQoYXJncyk7XG4gICAgcmV0dXJuIHRoaXMuX2Nvbm5lY3QoKTtcbiAgfVxuXG4gIF9jb25uZWN0KCkge1xuICAgIGlmICghdGhpcy5fY2FuQ29ubmVjdCgpKSB7XG4gICAgICB0aHJvdyBuZXcgSWxsZWdhbFN0YXRlRXhjZXB0aW9uKFxuICAgICAgICBcIkNhbiBjYWxsIGVzdGFibGlzaE5ldHdvcmtMaW5rIG9ubHkgd2hlbiBnZXRDb25uZWN0aW9uU3RhdHVzIGlzIEJyb2tlbiBvciBOZXZlckVzdGFibGlzaGVkXCJcbiAgICAgICk7XG4gICAgfVxuICAgIHZhciBfb25TdWNjZXNzID0gcmVzcG9uc2UgPT4gdGhpcy5fb25Db25uZWN0U3VjY2VzcyhyZXNwb25zZSwgdGhpcy5zZXNzaW9uTWV0YWRhdGEpO1xuICAgIHZhciBfb25GYWlsdXJlID0gZXJyb3IgPT4gdGhpcy5fb25Db25uZWN0RmFpbHVyZShlcnJvciwgdGhpcy5zZXNzaW9uTWV0YWRhdGEpO1xuICAgIHRoaXMuX2Nvbm5lY3RDYWxsZWRBdGxlYXN0T25jZSA9IHRydWU7XG4gICAgaWYgKHRoaXMuX2hhc0Nvbm5lY3Rpb25EZXRhaWxzKSB7XG4gICAgICByZXR1cm4gdGhpcy5jb25uZWN0aW9uSGVscGVyLnN0YXJ0KCkudGhlbihfb25TdWNjZXNzLCBfb25GYWlsdXJlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIHRoaXNcbiAgICAgICAgLl9mZXRjaENvbm5lY3Rpb25EZXRhaWxzKClcbiAgICAgICAgLnRoZW4oY29ubmVjdGlvbkRldGFpbHMgPT4ge1xuICAgICAgICAgIHRoaXMuX3NldENvbm5lY3Rpb25IZWxwZXIoY29ubmVjdGlvbkRldGFpbHMsIHRoaXMuY29udGFjdElkKTtcbiAgICAgICAgICB0aGlzLmNvbm5lY3Rpb25EZXRhaWxzID0gY29ubmVjdGlvbkRldGFpbHM7XG4gICAgICAgICAgdGhpcy5faGFzQ29ubmVjdGlvbkRldGFpbHMgPSB0cnVlO1xuICAgICAgICAgIHJldHVybiB0aGlzLmNvbm5lY3Rpb25IZWxwZXIuc3RhcnQoKTtcbiAgICAgICAgfSlcbiAgICAgICAgLnRoZW4oX29uU3VjY2VzcywgX29uRmFpbHVyZSk7XG4gICAgfVxuICB9XG5cbiAgX2luaXRpYXRlUmVjb25uZWN0KCkge1xuICAgIFV0aWxzXG4gICAgICAuYXN5bmNXaGlsZUludGVydmFsKFxuICAgICAgICAoY291bnQpID0+IHtcbiAgICAgICAgICB0aGlzLmxvZ2dlci5pbmZvKGBSZWNvbm5lY3QgLSAke2NvdW50fS4gdHJ5YCk7XG4gICAgICAgICAgdGhpcy5faGFzQ29ubmVjdGlvbkRldGFpbHMgPSBmYWxzZTtcbiAgICAgICAgICB0aGlzLmNvbm5lY3Rpb25EZXRhaWxzID0gbnVsbDtcbiAgICAgICAgICByZXR1cm4gdGhpcy5fY29ubmVjdCgpO1xuICAgICAgICB9LFxuICAgICAgICAoY291bnQpID0+IGNvdW50IDwgR2xvYmFsQ29uZmlnLm1heFJlY29ubmVjdEF0dGVtcHRzICYmIHRoaXMuX2NhblJlY29ubmVjdCgpLFxuICAgICAgICBHbG9iYWxDb25maWcucmVjb25uZWN0SW50ZXJ2YWxcbiAgICAgIClcbiAgICAgIC50aGVuKCgpID0+IHtcbiAgICAgICAgdGhpcy5sb2dnZXIuaW5mbyhgUmVjb25uZWN0IC0gU3VjY2Vzc2ApO1xuICAgICAgfSlcbiAgICAgIC5jYXRjaCgoKSA9PiB7XG4gICAgICAgIHRoaXMubG9nZ2VyLmluZm8oYFJlY29ubmVjdCAtIEZhaWxlZGApO1xuICAgICAgfSk7XG4gIH1cblxuICBfY2FuQ29ubmVjdCgpIHtcbiAgICByZXR1cm4gKFxuICAgICAgdGhpcy5nZXRDb25uZWN0aW9uU3RhdHVzKCkgPT09IE5ldHdvcmtMaW5rU3RhdHVzLkJyb2tlbiB8fFxuICAgICAgdGhpcy5nZXRDb25uZWN0aW9uU3RhdHVzKCkgPT09IE5ldHdvcmtMaW5rU3RhdHVzLk5ldmVyRXN0YWJsaXNoZWRcbiAgICApO1xuICB9XG5cbiAgX2NhblJlY29ubmVjdCgpIHtcbiAgICByZXR1cm4gdGhpcy5nZXRDb25uZWN0aW9uU3RhdHVzKCkgPT09IE5ldHdvcmtMaW5rU3RhdHVzLkJyb2tlbjtcbiAgfVxuXG4gIF9vbkNvbm5lY3RTdWNjZXNzKHJlc3BvbnNlLCBtZXRhZGF0YSkge1xuICAgIHZhciBzZWxmID0gdGhpcztcbiAgICBzZWxmLmxvZ2dlci5pbmZvKFwiQ29ubmVjdCBzdWNjZXNzZnVsIVwiKTtcbiAgICB2YXIgcmVzcG9uc2VPYmplY3QgPSB7XG4gICAgICBfZGVidWc6IHJlc3BvbnNlLFxuICAgICAgY29ubmVjdFN1Y2Nlc3M6IHRydWUsXG4gICAgICBjb25uZWN0Q2FsbGVkOiB0cnVlLFxuICAgICAgbWV0YWRhdGE6IG1ldGFkYXRhXG4gICAgfTtcbiAgICB2YXIgZXZlbnREYXRhID0gT2JqZWN0LmFzc2lnbihcbiAgICAgIHtcbiAgICAgICAgY2hhdERldGFpbHM6IHNlbGYuZ2V0Q2hhdERldGFpbHMoKVxuICAgICAgfSxcbiAgICAgIHJlc3BvbnNlT2JqZWN0XG4gICAgKTtcbiAgICB0aGlzLnB1YnN1Yi50cmlnZ2VyQXN5bmMoQ0hBVF9FVkVOVFMuQ09OTkVDVElPTl9FU1RBQkxJU0hFRCwgZXZlbnREYXRhKTtcbiAgICByZXR1cm4gcmVzcG9uc2VPYmplY3Q7XG4gIH1cblxuICBfb25Db25uZWN0RmFpbHVyZShlcnJvciwgbWV0YWRhdGEpIHtcbiAgICB2YXIgZXJyb3JPYmplY3QgPSB7XG4gICAgICBfZGVidWc6IGVycm9yLFxuICAgICAgY29ubmVjdFN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgY29ubmVjdENhbGxlZDogdHJ1ZSxcbiAgICAgIG1ldGFkYXRhOiBtZXRhZGF0YVxuICAgIH07XG4gICAgdGhpcy5sb2dnZXIuZXJyb3IoXCJDb25uZWN0IEZhaWxlZCB3aXRoIGRhdGE6IFwiLCBlcnJvck9iamVjdCk7XG4gICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGVycm9yT2JqZWN0KTtcbiAgfVxuXG4gIF9mZXRjaENvbm5lY3Rpb25EZXRhaWxzKCkge1xuICAgIHZhciBzZWxmID0gdGhpcztcbiAgICByZXR1cm4gc2VsZi5jaGF0Q2xpZW50LmNyZWF0ZUNvbm5lY3Rpb25EZXRhaWxzKHNlbGYucGFydGljaXBhbnRUb2tlbikudGhlbihcbiAgICAgIGZ1bmN0aW9uKHJlc3BvbnNlKSB7XG4gICAgICAgIHZhciBjb25uZWN0aW9uRGV0YWlscyA9IHt9O1xuICAgICAgICBjb25uZWN0aW9uRGV0YWlscy5Db25uZWN0aW9uSWQgPSByZXNwb25zZS5kYXRhLkNvbm5lY3Rpb25JZDtcbiAgICAgICAgY29ubmVjdGlvbkRldGFpbHMuUHJlU2lnbmVkQ29ubmVjdGlvblVybCA9XG4gICAgICAgICAgcmVzcG9uc2UuZGF0YS5QcmVTaWduZWRDb25uZWN0aW9uVXJsO1xuICAgICAgICBjb25uZWN0aW9uRGV0YWlscy5jb25uZWN0aW9uVG9rZW4gPVxuICAgICAgICAgIHJlc3BvbnNlLmRhdGEuUGFydGljaXBhbnRDcmVkZW50aWFscy5Db25uZWN0aW9uQXV0aGVudGljYXRpb25Ub2tlbjtcbiAgICAgICAgcmV0dXJuIGNvbm5lY3Rpb25EZXRhaWxzO1xuICAgICAgfSxcbiAgICAgIGZ1bmN0aW9uKGVycm9yKSB7XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdCh7XG4gICAgICAgICAgcmVhc29uOiBcIkZhaWxlZCB0byBmZXRjaCBjb25uZWN0aW9uRGV0YWlsc1wiLFxuICAgICAgICAgIF9kZWJ1ZzogZXJyb3JcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgKTtcbiAgfVxuXG4gIGJyZWFrQ29ubmVjdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5jb25uZWN0aW9uSGVscGVyLmVuZCgpO1xuICB9XG5cbiAgZGlzY29ubmVjdFBhcnRpY2lwYW50KCkge1xuICAgIHZhciBzZWxmID0gdGhpcztcbiAgICB2YXIgY29ubmVjdGlvblRva2VuID0gc2VsZi5jb25uZWN0aW9uRGV0YWlscy5jb25uZWN0aW9uVG9rZW47XG4gICAgcmV0dXJuIHNlbGYuY2hhdENsaWVudC5kaXNjb25uZWN0Q2hhdChjb25uZWN0aW9uVG9rZW4pLnRoZW4oXG4gICAgICBmdW5jdGlvbihyZXNwb25zZSkge1xuICAgICAgICBzZWxmLmxvZ2dlci5pbmZvKFwiZGlzY29ubmVjdCBwYXJ0aWNpcGFudCBzdWNjZXNzZnVsXCIpO1xuICAgICAgICBzZWxmLl9wYXJ0aWNpcGFudERpc2Nvbm5lY3RlZCA9IHRydWU7XG4gICAgICAgIHJldHVybiByZXNwb25zZTtcbiAgICAgIH0sXG4gICAgICBmdW5jdGlvbihlcnJvcikge1xuICAgICAgICBzZWxmLmxvZ2dlci5lcnJvcihcImRpc2Nvbm5lY3QgcGFydGljaXBhbnQgZmFpbGVkIHdpdGggZXJyb3I6IFwiLCBlcnJvcik7XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChlcnJvcik7XG4gICAgICB9XG4gICAgKTtcbiAgfVxuXG4gIGdldENoYXREZXRhaWxzKCkge1xuICAgIHZhciBzZWxmID0gdGhpcztcbiAgICByZXR1cm4ge1xuICAgICAgaW50aWFsQ29udGFjdElkOiBzZWxmLmludGlhbENvbnRhY3RJZCxcbiAgICAgIGNvbnRhY3RJZDogc2VsZi5jb250YWN0SWQsXG4gICAgICBwYXJ0aWNpcGFudElkOiBzZWxmLnBhcnRpY2lwYW50SWQsXG4gICAgICBwYXJ0aWNpcGFudFRva2VuOiBzZWxmLnBhcnRpY2lwYW50VG9rZW4sXG4gICAgICBjb25uZWN0aW9uRGV0YWlsczogc2VsZi5jb25uZWN0aW9uRGV0YWlsc1xuICAgIH07XG4gIH1cblxuICBfY29udmVydENvbm5lY3Rpb25IZWxwZXJTdGF0dXMoY29ubmVjdGlvbkhlbHBlclN0YXR1cykge1xuICAgIHN3aXRjaCAoY29ubmVjdGlvbkhlbHBlclN0YXR1cykge1xuICAgICAgY2FzZSBDb25uZWN0aW9uSGVscGVyU3RhdHVzLk5ldmVyU3RhcnRlZDpcbiAgICAgICAgcmV0dXJuIE5ldHdvcmtMaW5rU3RhdHVzLk5ldmVyRXN0YWJsaXNoZWQ7XG4gICAgICBjYXNlIENvbm5lY3Rpb25IZWxwZXJTdGF0dXMuU3RhcnRpbmc6XG4gICAgICAgIHJldHVybiBOZXR3b3JrTGlua1N0YXR1cy5Fc3RhYmxpc2hpbmc7XG4gICAgICBjYXNlIENvbm5lY3Rpb25IZWxwZXJTdGF0dXMuRW5kZWQ6XG4gICAgICAgIHJldHVybiBOZXR3b3JrTGlua1N0YXR1cy5Ccm9rZW47XG4gICAgICBjYXNlIENvbm5lY3Rpb25IZWxwZXJTdGF0dXMuQ29ubmVjdGVkOlxuICAgICAgICByZXR1cm4gTmV0d29ya0xpbmtTdGF0dXMuRXN0YWJsaXNoZWQ7XG4gICAgfVxuICAgIHNlbGYubG9nZ2VyLmVycm9yKFxuICAgICAgXCJSZWFjaGVkIGludmFsaWQgc3RhdGUuIFVua25vd24gY29ubmVjdGlvbkhlbHBlclN0YXR1czogXCIsXG4gICAgICBjb25uZWN0aW9uSGVscGVyU3RhdHVzXG4gICAgKTtcbiAgfVxuXG4gIGdldENvbm5lY3Rpb25TdGF0dXMoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2NvbnZlcnRDb25uZWN0aW9uSGVscGVyU3RhdHVzKFxuICAgICAgdGhpcy5jb25uZWN0aW9uSGVscGVyLmdldFN0YXR1cygpXG4gICAgKTtcbiAgfVxufVxuXG5leHBvcnQgeyBQZXJzaXN0ZW50Q29ubmVjdGlvbkFuZENoYXRTZXJ2aWNlQ29udHJvbGxlciwgTmV0d29ya0xpbmtTdGF0dXMgfTtcbiIsImltcG9ydCB7XG4gIFVuSW1wbGVtZW50ZWRNZXRob2RFeGNlcHRpb24sXG4gIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvblxufSBmcm9tIFwiLi9leGNlcHRpb25zXCI7XG5pbXBvcnQgeyBDaGF0Q2xpZW50RmFjdG9yeSB9IGZyb20gXCIuLi9jbGllbnQvY2xpZW50XCI7XG5pbXBvcnQgeyBDaGF0U2VydmljZUFyZ3NWYWxpZGF0b3IgfSBmcm9tIFwiLi9jaGF0QXJnc1ZhbGlkYXRvclwiO1xuaW1wb3J0IHsgQ2hhdENvbm5lY3Rpb25NYW5hZ2VyIH0gZnJvbSBcIi4vY29ubmVjdGlvbk1hbmFnZXJcIjtcbmltcG9ydCB7IFNvbG9DaGF0Q29ubmVjdGlvbk1xdHRIZWxwZXIgfSBmcm9tIFwiLi9jb25uZWN0aW9uSGVscGVyXCI7XG5pbXBvcnQgeyBTRVNTSU9OX1RZUEVTLCBDSEFUX0VWRU5UUyB9IGZyb20gXCIuLi9jb25zdGFudHNcIjtcbmltcG9ydCB7IEV2ZW50Q29uc3RydWN0b3IgfSBmcm9tIFwiLi9ldmVudENvbnN0cnVjdG9yXCI7XG5pbXBvcnQgeyBFdmVudEJ1cyB9IGZyb20gXCIuL2V2ZW50YnVzXCI7XG5pbXBvcnQgeyBHbG9iYWxDb25maWcgfSBmcm9tIFwiLi4vZ2xvYmFsQ29uZmlnXCI7XG5cbmltcG9ydCB7IFBlcnNpc3RlbnRDb25uZWN0aW9uQW5kQ2hhdFNlcnZpY2VDb250cm9sbGVyIH0gZnJvbSBcIi4vY2hhdENvbnRyb2xsZXJcIjtcbmltcG9ydCB7IExvZ01hbmFnZXIsIExvZ0xldmVsLCBMb2dnZXIgfSBmcm9tIFwiLi4vbG9nXCI7XG5cbmNsYXNzIENoYXRTZXNzaW9uRmFjdG9yeSB7XG4gIC8qZXNsaW50LWRpc2FibGUgbm8tdW51c2VkLXZhcnMqL1xuXG4gIGNyZWF0ZUFnZW50Q2hhdENvbnRyb2xsZXIoY2hhdERldGFpbHMsIHBhcnRpY2lwYW50VHlwZSkge1xuICAgIHRocm93IG5ldyBVbkltcGxlbWVudGVkTWV0aG9kRXhjZXB0aW9uKFxuICAgICAgXCJjcmVhdGVBZ2VudENoYXRDb250cm9sbGVyIGluIENoYXRDb250cm9sbGVyRmFjdG9yeS5cIlxuICAgICk7XG4gIH1cblxuICBjcmVhdGVDdXN0b21lckNoYXRDb250cm9sbGVyKGNoYXREZXRhaWxzLCBwYXJ0aWNpcGFudFR5cGUpIHtcbiAgICB0aHJvdyBuZXcgVW5JbXBsZW1lbnRlZE1ldGhvZEV4Y2VwdGlvbihcbiAgICAgIFwiY3JlYXRlQ3VzdG9tZXJDaGF0Q29udHJvbGxlciBpbiBDaGF0Q29udHJvbGxlckZhY3RvcnkuXCJcbiAgICApO1xuICB9XG5cbiAgY3JlYXRlQ29ubmVjdGlvbkhlbHBlclByb3ZpZGVyKGNvbm5lY3Rpb25EZXRhaWxzKSB7XG4gICAgdGhyb3cgbmV3IFVuSW1wbGVtZW50ZWRNZXRob2RFeGNlcHRpb24oXG4gICAgICBcImNyZWF0ZUluY29taW5nQ2hhdENvbnRyb2xsZXIgaW4gQ2hhdENvbnRyb2xsZXJGYWN0b3J5XCJcbiAgICApO1xuICB9XG4gIC8qZXNsaW50LWVuYWJsZSBuby11bnVzZWQtdmFycyovXG59XG5cbmNsYXNzIFBlcnNpc3RlbnRDb25uZWN0aW9uQW5kQ2hhdFNlcnZpY2VTZXNzaW9uRmFjdG9yeSBleHRlbmRzIENoYXRTZXNzaW9uRmFjdG9yeSB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHN1cGVyKCk7XG4gICAgdGhpcy5hcmdzVmFsaWRhdG9yID0gbmV3IENoYXRTZXJ2aWNlQXJnc1ZhbGlkYXRvcigpO1xuICAgIHRoaXMuY2hhdENvbm5lY3Rpb25NYW5hZ2VyID0gbmV3IENoYXRDb25uZWN0aW9uTWFuYWdlcigpO1xuICAgIHRoaXMuY2hhdEV2ZW50Q29uc3RydWN0b3IgPSBuZXcgRXZlbnRDb25zdHJ1Y3RvcigpO1xuICB9XG5cbiAgY3JlYXRlQWdlbnRDaGF0U2Vzc2lvbihjaGF0RGV0YWlscywgb3B0aW9ucykge1xuICAgIHZhciBjaGF0Q29udHJvbGxlciA9IHRoaXMuX2NyZWF0ZUNoYXRTZXNzaW9uKGNoYXREZXRhaWxzLCBvcHRpb25zKTtcbiAgICByZXR1cm4gbmV3IEFnZW50Q2hhdFNlc3Npb24oY2hhdENvbnRyb2xsZXIpO1xuICB9XG5cbiAgY3JlYXRlQ3VzdG9tZXJDaGF0U2Vzc2lvbihjaGF0RGV0YWlscywgb3B0aW9ucykge1xuICAgIHZhciBjaGF0Q29udHJvbGxlciA9IHRoaXMuX2NyZWF0ZUNoYXRTZXNzaW9uKGNoYXREZXRhaWxzLCBvcHRpb25zKTtcbiAgICByZXR1cm4gbmV3IEN1c3RvbWVyQ2hhdFNlc3Npb24oY2hhdENvbnRyb2xsZXIpO1xuICB9XG5cbiAgX2NyZWF0ZUNoYXRTZXNzaW9uKGNoYXREZXRhaWxzSW5wdXQsIG9wdGlvbnMpIHtcbiAgICB2YXIgY2hhdERldGFpbHMgPSB0aGlzLl9ub3JtYWxpemVDaGF0RGV0YWlscyhjaGF0RGV0YWlsc0lucHV0KTtcbiAgICB2YXIgaGFzQ29ubmVjdGlvbkRldGFpbHMgPSBmYWxzZTtcbiAgICBpZiAoY2hhdERldGFpbHMuY29ubmVjdGlvbkRldGFpbHMpIHtcbiAgICAgIGhhc0Nvbm5lY3Rpb25EZXRhaWxzID0gdHJ1ZTtcbiAgICB9XG4gICAgdmFyIGFyZ3MgPSB7XG4gICAgICBjaGF0RGV0YWlsczogY2hhdERldGFpbHMsXG4gICAgICBjaGF0Q29udHJvbGxlckZhY3Rvcnk6IHRoaXMsXG4gICAgICBjaGF0RXZlbnRDb25zdHJ1Y3RvcjogdGhpcy5jaGF0RXZlbnRDb25zdHJ1Y3RvcixcbiAgICAgIHB1YnN1YjogbmV3IEV2ZW50QnVzKCksXG4gICAgICBjaGF0Q2xpZW50OiBDaGF0Q2xpZW50RmFjdG9yeS5nZXRDYWNoZWRDbGllbnQob3B0aW9ucyksXG4gICAgICBhcmdzVmFsaWRhdG9yOiB0aGlzLmFyZ3NWYWxpZGF0b3IsXG4gICAgICBoYXNDb25uZWN0aW9uRGV0YWlsczogaGFzQ29ubmVjdGlvbkRldGFpbHNcbiAgICB9O1xuICAgIHJldHVybiBuZXcgUGVyc2lzdGVudENvbm5lY3Rpb25BbmRDaGF0U2VydmljZUNvbnRyb2xsZXIoYXJncyk7XG4gIH1cblxuICBfbm9ybWFsaXplQ2hhdERldGFpbHMoY2hhdERldGFpbHNJbnB1dCkge1xuICAgIGlmIChcbiAgICAgIGNoYXREZXRhaWxzSW5wdXQuQ2hhdENvbm5lY3Rpb25BdHRyaWJ1dGVzICYmXG4gICAgICBjaGF0RGV0YWlsc0lucHV0LkNoYXRDb25uZWN0aW9uQXR0cmlidXRlcy5QYXJ0aWNpcGFudENyZWRlbnRpYWxzXG4gICAgKSB7XG4gICAgICB0aGlzLmFyZ3NWYWxpZGF0b3IudmFsaWRhdGVJbml0aWF0ZUNoYXRSZXNwb25zZShjaGF0RGV0YWlsc0lucHV0KTtcbiAgICAgIHZhciBjaGF0RGV0YWlscyA9IHt9O1xuICAgICAgdmFyIGNvbm5lY3Rpb25EZXRhaWxzID0ge307XG4gICAgICBjb25uZWN0aW9uRGV0YWlscy5jb25uZWN0aW9uVG9rZW4gPVxuICAgICAgICBjaGF0RGV0YWlsc0lucHV0LkNoYXRDb25uZWN0aW9uQXR0cmlidXRlcy5QYXJ0aWNpcGFudENyZWRlbnRpYWxzLkNvbm5lY3Rpb25BdXRoZW50aWNhdGlvblRva2VuO1xuICAgICAgY29ubmVjdGlvbkRldGFpbHMuQ29ubmVjdGlvbklkID1cbiAgICAgICAgY2hhdERldGFpbHNJbnB1dC5DaGF0Q29ubmVjdGlvbkF0dHJpYnV0ZXMuQ29ubmVjdGlvbklkO1xuICAgICAgY29ubmVjdGlvbkRldGFpbHMuUHJlU2lnbmVkQ29ubmVjdGlvblVybCA9XG4gICAgICAgIGNoYXREZXRhaWxzSW5wdXQuQ2hhdENvbm5lY3Rpb25BdHRyaWJ1dGVzLlByZVNpZ25lZENvbm5lY3Rpb25Vcmw7XG4gICAgICBjaGF0RGV0YWlscy5jb25uZWN0aW9uRGV0YWlscyA9IGNvbm5lY3Rpb25EZXRhaWxzO1xuICAgICAgY2hhdERldGFpbHMucGFydGljaXBhbnRJZCA9IGNoYXREZXRhaWxzSW5wdXQuUGFydGljaXBhbnRJZDtcbiAgICAgIGNoYXREZXRhaWxzLmNvbnRhY3RJZCA9IGNoYXREZXRhaWxzSW5wdXQuQ29udGFjdElkO1xuICAgICAgY2hhdERldGFpbHMuaW5pdGlhbENvbnRhY3RJZCA9IGNoYXREZXRhaWxzSW5wdXQuQ29udGFjdElkO1xuICAgICAgcmV0dXJuIGNoYXREZXRhaWxzO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmFyZ3NWYWxpZGF0b3IudmFsaWRhdGVDaGF0RGV0YWlscyhjaGF0RGV0YWlsc0lucHV0KTtcbiAgICAgIHJldHVybiBjaGF0RGV0YWlsc0lucHV0O1xuICAgIH1cbiAgfVxuXG4gIGNyZWF0ZUNvbm5lY3Rpb25IZWxwZXJQcm92aWRlcihjb25uZWN0aW9uRGV0YWlscywgY29udGFjdElkKSB7XG4gICAgLy9sYXRlciByZXR1cm4gYmFzZWQgb24gdGhlIHR5cGUgYXJndW1lbnRcbiAgICB2YXIgY29ubmVjdGlvbkFyZ3MgPSB7XG4gICAgICBwcmVTaWduZWRVcmw6IGNvbm5lY3Rpb25EZXRhaWxzLlByZVNpZ25lZENvbm5lY3Rpb25VcmwsXG4gICAgICBjb25uZWN0aW9uSWQ6IGNvbm5lY3Rpb25EZXRhaWxzLkNvbm5lY3Rpb25JZFxuICAgIH07XG4gICAgdmFyIG1xdHRDb25uZWN0aW9uUHJvdmlkZXIgPSB0aGlzLmNoYXRDb25uZWN0aW9uTWFuYWdlci5jcmVhdGVOZXdNcXR0Q29ubmVjdGlvblByb3ZpZGVyKFxuICAgICAgY29ubmVjdGlvbkFyZ3MsXG4gICAgICBcIlBhaG9NcXR0Q29ubmVjdGlvblwiXG4gICAgKTtcbiAgICB2YXIgYXJncyA9IHtcbiAgICAgIG1xdHRDb25uZWN0aW9uUHJvdmlkZXI6IG1xdHRDb25uZWN0aW9uUHJvdmlkZXIsXG4gICAgICBjb25uZWN0aW9uRGV0YWlsczoge1xuICAgICAgICBwcmVTaWduZWRVcmw6IGNvbm5lY3Rpb25EZXRhaWxzLlByZVNpZ25lZENvbm5lY3Rpb25VcmwsXG4gICAgICAgIGNvbm5lY3Rpb25JZDogY29ubmVjdGlvbkRldGFpbHMuQ29ubmVjdGlvbklkXG4gICAgICB9LFxuICAgICAgY29udGFjdElkOiBjb250YWN0SWRcbiAgICB9O1xuICAgIHJldHVybiBmdW5jdGlvbihjYWxsYmFjaykge1xuICAgICAgYXJncy5jYWxsYmFjayA9IGNhbGxiYWNrO1xuICAgICAgcmV0dXJuIG5ldyBTb2xvQ2hhdENvbm5lY3Rpb25NcXR0SGVscGVyKGFyZ3MpO1xuICAgIH07XG4gIH1cbn1cblxuY2xhc3MgQ2hhdFNlc3Npb24ge1xuICBjb25zdHJ1Y3Rvcihjb250cm9sbGVyKSB7XG4gICAgdGhpcy5jb250cm9sbGVyID0gY29udHJvbGxlcjtcbiAgfVxuXG4gIG9uTWVzc2FnZShjYWxsYmFjaykge1xuICAgIHRoaXMuY29udHJvbGxlci5zdWJzY3JpYmUoQ0hBVF9FVkVOVFMuSU5DT01JTkdfTUVTU0FHRSwgY2FsbGJhY2spO1xuICB9XG5cbiAgb25UeXBpbmcoY2FsbGJhY2spIHtcbiAgICB0aGlzLmNvbnRyb2xsZXIuc3Vic2NyaWJlKENIQVRfRVZFTlRTLklOQ09NSU5HX1RZUElORywgY2FsbGJhY2spO1xuICB9XG5cbiAgb25Db25uZWN0aW9uQnJva2VuKGNhbGxiYWNrKSB7XG4gICAgdGhpcy5jb250cm9sbGVyLnN1YnNjcmliZShDSEFUX0VWRU5UUy5DT05ORUNUSU9OX0JST0tFTiwgY2FsbGJhY2spO1xuICB9XG5cbiAgb25Db25uZWN0aW9uRXN0YWJsaXNoZWQoY2FsbGJhY2spIHtcbiAgICB0aGlzLmNvbnRyb2xsZXIuc3Vic2NyaWJlKENIQVRfRVZFTlRTLkNPTk5FQ1RJT05fRVNUQUJMSVNIRUQsIGNhbGxiYWNrKTtcbiAgfVxuXG4gIHNlbmRNZXNzYWdlKGFyZ3MpIHtcbiAgICByZXR1cm4gdGhpcy5jb250cm9sbGVyLnNlbmRNZXNzYWdlKGFyZ3MpO1xuICB9XG5cbiAgY29ubmVjdChhcmdzKSB7XG4gICAgcmV0dXJuIHRoaXMuY29udHJvbGxlci5jb25uZWN0KGFyZ3MpO1xuICB9XG5cbiAgc2VuZEV2ZW50KGFyZ3MpIHtcbiAgICByZXR1cm4gdGhpcy5jb250cm9sbGVyLnNlbmRFdmVudChhcmdzKTtcbiAgfVxuXG4gIGdldFRyYW5zY3JpcHQoYXJncykge1xuICAgIHJldHVybiB0aGlzLmNvbnRyb2xsZXIuZ2V0VHJhbnNjcmlwdChhcmdzKTtcbiAgfVxuXG4gIGdldENoYXREZXRhaWxzKCkge1xuICAgIHJldHVybiB0aGlzLmNvbnRyb2xsZXIuZ2V0Q2hhdERldGFpbHMoKTtcbiAgfVxufVxuXG5jbGFzcyBBZ2VudENoYXRTZXNzaW9uIGV4dGVuZHMgQ2hhdFNlc3Npb24ge1xuICBjb25zdHJ1Y3Rvcihjb250cm9sbGVyKSB7XG4gICAgc3VwZXIoY29udHJvbGxlcik7XG4gIH1cblxuICBjbGVhblVwT25QYXJ0aWNpcGFudERpc2Nvbm5lY3QoKSB7XG4gICAgcmV0dXJuIHRoaXMuY29udHJvbGxlci5jbGVhblVwT25QYXJ0aWNpcGFudERpc2Nvbm5lY3QoKTtcbiAgfVxufVxuXG5jbGFzcyBDdXN0b21lckNoYXRTZXNzaW9uIGV4dGVuZHMgQ2hhdFNlc3Npb24ge1xuICBjb25zdHJ1Y3Rvcihjb250cm9sbGVyKSB7XG4gICAgc3VwZXIoY29udHJvbGxlcik7XG4gIH1cblxuICBkaXNjb25uZWN0UGFydGljaXBhbnQoKSB7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgIHJldHVybiB0aGlzLmNvbnRyb2xsZXIuZGlzY29ubmVjdFBhcnRpY2lwYW50KCkudGhlbihmdW5jdGlvbihyZXNwb25zZSkge1xuICAgICAgc2VsZi5jb250cm9sbGVyLmNsZWFuVXBPblBhcnRpY2lwYW50RGlzY29ubmVjdCgpO1xuICAgICAgc2VsZi5jb250cm9sbGVyLmJyZWFrQ29ubmVjdGlvbigpO1xuICAgICAgcmV0dXJuIHJlc3BvbnNlO1xuICAgIH0pO1xuICB9XG59XG5cbmNvbnN0IENIQVRfU0VTU0lPTl9GQUNUT1JZID0gbmV3IFBlcnNpc3RlbnRDb25uZWN0aW9uQW5kQ2hhdFNlcnZpY2VTZXNzaW9uRmFjdG9yeSgpO1xuXG52YXIgc2V0R2xvYmFsQ29uZmlnID0gY29uZmlnID0+IHtcbiAgdmFyIGxvZ2dlckNvbmZpZyA9IGNvbmZpZy5sb2dnZXJDb25maWc7XG4gIEdsb2JhbENvbmZpZy51cGRhdGUoY29uZmlnKTtcbiAgTG9nTWFuYWdlci51cGRhdGVMb2dnZXJDb25maWcobG9nZ2VyQ29uZmlnKTtcbn07XG5cbnZhciBDaGF0U2Vzc2lvbkNvbnN0cnVjdG9yID0gYXJncyA9PiB7XG4gIHZhciBvcHRpb25zID0gYXJncy5vcHRpb25zIHx8IHt9O1xuICB2YXIgdHlwZSA9IGFyZ3MudHlwZSB8fCBTRVNTSU9OX1RZUEVTLkFHRU5UO1xuICBpZiAodHlwZSA9PT0gU0VTU0lPTl9UWVBFUy5BR0VOVCkge1xuICAgIHJldHVybiBDSEFUX1NFU1NJT05fRkFDVE9SWS5jcmVhdGVBZ2VudENoYXRTZXNzaW9uKFxuICAgICAgYXJncy5jaGF0RGV0YWlscyxcbiAgICAgIG9wdGlvbnNcbiAgICApO1xuICB9IGVsc2UgaWYgKHR5cGUgPT09IFNFU1NJT05fVFlQRVMuQ1VTVE9NRVIpIHtcbiAgICByZXR1cm4gQ0hBVF9TRVNTSU9OX0ZBQ1RPUlkuY3JlYXRlQ3VzdG9tZXJDaGF0U2Vzc2lvbihcbiAgICAgIGFyZ3MuY2hhdERldGFpbHMsXG4gICAgICBvcHRpb25zXG4gICAgKTtcbiAgfSBlbHNlIHtcbiAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uKFxuICAgICAgXCJVbmtvd24gdmFsdWUgZm9yIHNlc3Npb24gdHlwZSwgQWxsb3dlZCB2YWx1ZXMgYXJlOiBcIiArXG4gICAgICAgIE9iamVjdC52YWx1ZXMoU0VTU0lPTl9UWVBFUyksXG4gICAgICB0eXBlXG4gICAgKTtcbiAgfVxufTtcblxuY29uc3QgQ2hhdFNlc3Npb25PYmplY3QgPSB7XG4gIGNyZWF0ZTogQ2hhdFNlc3Npb25Db25zdHJ1Y3RvcixcbiAgc2V0R2xvYmFsQ29uZmlnOiBzZXRHbG9iYWxDb25maWcsXG4gIExvZ0xldmVsOiBMb2dMZXZlbCxcbiAgTG9nZ2VyOiBMb2dnZXIsXG4gIFNlc3Npb25UeXBlczogU0VTU0lPTl9UWVBFU1xufTtcblxuZXhwb3J0IHsgQ2hhdFNlc3Npb25PYmplY3QgfTtcbiIsInZhciBnO1xuXG4vLyBUaGlzIHdvcmtzIGluIG5vbi1zdHJpY3QgbW9kZVxuZyA9IChmdW5jdGlvbigpIHtcblx0cmV0dXJuIHRoaXM7XG59KSgpO1xuXG50cnkge1xuXHQvLyBUaGlzIHdvcmtzIGlmIGV2YWwgaXMgYWxsb3dlZCAoc2VlIENTUClcblx0ZyA9IGcgfHwgbmV3IEZ1bmN0aW9uKFwicmV0dXJuIHRoaXNcIikoKTtcbn0gY2F0Y2ggKGUpIHtcblx0Ly8gVGhpcyB3b3JrcyBpZiB0aGUgd2luZG93IHJlZmVyZW5jZSBpcyBhdmFpbGFibGVcblx0aWYgKHR5cGVvZiB3aW5kb3cgPT09IFwib2JqZWN0XCIpIGcgPSB3aW5kb3c7XG59XG5cbi8vIGcgY2FuIHN0aWxsIGJlIHVuZGVmaW5lZCwgYnV0IG5vdGhpbmcgdG8gZG8gYWJvdXQgaXQuLi5cbi8vIFdlIHJldHVybiB1bmRlZmluZWQsIGluc3RlYWQgb2Ygbm90aGluZyBoZXJlLCBzbyBpdCdzXG4vLyBlYXNpZXIgdG8gaGFuZGxlIHRoaXMgY2FzZS4gaWYoIWdsb2JhbCkgeyAuLi59XG5cbm1vZHVsZS5leHBvcnRzID0gZztcbiIsIi8qIGVzbGludC1kaXNhYmxlICovXG4vLyBCZWxvdyBpcyB0aGUgUGFobyBtcXR0IHZlcnNpb24gMS4wLjFcbi8vIFBsZWFzZSB0ZXN0IHByb3Blcmx5IGlmIHlvdSBjaGFuZ2UgdGhlIHZlcnNpb24gb2YgdGhpcyBmaWxlLlxuLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcbiAqIENvcHlyaWdodCAoYykgMjAxMyBJQk0gQ29ycC5cbiAqXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLiBUaGlzIHByb2dyYW0gYW5kIHRoZSBhY2NvbXBhbnlpbmcgbWF0ZXJpYWxzXG4gKiBhcmUgbWFkZSBhdmFpbGFibGUgdW5kZXIgdGhlIHRlcm1zIG9mIHRoZSBFY2xpcHNlIFB1YmxpYyBMaWNlbnNlIHYxLjBcbiAqIGFuZCBFY2xpcHNlIERpc3RyaWJ1dGlvbiBMaWNlbnNlIHYxLjAgd2hpY2ggYWNjb21wYW55IHRoaXMgZGlzdHJpYnV0aW9uLlxuICpcbiAqIFRoZSBFY2xpcHNlIFB1YmxpYyBMaWNlbnNlIGlzIGF2YWlsYWJsZSBhdFxuICogICAgaHR0cDovL3d3dy5lY2xpcHNlLm9yZy9sZWdhbC9lcGwtdjEwLmh0bWxcbiAqIGFuZCB0aGUgRWNsaXBzZSBEaXN0cmlidXRpb24gTGljZW5zZSBpcyBhdmFpbGFibGUgYXRcbiAqICAgaHR0cDovL3d3dy5lY2xpcHNlLm9yZy9vcmcvZG9jdW1lbnRzL2VkbC12MTAucGhwLlxuICpcbiAqIENvbnRyaWJ1dG9yczpcbiAqICAgIEFuZHJldyBCYW5rcyAtIGluaXRpYWwgQVBJIGFuZCBpbXBsZW1lbnRhdGlvbiBhbmQgaW5pdGlhbCBkb2N1bWVudGF0aW9uXG4gKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cblxuLy8gT25seSBleHBvc2UgYSBzaW5nbGUgb2JqZWN0IG5hbWUgaW4gdGhlIGdsb2JhbCBuYW1lc3BhY2UuXG4vLyBFdmVyeXRoaW5nIG11c3QgZ28gdGhyb3VnaCB0aGlzIG1vZHVsZS4gR2xvYmFsIFBhaG8gbW9kdWxlXG4vLyBvbmx5IGhhcyBhIHNpbmdsZSBwdWJsaWMgZnVuY3Rpb24sIGNsaWVudCwgd2hpY2ggcmV0dXJuc1xuLy8gYSBQYWhvIGNsaWVudCBvYmplY3QgZ2l2ZW4gY29ubmVjdGlvbiBkZXRhaWxzLlxuXG4vKipcbiAqIFNlbmQgYW5kIHJlY2VpdmUgbWVzc2FnZXMgdXNpbmcgd2ViIGJyb3dzZXJzLlxuICogPHA+XG4gKiBUaGlzIHByb2dyYW1taW5nIGludGVyZmFjZSBsZXRzIGEgSmF2YVNjcmlwdCBjbGllbnQgYXBwbGljYXRpb24gdXNlIHRoZSBNUVRUIFYzLjEgb3JcbiAqIFYzLjEuMSBwcm90b2NvbCB0byBjb25uZWN0IHRvIGFuIE1RVFQtc3VwcG9ydGluZyBtZXNzYWdpbmcgc2VydmVyLlxuICpcbiAqIFRoZSBmdW5jdGlvbiBzdXBwb3J0ZWQgaW5jbHVkZXM6XG4gKiA8b2w+XG4gKiA8bGk+Q29ubmVjdGluZyB0byBhbmQgZGlzY29ubmVjdGluZyBmcm9tIGEgc2VydmVyLiBUaGUgc2VydmVyIGlzIGlkZW50aWZpZWQgYnkgaXRzIGhvc3QgbmFtZSBhbmQgcG9ydCBudW1iZXIuXG4gKiA8bGk+U3BlY2lmeWluZyBvcHRpb25zIHRoYXQgcmVsYXRlIHRvIHRoZSBjb21tdW5pY2F0aW9ucyBsaW5rIHdpdGggdGhlIHNlcnZlcixcbiAqIGZvciBleGFtcGxlIHRoZSBmcmVxdWVuY3kgb2Yga2VlcC1hbGl2ZSBoZWFydGJlYXRzLCBhbmQgd2hldGhlciBTU0wvVExTIGlzIHJlcXVpcmVkLlxuICogPGxpPlN1YnNjcmliaW5nIHRvIGFuZCByZWNlaXZpbmcgbWVzc2FnZXMgZnJvbSBNUVRUIFRvcGljcy5cbiAqIDxsaT5QdWJsaXNoaW5nIG1lc3NhZ2VzIHRvIE1RVFQgVG9waWNzLlxuICogPC9vbD5cbiAqIDxwPlxuICogVGhlIEFQSSBjb25zaXN0cyBvZiB0d28gbWFpbiBvYmplY3RzOlxuICogPGRsPlxuICogPGR0PjxiPntAbGluayBQYWhvLkNsaWVudH08L2I+PC9kdD5cbiAqIDxkZD5UaGlzIGNvbnRhaW5zIG1ldGhvZHMgdGhhdCBwcm92aWRlIHRoZSBmdW5jdGlvbmFsaXR5IG9mIHRoZSBBUEksXG4gKiBpbmNsdWRpbmcgcHJvdmlzaW9uIG9mIGNhbGxiYWNrcyB0aGF0IG5vdGlmeSB0aGUgYXBwbGljYXRpb24gd2hlbiBhIG1lc3NhZ2VcbiAqIGFycml2ZXMgZnJvbSBvciBpcyBkZWxpdmVyZWQgdG8gdGhlIG1lc3NhZ2luZyBzZXJ2ZXIsXG4gKiBvciB3aGVuIHRoZSBzdGF0dXMgb2YgaXRzIGNvbm5lY3Rpb24gdG8gdGhlIG1lc3NhZ2luZyBzZXJ2ZXIgY2hhbmdlcy48L2RkPlxuICogPGR0PjxiPntAbGluayBQYWhvLk1lc3NhZ2V9PC9iPjwvZHQ+XG4gKiA8ZGQ+VGhpcyBlbmNhcHN1bGF0ZXMgdGhlIHBheWxvYWQgb2YgdGhlIG1lc3NhZ2UgYWxvbmcgd2l0aCB2YXJpb3VzIGF0dHJpYnV0ZXNcbiAqIGFzc29jaWF0ZWQgd2l0aCBpdHMgZGVsaXZlcnksIGluIHBhcnRpY3VsYXIgdGhlIGRlc3RpbmF0aW9uIHRvIHdoaWNoIGl0IGhhc1xuICogYmVlbiAob3IgaXMgYWJvdXQgdG8gYmUpIHNlbnQuPC9kZD5cbiAqIDwvZGw+XG4gKiA8cD5cbiAqIFRoZSBwcm9ncmFtbWluZyBpbnRlcmZhY2UgdmFsaWRhdGVzIHBhcmFtZXRlcnMgcGFzc2VkIHRvIGl0LCBhbmQgd2lsbCB0aHJvd1xuICogYW4gRXJyb3IgY29udGFpbmluZyBhbiBlcnJvciBtZXNzYWdlIGludGVuZGVkIGZvciBkZXZlbG9wZXIgdXNlLCBpZiBpdCBkZXRlY3RzXG4gKiBhbiBlcnJvciB3aXRoIGFueSBwYXJhbWV0ZXIuXG4gKiA8cD5cbiAqIEV4YW1wbGU6XG4gKlxuICogPGNvZGU+PHByZT5cbnZhciBjbGllbnQgPSBuZXcgUGFoby5NUVRULkNsaWVudChsb2NhdGlvbi5ob3N0bmFtZSwgTnVtYmVyKGxvY2F0aW9uLnBvcnQpLCBcImNsaWVudElkXCIpO1xuY2xpZW50Lm9uQ29ubmVjdGlvbkxvc3QgPSBvbkNvbm5lY3Rpb25Mb3N0O1xuY2xpZW50Lm9uTWVzc2FnZUFycml2ZWQgPSBvbk1lc3NhZ2VBcnJpdmVkO1xuY2xpZW50LmNvbm5lY3Qoe29uU3VjY2VzczpvbkNvbm5lY3R9KTtcblxuZnVuY3Rpb24gb25Db25uZWN0KCkge1xuICAvLyBPbmNlIGEgY29ubmVjdGlvbiBoYXMgYmVlbiBtYWRlLCBtYWtlIGEgc3Vic2NyaXB0aW9uIGFuZCBzZW5kIGEgbWVzc2FnZS5cbiAgY29uc29sZS5sb2coXCJvbkNvbm5lY3RcIik7XG4gIGNsaWVudC5zdWJzY3JpYmUoXCIvV29ybGRcIik7XG4gIHZhciBtZXNzYWdlID0gbmV3IFBhaG8uTVFUVC5NZXNzYWdlKFwiSGVsbG9cIik7XG4gIG1lc3NhZ2UuZGVzdGluYXRpb25OYW1lID0gXCIvV29ybGRcIjtcbiAgY2xpZW50LnNlbmQobWVzc2FnZSk7XG59O1xuZnVuY3Rpb24gb25Db25uZWN0aW9uTG9zdChyZXNwb25zZU9iamVjdCkge1xuICBpZiAocmVzcG9uc2VPYmplY3QuZXJyb3JDb2RlICE9PSAwKVxuXHRjb25zb2xlLmxvZyhcIm9uQ29ubmVjdGlvbkxvc3Q6XCIrcmVzcG9uc2VPYmplY3QuZXJyb3JNZXNzYWdlKTtcbn07XG5mdW5jdGlvbiBvbk1lc3NhZ2VBcnJpdmVkKG1lc3NhZ2UpIHtcbiAgY29uc29sZS5sb2coXCJvbk1lc3NhZ2VBcnJpdmVkOlwiK21lc3NhZ2UucGF5bG9hZFN0cmluZyk7XG4gIGNsaWVudC5kaXNjb25uZWN0KCk7XG59O1xuICogPC9wcmU+PC9jb2RlPlxuICogQG5hbWVzcGFjZSBQYWhvXG4gKi9cblxuLyoganNoaW50IHNoYWRvdzp0cnVlICovXG4oZnVuY3Rpb24gRXhwb3J0TGlicmFyeShyb290LCBmYWN0b3J5KSB7XG4gIGlmICh0eXBlb2YgZXhwb3J0cyA9PT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgbW9kdWxlID09PSBcIm9iamVjdFwiKSB7XG4gICAgbW9kdWxlLmV4cG9ydHMgPSBmYWN0b3J5KCk7XG4gIH0gZWxzZSBpZiAodHlwZW9mIGRlZmluZSA9PT0gXCJmdW5jdGlvblwiICYmIGRlZmluZS5hbWQpIHtcbiAgICBkZWZpbmUoZmFjdG9yeSk7XG4gIH0gZWxzZSBpZiAodHlwZW9mIGV4cG9ydHMgPT09IFwib2JqZWN0XCIpIHtcbiAgICBleHBvcnRzID0gZmFjdG9yeSgpO1xuICB9IGVsc2Uge1xuICAgIC8vaWYgKHR5cGVvZiByb290LlBhaG8gPT09IFwidW5kZWZpbmVkXCIpe1xuICAgIC8vXHRyb290LlBhaG8gPSB7fTtcbiAgICAvL31cbiAgICByb290LlBhaG8gPSBmYWN0b3J5KCk7XG4gIH1cbn0pKHRoaXMsIGZ1bmN0aW9uIExpYnJhcnlGYWN0b3J5KCkge1xuICB2YXIgUGFob01RVFQgPSAoZnVuY3Rpb24oZ2xvYmFsKSB7XG4gICAgLy8gUHJpdmF0ZSB2YXJpYWJsZXMgYmVsb3csIHRoZXNlIGFyZSBvbmx5IHZpc2libGUgaW5zaWRlIHRoZSBmdW5jdGlvbiBjbG9zdXJlXG4gICAgLy8gd2hpY2ggaXMgdXNlZCB0byBkZWZpbmUgdGhlIG1vZHVsZS5cbiAgICB2YXIgdmVyc2lvbiA9IFwiQFZFUlNJT05ALUBCVUlMRExFVkVMQFwiO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICB2YXIgbG9jYWxTdG9yYWdlID1cbiAgICAgIGdsb2JhbC5sb2NhbFN0b3JhZ2UgfHxcbiAgICAgIChmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIGRhdGEgPSB7fTtcblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHNldEl0ZW06IGZ1bmN0aW9uKGtleSwgaXRlbSkge1xuICAgICAgICAgICAgZGF0YVtrZXldID0gaXRlbTtcbiAgICAgICAgICB9LFxuICAgICAgICAgIGdldEl0ZW06IGZ1bmN0aW9uKGtleSkge1xuICAgICAgICAgICAgcmV0dXJuIGRhdGFba2V5XTtcbiAgICAgICAgICB9LFxuICAgICAgICAgIHJlbW92ZUl0ZW06IGZ1bmN0aW9uKGtleSkge1xuICAgICAgICAgICAgZGVsZXRlIGRhdGFba2V5XTtcbiAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICB9KSgpO1xuXG4gICAgLyoqXG4gICAgICogVW5pcXVlIG1lc3NhZ2UgdHlwZSBpZGVudGlmaWVycywgd2l0aCBhc3NvY2lhdGVkXG4gICAgICogYXNzb2NpYXRlZCBpbnRlZ2VyIHZhbHVlcy5cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIHZhciBNRVNTQUdFX1RZUEUgPSB7XG4gICAgICBDT05ORUNUOiAxLFxuICAgICAgQ09OTkFDSzogMixcbiAgICAgIFBVQkxJU0g6IDMsXG4gICAgICBQVUJBQ0s6IDQsXG4gICAgICBQVUJSRUM6IDUsXG4gICAgICBQVUJSRUw6IDYsXG4gICAgICBQVUJDT01QOiA3LFxuICAgICAgU1VCU0NSSUJFOiA4LFxuICAgICAgU1VCQUNLOiA5LFxuICAgICAgVU5TVUJTQ1JJQkU6IDEwLFxuICAgICAgVU5TVUJBQ0s6IDExLFxuICAgICAgUElOR1JFUTogMTIsXG4gICAgICBQSU5HUkVTUDogMTMsXG4gICAgICBESVNDT05ORUNUOiAxNFxuICAgIH07XG5cbiAgICAvLyBDb2xsZWN0aW9uIG9mIHV0aWxpdHkgbWV0aG9kcyB1c2VkIHRvIHNpbXBsaWZ5IG1vZHVsZSBjb2RlXG4gICAgLy8gYW5kIHByb21vdGUgdGhlIERSWSBwYXR0ZXJuLlxuXG4gICAgLyoqXG4gICAgICogVmFsaWRhdGUgYW4gb2JqZWN0J3MgcGFyYW1ldGVyIG5hbWVzIHRvIGVuc3VyZSB0aGV5XG4gICAgICogbWF0Y2ggYSBsaXN0IG9mIGV4cGVjdGVkIHZhcmlhYmxlcyBuYW1lIGZvciB0aGlzIG9wdGlvblxuICAgICAqIHR5cGUuIFVzZWQgdG8gZW5zdXJlIG9wdGlvbiBvYmplY3QgcGFzc2VkIGludG8gdGhlIEFQSSBkb24ndFxuICAgICAqIGNvbnRhaW4gZXJyb25lb3VzIHBhcmFtZXRlcnMuXG4gICAgICogQHBhcmFtIHtPYmplY3R9IG9iaiAtIFVzZXIgb3B0aW9ucyBvYmplY3RcbiAgICAgKiBAcGFyYW0ge09iamVjdH0ga2V5cyAtIHZhbGlkIGtleXMgYW5kIHR5cGVzIHRoYXQgbWF5IGV4aXN0IGluIG9iai5cbiAgICAgKiBAdGhyb3dzIHtFcnJvcn0gSW52YWxpZCBvcHRpb24gcGFyYW1ldGVyIGZvdW5kLlxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgdmFyIHZhbGlkYXRlID0gZnVuY3Rpb24ob2JqLCBrZXlzKSB7XG4gICAgICBmb3IgKHZhciBrZXkgaW4gb2JqKSB7XG4gICAgICAgIGlmIChvYmouaGFzT3duUHJvcGVydHkoa2V5KSkge1xuICAgICAgICAgIGlmIChrZXlzLmhhc093blByb3BlcnR5KGtleSkpIHtcbiAgICAgICAgICAgIGlmICh0eXBlb2Ygb2JqW2tleV0gIT09IGtleXNba2V5XSlcbiAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICAgICAgICAgIGZvcm1hdChFUlJPUi5JTlZBTElEX1RZUEUsIFt0eXBlb2Ygb2JqW2tleV0sIGtleV0pXG4gICAgICAgICAgICAgICk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHZhciBlcnJvclN0ciA9XG4gICAgICAgICAgICAgIFwiVW5rbm93biBwcm9wZXJ0eSwgXCIgKyBrZXkgKyBcIi4gVmFsaWQgcHJvcGVydGllcyBhcmU6XCI7XG4gICAgICAgICAgICBmb3IgKHZhciB2YWxpZEtleSBpbiBrZXlzKVxuICAgICAgICAgICAgICBpZiAoa2V5cy5oYXNPd25Qcm9wZXJ0eSh2YWxpZEtleSkpXG4gICAgICAgICAgICAgICAgZXJyb3JTdHIgPSBlcnJvclN0ciArIFwiIFwiICsgdmFsaWRLZXk7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoZXJyb3JTdHIpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm4gYSBuZXcgZnVuY3Rpb24gd2hpY2ggcnVucyB0aGUgdXNlciBmdW5jdGlvbiBib3VuZFxuICAgICAqIHRvIGEgZml4ZWQgc2NvcGUuXG4gICAgICogQHBhcmFtIHtmdW5jdGlvbn0gVXNlciBmdW5jdGlvblxuICAgICAqIEBwYXJhbSB7b2JqZWN0fSBGdW5jdGlvbiBzY29wZVxuICAgICAqIEByZXR1cm4ge2Z1bmN0aW9ufSBVc2VyIGZ1bmN0aW9uIGJvdW5kIHRvIGFub3RoZXIgc2NvcGVcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIHZhciBzY29wZSA9IGZ1bmN0aW9uKGYsIHNjb3BlKSB7XG4gICAgICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiBmLmFwcGx5KHNjb3BlLCBhcmd1bWVudHMpO1xuICAgICAgfTtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogVW5pcXVlIG1lc3NhZ2UgdHlwZSBpZGVudGlmaWVycywgd2l0aCBhc3NvY2lhdGVkXG4gICAgICogYXNzb2NpYXRlZCBpbnRlZ2VyIHZhbHVlcy5cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIHZhciBFUlJPUiA9IHtcbiAgICAgIE9LOiB7IGNvZGU6IDAsIHRleHQ6IFwiQU1RSlNDMDAwMEkgT0suXCIgfSxcbiAgICAgIENPTk5FQ1RfVElNRU9VVDogeyBjb2RlOiAxLCB0ZXh0OiBcIkFNUUpTQzAwMDFFIENvbm5lY3QgdGltZWQgb3V0LlwiIH0sXG4gICAgICBTVUJTQ1JJQkVfVElNRU9VVDogeyBjb2RlOiAyLCB0ZXh0OiBcIkFNUUpTMDAwMkUgU3Vic2NyaWJlIHRpbWVkIG91dC5cIiB9LFxuICAgICAgVU5TVUJTQ1JJQkVfVElNRU9VVDoge1xuICAgICAgICBjb2RlOiAzLFxuICAgICAgICB0ZXh0OiBcIkFNUUpTMDAwM0UgVW5zdWJzY3JpYmUgdGltZWQgb3V0LlwiXG4gICAgICB9LFxuICAgICAgUElOR19USU1FT1VUOiB7IGNvZGU6IDQsIHRleHQ6IFwiQU1RSlMwMDA0RSBQaW5nIHRpbWVkIG91dC5cIiB9LFxuICAgICAgSU5URVJOQUxfRVJST1I6IHtcbiAgICAgICAgY29kZTogNSxcbiAgICAgICAgdGV4dDogXCJBTVFKUzAwMDVFIEludGVybmFsIGVycm9yLiBFcnJvciBNZXNzYWdlOiB7MH0sIFN0YWNrIHRyYWNlOiB7MX1cIlxuICAgICAgfSxcbiAgICAgIENPTk5BQ0tfUkVUVVJOQ09ERToge1xuICAgICAgICBjb2RlOiA2LFxuICAgICAgICB0ZXh0OiBcIkFNUUpTMDAwNkUgQmFkIENvbm5hY2sgcmV0dXJuIGNvZGU6ezB9IHsxfS5cIlxuICAgICAgfSxcbiAgICAgIFNPQ0tFVF9FUlJPUjogeyBjb2RlOiA3LCB0ZXh0OiBcIkFNUUpTMDAwN0UgU29ja2V0IGVycm9yOnswfS5cIiB9LFxuICAgICAgU09DS0VUX0NMT1NFOiB7IGNvZGU6IDgsIHRleHQ6IFwiQU1RSlMwMDA4SSBTb2NrZXQgY2xvc2VkLlwiIH0sXG4gICAgICBNQUxGT1JNRURfVVRGOiB7XG4gICAgICAgIGNvZGU6IDksXG4gICAgICAgIHRleHQ6IFwiQU1RSlMwMDA5RSBNYWxmb3JtZWQgVVRGIGRhdGE6ezB9IHsxfSB7Mn0uXCJcbiAgICAgIH0sXG4gICAgICBVTlNVUFBPUlRFRDoge1xuICAgICAgICBjb2RlOiAxMCxcbiAgICAgICAgdGV4dDogXCJBTVFKUzAwMTBFIHswfSBpcyBub3Qgc3VwcG9ydGVkIGJ5IHRoaXMgYnJvd3Nlci5cIlxuICAgICAgfSxcbiAgICAgIElOVkFMSURfU1RBVEU6IHsgY29kZTogMTEsIHRleHQ6IFwiQU1RSlMwMDExRSBJbnZhbGlkIHN0YXRlIHswfS5cIiB9LFxuICAgICAgSU5WQUxJRF9UWVBFOiB7IGNvZGU6IDEyLCB0ZXh0OiBcIkFNUUpTMDAxMkUgSW52YWxpZCB0eXBlIHswfSBmb3IgezF9LlwiIH0sXG4gICAgICBJTlZBTElEX0FSR1VNRU5UOiB7XG4gICAgICAgIGNvZGU6IDEzLFxuICAgICAgICB0ZXh0OiBcIkFNUUpTMDAxM0UgSW52YWxpZCBhcmd1bWVudCB7MH0gZm9yIHsxfS5cIlxuICAgICAgfSxcbiAgICAgIFVOU1VQUE9SVEVEX09QRVJBVElPTjoge1xuICAgICAgICBjb2RlOiAxNCxcbiAgICAgICAgdGV4dDogXCJBTVFKUzAwMTRFIFVuc3VwcG9ydGVkIG9wZXJhdGlvbi5cIlxuICAgICAgfSxcbiAgICAgIElOVkFMSURfU1RPUkVEX0RBVEE6IHtcbiAgICAgICAgY29kZTogMTUsXG4gICAgICAgIHRleHQ6IFwiQU1RSlMwMDE1RSBJbnZhbGlkIGRhdGEgaW4gbG9jYWwgc3RvcmFnZSBrZXk9ezB9IHZhbHVlPXsxfS5cIlxuICAgICAgfSxcbiAgICAgIElOVkFMSURfTVFUVF9NRVNTQUdFX1RZUEU6IHtcbiAgICAgICAgY29kZTogMTYsXG4gICAgICAgIHRleHQ6IFwiQU1RSlMwMDE2RSBJbnZhbGlkIE1RVFQgbWVzc2FnZSB0eXBlIHswfS5cIlxuICAgICAgfSxcbiAgICAgIE1BTEZPUk1FRF9VTklDT0RFOiB7XG4gICAgICAgIGNvZGU6IDE3LFxuICAgICAgICB0ZXh0OiBcIkFNUUpTMDAxN0UgTWFsZm9ybWVkIFVuaWNvZGUgc3RyaW5nOnswfSB7MX0uXCJcbiAgICAgIH0sXG4gICAgICBCVUZGRVJfRlVMTDoge1xuICAgICAgICBjb2RlOiAxOCxcbiAgICAgICAgdGV4dDogXCJBTVFKUzAwMThFIE1lc3NhZ2UgYnVmZmVyIGlzIGZ1bGwsIG1heGltdW0gYnVmZmVyIHNpemU6IHswfS5cIlxuICAgICAgfVxuICAgIH07XG5cbiAgICAvKiogQ09OTkFDSyBSQyBNZWFuaW5nLiAqL1xuICAgIHZhciBDT05OQUNLX1JDID0ge1xuICAgICAgMDogXCJDb25uZWN0aW9uIEFjY2VwdGVkXCIsXG4gICAgICAxOiBcIkNvbm5lY3Rpb24gUmVmdXNlZDogdW5hY2NlcHRhYmxlIHByb3RvY29sIHZlcnNpb25cIixcbiAgICAgIDI6IFwiQ29ubmVjdGlvbiBSZWZ1c2VkOiBpZGVudGlmaWVyIHJlamVjdGVkXCIsXG4gICAgICAzOiBcIkNvbm5lY3Rpb24gUmVmdXNlZDogc2VydmVyIHVuYXZhaWxhYmxlXCIsXG4gICAgICA0OiBcIkNvbm5lY3Rpb24gUmVmdXNlZDogYmFkIHVzZXIgbmFtZSBvciBwYXNzd29yZFwiLFxuICAgICAgNTogXCJDb25uZWN0aW9uIFJlZnVzZWQ6IG5vdCBhdXRob3JpemVkXCJcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogRm9ybWF0IGFuIGVycm9yIG1lc3NhZ2UgdGV4dC5cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSB7ZXJyb3J9IEVSUk9SIHZhbHVlIGFib3ZlLlxuICAgICAqIEBwYXJhbSB7c3Vic3RpdHV0aW9uc30gW2FycmF5XSBzdWJzdGl0dXRlZCBpbnRvIHRoZSB0ZXh0LlxuICAgICAqIEByZXR1cm4gdGhlIHRleHQgd2l0aCB0aGUgc3Vic3RpdHV0aW9ucyBtYWRlLlxuICAgICAqL1xuICAgIHZhciBmb3JtYXQgPSBmdW5jdGlvbihlcnJvciwgc3Vic3RpdHV0aW9ucykge1xuICAgICAgdmFyIHRleHQgPSBlcnJvci50ZXh0O1xuICAgICAgaWYgKHN1YnN0aXR1dGlvbnMpIHtcbiAgICAgICAgdmFyIGZpZWxkLCBzdGFydDtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzdWJzdGl0dXRpb25zLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgZmllbGQgPSBcIntcIiArIGkgKyBcIn1cIjtcbiAgICAgICAgICBzdGFydCA9IHRleHQuaW5kZXhPZihmaWVsZCk7XG4gICAgICAgICAgaWYgKHN0YXJ0ID4gMCkge1xuICAgICAgICAgICAgdmFyIHBhcnQxID0gdGV4dC5zdWJzdHJpbmcoMCwgc3RhcnQpO1xuICAgICAgICAgICAgdmFyIHBhcnQyID0gdGV4dC5zdWJzdHJpbmcoc3RhcnQgKyBmaWVsZC5sZW5ndGgpO1xuICAgICAgICAgICAgdGV4dCA9IHBhcnQxICsgc3Vic3RpdHV0aW9uc1tpXSArIHBhcnQyO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIHRleHQ7XG4gICAgfTtcblxuICAgIC8vTVFUVCBwcm90b2NvbCBhbmQgdmVyc2lvbiAgICAgICAgICA2ICAgIE0gICAgUSAgICBJICAgIHMgICAgZCAgICBwICAgIDNcbiAgICB2YXIgTXF0dFByb3RvSWRlbnRpZmllcnYzID0gW1xuICAgICAgMHgwMCxcbiAgICAgIDB4MDYsXG4gICAgICAweDRkLFxuICAgICAgMHg1MSxcbiAgICAgIDB4NDksXG4gICAgICAweDczLFxuICAgICAgMHg2NCxcbiAgICAgIDB4NzAsXG4gICAgICAweDAzXG4gICAgXTtcbiAgICAvL01RVFQgcHJvdG8vdmVyc2lvbiBmb3IgMzExICAgICAgICAgNCAgICBNICAgIFEgICAgVCAgICBUICAgIDRcbiAgICB2YXIgTXF0dFByb3RvSWRlbnRpZmllcnY0ID0gWzB4MDAsIDB4MDQsIDB4NGQsIDB4NTEsIDB4NTQsIDB4NTQsIDB4MDRdO1xuXG4gICAgLyoqXG4gICAgICogQ29uc3RydWN0IGFuIE1RVFQgd2lyZSBwcm90b2NvbCBtZXNzYWdlLlxuICAgICAqIEBwYXJhbSB0eXBlIE1RVFQgcGFja2V0IHR5cGUuXG4gICAgICogQHBhcmFtIG9wdGlvbnMgb3B0aW9uYWwgd2lyZSBtZXNzYWdlIGF0dHJpYnV0ZXMuXG4gICAgICpcbiAgICAgKiBPcHRpb25hbCBwcm9wZXJ0aWVzXG4gICAgICpcbiAgICAgKiBtZXNzYWdlSWRlbnRpZmllcjogbWVzc2FnZSBJRCBpbiB0aGUgcmFuZ2UgWzAuLjY1NTM1XVxuICAgICAqIHBheWxvYWRNZXNzYWdlOlx0QXBwbGljYXRpb24gTWVzc2FnZSAtIFBVQkxJU0ggb25seVxuICAgICAqIGNvbm5lY3RTdHJpbmdzOlx0YXJyYXkgb2YgMCBvciBtb3JlIFN0cmluZ3MgdG8gYmUgcHV0IGludG8gdGhlIENPTk5FQ1QgcGF5bG9hZFxuICAgICAqIHRvcGljczpcdFx0XHRhcnJheSBvZiBzdHJpbmdzIChTVUJTQ1JJQkUsIFVOU1VCU0NSSUJFKVxuICAgICAqIHJlcXVlc3RRb1M6XHRcdGFycmF5IG9mIFFvUyB2YWx1ZXMgWzAuLjJdXG4gICAgICpcbiAgICAgKiBcIkZsYWdcIiBwcm9wZXJ0aWVzXG4gICAgICogY2xlYW5TZXNzaW9uOlx0dHJ1ZSBpZiBwcmVzZW50IC8gZmFsc2UgaWYgYWJzZW50IChDT05ORUNUKVxuICAgICAqIHdpbGxNZXNzYWdlOiAgXHR0cnVlIGlmIHByZXNlbnQgLyBmYWxzZSBpZiBhYnNlbnQgKENPTk5FQ1QpXG4gICAgICogaXNSZXRhaW5lZDpcdFx0dHJ1ZSBpZiBwcmVzZW50IC8gZmFsc2UgaWYgYWJzZW50IChDT05ORUNUKVxuICAgICAqIHVzZXJOYW1lOlx0XHR0cnVlIGlmIHByZXNlbnQgLyBmYWxzZSBpZiBhYnNlbnQgKENPTk5FQ1QpXG4gICAgICogcGFzc3dvcmQ6XHRcdHRydWUgaWYgcHJlc2VudCAvIGZhbHNlIGlmIGFic2VudCAoQ09OTkVDVClcbiAgICAgKiBrZWVwQWxpdmVJbnRlcnZhbDpcdGludGVnZXIgWzAuLjY1NTM1XSAgKENPTk5FQ1QpXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBpZ25vcmVcbiAgICAgKi9cbiAgICB2YXIgV2lyZU1lc3NhZ2UgPSBmdW5jdGlvbih0eXBlLCBvcHRpb25zKSB7XG4gICAgICB0aGlzLnR5cGUgPSB0eXBlO1xuICAgICAgZm9yICh2YXIgbmFtZSBpbiBvcHRpb25zKSB7XG4gICAgICAgIGlmIChvcHRpb25zLmhhc093blByb3BlcnR5KG5hbWUpKSB7XG4gICAgICAgICAgdGhpc1tuYW1lXSA9IG9wdGlvbnNbbmFtZV07XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9O1xuXG4gICAgV2lyZU1lc3NhZ2UucHJvdG90eXBlLmVuY29kZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgLy8gQ29tcHV0ZSB0aGUgZmlyc3QgYnl0ZSBvZiB0aGUgZml4ZWQgaGVhZGVyXG4gICAgICB2YXIgZmlyc3QgPSAodGhpcy50eXBlICYgMHgwZikgPDwgNDtcblxuICAgICAgLypcbiAgICAgICAqIE5vdyBjYWxjdWxhdGUgdGhlIGxlbmd0aCBvZiB0aGUgdmFyaWFibGUgaGVhZGVyICsgcGF5bG9hZCBieSBhZGRpbmcgdXAgdGhlIGxlbmd0aHNcbiAgICAgICAqIG9mIGFsbCB0aGUgY29tcG9uZW50IHBhcnRzXG4gICAgICAgKi9cblxuICAgICAgdmFyIHJlbUxlbmd0aCA9IDA7XG4gICAgICB2YXIgdG9waWNTdHJMZW5ndGggPSBbXTtcbiAgICAgIHZhciBkZXN0aW5hdGlvbk5hbWVMZW5ndGggPSAwO1xuICAgICAgdmFyIHdpbGxNZXNzYWdlUGF5bG9hZEJ5dGVzO1xuXG4gICAgICAvLyBpZiB0aGUgbWVzc2FnZSBjb250YWlucyBhIG1lc3NhZ2VJZGVudGlmaWVyIHRoZW4gd2UgbmVlZCB0d28gYnl0ZXMgZm9yIHRoYXRcbiAgICAgIGlmICh0aGlzLm1lc3NhZ2VJZGVudGlmaWVyICE9PSB1bmRlZmluZWQpIHJlbUxlbmd0aCArPSAyO1xuXG4gICAgICBzd2l0Y2ggKHRoaXMudHlwZSkge1xuICAgICAgICAvLyBJZiB0aGlzIGEgQ29ubmVjdCB0aGVuIHdlIG5lZWQgdG8gaW5jbHVkZSAxMiBieXRlcyBmb3IgaXRzIGhlYWRlclxuICAgICAgICBjYXNlIE1FU1NBR0VfVFlQRS5DT05ORUNUOlxuICAgICAgICAgIHN3aXRjaCAodGhpcy5tcXR0VmVyc2lvbikge1xuICAgICAgICAgICAgY2FzZSAzOlxuICAgICAgICAgICAgICByZW1MZW5ndGggKz0gTXF0dFByb3RvSWRlbnRpZmllcnYzLmxlbmd0aCArIDM7XG4gICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSA0OlxuICAgICAgICAgICAgICByZW1MZW5ndGggKz0gTXF0dFByb3RvSWRlbnRpZmllcnY0Lmxlbmd0aCArIDM7XG4gICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIHJlbUxlbmd0aCArPSBVVEY4TGVuZ3RoKHRoaXMuY2xpZW50SWQpICsgMjtcbiAgICAgICAgICBpZiAodGhpcy53aWxsTWVzc2FnZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICByZW1MZW5ndGggKz0gVVRGOExlbmd0aCh0aGlzLndpbGxNZXNzYWdlLmRlc3RpbmF0aW9uTmFtZSkgKyAyO1xuICAgICAgICAgICAgLy8gV2lsbCBtZXNzYWdlIGlzIGFsd2F5cyBhIHN0cmluZywgc2VudCBhcyBVVEYtOCBjaGFyYWN0ZXJzIHdpdGggYSBwcmVjZWRpbmcgbGVuZ3RoLlxuICAgICAgICAgICAgd2lsbE1lc3NhZ2VQYXlsb2FkQnl0ZXMgPSB0aGlzLndpbGxNZXNzYWdlLnBheWxvYWRCeXRlcztcbiAgICAgICAgICAgIGlmICghKHdpbGxNZXNzYWdlUGF5bG9hZEJ5dGVzIGluc3RhbmNlb2YgVWludDhBcnJheSkpXG4gICAgICAgICAgICAgIHdpbGxNZXNzYWdlUGF5bG9hZEJ5dGVzID0gbmV3IFVpbnQ4QXJyYXkocGF5bG9hZEJ5dGVzKTtcbiAgICAgICAgICAgIHJlbUxlbmd0aCArPSB3aWxsTWVzc2FnZVBheWxvYWRCeXRlcy5ieXRlTGVuZ3RoICsgMjtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKHRoaXMudXNlck5hbWUgIT09IHVuZGVmaW5lZClcbiAgICAgICAgICAgIHJlbUxlbmd0aCArPSBVVEY4TGVuZ3RoKHRoaXMudXNlck5hbWUpICsgMjtcbiAgICAgICAgICBpZiAodGhpcy5wYXNzd29yZCAhPT0gdW5kZWZpbmVkKVxuICAgICAgICAgICAgcmVtTGVuZ3RoICs9IFVURjhMZW5ndGgodGhpcy5wYXNzd29yZCkgKyAyO1xuICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgIC8vIFN1YnNjcmliZSwgVW5zdWJzY3JpYmUgY2FuIGJvdGggY29udGFpbiB0b3BpYyBzdHJpbmdzXG4gICAgICAgIGNhc2UgTUVTU0FHRV9UWVBFLlNVQlNDUklCRTpcbiAgICAgICAgICBmaXJzdCB8PSAweDAyOyAvLyBRb3MgPSAxO1xuICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy50b3BpY3MubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHRvcGljU3RyTGVuZ3RoW2ldID0gVVRGOExlbmd0aCh0aGlzLnRvcGljc1tpXSk7XG4gICAgICAgICAgICByZW1MZW5ndGggKz0gdG9waWNTdHJMZW5ndGhbaV0gKyAyO1xuICAgICAgICAgIH1cbiAgICAgICAgICByZW1MZW5ndGggKz0gdGhpcy5yZXF1ZXN0ZWRRb3MubGVuZ3RoOyAvLyAxIGJ5dGUgZm9yIGVhY2ggdG9waWMncyBRb3NcbiAgICAgICAgICAvLyBRb1Mgb24gU3Vic2NyaWJlIG9ubHlcbiAgICAgICAgICBicmVhaztcblxuICAgICAgICBjYXNlIE1FU1NBR0VfVFlQRS5VTlNVQlNDUklCRTpcbiAgICAgICAgICBmaXJzdCB8PSAweDAyOyAvLyBRb3MgPSAxO1xuICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy50b3BpY3MubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHRvcGljU3RyTGVuZ3RoW2ldID0gVVRGOExlbmd0aCh0aGlzLnRvcGljc1tpXSk7XG4gICAgICAgICAgICByZW1MZW5ndGggKz0gdG9waWNTdHJMZW5ndGhbaV0gKyAyO1xuICAgICAgICAgIH1cbiAgICAgICAgICBicmVhaztcblxuICAgICAgICBjYXNlIE1FU1NBR0VfVFlQRS5QVUJSRUw6XG4gICAgICAgICAgZmlyc3QgfD0gMHgwMjsgLy8gUW9zID0gMTtcbiAgICAgICAgICBicmVhaztcblxuICAgICAgICBjYXNlIE1FU1NBR0VfVFlQRS5QVUJMSVNIOlxuICAgICAgICAgIGlmICh0aGlzLnBheWxvYWRNZXNzYWdlLmR1cGxpY2F0ZSkgZmlyc3QgfD0gMHgwODtcbiAgICAgICAgICBmaXJzdCA9IGZpcnN0IHw9IHRoaXMucGF5bG9hZE1lc3NhZ2UucW9zIDw8IDE7XG4gICAgICAgICAgaWYgKHRoaXMucGF5bG9hZE1lc3NhZ2UucmV0YWluZWQpIGZpcnN0IHw9IDB4MDE7XG4gICAgICAgICAgZGVzdGluYXRpb25OYW1lTGVuZ3RoID0gVVRGOExlbmd0aChcbiAgICAgICAgICAgIHRoaXMucGF5bG9hZE1lc3NhZ2UuZGVzdGluYXRpb25OYW1lXG4gICAgICAgICAgKTtcbiAgICAgICAgICByZW1MZW5ndGggKz0gZGVzdGluYXRpb25OYW1lTGVuZ3RoICsgMjtcbiAgICAgICAgICB2YXIgcGF5bG9hZEJ5dGVzID0gdGhpcy5wYXlsb2FkTWVzc2FnZS5wYXlsb2FkQnl0ZXM7XG4gICAgICAgICAgcmVtTGVuZ3RoICs9IHBheWxvYWRCeXRlcy5ieXRlTGVuZ3RoO1xuICAgICAgICAgIGlmIChwYXlsb2FkQnl0ZXMgaW5zdGFuY2VvZiBBcnJheUJ1ZmZlcilcbiAgICAgICAgICAgIHBheWxvYWRCeXRlcyA9IG5ldyBVaW50OEFycmF5KHBheWxvYWRCeXRlcyk7XG4gICAgICAgICAgZWxzZSBpZiAoIShwYXlsb2FkQnl0ZXMgaW5zdGFuY2VvZiBVaW50OEFycmF5KSlcbiAgICAgICAgICAgIHBheWxvYWRCeXRlcyA9IG5ldyBVaW50OEFycmF5KHBheWxvYWRCeXRlcy5idWZmZXIpO1xuICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgIGNhc2UgTUVTU0FHRV9UWVBFLkRJU0NPTk5FQ1Q6XG4gICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICBicmVhaztcbiAgICAgIH1cblxuICAgICAgLy8gTm93IHdlIGNhbiBhbGxvY2F0ZSBhIGJ1ZmZlciBmb3IgdGhlIG1lc3NhZ2VcblxuICAgICAgdmFyIG1iaSA9IGVuY29kZU1CSShyZW1MZW5ndGgpOyAvLyBDb252ZXJ0IHRoZSBsZW5ndGggdG8gTVFUVCBNQkkgZm9ybWF0XG4gICAgICB2YXIgcG9zID0gbWJpLmxlbmd0aCArIDE7IC8vIE9mZnNldCBvZiBzdGFydCBvZiB2YXJpYWJsZSBoZWFkZXJcbiAgICAgIHZhciBidWZmZXIgPSBuZXcgQXJyYXlCdWZmZXIocmVtTGVuZ3RoICsgcG9zKTtcbiAgICAgIHZhciBieXRlU3RyZWFtID0gbmV3IFVpbnQ4QXJyYXkoYnVmZmVyKTsgLy8gdmlldyBpdCBhcyBhIHNlcXVlbmNlIG9mIGJ5dGVzXG5cbiAgICAgIC8vV3JpdGUgdGhlIGZpeGVkIGhlYWRlciBpbnRvIHRoZSBidWZmZXJcbiAgICAgIGJ5dGVTdHJlYW1bMF0gPSBmaXJzdDtcbiAgICAgIGJ5dGVTdHJlYW0uc2V0KG1iaSwgMSk7XG5cbiAgICAgIC8vIElmIHRoaXMgaXMgYSBQVUJMSVNIIHRoZW4gdGhlIHZhcmlhYmxlIGhlYWRlciBzdGFydHMgd2l0aCBhIHRvcGljXG4gICAgICBpZiAodGhpcy50eXBlID09IE1FU1NBR0VfVFlQRS5QVUJMSVNIKVxuICAgICAgICBwb3MgPSB3cml0ZVN0cmluZyhcbiAgICAgICAgICB0aGlzLnBheWxvYWRNZXNzYWdlLmRlc3RpbmF0aW9uTmFtZSxcbiAgICAgICAgICBkZXN0aW5hdGlvbk5hbWVMZW5ndGgsXG4gICAgICAgICAgYnl0ZVN0cmVhbSxcbiAgICAgICAgICBwb3NcbiAgICAgICAgKTtcbiAgICAgIC8vIElmIHRoaXMgaXMgYSBDT05ORUNUIHRoZW4gdGhlIHZhcmlhYmxlIGhlYWRlciBjb250YWlucyB0aGUgcHJvdG9jb2wgbmFtZS92ZXJzaW9uLCBmbGFncyBhbmQga2VlcGFsaXZlIHRpbWVcbiAgICAgIGVsc2UgaWYgKHRoaXMudHlwZSA9PSBNRVNTQUdFX1RZUEUuQ09OTkVDVCkge1xuICAgICAgICBzd2l0Y2ggKHRoaXMubXF0dFZlcnNpb24pIHtcbiAgICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgICBieXRlU3RyZWFtLnNldChNcXR0UHJvdG9JZGVudGlmaWVydjMsIHBvcyk7XG4gICAgICAgICAgICBwb3MgKz0gTXF0dFByb3RvSWRlbnRpZmllcnYzLmxlbmd0aDtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIGNhc2UgNDpcbiAgICAgICAgICAgIGJ5dGVTdHJlYW0uc2V0KE1xdHRQcm90b0lkZW50aWZpZXJ2NCwgcG9zKTtcbiAgICAgICAgICAgIHBvcyArPSBNcXR0UHJvdG9JZGVudGlmaWVydjQubGVuZ3RoO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGNvbm5lY3RGbGFncyA9IDA7XG4gICAgICAgIGlmICh0aGlzLmNsZWFuU2Vzc2lvbikgY29ubmVjdEZsYWdzID0gMHgwMjtcbiAgICAgICAgaWYgKHRoaXMud2lsbE1lc3NhZ2UgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgIGNvbm5lY3RGbGFncyB8PSAweDA0O1xuICAgICAgICAgIGNvbm5lY3RGbGFncyB8PSB0aGlzLndpbGxNZXNzYWdlLnFvcyA8PCAzO1xuICAgICAgICAgIGlmICh0aGlzLndpbGxNZXNzYWdlLnJldGFpbmVkKSB7XG4gICAgICAgICAgICBjb25uZWN0RmxhZ3MgfD0gMHgyMDtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMudXNlck5hbWUgIT09IHVuZGVmaW5lZCkgY29ubmVjdEZsYWdzIHw9IDB4ODA7XG4gICAgICAgIGlmICh0aGlzLnBhc3N3b3JkICE9PSB1bmRlZmluZWQpIGNvbm5lY3RGbGFncyB8PSAweDQwO1xuICAgICAgICBieXRlU3RyZWFtW3BvcysrXSA9IGNvbm5lY3RGbGFncztcbiAgICAgICAgcG9zID0gd3JpdGVVaW50MTYodGhpcy5rZWVwQWxpdmVJbnRlcnZhbCwgYnl0ZVN0cmVhbSwgcG9zKTtcbiAgICAgIH1cblxuICAgICAgLy8gT3V0cHV0IHRoZSBtZXNzYWdlSWRlbnRpZmllciAtIGlmIHRoZXJlIGlzIG9uZVxuICAgICAgaWYgKHRoaXMubWVzc2FnZUlkZW50aWZpZXIgIT09IHVuZGVmaW5lZClcbiAgICAgICAgcG9zID0gd3JpdGVVaW50MTYodGhpcy5tZXNzYWdlSWRlbnRpZmllciwgYnl0ZVN0cmVhbSwgcG9zKTtcblxuICAgICAgc3dpdGNoICh0aGlzLnR5cGUpIHtcbiAgICAgICAgY2FzZSBNRVNTQUdFX1RZUEUuQ09OTkVDVDpcbiAgICAgICAgICBwb3MgPSB3cml0ZVN0cmluZyhcbiAgICAgICAgICAgIHRoaXMuY2xpZW50SWQsXG4gICAgICAgICAgICBVVEY4TGVuZ3RoKHRoaXMuY2xpZW50SWQpLFxuICAgICAgICAgICAgYnl0ZVN0cmVhbSxcbiAgICAgICAgICAgIHBvc1xuICAgICAgICAgICk7XG4gICAgICAgICAgaWYgKHRoaXMud2lsbE1lc3NhZ2UgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgcG9zID0gd3JpdGVTdHJpbmcoXG4gICAgICAgICAgICAgIHRoaXMud2lsbE1lc3NhZ2UuZGVzdGluYXRpb25OYW1lLFxuICAgICAgICAgICAgICBVVEY4TGVuZ3RoKHRoaXMud2lsbE1lc3NhZ2UuZGVzdGluYXRpb25OYW1lKSxcbiAgICAgICAgICAgICAgYnl0ZVN0cmVhbSxcbiAgICAgICAgICAgICAgcG9zXG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgcG9zID0gd3JpdGVVaW50MTYoXG4gICAgICAgICAgICAgIHdpbGxNZXNzYWdlUGF5bG9hZEJ5dGVzLmJ5dGVMZW5ndGgsXG4gICAgICAgICAgICAgIGJ5dGVTdHJlYW0sXG4gICAgICAgICAgICAgIHBvc1xuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIGJ5dGVTdHJlYW0uc2V0KHdpbGxNZXNzYWdlUGF5bG9hZEJ5dGVzLCBwb3MpO1xuICAgICAgICAgICAgcG9zICs9IHdpbGxNZXNzYWdlUGF5bG9hZEJ5dGVzLmJ5dGVMZW5ndGg7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmICh0aGlzLnVzZXJOYW1lICE9PSB1bmRlZmluZWQpXG4gICAgICAgICAgICBwb3MgPSB3cml0ZVN0cmluZyhcbiAgICAgICAgICAgICAgdGhpcy51c2VyTmFtZSxcbiAgICAgICAgICAgICAgVVRGOExlbmd0aCh0aGlzLnVzZXJOYW1lKSxcbiAgICAgICAgICAgICAgYnl0ZVN0cmVhbSxcbiAgICAgICAgICAgICAgcG9zXG4gICAgICAgICAgICApO1xuICAgICAgICAgIGlmICh0aGlzLnBhc3N3b3JkICE9PSB1bmRlZmluZWQpXG4gICAgICAgICAgICBwb3MgPSB3cml0ZVN0cmluZyhcbiAgICAgICAgICAgICAgdGhpcy5wYXNzd29yZCxcbiAgICAgICAgICAgICAgVVRGOExlbmd0aCh0aGlzLnBhc3N3b3JkKSxcbiAgICAgICAgICAgICAgYnl0ZVN0cmVhbSxcbiAgICAgICAgICAgICAgcG9zXG4gICAgICAgICAgICApO1xuICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgIGNhc2UgTUVTU0FHRV9UWVBFLlBVQkxJU0g6XG4gICAgICAgICAgLy8gUFVCTElTSCBoYXMgYSB0ZXh0IG9yIGJpbmFyeSBwYXlsb2FkLCBpZiB0ZXh0IGRvIG5vdCBhZGQgYSAyIGJ5dGUgbGVuZ3RoIGZpZWxkLCBqdXN0IHRoZSBVVEYgY2hhcmFjdGVycy5cbiAgICAgICAgICBieXRlU3RyZWFtLnNldChwYXlsb2FkQnl0ZXMsIHBvcyk7XG5cbiAgICAgICAgICBicmVhaztcblxuICAgICAgICAvLyAgICBcdCAgICBjYXNlIE1FU1NBR0VfVFlQRS5QVUJSRUM6XG4gICAgICAgIC8vICAgIFx0ICAgIGNhc2UgTUVTU0FHRV9UWVBFLlBVQlJFTDpcbiAgICAgICAgLy8gICAgXHQgICAgY2FzZSBNRVNTQUdFX1RZUEUuUFVCQ09NUDpcbiAgICAgICAgLy8gICAgXHQgICAgXHRicmVhaztcblxuICAgICAgICBjYXNlIE1FU1NBR0VfVFlQRS5TVUJTQ1JJQkU6XG4gICAgICAgICAgLy8gU1VCU0NSSUJFIGhhcyBhIGxpc3Qgb2YgdG9waWMgc3RyaW5ncyBhbmQgcmVxdWVzdCBRb1NcbiAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMudG9waWNzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBwb3MgPSB3cml0ZVN0cmluZyhcbiAgICAgICAgICAgICAgdGhpcy50b3BpY3NbaV0sXG4gICAgICAgICAgICAgIHRvcGljU3RyTGVuZ3RoW2ldLFxuICAgICAgICAgICAgICBieXRlU3RyZWFtLFxuICAgICAgICAgICAgICBwb3NcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICBieXRlU3RyZWFtW3BvcysrXSA9IHRoaXMucmVxdWVzdGVkUW9zW2ldO1xuICAgICAgICAgIH1cbiAgICAgICAgICBicmVhaztcblxuICAgICAgICBjYXNlIE1FU1NBR0VfVFlQRS5VTlNVQlNDUklCRTpcbiAgICAgICAgICAvLyBVTlNVQlNDUklCRSBoYXMgYSBsaXN0IG9mIHRvcGljIHN0cmluZ3NcbiAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMudG9waWNzLmxlbmd0aDsgaSsrKVxuICAgICAgICAgICAgcG9zID0gd3JpdGVTdHJpbmcoXG4gICAgICAgICAgICAgIHRoaXMudG9waWNzW2ldLFxuICAgICAgICAgICAgICB0b3BpY1N0ckxlbmd0aFtpXSxcbiAgICAgICAgICAgICAgYnl0ZVN0cmVhbSxcbiAgICAgICAgICAgICAgcG9zXG4gICAgICAgICAgICApO1xuICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgIC8vIERvIG5vdGhpbmcuXG4gICAgICB9XG5cbiAgICAgIHJldHVybiBidWZmZXI7XG4gICAgfTtcblxuICAgIGZ1bmN0aW9uIGRlY29kZU1lc3NhZ2UoaW5wdXQsIHBvcykge1xuICAgICAgdmFyIHN0YXJ0aW5nUG9zID0gcG9zO1xuICAgICAgdmFyIGZpcnN0ID0gaW5wdXRbcG9zXTtcbiAgICAgIHZhciB0eXBlID0gZmlyc3QgPj4gNDtcbiAgICAgIHZhciBtZXNzYWdlSW5mbyA9IChmaXJzdCAmPSAweDBmKTtcbiAgICAgIHBvcyArPSAxO1xuXG4gICAgICAvLyBEZWNvZGUgdGhlIHJlbWFpbmluZyBsZW5ndGggKE1CSSBmb3JtYXQpXG5cbiAgICAgIHZhciBkaWdpdDtcbiAgICAgIHZhciByZW1MZW5ndGggPSAwO1xuICAgICAgdmFyIG11bHRpcGxpZXIgPSAxO1xuICAgICAgZG8ge1xuICAgICAgICBpZiAocG9zID09IGlucHV0Lmxlbmd0aCkge1xuICAgICAgICAgIHJldHVybiBbbnVsbCwgc3RhcnRpbmdQb3NdO1xuICAgICAgICB9XG4gICAgICAgIGRpZ2l0ID0gaW5wdXRbcG9zKytdO1xuICAgICAgICByZW1MZW5ndGggKz0gKGRpZ2l0ICYgMHg3ZikgKiBtdWx0aXBsaWVyO1xuICAgICAgICBtdWx0aXBsaWVyICo9IDEyODtcbiAgICAgIH0gd2hpbGUgKChkaWdpdCAmIDB4ODApICE9PSAwKTtcblxuICAgICAgdmFyIGVuZFBvcyA9IHBvcyArIHJlbUxlbmd0aDtcbiAgICAgIGlmIChlbmRQb3MgPiBpbnB1dC5sZW5ndGgpIHtcbiAgICAgICAgcmV0dXJuIFtudWxsLCBzdGFydGluZ1Bvc107XG4gICAgICB9XG5cbiAgICAgIHZhciB3aXJlTWVzc2FnZSA9IG5ldyBXaXJlTWVzc2FnZSh0eXBlKTtcbiAgICAgIHN3aXRjaCAodHlwZSkge1xuICAgICAgICBjYXNlIE1FU1NBR0VfVFlQRS5DT05OQUNLOlxuICAgICAgICAgIHZhciBjb25uZWN0QWNrbm93bGVkZ2VGbGFncyA9IGlucHV0W3BvcysrXTtcbiAgICAgICAgICBpZiAoY29ubmVjdEFja25vd2xlZGdlRmxhZ3MgJiAweDAxKSB3aXJlTWVzc2FnZS5zZXNzaW9uUHJlc2VudCA9IHRydWU7XG4gICAgICAgICAgd2lyZU1lc3NhZ2UucmV0dXJuQ29kZSA9IGlucHV0W3BvcysrXTtcbiAgICAgICAgICBicmVhaztcblxuICAgICAgICBjYXNlIE1FU1NBR0VfVFlQRS5QVUJMSVNIOlxuICAgICAgICAgIHZhciBxb3MgPSAobWVzc2FnZUluZm8gPj4gMSkgJiAweDAzO1xuXG4gICAgICAgICAgdmFyIGxlbiA9IHJlYWRVaW50MTYoaW5wdXQsIHBvcyk7XG4gICAgICAgICAgcG9zICs9IDI7XG4gICAgICAgICAgdmFyIHRvcGljTmFtZSA9IHBhcnNlVVRGOChpbnB1dCwgcG9zLCBsZW4pO1xuICAgICAgICAgIHBvcyArPSBsZW47XG4gICAgICAgICAgLy8gSWYgUW9TIDEgb3IgMiB0aGVyZSB3aWxsIGJlIGEgbWVzc2FnZUlkZW50aWZpZXJcbiAgICAgICAgICBpZiAocW9zID4gMCkge1xuICAgICAgICAgICAgd2lyZU1lc3NhZ2UubWVzc2FnZUlkZW50aWZpZXIgPSByZWFkVWludDE2KGlucHV0LCBwb3MpO1xuICAgICAgICAgICAgcG9zICs9IDI7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgdmFyIG1lc3NhZ2UgPSBuZXcgTWVzc2FnZShpbnB1dC5zdWJhcnJheShwb3MsIGVuZFBvcykpO1xuICAgICAgICAgIGlmICgobWVzc2FnZUluZm8gJiAweDAxKSA9PSAweDAxKSBtZXNzYWdlLnJldGFpbmVkID0gdHJ1ZTtcbiAgICAgICAgICBpZiAoKG1lc3NhZ2VJbmZvICYgMHgwOCkgPT0gMHgwOCkgbWVzc2FnZS5kdXBsaWNhdGUgPSB0cnVlO1xuICAgICAgICAgIG1lc3NhZ2UucW9zID0gcW9zO1xuICAgICAgICAgIG1lc3NhZ2UuZGVzdGluYXRpb25OYW1lID0gdG9waWNOYW1lO1xuICAgICAgICAgIHdpcmVNZXNzYWdlLnBheWxvYWRNZXNzYWdlID0gbWVzc2FnZTtcbiAgICAgICAgICBicmVhaztcblxuICAgICAgICBjYXNlIE1FU1NBR0VfVFlQRS5QVUJBQ0s6XG4gICAgICAgIGNhc2UgTUVTU0FHRV9UWVBFLlBVQlJFQzpcbiAgICAgICAgY2FzZSBNRVNTQUdFX1RZUEUuUFVCUkVMOlxuICAgICAgICBjYXNlIE1FU1NBR0VfVFlQRS5QVUJDT01QOlxuICAgICAgICBjYXNlIE1FU1NBR0VfVFlQRS5VTlNVQkFDSzpcbiAgICAgICAgICB3aXJlTWVzc2FnZS5tZXNzYWdlSWRlbnRpZmllciA9IHJlYWRVaW50MTYoaW5wdXQsIHBvcyk7XG4gICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgY2FzZSBNRVNTQUdFX1RZUEUuU1VCQUNLOlxuICAgICAgICAgIHdpcmVNZXNzYWdlLm1lc3NhZ2VJZGVudGlmaWVyID0gcmVhZFVpbnQxNihpbnB1dCwgcG9zKTtcbiAgICAgICAgICBwb3MgKz0gMjtcbiAgICAgICAgICB3aXJlTWVzc2FnZS5yZXR1cm5Db2RlID0gaW5wdXQuc3ViYXJyYXkocG9zLCBlbmRQb3MpO1xuICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgYnJlYWs7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBbd2lyZU1lc3NhZ2UsIGVuZFBvc107XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gd3JpdGVVaW50MTYoaW5wdXQsIGJ1ZmZlciwgb2Zmc2V0KSB7XG4gICAgICBidWZmZXJbb2Zmc2V0KytdID0gaW5wdXQgPj4gODsgLy9NU0JcbiAgICAgIGJ1ZmZlcltvZmZzZXQrK10gPSBpbnB1dCAlIDI1NjsgLy9MU0JcbiAgICAgIHJldHVybiBvZmZzZXQ7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gd3JpdGVTdHJpbmcoaW5wdXQsIHV0ZjhMZW5ndGgsIGJ1ZmZlciwgb2Zmc2V0KSB7XG4gICAgICBvZmZzZXQgPSB3cml0ZVVpbnQxNih1dGY4TGVuZ3RoLCBidWZmZXIsIG9mZnNldCk7XG4gICAgICBzdHJpbmdUb1VURjgoaW5wdXQsIGJ1ZmZlciwgb2Zmc2V0KTtcbiAgICAgIHJldHVybiBvZmZzZXQgKyB1dGY4TGVuZ3RoO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHJlYWRVaW50MTYoYnVmZmVyLCBvZmZzZXQpIHtcbiAgICAgIHJldHVybiAyNTYgKiBidWZmZXJbb2Zmc2V0XSArIGJ1ZmZlcltvZmZzZXQgKyAxXTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBFbmNvZGVzIGFuIE1RVFQgTXVsdGktQnl0ZSBJbnRlZ2VyXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBlbmNvZGVNQkkobnVtYmVyKSB7XG4gICAgICB2YXIgb3V0cHV0ID0gbmV3IEFycmF5KDEpO1xuICAgICAgdmFyIG51bUJ5dGVzID0gMDtcblxuICAgICAgZG8ge1xuICAgICAgICB2YXIgZGlnaXQgPSBudW1iZXIgJSAxMjg7XG4gICAgICAgIG51bWJlciA9IG51bWJlciA+PiA3O1xuICAgICAgICBpZiAobnVtYmVyID4gMCkge1xuICAgICAgICAgIGRpZ2l0IHw9IDB4ODA7XG4gICAgICAgIH1cbiAgICAgICAgb3V0cHV0W251bUJ5dGVzKytdID0gZGlnaXQ7XG4gICAgICB9IHdoaWxlIChudW1iZXIgPiAwICYmIG51bUJ5dGVzIDwgNCk7XG5cbiAgICAgIHJldHVybiBvdXRwdXQ7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVGFrZXMgYSBTdHJpbmcgYW5kIGNhbGN1bGF0ZXMgaXRzIGxlbmd0aCBpbiBieXRlcyB3aGVuIGVuY29kZWQgaW4gVVRGOC5cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIFVURjhMZW5ndGgoaW5wdXQpIHtcbiAgICAgIHZhciBvdXRwdXQgPSAwO1xuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBpbnB1dC5sZW5ndGg7IGkrKykge1xuICAgICAgICB2YXIgY2hhckNvZGUgPSBpbnB1dC5jaGFyQ29kZUF0KGkpO1xuICAgICAgICBpZiAoY2hhckNvZGUgPiAweDdmZikge1xuICAgICAgICAgIC8vIFN1cnJvZ2F0ZSBwYWlyIG1lYW5zIGl0cyBhIDQgYnl0ZSBjaGFyYWN0ZXJcbiAgICAgICAgICBpZiAoMHhkODAwIDw9IGNoYXJDb2RlICYmIGNoYXJDb2RlIDw9IDB4ZGJmZikge1xuICAgICAgICAgICAgaSsrO1xuICAgICAgICAgICAgb3V0cHV0Kys7XG4gICAgICAgICAgfVxuICAgICAgICAgIG91dHB1dCArPSAzO1xuICAgICAgICB9IGVsc2UgaWYgKGNoYXJDb2RlID4gMHg3Zikgb3V0cHV0ICs9IDI7XG4gICAgICAgIGVsc2Ugb3V0cHV0Kys7XG4gICAgICB9XG4gICAgICByZXR1cm4gb3V0cHV0O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRha2VzIGEgU3RyaW5nIGFuZCB3cml0ZXMgaXQgaW50byBhbiBhcnJheSBhcyBVVEY4IGVuY29kZWQgYnl0ZXMuXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBzdHJpbmdUb1VURjgoaW5wdXQsIG91dHB1dCwgc3RhcnQpIHtcbiAgICAgIHZhciBwb3MgPSBzdGFydDtcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgaW5wdXQubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgdmFyIGNoYXJDb2RlID0gaW5wdXQuY2hhckNvZGVBdChpKTtcblxuICAgICAgICAvLyBDaGVjayBmb3IgYSBzdXJyb2dhdGUgcGFpci5cbiAgICAgICAgaWYgKDB4ZDgwMCA8PSBjaGFyQ29kZSAmJiBjaGFyQ29kZSA8PSAweGRiZmYpIHtcbiAgICAgICAgICB2YXIgbG93Q2hhckNvZGUgPSBpbnB1dC5jaGFyQ29kZUF0KCsraSk7XG4gICAgICAgICAgaWYgKGlzTmFOKGxvd0NoYXJDb2RlKSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICAgICAgICBmb3JtYXQoRVJST1IuTUFMRk9STUVEX1VOSUNPREUsIFtjaGFyQ29kZSwgbG93Q2hhckNvZGVdKVxuICAgICAgICAgICAgKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgY2hhckNvZGUgPVxuICAgICAgICAgICAgKChjaGFyQ29kZSAtIDB4ZDgwMCkgPDwgMTApICsgKGxvd0NoYXJDb2RlIC0gMHhkYzAwKSArIDB4MTAwMDA7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoY2hhckNvZGUgPD0gMHg3Zikge1xuICAgICAgICAgIG91dHB1dFtwb3MrK10gPSBjaGFyQ29kZTtcbiAgICAgICAgfSBlbHNlIGlmIChjaGFyQ29kZSA8PSAweDdmZikge1xuICAgICAgICAgIG91dHB1dFtwb3MrK10gPSAoKGNoYXJDb2RlID4+IDYpICYgMHgxZikgfCAweGMwO1xuICAgICAgICAgIG91dHB1dFtwb3MrK10gPSAoY2hhckNvZGUgJiAweDNmKSB8IDB4ODA7XG4gICAgICAgIH0gZWxzZSBpZiAoY2hhckNvZGUgPD0gMHhmZmZmKSB7XG4gICAgICAgICAgb3V0cHV0W3BvcysrXSA9ICgoY2hhckNvZGUgPj4gMTIpICYgMHgwZikgfCAweGUwO1xuICAgICAgICAgIG91dHB1dFtwb3MrK10gPSAoKGNoYXJDb2RlID4+IDYpICYgMHgzZikgfCAweDgwO1xuICAgICAgICAgIG91dHB1dFtwb3MrK10gPSAoY2hhckNvZGUgJiAweDNmKSB8IDB4ODA7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgb3V0cHV0W3BvcysrXSA9ICgoY2hhckNvZGUgPj4gMTgpICYgMHgwNykgfCAweGYwO1xuICAgICAgICAgIG91dHB1dFtwb3MrK10gPSAoKGNoYXJDb2RlID4+IDEyKSAmIDB4M2YpIHwgMHg4MDtcbiAgICAgICAgICBvdXRwdXRbcG9zKytdID0gKChjaGFyQ29kZSA+PiA2KSAmIDB4M2YpIHwgMHg4MDtcbiAgICAgICAgICBvdXRwdXRbcG9zKytdID0gKGNoYXJDb2RlICYgMHgzZikgfCAweDgwO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gb3V0cHV0O1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHBhcnNlVVRGOChpbnB1dCwgb2Zmc2V0LCBsZW5ndGgpIHtcbiAgICAgIHZhciBvdXRwdXQgPSBcIlwiO1xuICAgICAgdmFyIHV0ZjE2O1xuICAgICAgdmFyIHBvcyA9IG9mZnNldDtcblxuICAgICAgd2hpbGUgKHBvcyA8IG9mZnNldCArIGxlbmd0aCkge1xuICAgICAgICB2YXIgYnl0ZTEgPSBpbnB1dFtwb3MrK107XG4gICAgICAgIGlmIChieXRlMSA8IDEyOCkgdXRmMTYgPSBieXRlMTtcbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgdmFyIGJ5dGUyID0gaW5wdXRbcG9zKytdIC0gMTI4O1xuICAgICAgICAgIGlmIChieXRlMiA8IDApXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgICAgICAgIGZvcm1hdChFUlJPUi5NQUxGT1JNRURfVVRGLCBbXG4gICAgICAgICAgICAgICAgYnl0ZTEudG9TdHJpbmcoMTYpLFxuICAgICAgICAgICAgICAgIGJ5dGUyLnRvU3RyaW5nKDE2KSxcbiAgICAgICAgICAgICAgICBcIlwiXG4gICAgICAgICAgICAgIF0pXG4gICAgICAgICAgICApO1xuICAgICAgICAgIGlmIChieXRlMSA8IDB4ZTApXG4gICAgICAgICAgICAvLyAyIGJ5dGUgY2hhcmFjdGVyXG4gICAgICAgICAgICB1dGYxNiA9IDY0ICogKGJ5dGUxIC0gMHhjMCkgKyBieXRlMjtcbiAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHZhciBieXRlMyA9IGlucHV0W3BvcysrXSAtIDEyODtcbiAgICAgICAgICAgIGlmIChieXRlMyA8IDApXG4gICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgICAgICAgICBmb3JtYXQoRVJST1IuTUFMRk9STUVEX1VURiwgW1xuICAgICAgICAgICAgICAgICAgYnl0ZTEudG9TdHJpbmcoMTYpLFxuICAgICAgICAgICAgICAgICAgYnl0ZTIudG9TdHJpbmcoMTYpLFxuICAgICAgICAgICAgICAgICAgYnl0ZTMudG9TdHJpbmcoMTYpXG4gICAgICAgICAgICAgICAgXSlcbiAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIGlmIChieXRlMSA8IDB4ZjApXG4gICAgICAgICAgICAgIC8vIDMgYnl0ZSBjaGFyYWN0ZXJcbiAgICAgICAgICAgICAgdXRmMTYgPSA0MDk2ICogKGJ5dGUxIC0gMHhlMCkgKyA2NCAqIGJ5dGUyICsgYnl0ZTM7XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgdmFyIGJ5dGU0ID0gaW5wdXRbcG9zKytdIC0gMTI4O1xuICAgICAgICAgICAgICBpZiAoYnl0ZTQgPCAwKVxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgICAgICAgICAgIGZvcm1hdChFUlJPUi5NQUxGT1JNRURfVVRGLCBbXG4gICAgICAgICAgICAgICAgICAgIGJ5dGUxLnRvU3RyaW5nKDE2KSxcbiAgICAgICAgICAgICAgICAgICAgYnl0ZTIudG9TdHJpbmcoMTYpLFxuICAgICAgICAgICAgICAgICAgICBieXRlMy50b1N0cmluZygxNiksXG4gICAgICAgICAgICAgICAgICAgIGJ5dGU0LnRvU3RyaW5nKDE2KVxuICAgICAgICAgICAgICAgICAgXSlcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICBpZiAoYnl0ZTEgPCAweGY4KVxuICAgICAgICAgICAgICAgIC8vIDQgYnl0ZSBjaGFyYWN0ZXJcbiAgICAgICAgICAgICAgICB1dGYxNiA9XG4gICAgICAgICAgICAgICAgICAyNjIxNDQgKiAoYnl0ZTEgLSAweGYwKSArIDQwOTYgKiBieXRlMiArIDY0ICogYnl0ZTMgKyBieXRlNDtcbiAgICAgICAgICAgICAgLy8gbG9uZ2VyIGVuY29kaW5ncyBhcmUgbm90IHN1cHBvcnRlZFxuICAgICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICAgICAgICAgICAgZm9ybWF0KEVSUk9SLk1BTEZPUk1FRF9VVEYsIFtcbiAgICAgICAgICAgICAgICAgICAgYnl0ZTEudG9TdHJpbmcoMTYpLFxuICAgICAgICAgICAgICAgICAgICBieXRlMi50b1N0cmluZygxNiksXG4gICAgICAgICAgICAgICAgICAgIGJ5dGUzLnRvU3RyaW5nKDE2KSxcbiAgICAgICAgICAgICAgICAgICAgYnl0ZTQudG9TdHJpbmcoMTYpXG4gICAgICAgICAgICAgICAgICBdKVxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHV0ZjE2ID4gMHhmZmZmKSB7XG4gICAgICAgICAgLy8gNCBieXRlIGNoYXJhY3RlciAtIGV4cHJlc3MgYXMgYSBzdXJyb2dhdGUgcGFpclxuICAgICAgICAgIHV0ZjE2IC09IDB4MTAwMDA7XG4gICAgICAgICAgb3V0cHV0ICs9IFN0cmluZy5mcm9tQ2hhckNvZGUoMHhkODAwICsgKHV0ZjE2ID4+IDEwKSk7IC8vIGxlYWQgY2hhcmFjdGVyXG4gICAgICAgICAgdXRmMTYgPSAweGRjMDAgKyAodXRmMTYgJiAweDNmZik7IC8vIHRyYWlsIGNoYXJhY3RlclxuICAgICAgICB9XG4gICAgICAgIG91dHB1dCArPSBTdHJpbmcuZnJvbUNoYXJDb2RlKHV0ZjE2KTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBvdXRwdXQ7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmVwZWF0IGtlZXBhbGl2ZSByZXF1ZXN0cywgbW9uaXRvciByZXNwb25zZXMuXG4gICAgICogQGlnbm9yZVxuICAgICAqL1xuICAgIHZhciBQaW5nZXIgPSBmdW5jdGlvbihjbGllbnQsIGtlZXBBbGl2ZUludGVydmFsKSB7XG4gICAgICB0aGlzLl9jbGllbnQgPSBjbGllbnQ7XG4gICAgICB0aGlzLl9rZWVwQWxpdmVJbnRlcnZhbCA9IGtlZXBBbGl2ZUludGVydmFsICogMTAwMDtcbiAgICAgIHRoaXMuaXNSZXNldCA9IGZhbHNlO1xuXG4gICAgICB2YXIgcGluZ1JlcSA9IG5ldyBXaXJlTWVzc2FnZShNRVNTQUdFX1RZUEUuUElOR1JFUSkuZW5jb2RlKCk7XG5cbiAgICAgIHZhciBkb1RpbWVvdXQgPSBmdW5jdGlvbihwaW5nZXIpIHtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgICAgICAgIHJldHVybiBkb1BpbmcuYXBwbHkocGluZ2VyKTtcbiAgICAgICAgfTtcbiAgICAgIH07XG5cbiAgICAgIC8qKiBAaWdub3JlICovXG4gICAgICB2YXIgZG9QaW5nID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIGlmICghdGhpcy5pc1Jlc2V0KSB7XG4gICAgICAgICAgdGhpcy5fY2xpZW50Ll90cmFjZShcIlBpbmdlci5kb1BpbmdcIiwgXCJUaW1lZCBvdXRcIik7XG4gICAgICAgICAgdGhpcy5fY2xpZW50Ll9kaXNjb25uZWN0ZWQoXG4gICAgICAgICAgICBFUlJPUi5QSU5HX1RJTUVPVVQuY29kZSxcbiAgICAgICAgICAgIGZvcm1hdChFUlJPUi5QSU5HX1RJTUVPVVQpXG4gICAgICAgICAgKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aGlzLmlzUmVzZXQgPSBmYWxzZTtcbiAgICAgICAgICB0aGlzLl9jbGllbnQuX3RyYWNlKFwiUGluZ2VyLmRvUGluZ1wiLCBcInNlbmQgUElOR1JFUVwiKTtcbiAgICAgICAgICB0aGlzLl9jbGllbnQuc29ja2V0LnNlbmQocGluZ1JlcSk7XG4gICAgICAgICAgdGhpcy50aW1lb3V0ID0gc2V0VGltZW91dChkb1RpbWVvdXQodGhpcyksIHRoaXMuX2tlZXBBbGl2ZUludGVydmFsKTtcbiAgICAgICAgfVxuICAgICAgfTtcblxuICAgICAgdGhpcy5yZXNldCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICB0aGlzLmlzUmVzZXQgPSB0cnVlO1xuICAgICAgICBjbGVhclRpbWVvdXQodGhpcy50aW1lb3V0KTtcbiAgICAgICAgaWYgKHRoaXMuX2tlZXBBbGl2ZUludGVydmFsID4gMClcbiAgICAgICAgICB0aGlzLnRpbWVvdXQgPSBzZXRUaW1lb3V0KGRvVGltZW91dCh0aGlzKSwgdGhpcy5fa2VlcEFsaXZlSW50ZXJ2YWwpO1xuICAgICAgfTtcblxuICAgICAgdGhpcy5jYW5jZWwgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMudGltZW91dCk7XG4gICAgICB9O1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBNb25pdG9yIHJlcXVlc3QgY29tcGxldGlvbi5cbiAgICAgKiBAaWdub3JlXG4gICAgICovXG4gICAgdmFyIFRpbWVvdXQgPSBmdW5jdGlvbihjbGllbnQsIHRpbWVvdXRTZWNvbmRzLCBhY3Rpb24sIGFyZ3MpIHtcbiAgICAgIGlmICghdGltZW91dFNlY29uZHMpIHRpbWVvdXRTZWNvbmRzID0gMzA7XG5cbiAgICAgIHZhciBkb1RpbWVvdXQgPSBmdW5jdGlvbihhY3Rpb24sIGNsaWVudCwgYXJncykge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgcmV0dXJuIGFjdGlvbi5hcHBseShjbGllbnQsIGFyZ3MpO1xuICAgICAgICB9O1xuICAgICAgfTtcbiAgICAgIHRoaXMudGltZW91dCA9IHNldFRpbWVvdXQoXG4gICAgICAgIGRvVGltZW91dChhY3Rpb24sIGNsaWVudCwgYXJncyksXG4gICAgICAgIHRpbWVvdXRTZWNvbmRzICogMTAwMFxuICAgICAgKTtcblxuICAgICAgdGhpcy5jYW5jZWwgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMudGltZW91dCk7XG4gICAgICB9O1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBJbnRlcm5hbCBpbXBsZW1lbnRhdGlvbiBvZiB0aGUgV2Vic29ja2V0cyBNUVRUIFYzLjEgY2xpZW50LlxuICAgICAqXG4gICAgICogQG5hbWUgUGFoby5DbGllbnRJbXBsIEBjb25zdHJ1Y3RvclxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBob3N0IHRoZSBETlMgbmFtZW9mIHRoZSB3ZWJTb2NrZXQgaG9zdC5cbiAgICAgKiBAcGFyYW0ge051bWJlcn0gcG9ydCB0aGUgcG9ydCBudW1iZXIgZm9yIHRoYXQgaG9zdC5cbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gY2xpZW50SWQgdGhlIE1RIGNsaWVudCBpZGVudGlmaWVyLlxuICAgICAqL1xuICAgIHZhciBDbGllbnRJbXBsID0gZnVuY3Rpb24odXJpLCBob3N0LCBwb3J0LCBwYXRoLCBjbGllbnRJZCkge1xuICAgICAgLy8gQ2hlY2sgZGVwZW5kZW5jaWVzIGFyZSBzYXRpc2ZpZWQgaW4gdGhpcyBicm93c2VyLlxuICAgICAgaWYgKCEoXCJXZWJTb2NrZXRcIiBpbiBnbG9iYWwgJiYgZ2xvYmFsLldlYlNvY2tldCAhPT0gbnVsbCkpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGZvcm1hdChFUlJPUi5VTlNVUFBPUlRFRCwgW1wiV2ViU29ja2V0XCJdKSk7XG4gICAgICB9XG4gICAgICBpZiAoIShcIkFycmF5QnVmZmVyXCIgaW4gZ2xvYmFsICYmIGdsb2JhbC5BcnJheUJ1ZmZlciAhPT0gbnVsbCkpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGZvcm1hdChFUlJPUi5VTlNVUFBPUlRFRCwgW1wiQXJyYXlCdWZmZXJcIl0pKTtcbiAgICAgIH1cbiAgICAgIHRoaXMuX3RyYWNlKFwiUGFoby5DbGllbnRcIiwgdXJpLCBob3N0LCBwb3J0LCBwYXRoLCBjbGllbnRJZCk7XG5cbiAgICAgIHRoaXMuaG9zdCA9IGhvc3Q7XG4gICAgICB0aGlzLnBvcnQgPSBwb3J0O1xuICAgICAgdGhpcy5wYXRoID0gcGF0aDtcbiAgICAgIHRoaXMudXJpID0gdXJpO1xuICAgICAgdGhpcy5jbGllbnRJZCA9IGNsaWVudElkO1xuICAgICAgdGhpcy5fd3N1cmkgPSBudWxsO1xuXG4gICAgICAvLyBMb2NhbCBzdG9yYWdla2V5cyBhcmUgcXVhbGlmaWVkIHdpdGggdGhlIGZvbGxvd2luZyBzdHJpbmcuXG4gICAgICAvLyBUaGUgY29uZGl0aW9uYWwgaW5jbHVzaW9uIG9mIHBhdGggaW4gdGhlIGtleSBpcyBmb3IgYmFja3dhcmRcbiAgICAgIC8vIGNvbXBhdGliaWxpdHkgdG8gd2hlbiB0aGUgcGF0aCB3YXMgbm90IGNvbmZpZ3VyYWJsZSBhbmQgYXNzdW1lZCB0b1xuICAgICAgLy8gYmUgL21xdHRcbiAgICAgIHRoaXMuX2xvY2FsS2V5ID1cbiAgICAgICAgaG9zdCArXG4gICAgICAgIFwiOlwiICtcbiAgICAgICAgcG9ydCArXG4gICAgICAgIChwYXRoICE9IFwiL21xdHRcIiA/IFwiOlwiICsgcGF0aCA6IFwiXCIpICtcbiAgICAgICAgXCI6XCIgK1xuICAgICAgICBjbGllbnRJZCArXG4gICAgICAgIFwiOlwiO1xuXG4gICAgICAvLyBDcmVhdGUgcHJpdmF0ZSBpbnN0YW5jZS1vbmx5IG1lc3NhZ2UgcXVldWVcbiAgICAgIC8vIEludGVybmFsIHF1ZXVlIG9mIG1lc3NhZ2VzIHRvIGJlIHNlbnQsIGluIHNlbmRpbmcgb3JkZXIuXG4gICAgICB0aGlzLl9tc2dfcXVldWUgPSBbXTtcbiAgICAgIHRoaXMuX2J1ZmZlcmVkX21zZ19xdWV1ZSA9IFtdO1xuXG4gICAgICAvLyBNZXNzYWdlcyB3ZSBoYXZlIHNlbnQgYW5kIGFyZSBleHBlY3RpbmcgYSByZXNwb25zZSBmb3IsIGluZGV4ZWQgYnkgdGhlaXIgcmVzcGVjdGl2ZSBtZXNzYWdlIGlkcy5cbiAgICAgIHRoaXMuX3NlbnRNZXNzYWdlcyA9IHt9O1xuXG4gICAgICAvLyBNZXNzYWdlcyB3ZSBoYXZlIHJlY2VpdmVkIGFuZCBhY2tub3dsZWdlZCBhbmQgYXJlIGV4cGVjdGluZyBhIGNvbmZpcm0gbWVzc2FnZSBmb3JcbiAgICAgIC8vIGluZGV4ZWQgYnkgdGhlaXIgcmVzcGVjdGl2ZSBtZXNzYWdlIGlkcy5cbiAgICAgIHRoaXMuX3JlY2VpdmVkTWVzc2FnZXMgPSB7fTtcblxuICAgICAgLy8gSW50ZXJuYWwgbGlzdCBvZiBjYWxsYmFja3MgdG8gYmUgZXhlY3V0ZWQgd2hlbiBtZXNzYWdlc1xuICAgICAgLy8gaGF2ZSBiZWVuIHN1Y2Nlc3NmdWxseSBzZW50IG92ZXIgd2ViIHNvY2tldCwgZS5nLiBkaXNjb25uZWN0XG4gICAgICAvLyB3aGVuIGl0IGRvZXNuJ3QgaGF2ZSB0byB3YWl0IGZvciBBQ0ssIGp1c3QgbWVzc2FnZSBpcyBkaXNwYXRjaGVkLlxuICAgICAgdGhpcy5fbm90aWZ5X21zZ19zZW50ID0ge307XG5cbiAgICAgIC8vIFVuaXF1ZSBpZGVudGlmaWVyIGZvciBTRU5EIG1lc3NhZ2VzLCBpbmNyZW1lbnRpbmdcbiAgICAgIC8vIGNvdW50ZXIgYXMgbWVzc2FnZXMgYXJlIHNlbnQuXG4gICAgICB0aGlzLl9tZXNzYWdlX2lkZW50aWZpZXIgPSAxO1xuXG4gICAgICAvLyBVc2VkIHRvIGRldGVybWluZSB0aGUgdHJhbnNtaXNzaW9uIHNlcXVlbmNlIG9mIHN0b3JlZCBzZW50IG1lc3NhZ2VzLlxuICAgICAgdGhpcy5fc2VxdWVuY2UgPSAwO1xuXG4gICAgICAvLyBMb2FkIHRoZSBsb2NhbCBzdGF0ZSwgaWYgYW55LCBmcm9tIHRoZSBzYXZlZCB2ZXJzaW9uLCBvbmx5IHJlc3RvcmUgc3RhdGUgcmVsZXZhbnQgdG8gdGhpcyBjbGllbnQuXG4gICAgICBmb3IgKHZhciBrZXkgaW4gbG9jYWxTdG9yYWdlKVxuICAgICAgICBpZiAoXG4gICAgICAgICAga2V5LmluZGV4T2YoXCJTZW50OlwiICsgdGhpcy5fbG9jYWxLZXkpID09PSAwIHx8XG4gICAgICAgICAga2V5LmluZGV4T2YoXCJSZWNlaXZlZDpcIiArIHRoaXMuX2xvY2FsS2V5KSA9PT0gMFxuICAgICAgICApXG4gICAgICAgICAgdGhpcy5yZXN0b3JlKGtleSk7XG4gICAgfTtcblxuICAgIC8vIE1lc3NhZ2luZyBDbGllbnQgcHVibGljIGluc3RhbmNlIG1lbWJlcnMuXG4gICAgQ2xpZW50SW1wbC5wcm90b3R5cGUuaG9zdCA9IG51bGw7XG4gICAgQ2xpZW50SW1wbC5wcm90b3R5cGUucG9ydCA9IG51bGw7XG4gICAgQ2xpZW50SW1wbC5wcm90b3R5cGUucGF0aCA9IG51bGw7XG4gICAgQ2xpZW50SW1wbC5wcm90b3R5cGUudXJpID0gbnVsbDtcbiAgICBDbGllbnRJbXBsLnByb3RvdHlwZS5jbGllbnRJZCA9IG51bGw7XG5cbiAgICAvLyBNZXNzYWdpbmcgQ2xpZW50IHByaXZhdGUgaW5zdGFuY2UgbWVtYmVycy5cbiAgICBDbGllbnRJbXBsLnByb3RvdHlwZS5zb2NrZXQgPSBudWxsO1xuICAgIC8qIHRydWUgb25jZSB3ZSBoYXZlIHJlY2VpdmVkIGFuIGFja25vd2xlZGdlbWVudCB0byBhIENPTk5FQ1QgcGFja2V0LiAqL1xuICAgIENsaWVudEltcGwucHJvdG90eXBlLmNvbm5lY3RlZCA9IGZhbHNlO1xuICAgIC8qIFRoZSBsYXJnZXN0IG1lc3NhZ2UgaWRlbnRpZmllciBhbGxvd2VkLCBtYXkgbm90IGJlIGxhcmdlciB0aGFuIDIqKjE2IGJ1dFxuICAgICAqIGlmIHNldCBzbWFsbGVyIHJlZHVjZXMgdGhlIG1heGltdW0gbnVtYmVyIG9mIG91dGJvdW5kIG1lc3NhZ2VzIGFsbG93ZWQuXG4gICAgICovXG4gICAgQ2xpZW50SW1wbC5wcm90b3R5cGUubWF4TWVzc2FnZUlkZW50aWZpZXIgPSA2NTUzNjtcbiAgICBDbGllbnRJbXBsLnByb3RvdHlwZS5jb25uZWN0T3B0aW9ucyA9IG51bGw7XG4gICAgQ2xpZW50SW1wbC5wcm90b3R5cGUuaG9zdEluZGV4ID0gbnVsbDtcbiAgICBDbGllbnRJbXBsLnByb3RvdHlwZS5vbkNvbm5lY3RlZCA9IG51bGw7XG4gICAgQ2xpZW50SW1wbC5wcm90b3R5cGUub25Db25uZWN0aW9uTG9zdCA9IG51bGw7XG4gICAgQ2xpZW50SW1wbC5wcm90b3R5cGUub25NZXNzYWdlRGVsaXZlcmVkID0gbnVsbDtcbiAgICBDbGllbnRJbXBsLnByb3RvdHlwZS5vbk1lc3NhZ2VBcnJpdmVkID0gbnVsbDtcbiAgICBDbGllbnRJbXBsLnByb3RvdHlwZS50cmFjZUZ1bmN0aW9uID0gbnVsbDtcbiAgICBDbGllbnRJbXBsLnByb3RvdHlwZS5fbXNnX3F1ZXVlID0gbnVsbDtcbiAgICBDbGllbnRJbXBsLnByb3RvdHlwZS5fYnVmZmVyZWRfbXNnX3F1ZXVlID0gbnVsbDtcbiAgICBDbGllbnRJbXBsLnByb3RvdHlwZS5fY29ubmVjdFRpbWVvdXQgPSBudWxsO1xuICAgIC8qIFRoZSBzZW5kUGluZ2VyIG1vbml0b3JzIGhvdyBsb25nIHdlIGFsbG93IGJlZm9yZSB3ZSBzZW5kIGRhdGEgdG8gcHJvdmUgdG8gdGhlIHNlcnZlciB0aGF0IHdlIGFyZSBhbGl2ZS4gKi9cbiAgICBDbGllbnRJbXBsLnByb3RvdHlwZS5zZW5kUGluZ2VyID0gbnVsbDtcbiAgICAvKiBUaGUgcmVjZWl2ZVBpbmdlciBtb25pdG9ycyBob3cgbG9uZyB3ZSBhbGxvdyBiZWZvcmUgd2UgcmVxdWlyZSBldmlkZW5jZSB0aGF0IHRoZSBzZXJ2ZXIgaXMgYWxpdmUuICovXG4gICAgQ2xpZW50SW1wbC5wcm90b3R5cGUucmVjZWl2ZVBpbmdlciA9IG51bGw7XG4gICAgQ2xpZW50SW1wbC5wcm90b3R5cGUuX3JlY29ubmVjdEludGVydmFsID0gMTsgLy8gUmVjb25uZWN0IERlbGF5LCBzdGFydHMgYXQgMSBzZWNvbmRcbiAgICBDbGllbnRJbXBsLnByb3RvdHlwZS5fcmVjb25uZWN0aW5nID0gZmFsc2U7XG4gICAgQ2xpZW50SW1wbC5wcm90b3R5cGUuX3JlY29ubmVjdFRpbWVvdXQgPSBudWxsO1xuICAgIENsaWVudEltcGwucHJvdG90eXBlLmRpc2Nvbm5lY3RlZFB1Ymxpc2hpbmcgPSBmYWxzZTtcbiAgICBDbGllbnRJbXBsLnByb3RvdHlwZS5kaXNjb25uZWN0ZWRCdWZmZXJTaXplID0gNTAwMDtcblxuICAgIENsaWVudEltcGwucHJvdG90eXBlLnJlY2VpdmVCdWZmZXIgPSBudWxsO1xuXG4gICAgQ2xpZW50SW1wbC5wcm90b3R5cGUuX3RyYWNlQnVmZmVyID0gbnVsbDtcbiAgICBDbGllbnRJbXBsLnByb3RvdHlwZS5fTUFYX1RSQUNFX0VOVFJJRVMgPSAxMDA7XG5cbiAgICBDbGllbnRJbXBsLnByb3RvdHlwZS5jb25uZWN0ID0gZnVuY3Rpb24oY29ubmVjdE9wdGlvbnMpIHtcbiAgICAgIHZhciBjb25uZWN0T3B0aW9uc01hc2tlZCA9IHRoaXMuX3RyYWNlTWFzayhjb25uZWN0T3B0aW9ucywgXCJwYXNzd29yZFwiKTtcbiAgICAgIHRoaXMuX3RyYWNlKFxuICAgICAgICBcIkNsaWVudC5jb25uZWN0XCIsXG4gICAgICAgIGNvbm5lY3RPcHRpb25zTWFza2VkLFxuICAgICAgICB0aGlzLnNvY2tldCxcbiAgICAgICAgdGhpcy5jb25uZWN0ZWRcbiAgICAgICk7XG5cbiAgICAgIGlmICh0aGlzLmNvbm5lY3RlZClcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGZvcm1hdChFUlJPUi5JTlZBTElEX1NUQVRFLCBbXCJhbHJlYWR5IGNvbm5lY3RlZFwiXSkpO1xuICAgICAgaWYgKHRoaXMuc29ja2V0KVxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoZm9ybWF0KEVSUk9SLklOVkFMSURfU1RBVEUsIFtcImFscmVhZHkgY29ubmVjdGVkXCJdKSk7XG5cbiAgICAgIGlmICh0aGlzLl9yZWNvbm5lY3RpbmcpIHtcbiAgICAgICAgLy8gY29ubmVjdCgpIGZ1bmN0aW9uIGlzIGNhbGxlZCB3aGlsZSByZWNvbm5lY3QgaXMgaW4gcHJvZ3Jlc3MuXG4gICAgICAgIC8vIFRlcm1pbmF0ZSB0aGUgYXV0byByZWNvbm5lY3QgcHJvY2VzcyB0byB1c2UgbmV3IGNvbm5lY3Qgb3B0aW9ucy5cbiAgICAgICAgdGhpcy5fcmVjb25uZWN0VGltZW91dC5jYW5jZWwoKTtcbiAgICAgICAgdGhpcy5fcmVjb25uZWN0VGltZW91dCA9IG51bGw7XG4gICAgICAgIHRoaXMuX3JlY29ubmVjdGluZyA9IGZhbHNlO1xuICAgICAgfVxuXG4gICAgICB0aGlzLmNvbm5lY3RPcHRpb25zID0gY29ubmVjdE9wdGlvbnM7XG4gICAgICB0aGlzLl9yZWNvbm5lY3RJbnRlcnZhbCA9IDE7XG4gICAgICB0aGlzLl9yZWNvbm5lY3RpbmcgPSBmYWxzZTtcbiAgICAgIGlmIChjb25uZWN0T3B0aW9ucy51cmlzKSB7XG4gICAgICAgIHRoaXMuaG9zdEluZGV4ID0gMDtcbiAgICAgICAgdGhpcy5fZG9Db25uZWN0KGNvbm5lY3RPcHRpb25zLnVyaXNbMF0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5fZG9Db25uZWN0KHRoaXMudXJpKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgQ2xpZW50SW1wbC5wcm90b3R5cGUuc3Vic2NyaWJlID0gZnVuY3Rpb24oZmlsdGVyLCBzdWJzY3JpYmVPcHRpb25zKSB7XG4gICAgICB0aGlzLl90cmFjZShcIkNsaWVudC5zdWJzY3JpYmVcIiwgZmlsdGVyLCBzdWJzY3JpYmVPcHRpb25zKTtcblxuICAgICAgaWYgKCF0aGlzLmNvbm5lY3RlZClcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGZvcm1hdChFUlJPUi5JTlZBTElEX1NUQVRFLCBbXCJub3QgY29ubmVjdGVkXCJdKSk7XG5cbiAgICAgIHZhciB3aXJlTWVzc2FnZSA9IG5ldyBXaXJlTWVzc2FnZShNRVNTQUdFX1RZUEUuU1VCU0NSSUJFKTtcbiAgICAgIHdpcmVNZXNzYWdlLnRvcGljcyA9IGZpbHRlci5jb25zdHJ1Y3RvciA9PT0gQXJyYXkgPyBmaWx0ZXIgOiBbZmlsdGVyXTtcbiAgICAgIGlmIChzdWJzY3JpYmVPcHRpb25zLnFvcyA9PT0gdW5kZWZpbmVkKSBzdWJzY3JpYmVPcHRpb25zLnFvcyA9IDA7XG4gICAgICB3aXJlTWVzc2FnZS5yZXF1ZXN0ZWRRb3MgPSBbXTtcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgd2lyZU1lc3NhZ2UudG9waWNzLmxlbmd0aDsgaSsrKVxuICAgICAgICB3aXJlTWVzc2FnZS5yZXF1ZXN0ZWRRb3NbaV0gPSBzdWJzY3JpYmVPcHRpb25zLnFvcztcblxuICAgICAgaWYgKHN1YnNjcmliZU9wdGlvbnMub25TdWNjZXNzKSB7XG4gICAgICAgIHdpcmVNZXNzYWdlLm9uU3VjY2VzcyA9IGZ1bmN0aW9uKGdyYW50ZWRRb3MpIHtcbiAgICAgICAgICBzdWJzY3JpYmVPcHRpb25zLm9uU3VjY2Vzcyh7XG4gICAgICAgICAgICBpbnZvY2F0aW9uQ29udGV4dDogc3Vic2NyaWJlT3B0aW9ucy5pbnZvY2F0aW9uQ29udGV4dCxcbiAgICAgICAgICAgIGdyYW50ZWRRb3M6IGdyYW50ZWRRb3NcbiAgICAgICAgICB9KTtcbiAgICAgICAgfTtcbiAgICAgIH1cblxuICAgICAgaWYgKHN1YnNjcmliZU9wdGlvbnMub25GYWlsdXJlKSB7XG4gICAgICAgIHdpcmVNZXNzYWdlLm9uRmFpbHVyZSA9IGZ1bmN0aW9uKGVycm9yQ29kZSkge1xuICAgICAgICAgIHN1YnNjcmliZU9wdGlvbnMub25GYWlsdXJlKHtcbiAgICAgICAgICAgIGludm9jYXRpb25Db250ZXh0OiBzdWJzY3JpYmVPcHRpb25zLmludm9jYXRpb25Db250ZXh0LFxuICAgICAgICAgICAgZXJyb3JDb2RlOiBlcnJvckNvZGUsXG4gICAgICAgICAgICBlcnJvck1lc3NhZ2U6IGZvcm1hdChlcnJvckNvZGUpXG4gICAgICAgICAgfSk7XG4gICAgICAgIH07XG4gICAgICB9XG5cbiAgICAgIGlmIChzdWJzY3JpYmVPcHRpb25zLnRpbWVvdXQpIHtcbiAgICAgICAgd2lyZU1lc3NhZ2UudGltZU91dCA9IG5ldyBUaW1lb3V0KFxuICAgICAgICAgIHRoaXMsXG4gICAgICAgICAgc3Vic2NyaWJlT3B0aW9ucy50aW1lb3V0LFxuICAgICAgICAgIHN1YnNjcmliZU9wdGlvbnMub25GYWlsdXJlLFxuICAgICAgICAgIFtcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgaW52b2NhdGlvbkNvbnRleHQ6IHN1YnNjcmliZU9wdGlvbnMuaW52b2NhdGlvbkNvbnRleHQsXG4gICAgICAgICAgICAgIGVycm9yQ29kZTogRVJST1IuU1VCU0NSSUJFX1RJTUVPVVQuY29kZSxcbiAgICAgICAgICAgICAgZXJyb3JNZXNzYWdlOiBmb3JtYXQoRVJST1IuU1VCU0NSSUJFX1RJTUVPVVQpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgXVxuICAgICAgICApO1xuICAgICAgfVxuXG4gICAgICAvLyBBbGwgc3Vic2NyaXB0aW9ucyByZXR1cm4gYSBTVUJBQ0suXG4gICAgICB0aGlzLl9yZXF1aXJlc19hY2sod2lyZU1lc3NhZ2UpO1xuICAgICAgdGhpcy5fc2NoZWR1bGVfbWVzc2FnZSh3aXJlTWVzc2FnZSk7XG4gICAgfTtcblxuICAgIC8qKiBAaWdub3JlICovXG4gICAgQ2xpZW50SW1wbC5wcm90b3R5cGUudW5zdWJzY3JpYmUgPSBmdW5jdGlvbihmaWx0ZXIsIHVuc3Vic2NyaWJlT3B0aW9ucykge1xuICAgICAgdGhpcy5fdHJhY2UoXCJDbGllbnQudW5zdWJzY3JpYmVcIiwgZmlsdGVyLCB1bnN1YnNjcmliZU9wdGlvbnMpO1xuXG4gICAgICBpZiAoIXRoaXMuY29ubmVjdGVkKVxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoZm9ybWF0KEVSUk9SLklOVkFMSURfU1RBVEUsIFtcIm5vdCBjb25uZWN0ZWRcIl0pKTtcblxuICAgICAgdmFyIHdpcmVNZXNzYWdlID0gbmV3IFdpcmVNZXNzYWdlKE1FU1NBR0VfVFlQRS5VTlNVQlNDUklCRSk7XG4gICAgICB3aXJlTWVzc2FnZS50b3BpY3MgPSBmaWx0ZXIuY29uc3RydWN0b3IgPT09IEFycmF5ID8gZmlsdGVyIDogW2ZpbHRlcl07XG5cbiAgICAgIGlmICh1bnN1YnNjcmliZU9wdGlvbnMub25TdWNjZXNzKSB7XG4gICAgICAgIHdpcmVNZXNzYWdlLmNhbGxiYWNrID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgdW5zdWJzY3JpYmVPcHRpb25zLm9uU3VjY2Vzcyh7XG4gICAgICAgICAgICBpbnZvY2F0aW9uQ29udGV4dDogdW5zdWJzY3JpYmVPcHRpb25zLmludm9jYXRpb25Db250ZXh0XG4gICAgICAgICAgfSk7XG4gICAgICAgIH07XG4gICAgICB9XG4gICAgICBpZiAodW5zdWJzY3JpYmVPcHRpb25zLnRpbWVvdXQpIHtcbiAgICAgICAgd2lyZU1lc3NhZ2UudGltZU91dCA9IG5ldyBUaW1lb3V0KFxuICAgICAgICAgIHRoaXMsXG4gICAgICAgICAgdW5zdWJzY3JpYmVPcHRpb25zLnRpbWVvdXQsXG4gICAgICAgICAgdW5zdWJzY3JpYmVPcHRpb25zLm9uRmFpbHVyZSxcbiAgICAgICAgICBbXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIGludm9jYXRpb25Db250ZXh0OiB1bnN1YnNjcmliZU9wdGlvbnMuaW52b2NhdGlvbkNvbnRleHQsXG4gICAgICAgICAgICAgIGVycm9yQ29kZTogRVJST1IuVU5TVUJTQ1JJQkVfVElNRU9VVC5jb2RlLFxuICAgICAgICAgICAgICBlcnJvck1lc3NhZ2U6IGZvcm1hdChFUlJPUi5VTlNVQlNDUklCRV9USU1FT1VUKVxuICAgICAgICAgICAgfVxuICAgICAgICAgIF1cbiAgICAgICAgKTtcbiAgICAgIH1cblxuICAgICAgLy8gQWxsIHVuc3Vic2NyaWJlcyByZXR1cm4gYSBTVUJBQ0suXG4gICAgICB0aGlzLl9yZXF1aXJlc19hY2sod2lyZU1lc3NhZ2UpO1xuICAgICAgdGhpcy5fc2NoZWR1bGVfbWVzc2FnZSh3aXJlTWVzc2FnZSk7XG4gICAgfTtcblxuICAgIENsaWVudEltcGwucHJvdG90eXBlLnNlbmQgPSBmdW5jdGlvbihtZXNzYWdlKSB7XG4gICAgICB0aGlzLl90cmFjZShcIkNsaWVudC5zZW5kXCIsIG1lc3NhZ2UpO1xuXG4gICAgICB2YXIgd2lyZU1lc3NhZ2UgPSBuZXcgV2lyZU1lc3NhZ2UoTUVTU0FHRV9UWVBFLlBVQkxJU0gpO1xuICAgICAgd2lyZU1lc3NhZ2UucGF5bG9hZE1lc3NhZ2UgPSBtZXNzYWdlO1xuXG4gICAgICBpZiAodGhpcy5jb25uZWN0ZWQpIHtcbiAgICAgICAgLy8gTWFyayBxb3MgMSAmIDIgbWVzc2FnZSBhcyBcIkFDSyByZXF1aXJlZFwiXG4gICAgICAgIC8vIEZvciBxb3MgMCBtZXNzYWdlLCBpbnZva2Ugb25NZXNzYWdlRGVsaXZlcmVkIGNhbGxiYWNrIGlmIHRoZXJlIGlzIG9uZS5cbiAgICAgICAgLy8gVGhlbiBzY2hlZHVsZSB0aGUgbWVzc2FnZS5cbiAgICAgICAgaWYgKG1lc3NhZ2UucW9zID4gMCkge1xuICAgICAgICAgIHRoaXMuX3JlcXVpcmVzX2Fjayh3aXJlTWVzc2FnZSk7XG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy5vbk1lc3NhZ2VEZWxpdmVyZWQpIHtcbiAgICAgICAgICB0aGlzLl9ub3RpZnlfbXNnX3NlbnRbd2lyZU1lc3NhZ2VdID0gdGhpcy5vbk1lc3NhZ2VEZWxpdmVyZWQoXG4gICAgICAgICAgICB3aXJlTWVzc2FnZS5wYXlsb2FkTWVzc2FnZVxuICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fc2NoZWR1bGVfbWVzc2FnZSh3aXJlTWVzc2FnZSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBDdXJyZW50bHkgZGlzY29ubmVjdGVkLCB3aWxsIG5vdCBzY2hlZHVsZSB0aGlzIG1lc3NhZ2VcbiAgICAgICAgLy8gQ2hlY2sgaWYgcmVjb25uZWN0aW5nIGlzIGluIHByb2dyZXNzIGFuZCBkaXNjb25uZWN0ZWQgcHVibGlzaCBpcyBlbmFibGVkLlxuICAgICAgICBpZiAodGhpcy5fcmVjb25uZWN0aW5nICYmIHRoaXMuZGlzY29ubmVjdGVkUHVibGlzaGluZykge1xuICAgICAgICAgIC8vIENoZWNrIHRoZSBsaW1pdCB3aGljaCBpbmNsdWRlIHRoZSBcInJlcXVpcmVkIEFDS1wiIG1lc3NhZ2VzXG4gICAgICAgICAgdmFyIG1lc3NhZ2VDb3VudCA9XG4gICAgICAgICAgICBPYmplY3Qua2V5cyh0aGlzLl9zZW50TWVzc2FnZXMpLmxlbmd0aCArXG4gICAgICAgICAgICB0aGlzLl9idWZmZXJlZF9tc2dfcXVldWUubGVuZ3RoO1xuICAgICAgICAgIGlmIChtZXNzYWdlQ291bnQgPiB0aGlzLmRpc2Nvbm5lY3RlZEJ1ZmZlclNpemUpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgICAgICAgZm9ybWF0KEVSUk9SLkJVRkZFUl9GVUxMLCBbdGhpcy5kaXNjb25uZWN0ZWRCdWZmZXJTaXplXSlcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGlmIChtZXNzYWdlLnFvcyA+IDApIHtcbiAgICAgICAgICAgICAgLy8gTWFyayB0aGlzIG1lc3NhZ2UgYXMgXCJBQ0sgcmVxdWlyZWRcIlxuICAgICAgICAgICAgICB0aGlzLl9yZXF1aXJlc19hY2sod2lyZU1lc3NhZ2UpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgd2lyZU1lc3NhZ2Uuc2VxdWVuY2UgPSArK3RoaXMuX3NlcXVlbmNlO1xuICAgICAgICAgICAgICAvLyBBZGQgbWVzc2FnZXMgaW4gZmlmbyBvcmRlciB0byBhcnJheSwgYnkgYWRkaW5nIHRvIHN0YXJ0XG4gICAgICAgICAgICAgIHRoaXMuX2J1ZmZlcmVkX21zZ19xdWV1ZS51bnNoaWZ0KHdpcmVNZXNzYWdlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGZvcm1hdChFUlJPUi5JTlZBTElEX1NUQVRFLCBbXCJub3QgY29ubmVjdGVkXCJdKSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9O1xuXG4gICAgQ2xpZW50SW1wbC5wcm90b3R5cGUuZGlzY29ubmVjdCA9IGZ1bmN0aW9uKCkge1xuICAgICAgdGhpcy5fdHJhY2UoXCJDbGllbnQuZGlzY29ubmVjdFwiKTtcblxuICAgICAgaWYgKHRoaXMuX3JlY29ubmVjdGluZykge1xuICAgICAgICAvLyBkaXNjb25uZWN0KCkgZnVuY3Rpb24gaXMgY2FsbGVkIHdoaWxlIHJlY29ubmVjdCBpcyBpbiBwcm9ncmVzcy5cbiAgICAgICAgLy8gVGVybWluYXRlIHRoZSBhdXRvIHJlY29ubmVjdCBwcm9jZXNzLlxuICAgICAgICB0aGlzLl9yZWNvbm5lY3RUaW1lb3V0LmNhbmNlbCgpO1xuICAgICAgICB0aGlzLl9yZWNvbm5lY3RUaW1lb3V0ID0gbnVsbDtcbiAgICAgICAgdGhpcy5fcmVjb25uZWN0aW5nID0gZmFsc2U7XG4gICAgICB9XG5cbiAgICAgIGlmICghdGhpcy5zb2NrZXQpXG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgICBmb3JtYXQoRVJST1IuSU5WQUxJRF9TVEFURSwgW1wibm90IGNvbm5lY3Rpbmcgb3IgY29ubmVjdGVkXCJdKVxuICAgICAgICApO1xuXG4gICAgICB2YXIgd2lyZU1lc3NhZ2UgPSBuZXcgV2lyZU1lc3NhZ2UoTUVTU0FHRV9UWVBFLkRJU0NPTk5FQ1QpO1xuXG4gICAgICAvLyBSdW4gdGhlIGRpc2Nvbm5lY3RlZCBjYWxsIGJhY2sgYXMgc29vbiBhcyB0aGUgbWVzc2FnZSBoYXMgYmVlbiBzZW50LFxuICAgICAgLy8gaW4gY2FzZSBvZiBhIGZhaWx1cmUgbGF0ZXIgb24gaW4gdGhlIGRpc2Nvbm5lY3QgcHJvY2Vzc2luZy5cbiAgICAgIC8vIGFzIGEgY29uc2VxdWVuY2UsIHRoZSBfZGlzY29uZWN0ZWQgY2FsbCBiYWNrIG1heSBiZSBydW4gc2V2ZXJhbCB0aW1lcy5cbiAgICAgIHRoaXMuX25vdGlmeV9tc2dfc2VudFt3aXJlTWVzc2FnZV0gPSBzY29wZSh0aGlzLl9kaXNjb25uZWN0ZWQsIHRoaXMpO1xuXG4gICAgICB0aGlzLl9zY2hlZHVsZV9tZXNzYWdlKHdpcmVNZXNzYWdlKTtcbiAgICB9O1xuXG4gICAgQ2xpZW50SW1wbC5wcm90b3R5cGUuZ2V0VHJhY2VMb2cgPSBmdW5jdGlvbigpIHtcbiAgICAgIGlmICh0aGlzLl90cmFjZUJ1ZmZlciAhPT0gbnVsbCkge1xuICAgICAgICB0aGlzLl90cmFjZShcIkNsaWVudC5nZXRUcmFjZUxvZ1wiLCBuZXcgRGF0ZSgpKTtcbiAgICAgICAgdGhpcy5fdHJhY2UoXG4gICAgICAgICAgXCJDbGllbnQuZ2V0VHJhY2VMb2cgaW4gZmxpZ2h0IG1lc3NhZ2VzXCIsXG4gICAgICAgICAgdGhpcy5fc2VudE1lc3NhZ2VzLmxlbmd0aFxuICAgICAgICApO1xuICAgICAgICBmb3IgKHZhciBrZXkgaW4gdGhpcy5fc2VudE1lc3NhZ2VzKVxuICAgICAgICAgIHRoaXMuX3RyYWNlKFwiX3NlbnRNZXNzYWdlcyBcIiwga2V5LCB0aGlzLl9zZW50TWVzc2FnZXNba2V5XSk7XG4gICAgICAgIGZvciAodmFyIGtleSBpbiB0aGlzLl9yZWNlaXZlZE1lc3NhZ2VzKVxuICAgICAgICAgIHRoaXMuX3RyYWNlKFwiX3JlY2VpdmVkTWVzc2FnZXMgXCIsIGtleSwgdGhpcy5fcmVjZWl2ZWRNZXNzYWdlc1trZXldKTtcblxuICAgICAgICByZXR1cm4gdGhpcy5fdHJhY2VCdWZmZXI7XG4gICAgICB9XG4gICAgfTtcblxuICAgIENsaWVudEltcGwucHJvdG90eXBlLnN0YXJ0VHJhY2UgPSBmdW5jdGlvbigpIHtcbiAgICAgIGlmICh0aGlzLl90cmFjZUJ1ZmZlciA9PT0gbnVsbCkge1xuICAgICAgICB0aGlzLl90cmFjZUJ1ZmZlciA9IFtdO1xuICAgICAgfVxuICAgICAgdGhpcy5fdHJhY2UoXCJDbGllbnQuc3RhcnRUcmFjZVwiLCBuZXcgRGF0ZSgpLCB2ZXJzaW9uKTtcbiAgICB9O1xuXG4gICAgQ2xpZW50SW1wbC5wcm90b3R5cGUuc3RvcFRyYWNlID0gZnVuY3Rpb24oKSB7XG4gICAgICBkZWxldGUgdGhpcy5fdHJhY2VCdWZmZXI7XG4gICAgfTtcblxuICAgIENsaWVudEltcGwucHJvdG90eXBlLl9kb0Nvbm5lY3QgPSBmdW5jdGlvbih3c3VybCkge1xuICAgICAgLy8gV2hlbiB0aGUgc29ja2V0IGlzIG9wZW4sIHRoaXMgY2xpZW50IHdpbGwgc2VuZCB0aGUgQ09OTkVDVCBXaXJlTWVzc2FnZSB1c2luZyB0aGUgc2F2ZWQgcGFyYW1ldGVycy5cbiAgICAgIGlmICh0aGlzLmNvbm5lY3RPcHRpb25zLnVzZVNTTCkge1xuICAgICAgICB2YXIgdXJpUGFydHMgPSB3c3VybC5zcGxpdChcIjpcIik7XG4gICAgICAgIHVyaVBhcnRzWzBdID0gXCJ3c3NcIjtcbiAgICAgICAgd3N1cmwgPSB1cmlQYXJ0cy5qb2luKFwiOlwiKTtcbiAgICAgIH1cbiAgICAgIHRoaXMuX3dzdXJpID0gd3N1cmw7XG4gICAgICB0aGlzLmNvbm5lY3RlZCA9IGZhbHNlO1xuXG4gICAgICBpZiAodGhpcy5jb25uZWN0T3B0aW9ucy5tcXR0VmVyc2lvbiA8IDQpIHtcbiAgICAgICAgdGhpcy5zb2NrZXQgPSBuZXcgV2ViU29ja2V0KHdzdXJsLCBbXCJtcXR0djMuMVwiXSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLnNvY2tldCA9IG5ldyBXZWJTb2NrZXQod3N1cmwsIFtcIm1xdHRcIl0pO1xuICAgICAgfVxuICAgICAgdGhpcy5zb2NrZXQuYmluYXJ5VHlwZSA9IFwiYXJyYXlidWZmZXJcIjtcbiAgICAgIHRoaXMuc29ja2V0Lm9ub3BlbiA9IHNjb3BlKHRoaXMuX29uX3NvY2tldF9vcGVuLCB0aGlzKTtcbiAgICAgIHRoaXMuc29ja2V0Lm9ubWVzc2FnZSA9IHNjb3BlKHRoaXMuX29uX3NvY2tldF9tZXNzYWdlLCB0aGlzKTtcbiAgICAgIHRoaXMuc29ja2V0Lm9uZXJyb3IgPSBzY29wZSh0aGlzLl9vbl9zb2NrZXRfZXJyb3IsIHRoaXMpO1xuICAgICAgdGhpcy5zb2NrZXQub25jbG9zZSA9IHNjb3BlKHRoaXMuX29uX3NvY2tldF9jbG9zZSwgdGhpcyk7XG5cbiAgICAgIHRoaXMuc2VuZFBpbmdlciA9IG5ldyBQaW5nZXIodGhpcywgdGhpcy5jb25uZWN0T3B0aW9ucy5rZWVwQWxpdmVJbnRlcnZhbCk7XG4gICAgICB0aGlzLnJlY2VpdmVQaW5nZXIgPSBuZXcgUGluZ2VyKFxuICAgICAgICB0aGlzLFxuICAgICAgICB0aGlzLmNvbm5lY3RPcHRpb25zLmtlZXBBbGl2ZUludGVydmFsXG4gICAgICApO1xuICAgICAgaWYgKHRoaXMuX2Nvbm5lY3RUaW1lb3V0KSB7XG4gICAgICAgIHRoaXMuX2Nvbm5lY3RUaW1lb3V0LmNhbmNlbCgpO1xuICAgICAgICB0aGlzLl9jb25uZWN0VGltZW91dCA9IG51bGw7XG4gICAgICB9XG4gICAgICB0aGlzLl9jb25uZWN0VGltZW91dCA9IG5ldyBUaW1lb3V0KFxuICAgICAgICB0aGlzLFxuICAgICAgICB0aGlzLmNvbm5lY3RPcHRpb25zLnRpbWVvdXQsXG4gICAgICAgIHRoaXMuX2Rpc2Nvbm5lY3RlZCxcbiAgICAgICAgW0VSUk9SLkNPTk5FQ1RfVElNRU9VVC5jb2RlLCBmb3JtYXQoRVJST1IuQ09OTkVDVF9USU1FT1VUKV1cbiAgICAgICk7XG4gICAgfTtcblxuICAgIC8vIFNjaGVkdWxlIGEgbmV3IG1lc3NhZ2UgdG8gYmUgc2VudCBvdmVyIHRoZSBXZWJTb2NrZXRzXG4gICAgLy8gY29ubmVjdGlvbi4gQ09OTkVDVCBtZXNzYWdlcyBjYXVzZSBXZWJTb2NrZXQgY29ubmVjdGlvblxuICAgIC8vIHRvIGJlIHN0YXJ0ZWQuIEFsbCBvdGhlciBtZXNzYWdlcyBhcmUgcXVldWVkIGludGVybmFsbHlcbiAgICAvLyB1bnRpbCB0aGlzIGhhcyBoYXBwZW5lZC4gV2hlbiBXUyBjb25uZWN0aW9uIHN0YXJ0cywgcHJvY2Vzc1xuICAgIC8vIGFsbCBvdXRzdGFuZGluZyBtZXNzYWdlcy5cbiAgICBDbGllbnRJbXBsLnByb3RvdHlwZS5fc2NoZWR1bGVfbWVzc2FnZSA9IGZ1bmN0aW9uKG1lc3NhZ2UpIHtcbiAgICAgIC8vIEFkZCBtZXNzYWdlcyBpbiBmaWZvIG9yZGVyIHRvIGFycmF5LCBieSBhZGRpbmcgdG8gc3RhcnRcbiAgICAgIHRoaXMuX21zZ19xdWV1ZS51bnNoaWZ0KG1lc3NhZ2UpO1xuICAgICAgLy8gUHJvY2VzcyBvdXRzdGFuZGluZyBtZXNzYWdlcyBpbiB0aGUgcXVldWUgaWYgd2UgaGF2ZSBhbiAgb3BlbiBzb2NrZXQsIGFuZCBoYXZlIHJlY2VpdmVkIENPTk5BQ0suXG4gICAgICBpZiAodGhpcy5jb25uZWN0ZWQpIHtcbiAgICAgICAgdGhpcy5fcHJvY2Vzc19xdWV1ZSgpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICBDbGllbnRJbXBsLnByb3RvdHlwZS5zdG9yZSA9IGZ1bmN0aW9uKHByZWZpeCwgd2lyZU1lc3NhZ2UpIHtcbiAgICAgIHZhciBzdG9yZWRNZXNzYWdlID0ge1xuICAgICAgICB0eXBlOiB3aXJlTWVzc2FnZS50eXBlLFxuICAgICAgICBtZXNzYWdlSWRlbnRpZmllcjogd2lyZU1lc3NhZ2UubWVzc2FnZUlkZW50aWZpZXIsXG4gICAgICAgIHZlcnNpb246IDFcbiAgICAgIH07XG5cbiAgICAgIHN3aXRjaCAod2lyZU1lc3NhZ2UudHlwZSkge1xuICAgICAgICBjYXNlIE1FU1NBR0VfVFlQRS5QVUJMSVNIOlxuICAgICAgICAgIGlmICh3aXJlTWVzc2FnZS5wdWJSZWNSZWNlaXZlZCkgc3RvcmVkTWVzc2FnZS5wdWJSZWNSZWNlaXZlZCA9IHRydWU7XG5cbiAgICAgICAgICAvLyBDb252ZXJ0IHRoZSBwYXlsb2FkIHRvIGEgaGV4IHN0cmluZy5cbiAgICAgICAgICBzdG9yZWRNZXNzYWdlLnBheWxvYWRNZXNzYWdlID0ge307XG4gICAgICAgICAgdmFyIGhleCA9IFwiXCI7XG4gICAgICAgICAgdmFyIG1lc3NhZ2VCeXRlcyA9IHdpcmVNZXNzYWdlLnBheWxvYWRNZXNzYWdlLnBheWxvYWRCeXRlcztcbiAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG1lc3NhZ2VCeXRlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgaWYgKG1lc3NhZ2VCeXRlc1tpXSA8PSAweGYpXG4gICAgICAgICAgICAgIGhleCA9IGhleCArIFwiMFwiICsgbWVzc2FnZUJ5dGVzW2ldLnRvU3RyaW5nKDE2KTtcbiAgICAgICAgICAgIGVsc2UgaGV4ID0gaGV4ICsgbWVzc2FnZUJ5dGVzW2ldLnRvU3RyaW5nKDE2KTtcbiAgICAgICAgICB9XG4gICAgICAgICAgc3RvcmVkTWVzc2FnZS5wYXlsb2FkTWVzc2FnZS5wYXlsb2FkSGV4ID0gaGV4O1xuXG4gICAgICAgICAgc3RvcmVkTWVzc2FnZS5wYXlsb2FkTWVzc2FnZS5xb3MgPSB3aXJlTWVzc2FnZS5wYXlsb2FkTWVzc2FnZS5xb3M7XG4gICAgICAgICAgc3RvcmVkTWVzc2FnZS5wYXlsb2FkTWVzc2FnZS5kZXN0aW5hdGlvbk5hbWUgPVxuICAgICAgICAgICAgd2lyZU1lc3NhZ2UucGF5bG9hZE1lc3NhZ2UuZGVzdGluYXRpb25OYW1lO1xuICAgICAgICAgIGlmICh3aXJlTWVzc2FnZS5wYXlsb2FkTWVzc2FnZS5kdXBsaWNhdGUpXG4gICAgICAgICAgICBzdG9yZWRNZXNzYWdlLnBheWxvYWRNZXNzYWdlLmR1cGxpY2F0ZSA9IHRydWU7XG4gICAgICAgICAgaWYgKHdpcmVNZXNzYWdlLnBheWxvYWRNZXNzYWdlLnJldGFpbmVkKVxuICAgICAgICAgICAgc3RvcmVkTWVzc2FnZS5wYXlsb2FkTWVzc2FnZS5yZXRhaW5lZCA9IHRydWU7XG5cbiAgICAgICAgICAvLyBBZGQgYSBzZXF1ZW5jZSBudW1iZXIgdG8gc2VudCBtZXNzYWdlcy5cbiAgICAgICAgICBpZiAocHJlZml4LmluZGV4T2YoXCJTZW50OlwiKSA9PT0gMCkge1xuICAgICAgICAgICAgaWYgKHdpcmVNZXNzYWdlLnNlcXVlbmNlID09PSB1bmRlZmluZWQpXG4gICAgICAgICAgICAgIHdpcmVNZXNzYWdlLnNlcXVlbmNlID0gKyt0aGlzLl9zZXF1ZW5jZTtcbiAgICAgICAgICAgIHN0b3JlZE1lc3NhZ2Uuc2VxdWVuY2UgPSB3aXJlTWVzc2FnZS5zZXF1ZW5jZTtcbiAgICAgICAgICB9XG4gICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICB0aHJvdyBFcnJvcihcbiAgICAgICAgICAgIGZvcm1hdChFUlJPUi5JTlZBTElEX1NUT1JFRF9EQVRBLCBbXG4gICAgICAgICAgICAgIHByZWZpeCArIHRoaXMuX2xvY2FsS2V5ICsgd2lyZU1lc3NhZ2UubWVzc2FnZUlkZW50aWZpZXIsXG4gICAgICAgICAgICAgIHN0b3JlZE1lc3NhZ2VcbiAgICAgICAgICAgIF0pXG4gICAgICAgICAgKTtcbiAgICAgIH1cbiAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKFxuICAgICAgICBwcmVmaXggKyB0aGlzLl9sb2NhbEtleSArIHdpcmVNZXNzYWdlLm1lc3NhZ2VJZGVudGlmaWVyLFxuICAgICAgICBKU09OLnN0cmluZ2lmeShzdG9yZWRNZXNzYWdlKVxuICAgICAgKTtcbiAgICB9O1xuXG4gICAgQ2xpZW50SW1wbC5wcm90b3R5cGUucmVzdG9yZSA9IGZ1bmN0aW9uKGtleSkge1xuICAgICAgdmFyIHZhbHVlID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oa2V5KTtcbiAgICAgIHZhciBzdG9yZWRNZXNzYWdlID0gSlNPTi5wYXJzZSh2YWx1ZSk7XG5cbiAgICAgIHZhciB3aXJlTWVzc2FnZSA9IG5ldyBXaXJlTWVzc2FnZShzdG9yZWRNZXNzYWdlLnR5cGUsIHN0b3JlZE1lc3NhZ2UpO1xuXG4gICAgICBzd2l0Y2ggKHN0b3JlZE1lc3NhZ2UudHlwZSkge1xuICAgICAgICBjYXNlIE1FU1NBR0VfVFlQRS5QVUJMSVNIOlxuICAgICAgICAgIC8vIFJlcGxhY2UgdGhlIHBheWxvYWQgbWVzc2FnZSB3aXRoIGEgTWVzc2FnZSBvYmplY3QuXG4gICAgICAgICAgdmFyIGhleCA9IHN0b3JlZE1lc3NhZ2UucGF5bG9hZE1lc3NhZ2UucGF5bG9hZEhleDtcbiAgICAgICAgICB2YXIgYnVmZmVyID0gbmV3IEFycmF5QnVmZmVyKGhleC5sZW5ndGggLyAyKTtcbiAgICAgICAgICB2YXIgYnl0ZVN0cmVhbSA9IG5ldyBVaW50OEFycmF5KGJ1ZmZlcik7XG4gICAgICAgICAgdmFyIGkgPSAwO1xuICAgICAgICAgIHdoaWxlIChoZXgubGVuZ3RoID49IDIpIHtcbiAgICAgICAgICAgIHZhciB4ID0gcGFyc2VJbnQoaGV4LnN1YnN0cmluZygwLCAyKSwgMTYpO1xuICAgICAgICAgICAgaGV4ID0gaGV4LnN1YnN0cmluZygyLCBoZXgubGVuZ3RoKTtcbiAgICAgICAgICAgIGJ5dGVTdHJlYW1baSsrXSA9IHg7XG4gICAgICAgICAgfVxuICAgICAgICAgIHZhciBwYXlsb2FkTWVzc2FnZSA9IG5ldyBNZXNzYWdlKGJ5dGVTdHJlYW0pO1xuXG4gICAgICAgICAgcGF5bG9hZE1lc3NhZ2UucW9zID0gc3RvcmVkTWVzc2FnZS5wYXlsb2FkTWVzc2FnZS5xb3M7XG4gICAgICAgICAgcGF5bG9hZE1lc3NhZ2UuZGVzdGluYXRpb25OYW1lID1cbiAgICAgICAgICAgIHN0b3JlZE1lc3NhZ2UucGF5bG9hZE1lc3NhZ2UuZGVzdGluYXRpb25OYW1lO1xuICAgICAgICAgIGlmIChzdG9yZWRNZXNzYWdlLnBheWxvYWRNZXNzYWdlLmR1cGxpY2F0ZSlcbiAgICAgICAgICAgIHBheWxvYWRNZXNzYWdlLmR1cGxpY2F0ZSA9IHRydWU7XG4gICAgICAgICAgaWYgKHN0b3JlZE1lc3NhZ2UucGF5bG9hZE1lc3NhZ2UucmV0YWluZWQpXG4gICAgICAgICAgICBwYXlsb2FkTWVzc2FnZS5yZXRhaW5lZCA9IHRydWU7XG4gICAgICAgICAgd2lyZU1lc3NhZ2UucGF5bG9hZE1lc3NhZ2UgPSBwYXlsb2FkTWVzc2FnZTtcblxuICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgdGhyb3cgRXJyb3IoZm9ybWF0KEVSUk9SLklOVkFMSURfU1RPUkVEX0RBVEEsIFtrZXksIHZhbHVlXSkpO1xuICAgICAgfVxuXG4gICAgICBpZiAoa2V5LmluZGV4T2YoXCJTZW50OlwiICsgdGhpcy5fbG9jYWxLZXkpID09PSAwKSB7XG4gICAgICAgIHdpcmVNZXNzYWdlLnBheWxvYWRNZXNzYWdlLmR1cGxpY2F0ZSA9IHRydWU7XG4gICAgICAgIHRoaXMuX3NlbnRNZXNzYWdlc1t3aXJlTWVzc2FnZS5tZXNzYWdlSWRlbnRpZmllcl0gPSB3aXJlTWVzc2FnZTtcbiAgICAgIH0gZWxzZSBpZiAoa2V5LmluZGV4T2YoXCJSZWNlaXZlZDpcIiArIHRoaXMuX2xvY2FsS2V5KSA9PT0gMCkge1xuICAgICAgICB0aGlzLl9yZWNlaXZlZE1lc3NhZ2VzW3dpcmVNZXNzYWdlLm1lc3NhZ2VJZGVudGlmaWVyXSA9IHdpcmVNZXNzYWdlO1xuICAgICAgfVxuICAgIH07XG5cbiAgICBDbGllbnRJbXBsLnByb3RvdHlwZS5fcHJvY2Vzc19xdWV1ZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIG1lc3NhZ2UgPSBudWxsO1xuXG4gICAgICAvLyBTZW5kIGFsbCBxdWV1ZWQgbWVzc2FnZXMgZG93biBzb2NrZXQgY29ubmVjdGlvblxuICAgICAgd2hpbGUgKChtZXNzYWdlID0gdGhpcy5fbXNnX3F1ZXVlLnBvcCgpKSkge1xuICAgICAgICB0aGlzLl9zb2NrZXRfc2VuZChtZXNzYWdlKTtcbiAgICAgICAgLy8gTm90aWZ5IGxpc3RlbmVycyB0aGF0IG1lc3NhZ2Ugd2FzIHN1Y2Nlc3NmdWxseSBzZW50XG4gICAgICAgIGlmICh0aGlzLl9ub3RpZnlfbXNnX3NlbnRbbWVzc2FnZV0pIHtcbiAgICAgICAgICB0aGlzLl9ub3RpZnlfbXNnX3NlbnRbbWVzc2FnZV0oKTtcbiAgICAgICAgICBkZWxldGUgdGhpcy5fbm90aWZ5X21zZ19zZW50W21lc3NhZ2VdO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIEV4cGVjdCBhbiBBQ0sgcmVzcG9uc2UgZm9yIHRoaXMgbWVzc2FnZS4gQWRkIG1lc3NhZ2UgdG8gdGhlIHNldCBvZiBpbiBwcm9ncmVzc1xuICAgICAqIG1lc3NhZ2VzIGFuZCBzZXQgYW4gdW51c2VkIGlkZW50aWZpZXIgaW4gdGhpcyBtZXNzYWdlLlxuICAgICAqIEBpZ25vcmVcbiAgICAgKi9cbiAgICBDbGllbnRJbXBsLnByb3RvdHlwZS5fcmVxdWlyZXNfYWNrID0gZnVuY3Rpb24od2lyZU1lc3NhZ2UpIHtcbiAgICAgIHZhciBtZXNzYWdlQ291bnQgPSBPYmplY3Qua2V5cyh0aGlzLl9zZW50TWVzc2FnZXMpLmxlbmd0aDtcbiAgICAgIGlmIChtZXNzYWdlQ291bnQgPiB0aGlzLm1heE1lc3NhZ2VJZGVudGlmaWVyKVxuICAgICAgICB0aHJvdyBFcnJvcihcIlRvbyBtYW55IG1lc3NhZ2VzOlwiICsgbWVzc2FnZUNvdW50KTtcblxuICAgICAgd2hpbGUgKHRoaXMuX3NlbnRNZXNzYWdlc1t0aGlzLl9tZXNzYWdlX2lkZW50aWZpZXJdICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgdGhpcy5fbWVzc2FnZV9pZGVudGlmaWVyKys7XG4gICAgICB9XG4gICAgICB3aXJlTWVzc2FnZS5tZXNzYWdlSWRlbnRpZmllciA9IHRoaXMuX21lc3NhZ2VfaWRlbnRpZmllcjtcbiAgICAgIHRoaXMuX3NlbnRNZXNzYWdlc1t3aXJlTWVzc2FnZS5tZXNzYWdlSWRlbnRpZmllcl0gPSB3aXJlTWVzc2FnZTtcbiAgICAgIGlmICh3aXJlTWVzc2FnZS50eXBlID09PSBNRVNTQUdFX1RZUEUuUFVCTElTSCkge1xuICAgICAgICB0aGlzLnN0b3JlKFwiU2VudDpcIiwgd2lyZU1lc3NhZ2UpO1xuICAgICAgfVxuICAgICAgaWYgKHRoaXMuX21lc3NhZ2VfaWRlbnRpZmllciA9PT0gdGhpcy5tYXhNZXNzYWdlSWRlbnRpZmllcikge1xuICAgICAgICB0aGlzLl9tZXNzYWdlX2lkZW50aWZpZXIgPSAxO1xuICAgICAgfVxuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBDYWxsZWQgd2hlbiB0aGUgdW5kZXJseWluZyB3ZWJzb2NrZXQgaGFzIGJlZW4gb3BlbmVkLlxuICAgICAqIEBpZ25vcmVcbiAgICAgKi9cbiAgICBDbGllbnRJbXBsLnByb3RvdHlwZS5fb25fc29ja2V0X29wZW4gPSBmdW5jdGlvbigpIHtcbiAgICAgIC8vIENyZWF0ZSB0aGUgQ09OTkVDVCBtZXNzYWdlIG9iamVjdC5cbiAgICAgIHZhciB3aXJlTWVzc2FnZSA9IG5ldyBXaXJlTWVzc2FnZShcbiAgICAgICAgTUVTU0FHRV9UWVBFLkNPTk5FQ1QsXG4gICAgICAgIHRoaXMuY29ubmVjdE9wdGlvbnNcbiAgICAgICk7XG4gICAgICB3aXJlTWVzc2FnZS5jbGllbnRJZCA9IHRoaXMuY2xpZW50SWQ7XG4gICAgICB0aGlzLl9zb2NrZXRfc2VuZCh3aXJlTWVzc2FnZSk7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIENhbGxlZCB3aGVuIHRoZSB1bmRlcmx5aW5nIHdlYnNvY2tldCBoYXMgcmVjZWl2ZWQgYSBjb21wbGV0ZSBwYWNrZXQuXG4gICAgICogQGlnbm9yZVxuICAgICAqL1xuICAgIENsaWVudEltcGwucHJvdG90eXBlLl9vbl9zb2NrZXRfbWVzc2FnZSA9IGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICB0aGlzLl90cmFjZShcIkNsaWVudC5fb25fc29ja2V0X21lc3NhZ2VcIiwgZXZlbnQuZGF0YSk7XG4gICAgICB2YXIgbWVzc2FnZXMgPSB0aGlzLl9kZWZyYW1lTWVzc2FnZXMoZXZlbnQuZGF0YSk7XG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG1lc3NhZ2VzLmxlbmd0aDsgaSArPSAxKSB7XG4gICAgICAgIHRoaXMuX2hhbmRsZU1lc3NhZ2UobWVzc2FnZXNbaV0pO1xuICAgICAgfVxuICAgIH07XG5cbiAgICBDbGllbnRJbXBsLnByb3RvdHlwZS5fZGVmcmFtZU1lc3NhZ2VzID0gZnVuY3Rpb24oZGF0YSkge1xuICAgICAgdmFyIGJ5dGVBcnJheSA9IG5ldyBVaW50OEFycmF5KGRhdGEpO1xuICAgICAgdmFyIG1lc3NhZ2VzID0gW107XG4gICAgICBpZiAodGhpcy5yZWNlaXZlQnVmZmVyKSB7XG4gICAgICAgIHZhciBuZXdEYXRhID0gbmV3IFVpbnQ4QXJyYXkoXG4gICAgICAgICAgdGhpcy5yZWNlaXZlQnVmZmVyLmxlbmd0aCArIGJ5dGVBcnJheS5sZW5ndGhcbiAgICAgICAgKTtcbiAgICAgICAgbmV3RGF0YS5zZXQodGhpcy5yZWNlaXZlQnVmZmVyKTtcbiAgICAgICAgbmV3RGF0YS5zZXQoYnl0ZUFycmF5LCB0aGlzLnJlY2VpdmVCdWZmZXIubGVuZ3RoKTtcbiAgICAgICAgYnl0ZUFycmF5ID0gbmV3RGF0YTtcbiAgICAgICAgZGVsZXRlIHRoaXMucmVjZWl2ZUJ1ZmZlcjtcbiAgICAgIH1cbiAgICAgIHRyeSB7XG4gICAgICAgIHZhciBvZmZzZXQgPSAwO1xuICAgICAgICB3aGlsZSAob2Zmc2V0IDwgYnl0ZUFycmF5Lmxlbmd0aCkge1xuICAgICAgICAgIHZhciByZXN1bHQgPSBkZWNvZGVNZXNzYWdlKGJ5dGVBcnJheSwgb2Zmc2V0KTtcbiAgICAgICAgICB2YXIgd2lyZU1lc3NhZ2UgPSByZXN1bHRbMF07XG4gICAgICAgICAgb2Zmc2V0ID0gcmVzdWx0WzFdO1xuICAgICAgICAgIGlmICh3aXJlTWVzc2FnZSAhPT0gbnVsbCkge1xuICAgICAgICAgICAgbWVzc2FnZXMucHVzaCh3aXJlTWVzc2FnZSk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAob2Zmc2V0IDwgYnl0ZUFycmF5Lmxlbmd0aCkge1xuICAgICAgICAgIHRoaXMucmVjZWl2ZUJ1ZmZlciA9IGJ5dGVBcnJheS5zdWJhcnJheShvZmZzZXQpO1xuICAgICAgICB9XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICB2YXIgZXJyb3JTdGFjayA9XG4gICAgICAgICAgZXJyb3IuaGFzT3duUHJvcGVydHkoXCJzdGFja1wiKSA9PSBcInVuZGVmaW5lZFwiXG4gICAgICAgICAgICA/IGVycm9yLnN0YWNrLnRvU3RyaW5nKClcbiAgICAgICAgICAgIDogXCJObyBFcnJvciBTdGFjayBBdmFpbGFibGVcIjtcbiAgICAgICAgdGhpcy5fZGlzY29ubmVjdGVkKFxuICAgICAgICAgIEVSUk9SLklOVEVSTkFMX0VSUk9SLmNvZGUsXG4gICAgICAgICAgZm9ybWF0KEVSUk9SLklOVEVSTkFMX0VSUk9SLCBbZXJyb3IubWVzc2FnZSwgZXJyb3JTdGFja10pXG4gICAgICAgICk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIHJldHVybiBtZXNzYWdlcztcbiAgICB9O1xuXG4gICAgQ2xpZW50SW1wbC5wcm90b3R5cGUuX2hhbmRsZU1lc3NhZ2UgPSBmdW5jdGlvbih3aXJlTWVzc2FnZSkge1xuICAgICAgdGhpcy5fdHJhY2UoXCJDbGllbnQuX2hhbmRsZU1lc3NhZ2VcIiwgd2lyZU1lc3NhZ2UpO1xuXG4gICAgICB0cnkge1xuICAgICAgICBzd2l0Y2ggKHdpcmVNZXNzYWdlLnR5cGUpIHtcbiAgICAgICAgICBjYXNlIE1FU1NBR0VfVFlQRS5DT05OQUNLOlxuICAgICAgICAgICAgdGhpcy5fY29ubmVjdFRpbWVvdXQuY2FuY2VsKCk7XG4gICAgICAgICAgICBpZiAodGhpcy5fcmVjb25uZWN0VGltZW91dCkgdGhpcy5fcmVjb25uZWN0VGltZW91dC5jYW5jZWwoKTtcblxuICAgICAgICAgICAgLy8gSWYgd2UgaGF2ZSBzdGFydGVkIHVzaW5nIGNsZWFuIHNlc3Npb24gdGhlbiBjbGVhciB1cCB0aGUgbG9jYWwgc3RhdGUuXG4gICAgICAgICAgICBpZiAodGhpcy5jb25uZWN0T3B0aW9ucy5jbGVhblNlc3Npb24pIHtcbiAgICAgICAgICAgICAgZm9yICh2YXIga2V5IGluIHRoaXMuX3NlbnRNZXNzYWdlcykge1xuICAgICAgICAgICAgICAgIHZhciBzZW50TWVzc2FnZSA9IHRoaXMuX3NlbnRNZXNzYWdlc1trZXldO1xuICAgICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKFxuICAgICAgICAgICAgICAgICAgXCJTZW50OlwiICsgdGhpcy5fbG9jYWxLZXkgKyBzZW50TWVzc2FnZS5tZXNzYWdlSWRlbnRpZmllclxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgdGhpcy5fc2VudE1lc3NhZ2VzID0ge307XG5cbiAgICAgICAgICAgICAgZm9yICh2YXIga2V5IGluIHRoaXMuX3JlY2VpdmVkTWVzc2FnZXMpIHtcbiAgICAgICAgICAgICAgICB2YXIgcmVjZWl2ZWRNZXNzYWdlID0gdGhpcy5fcmVjZWl2ZWRNZXNzYWdlc1trZXldO1xuICAgICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKFxuICAgICAgICAgICAgICAgICAgXCJSZWNlaXZlZDpcIiArXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX2xvY2FsS2V5ICtcbiAgICAgICAgICAgICAgICAgICAgcmVjZWl2ZWRNZXNzYWdlLm1lc3NhZ2VJZGVudGlmaWVyXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB0aGlzLl9yZWNlaXZlZE1lc3NhZ2VzID0ge307XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBDbGllbnQgY29ubmVjdGVkIGFuZCByZWFkeSBmb3IgYnVzaW5lc3MuXG4gICAgICAgICAgICBpZiAod2lyZU1lc3NhZ2UucmV0dXJuQ29kZSA9PT0gMCkge1xuICAgICAgICAgICAgICB0aGlzLmNvbm5lY3RlZCA9IHRydWU7XG4gICAgICAgICAgICAgIC8vIEp1bXAgdG8gdGhlIGVuZCBvZiB0aGUgbGlzdCBvZiB1cmlzIGFuZCBzdG9wIGxvb2tpbmcgZm9yIGEgZ29vZCBob3N0LlxuXG4gICAgICAgICAgICAgIGlmICh0aGlzLmNvbm5lY3RPcHRpb25zLnVyaXMpXG4gICAgICAgICAgICAgICAgdGhpcy5ob3N0SW5kZXggPSB0aGlzLmNvbm5lY3RPcHRpb25zLnVyaXMubGVuZ3RoO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgdGhpcy5fZGlzY29ubmVjdGVkKFxuICAgICAgICAgICAgICAgIEVSUk9SLkNPTk5BQ0tfUkVUVVJOQ09ERS5jb2RlLFxuICAgICAgICAgICAgICAgIGZvcm1hdChFUlJPUi5DT05OQUNLX1JFVFVSTkNPREUsIFtcbiAgICAgICAgICAgICAgICAgIHdpcmVNZXNzYWdlLnJldHVybkNvZGUsXG4gICAgICAgICAgICAgICAgICBDT05OQUNLX1JDW3dpcmVNZXNzYWdlLnJldHVybkNvZGVdXG4gICAgICAgICAgICAgICAgXSlcbiAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIFJlc2VuZCBtZXNzYWdlcy5cbiAgICAgICAgICAgIHZhciBzZXF1ZW5jZWRNZXNzYWdlcyA9IFtdO1xuICAgICAgICAgICAgZm9yICh2YXIgbXNnSWQgaW4gdGhpcy5fc2VudE1lc3NhZ2VzKSB7XG4gICAgICAgICAgICAgIGlmICh0aGlzLl9zZW50TWVzc2FnZXMuaGFzT3duUHJvcGVydHkobXNnSWQpKVxuICAgICAgICAgICAgICAgIHNlcXVlbmNlZE1lc3NhZ2VzLnB1c2godGhpcy5fc2VudE1lc3NhZ2VzW21zZ0lkXSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIEFsc28gc2NoZWR1bGUgcW9zIDAgYnVmZmVyZWQgbWVzc2FnZXMgaWYgYW55XG4gICAgICAgICAgICBpZiAodGhpcy5fYnVmZmVyZWRfbXNnX3F1ZXVlLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgdmFyIG1zZyA9IG51bGw7XG4gICAgICAgICAgICAgIHdoaWxlICgobXNnID0gdGhpcy5fYnVmZmVyZWRfbXNnX3F1ZXVlLnBvcCgpKSkge1xuICAgICAgICAgICAgICAgIHNlcXVlbmNlZE1lc3NhZ2VzLnB1c2gobXNnKTtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5vbk1lc3NhZ2VEZWxpdmVyZWQpXG4gICAgICAgICAgICAgICAgICB0aGlzLl9ub3RpZnlfbXNnX3NlbnRbbXNnXSA9IHRoaXMub25NZXNzYWdlRGVsaXZlcmVkKFxuICAgICAgICAgICAgICAgICAgICBtc2cucGF5bG9hZE1lc3NhZ2VcbiAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gU29ydCBzZW50TWVzc2FnZXMgaW50byB0aGUgb3JpZ2luYWwgc2VudCBvcmRlci5cbiAgICAgICAgICAgIHZhciBzZXF1ZW5jZWRNZXNzYWdlcyA9IHNlcXVlbmNlZE1lc3NhZ2VzLnNvcnQoZnVuY3Rpb24oYSwgYikge1xuICAgICAgICAgICAgICByZXR1cm4gYS5zZXF1ZW5jZSAtIGIuc2VxdWVuY2U7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSBzZXF1ZW5jZWRNZXNzYWdlcy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgICB2YXIgc2VudE1lc3NhZ2UgPSBzZXF1ZW5jZWRNZXNzYWdlc1tpXTtcbiAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgIHNlbnRNZXNzYWdlLnR5cGUgPT0gTUVTU0FHRV9UWVBFLlBVQkxJU0ggJiZcbiAgICAgICAgICAgICAgICBzZW50TWVzc2FnZS5wdWJSZWNSZWNlaXZlZFxuICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICB2YXIgcHViUmVsTWVzc2FnZSA9IG5ldyBXaXJlTWVzc2FnZShNRVNTQUdFX1RZUEUuUFVCUkVMLCB7XG4gICAgICAgICAgICAgICAgICBtZXNzYWdlSWRlbnRpZmllcjogc2VudE1lc3NhZ2UubWVzc2FnZUlkZW50aWZpZXJcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB0aGlzLl9zY2hlZHVsZV9tZXNzYWdlKHB1YlJlbE1lc3NhZ2UpO1xuICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuX3NjaGVkdWxlX21lc3NhZ2Uoc2VudE1lc3NhZ2UpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIEV4ZWN1dGUgdGhlIGNvbm5lY3RPcHRpb25zLm9uU3VjY2VzcyBjYWxsYmFjayBpZiB0aGVyZSBpcyBvbmUuXG4gICAgICAgICAgICAvLyBXaWxsIGFsc28gbm93IHJldHVybiBpZiB0aGlzIGNvbm5lY3Rpb24gd2FzIHRoZSByZXN1bHQgb2YgYW4gYXV0b21hdGljXG4gICAgICAgICAgICAvLyByZWNvbm5lY3QgYW5kIHdoaWNoIFVSSSB3YXMgc3VjY2Vzc2Z1bGx5IGNvbm5lY3RlZCB0by5cbiAgICAgICAgICAgIGlmICh0aGlzLmNvbm5lY3RPcHRpb25zLm9uU3VjY2Vzcykge1xuICAgICAgICAgICAgICB0aGlzLmNvbm5lY3RPcHRpb25zLm9uU3VjY2Vzcyh7XG4gICAgICAgICAgICAgICAgaW52b2NhdGlvbkNvbnRleHQ6IHRoaXMuY29ubmVjdE9wdGlvbnMuaW52b2NhdGlvbkNvbnRleHRcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHZhciByZWNvbm5lY3RlZCA9IGZhbHNlO1xuICAgICAgICAgICAgaWYgKHRoaXMuX3JlY29ubmVjdGluZykge1xuICAgICAgICAgICAgICByZWNvbm5lY3RlZCA9IHRydWU7XG4gICAgICAgICAgICAgIHRoaXMuX3JlY29ubmVjdEludGVydmFsID0gMTtcbiAgICAgICAgICAgICAgdGhpcy5fcmVjb25uZWN0aW5nID0gZmFsc2U7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIEV4ZWN1dGUgdGhlIG9uQ29ubmVjdGVkIGNhbGxiYWNrIGlmIHRoZXJlIGlzIG9uZS5cbiAgICAgICAgICAgIHRoaXMuX2Nvbm5lY3RlZChyZWNvbm5lY3RlZCwgdGhpcy5fd3N1cmkpO1xuXG4gICAgICAgICAgICAvLyBQcm9jZXNzIGFsbCBxdWV1ZWQgbWVzc2FnZXMgbm93IHRoYXQgdGhlIGNvbm5lY3Rpb24gaXMgZXN0YWJsaXNoZWQuXG4gICAgICAgICAgICB0aGlzLl9wcm9jZXNzX3F1ZXVlKCk7XG4gICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgIGNhc2UgTUVTU0FHRV9UWVBFLlBVQkxJU0g6XG4gICAgICAgICAgICB0aGlzLl9yZWNlaXZlUHVibGlzaCh3aXJlTWVzc2FnZSk7XG4gICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgIGNhc2UgTUVTU0FHRV9UWVBFLlBVQkFDSzpcbiAgICAgICAgICAgIHZhciBzZW50TWVzc2FnZSA9IHRoaXMuX3NlbnRNZXNzYWdlc1t3aXJlTWVzc2FnZS5tZXNzYWdlSWRlbnRpZmllcl07XG4gICAgICAgICAgICAvLyBJZiB0aGlzIGlzIGEgcmUgZmxvdyBvZiBhIFBVQkFDSyBhZnRlciB3ZSBoYXZlIHJlc3RhcnRlZCByZWNlaXZlZE1lc3NhZ2Ugd2lsbCBub3QgZXhpc3QuXG4gICAgICAgICAgICBpZiAoc2VudE1lc3NhZ2UpIHtcbiAgICAgICAgICAgICAgZGVsZXRlIHRoaXMuX3NlbnRNZXNzYWdlc1t3aXJlTWVzc2FnZS5tZXNzYWdlSWRlbnRpZmllcl07XG4gICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKFxuICAgICAgICAgICAgICAgIFwiU2VudDpcIiArIHRoaXMuX2xvY2FsS2V5ICsgd2lyZU1lc3NhZ2UubWVzc2FnZUlkZW50aWZpZXJcbiAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgaWYgKHRoaXMub25NZXNzYWdlRGVsaXZlcmVkKVxuICAgICAgICAgICAgICAgIHRoaXMub25NZXNzYWdlRGVsaXZlcmVkKHNlbnRNZXNzYWdlLnBheWxvYWRNZXNzYWdlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgY2FzZSBNRVNTQUdFX1RZUEUuUFVCUkVDOlxuICAgICAgICAgICAgdmFyIHNlbnRNZXNzYWdlID0gdGhpcy5fc2VudE1lc3NhZ2VzW3dpcmVNZXNzYWdlLm1lc3NhZ2VJZGVudGlmaWVyXTtcbiAgICAgICAgICAgIC8vIElmIHRoaXMgaXMgYSByZSBmbG93IG9mIGEgUFVCUkVDIGFmdGVyIHdlIGhhdmUgcmVzdGFydGVkIHJlY2VpdmVkTWVzc2FnZSB3aWxsIG5vdCBleGlzdC5cbiAgICAgICAgICAgIGlmIChzZW50TWVzc2FnZSkge1xuICAgICAgICAgICAgICBzZW50TWVzc2FnZS5wdWJSZWNSZWNlaXZlZCA9IHRydWU7XG4gICAgICAgICAgICAgIHZhciBwdWJSZWxNZXNzYWdlID0gbmV3IFdpcmVNZXNzYWdlKE1FU1NBR0VfVFlQRS5QVUJSRUwsIHtcbiAgICAgICAgICAgICAgICBtZXNzYWdlSWRlbnRpZmllcjogd2lyZU1lc3NhZ2UubWVzc2FnZUlkZW50aWZpZXJcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgIHRoaXMuc3RvcmUoXCJTZW50OlwiLCBzZW50TWVzc2FnZSk7XG4gICAgICAgICAgICAgIHRoaXMuX3NjaGVkdWxlX21lc3NhZ2UocHViUmVsTWVzc2FnZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgIGNhc2UgTUVTU0FHRV9UWVBFLlBVQlJFTDpcbiAgICAgICAgICAgIHZhciByZWNlaXZlZE1lc3NhZ2UgPSB0aGlzLl9yZWNlaXZlZE1lc3NhZ2VzW1xuICAgICAgICAgICAgICB3aXJlTWVzc2FnZS5tZXNzYWdlSWRlbnRpZmllclxuICAgICAgICAgICAgXTtcbiAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKFxuICAgICAgICAgICAgICBcIlJlY2VpdmVkOlwiICsgdGhpcy5fbG9jYWxLZXkgKyB3aXJlTWVzc2FnZS5tZXNzYWdlSWRlbnRpZmllclxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIC8vIElmIHRoaXMgaXMgYSByZSBmbG93IG9mIGEgUFVCUkVMIGFmdGVyIHdlIGhhdmUgcmVzdGFydGVkIHJlY2VpdmVkTWVzc2FnZSB3aWxsIG5vdCBleGlzdC5cbiAgICAgICAgICAgIGlmIChyZWNlaXZlZE1lc3NhZ2UpIHtcbiAgICAgICAgICAgICAgdGhpcy5fcmVjZWl2ZU1lc3NhZ2UocmVjZWl2ZWRNZXNzYWdlKTtcbiAgICAgICAgICAgICAgZGVsZXRlIHRoaXMuX3JlY2VpdmVkTWVzc2FnZXNbd2lyZU1lc3NhZ2UubWVzc2FnZUlkZW50aWZpZXJdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gQWx3YXlzIGZsb3cgUHViQ29tcCwgd2UgbWF5IGhhdmUgcHJldmlvdXNseSBmbG93ZWQgUHViQ29tcCBidXQgdGhlIHNlcnZlciBsb3N0IGl0IGFuZCByZXN0YXJ0ZWQuXG4gICAgICAgICAgICB2YXIgcHViQ29tcE1lc3NhZ2UgPSBuZXcgV2lyZU1lc3NhZ2UoTUVTU0FHRV9UWVBFLlBVQkNPTVAsIHtcbiAgICAgICAgICAgICAgbWVzc2FnZUlkZW50aWZpZXI6IHdpcmVNZXNzYWdlLm1lc3NhZ2VJZGVudGlmaWVyXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHRoaXMuX3NjaGVkdWxlX21lc3NhZ2UocHViQ29tcE1lc3NhZ2UpO1xuXG4gICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgIGNhc2UgTUVTU0FHRV9UWVBFLlBVQkNPTVA6XG4gICAgICAgICAgICB2YXIgc2VudE1lc3NhZ2UgPSB0aGlzLl9zZW50TWVzc2FnZXNbd2lyZU1lc3NhZ2UubWVzc2FnZUlkZW50aWZpZXJdO1xuICAgICAgICAgICAgZGVsZXRlIHRoaXMuX3NlbnRNZXNzYWdlc1t3aXJlTWVzc2FnZS5tZXNzYWdlSWRlbnRpZmllcl07XG4gICAgICAgICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbShcbiAgICAgICAgICAgICAgXCJTZW50OlwiICsgdGhpcy5fbG9jYWxLZXkgKyB3aXJlTWVzc2FnZS5tZXNzYWdlSWRlbnRpZmllclxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIGlmICh0aGlzLm9uTWVzc2FnZURlbGl2ZXJlZClcbiAgICAgICAgICAgICAgdGhpcy5vbk1lc3NhZ2VEZWxpdmVyZWQoc2VudE1lc3NhZ2UucGF5bG9hZE1lc3NhZ2UpO1xuICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICBjYXNlIE1FU1NBR0VfVFlQRS5TVUJBQ0s6XG4gICAgICAgICAgICB2YXIgc2VudE1lc3NhZ2UgPSB0aGlzLl9zZW50TWVzc2FnZXNbd2lyZU1lc3NhZ2UubWVzc2FnZUlkZW50aWZpZXJdO1xuICAgICAgICAgICAgaWYgKHNlbnRNZXNzYWdlKSB7XG4gICAgICAgICAgICAgIGlmIChzZW50TWVzc2FnZS50aW1lT3V0KSBzZW50TWVzc2FnZS50aW1lT3V0LmNhbmNlbCgpO1xuICAgICAgICAgICAgICAvLyBUaGlzIHdpbGwgbmVlZCB0byBiZSBmaXhlZCB3aGVuIHdlIGFkZCBtdWx0aXBsZSB0b3BpYyBzdXBwb3J0XG4gICAgICAgICAgICAgIGlmICh3aXJlTWVzc2FnZS5yZXR1cm5Db2RlWzBdID09PSAweDgwKSB7XG4gICAgICAgICAgICAgICAgaWYgKHNlbnRNZXNzYWdlLm9uRmFpbHVyZSkge1xuICAgICAgICAgICAgICAgICAgc2VudE1lc3NhZ2Uub25GYWlsdXJlKHdpcmVNZXNzYWdlLnJldHVybkNvZGUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfSBlbHNlIGlmIChzZW50TWVzc2FnZS5vblN1Y2Nlc3MpIHtcbiAgICAgICAgICAgICAgICBzZW50TWVzc2FnZS5vblN1Y2Nlc3Mod2lyZU1lc3NhZ2UucmV0dXJuQ29kZSk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgZGVsZXRlIHRoaXMuX3NlbnRNZXNzYWdlc1t3aXJlTWVzc2FnZS5tZXNzYWdlSWRlbnRpZmllcl07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgIGNhc2UgTUVTU0FHRV9UWVBFLlVOU1VCQUNLOlxuICAgICAgICAgICAgdmFyIHNlbnRNZXNzYWdlID0gdGhpcy5fc2VudE1lc3NhZ2VzW3dpcmVNZXNzYWdlLm1lc3NhZ2VJZGVudGlmaWVyXTtcbiAgICAgICAgICAgIGlmIChzZW50TWVzc2FnZSkge1xuICAgICAgICAgICAgICBpZiAoc2VudE1lc3NhZ2UudGltZU91dCkgc2VudE1lc3NhZ2UudGltZU91dC5jYW5jZWwoKTtcbiAgICAgICAgICAgICAgaWYgKHNlbnRNZXNzYWdlLmNhbGxiYWNrKSB7XG4gICAgICAgICAgICAgICAgc2VudE1lc3NhZ2UuY2FsbGJhY2soKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBkZWxldGUgdGhpcy5fc2VudE1lc3NhZ2VzW3dpcmVNZXNzYWdlLm1lc3NhZ2VJZGVudGlmaWVyXTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICBjYXNlIE1FU1NBR0VfVFlQRS5QSU5HUkVTUDpcbiAgICAgICAgICAgIC8qIFRoZSBzZW5kUGluZ2VyIG9yIHJlY2VpdmVQaW5nZXIgbWF5IGhhdmUgc2VudCBhIHBpbmcsIHRoZSByZWNlaXZlUGluZ2VyIGhhcyBhbHJlYWR5IGJlZW4gcmVzZXQuICovXG4gICAgICAgICAgICB0aGlzLnNlbmRQaW5nZXIucmVzZXQoKTtcbiAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgY2FzZSBNRVNTQUdFX1RZUEUuRElTQ09OTkVDVDpcbiAgICAgICAgICAgIC8vIENsaWVudHMgZG8gbm90IGV4cGVjdCB0byByZWNlaXZlIGRpc2Nvbm5lY3QgcGFja2V0cy5cbiAgICAgICAgICAgIHRoaXMuX2Rpc2Nvbm5lY3RlZChcbiAgICAgICAgICAgICAgRVJST1IuSU5WQUxJRF9NUVRUX01FU1NBR0VfVFlQRS5jb2RlLFxuICAgICAgICAgICAgICBmb3JtYXQoRVJST1IuSU5WQUxJRF9NUVRUX01FU1NBR0VfVFlQRSwgW3dpcmVNZXNzYWdlLnR5cGVdKVxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIHRoaXMuX2Rpc2Nvbm5lY3RlZChcbiAgICAgICAgICAgICAgRVJST1IuSU5WQUxJRF9NUVRUX01FU1NBR0VfVFlQRS5jb2RlLFxuICAgICAgICAgICAgICBmb3JtYXQoRVJST1IuSU5WQUxJRF9NUVRUX01FU1NBR0VfVFlQRSwgW3dpcmVNZXNzYWdlLnR5cGVdKVxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgdmFyIGVycm9yU3RhY2sgPVxuICAgICAgICAgIGVycm9yLmhhc093blByb3BlcnR5KFwic3RhY2tcIikgPT0gXCJ1bmRlZmluZWRcIlxuICAgICAgICAgICAgPyBlcnJvci5zdGFjay50b1N0cmluZygpXG4gICAgICAgICAgICA6IFwiTm8gRXJyb3IgU3RhY2sgQXZhaWxhYmxlXCI7XG4gICAgICAgIHRoaXMuX2Rpc2Nvbm5lY3RlZChcbiAgICAgICAgICBFUlJPUi5JTlRFUk5BTF9FUlJPUi5jb2RlLFxuICAgICAgICAgIGZvcm1hdChFUlJPUi5JTlRFUk5BTF9FUlJPUiwgW2Vycm9yLm1lc3NhZ2UsIGVycm9yU3RhY2tdKVxuICAgICAgICApO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgfTtcblxuICAgIC8qKiBAaWdub3JlICovXG4gICAgQ2xpZW50SW1wbC5wcm90b3R5cGUuX29uX3NvY2tldF9lcnJvciA9IGZ1bmN0aW9uKGVycm9yKSB7XG4gICAgICBpZiAoIXRoaXMuX3JlY29ubmVjdGluZykge1xuICAgICAgICB0aGlzLl9kaXNjb25uZWN0ZWQoXG4gICAgICAgICAgRVJST1IuU09DS0VUX0VSUk9SLmNvZGUsXG4gICAgICAgICAgZm9ybWF0KEVSUk9SLlNPQ0tFVF9FUlJPUiwgW2Vycm9yLmRhdGFdKVxuICAgICAgICApO1xuICAgICAgfVxuICAgIH07XG5cbiAgICAvKiogQGlnbm9yZSAqL1xuICAgIENsaWVudEltcGwucHJvdG90eXBlLl9vbl9zb2NrZXRfY2xvc2UgPSBmdW5jdGlvbigpIHtcbiAgICAgIGlmICghdGhpcy5fcmVjb25uZWN0aW5nKSB7XG4gICAgICAgIHRoaXMuX2Rpc2Nvbm5lY3RlZChFUlJPUi5TT0NLRVRfQ0xPU0UuY29kZSwgZm9ybWF0KEVSUk9SLlNPQ0tFVF9DTE9TRSkpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICAvKiogQGlnbm9yZSAqL1xuICAgIENsaWVudEltcGwucHJvdG90eXBlLl9zb2NrZXRfc2VuZCA9IGZ1bmN0aW9uKHdpcmVNZXNzYWdlKSB7XG4gICAgICBpZiAod2lyZU1lc3NhZ2UudHlwZSA9PSAxKSB7XG4gICAgICAgIHZhciB3aXJlTWVzc2FnZU1hc2tlZCA9IHRoaXMuX3RyYWNlTWFzayh3aXJlTWVzc2FnZSwgXCJwYXNzd29yZFwiKTtcbiAgICAgICAgdGhpcy5fdHJhY2UoXCJDbGllbnQuX3NvY2tldF9zZW5kXCIsIHdpcmVNZXNzYWdlTWFza2VkKTtcbiAgICAgIH0gZWxzZSB0aGlzLl90cmFjZShcIkNsaWVudC5fc29ja2V0X3NlbmRcIiwgd2lyZU1lc3NhZ2UpO1xuXG4gICAgICB0aGlzLnNvY2tldC5zZW5kKHdpcmVNZXNzYWdlLmVuY29kZSgpKTtcbiAgICAgIC8qIFdlIGhhdmUgcHJvdmVkIHRvIHRoZSBzZXJ2ZXIgd2UgYXJlIGFsaXZlLiAqL1xuICAgICAgdGhpcy5zZW5kUGluZ2VyLnJlc2V0KCk7XG4gICAgfTtcblxuICAgIC8qKiBAaWdub3JlICovXG4gICAgQ2xpZW50SW1wbC5wcm90b3R5cGUuX3JlY2VpdmVQdWJsaXNoID0gZnVuY3Rpb24od2lyZU1lc3NhZ2UpIHtcbiAgICAgIHN3aXRjaCAod2lyZU1lc3NhZ2UucGF5bG9hZE1lc3NhZ2UucW9zKSB7XG4gICAgICAgIGNhc2UgXCJ1bmRlZmluZWRcIjpcbiAgICAgICAgY2FzZSAwOlxuICAgICAgICAgIHRoaXMuX3JlY2VpdmVNZXNzYWdlKHdpcmVNZXNzYWdlKTtcbiAgICAgICAgICBicmVhaztcblxuICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgdmFyIHB1YkFja01lc3NhZ2UgPSBuZXcgV2lyZU1lc3NhZ2UoTUVTU0FHRV9UWVBFLlBVQkFDSywge1xuICAgICAgICAgICAgbWVzc2FnZUlkZW50aWZpZXI6IHdpcmVNZXNzYWdlLm1lc3NhZ2VJZGVudGlmaWVyXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgdGhpcy5fc2NoZWR1bGVfbWVzc2FnZShwdWJBY2tNZXNzYWdlKTtcbiAgICAgICAgICB0aGlzLl9yZWNlaXZlTWVzc2FnZSh3aXJlTWVzc2FnZSk7XG4gICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgY2FzZSAyOlxuICAgICAgICAgIHRoaXMuX3JlY2VpdmVkTWVzc2FnZXNbd2lyZU1lc3NhZ2UubWVzc2FnZUlkZW50aWZpZXJdID0gd2lyZU1lc3NhZ2U7XG4gICAgICAgICAgdGhpcy5zdG9yZShcIlJlY2VpdmVkOlwiLCB3aXJlTWVzc2FnZSk7XG4gICAgICAgICAgdmFyIHB1YlJlY01lc3NhZ2UgPSBuZXcgV2lyZU1lc3NhZ2UoTUVTU0FHRV9UWVBFLlBVQlJFQywge1xuICAgICAgICAgICAgbWVzc2FnZUlkZW50aWZpZXI6IHdpcmVNZXNzYWdlLm1lc3NhZ2VJZGVudGlmaWVyXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgdGhpcy5fc2NoZWR1bGVfbWVzc2FnZShwdWJSZWNNZXNzYWdlKTtcblxuICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgdGhyb3cgRXJyb3IoXCJJbnZhaWxkIHFvcz1cIiArIHdpcmVNZXNzYWdlLnBheWxvYWRNZXNzYWdlLnFvcyk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIC8qKiBAaWdub3JlICovXG4gICAgQ2xpZW50SW1wbC5wcm90b3R5cGUuX3JlY2VpdmVNZXNzYWdlID0gZnVuY3Rpb24od2lyZU1lc3NhZ2UpIHtcbiAgICAgIGlmICh0aGlzLm9uTWVzc2FnZUFycml2ZWQpIHtcbiAgICAgICAgdGhpcy5vbk1lc3NhZ2VBcnJpdmVkKHdpcmVNZXNzYWdlLnBheWxvYWRNZXNzYWdlKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogQ2xpZW50IGhhcyBjb25uZWN0ZWQuXG4gICAgICogQHBhcmFtIHtyZWNvbm5lY3R9IFtib29sZWFuXSBpbmRpY2F0ZSBpZiB0aGlzIHdhcyBhIHJlc3VsdCBvZiByZWNvbm5lY3Qgb3BlcmF0aW9uLlxuICAgICAqIEBwYXJhbSB7dXJpfSBbc3RyaW5nXSBmdWxseSBxdWFsaWZpZWQgV2ViU29ja2V0IFVSSSBvZiB0aGUgc2VydmVyLlxuICAgICAqL1xuICAgIENsaWVudEltcGwucHJvdG90eXBlLl9jb25uZWN0ZWQgPSBmdW5jdGlvbihyZWNvbm5lY3QsIHVyaSkge1xuICAgICAgLy8gRXhlY3V0ZSB0aGUgb25Db25uZWN0ZWQgY2FsbGJhY2sgaWYgdGhlcmUgaXMgb25lLlxuICAgICAgaWYgKHRoaXMub25Db25uZWN0ZWQpIHRoaXMub25Db25uZWN0ZWQocmVjb25uZWN0LCB1cmkpO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBBdHRlbXB0cyB0byByZWNvbm5lY3QgdGhlIGNsaWVudCB0byB0aGUgc2VydmVyLlxuICAgICAqIEZvciBlYWNoIHJlY29ubmVjdCBhdHRlbXB0LCB3aWxsIGRvdWJsZSB0aGUgcmVjb25uZWN0IGludGVydmFsXG4gICAgICogdXAgdG8gMTI4IHNlY29uZHMuXG4gICAgICovXG4gICAgQ2xpZW50SW1wbC5wcm90b3R5cGUuX3JlY29ubmVjdCA9IGZ1bmN0aW9uKCkge1xuICAgICAgdGhpcy5fdHJhY2UoXCJDbGllbnQuX3JlY29ubmVjdFwiKTtcbiAgICAgIGlmICghdGhpcy5jb25uZWN0ZWQpIHtcbiAgICAgICAgdGhpcy5fcmVjb25uZWN0aW5nID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5zZW5kUGluZ2VyLmNhbmNlbCgpO1xuICAgICAgICB0aGlzLnJlY2VpdmVQaW5nZXIuY2FuY2VsKCk7XG4gICAgICAgIGlmICh0aGlzLl9yZWNvbm5lY3RJbnRlcnZhbCA8IDEyOClcbiAgICAgICAgICB0aGlzLl9yZWNvbm5lY3RJbnRlcnZhbCA9IHRoaXMuX3JlY29ubmVjdEludGVydmFsICogMjtcbiAgICAgICAgaWYgKHRoaXMuY29ubmVjdE9wdGlvbnMudXJpcykge1xuICAgICAgICAgIHRoaXMuaG9zdEluZGV4ID0gMDtcbiAgICAgICAgICB0aGlzLl9kb0Nvbm5lY3QodGhpcy5jb25uZWN0T3B0aW9ucy51cmlzWzBdKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aGlzLl9kb0Nvbm5lY3QodGhpcy51cmkpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIENsaWVudCBoYXMgZGlzY29ubmVjdGVkIGVpdGhlciBhdCBpdHMgb3duIHJlcXVlc3Qgb3IgYmVjYXVzZSB0aGUgc2VydmVyXG4gICAgICogb3IgbmV0d29yayBkaXNjb25uZWN0ZWQgaXQuIFJlbW92ZSBhbGwgbm9uLWR1cmFibGUgc3RhdGUuXG4gICAgICogQHBhcmFtIHtlcnJvckNvZGV9IFtudW1iZXJdIHRoZSBlcnJvciBudW1iZXIuXG4gICAgICogQHBhcmFtIHtlcnJvclRleHR9IFtzdHJpbmddIHRoZSBlcnJvciB0ZXh0LlxuICAgICAqIEBpZ25vcmVcbiAgICAgKi9cbiAgICBDbGllbnRJbXBsLnByb3RvdHlwZS5fZGlzY29ubmVjdGVkID0gZnVuY3Rpb24oZXJyb3JDb2RlLCBlcnJvclRleHQpIHtcbiAgICAgIHRoaXMuX3RyYWNlKFwiQ2xpZW50Ll9kaXNjb25uZWN0ZWRcIiwgZXJyb3JDb2RlLCBlcnJvclRleHQpO1xuXG4gICAgICBpZiAoZXJyb3JDb2RlICE9PSB1bmRlZmluZWQgJiYgdGhpcy5fcmVjb25uZWN0aW5nKSB7XG4gICAgICAgIC8vQ29udGludWUgYXV0b21hdGljIHJlY29ubmVjdCBwcm9jZXNzXG4gICAgICAgIHRoaXMuX3JlY29ubmVjdFRpbWVvdXQgPSBuZXcgVGltZW91dChcbiAgICAgICAgICB0aGlzLFxuICAgICAgICAgIHRoaXMuX3JlY29ubmVjdEludGVydmFsLFxuICAgICAgICAgIHRoaXMuX3JlY29ubmVjdFxuICAgICAgICApO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIHRoaXMuc2VuZFBpbmdlci5jYW5jZWwoKTtcbiAgICAgIHRoaXMucmVjZWl2ZVBpbmdlci5jYW5jZWwoKTtcbiAgICAgIGlmICh0aGlzLl9jb25uZWN0VGltZW91dCkge1xuICAgICAgICB0aGlzLl9jb25uZWN0VGltZW91dC5jYW5jZWwoKTtcbiAgICAgICAgdGhpcy5fY29ubmVjdFRpbWVvdXQgPSBudWxsO1xuICAgICAgfVxuXG4gICAgICAvLyBDbGVhciBtZXNzYWdlIGJ1ZmZlcnMuXG4gICAgICB0aGlzLl9tc2dfcXVldWUgPSBbXTtcbiAgICAgIHRoaXMuX2J1ZmZlcmVkX21zZ19xdWV1ZSA9IFtdO1xuICAgICAgdGhpcy5fbm90aWZ5X21zZ19zZW50ID0ge307XG5cbiAgICAgIGlmICh0aGlzLnNvY2tldCkge1xuICAgICAgICAvLyBDYW5jZWwgYWxsIHNvY2tldCBjYWxsYmFja3Mgc28gdGhhdCB0aGV5IGNhbm5vdCBiZSBkcml2ZW4gYWdhaW4gYnkgdGhpcyBzb2NrZXQuXG4gICAgICAgIHRoaXMuc29ja2V0Lm9ub3BlbiA9IG51bGw7XG4gICAgICAgIHRoaXMuc29ja2V0Lm9ubWVzc2FnZSA9IG51bGw7XG4gICAgICAgIHRoaXMuc29ja2V0Lm9uZXJyb3IgPSBudWxsO1xuICAgICAgICB0aGlzLnNvY2tldC5vbmNsb3NlID0gbnVsbDtcbiAgICAgICAgaWYgKHRoaXMuc29ja2V0LnJlYWR5U3RhdGUgPT09IDEpIHRoaXMuc29ja2V0LmNsb3NlKCk7XG4gICAgICAgIGRlbGV0ZSB0aGlzLnNvY2tldDtcbiAgICAgIH1cblxuICAgICAgaWYgKFxuICAgICAgICB0aGlzLmNvbm5lY3RPcHRpb25zLnVyaXMgJiZcbiAgICAgICAgdGhpcy5ob3N0SW5kZXggPCB0aGlzLmNvbm5lY3RPcHRpb25zLnVyaXMubGVuZ3RoIC0gMVxuICAgICAgKSB7XG4gICAgICAgIC8vIFRyeSB0aGUgbmV4dCBob3N0LlxuICAgICAgICB0aGlzLmhvc3RJbmRleCsrO1xuICAgICAgICB0aGlzLl9kb0Nvbm5lY3QodGhpcy5jb25uZWN0T3B0aW9ucy51cmlzW3RoaXMuaG9zdEluZGV4XSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpZiAoZXJyb3JDb2RlID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICBlcnJvckNvZGUgPSBFUlJPUi5PSy5jb2RlO1xuICAgICAgICAgIGVycm9yVGV4dCA9IGZvcm1hdChFUlJPUi5PSyk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBSdW4gYW55IGFwcGxpY2F0aW9uIGNhbGxiYWNrcyBsYXN0IGFzIHRoZXkgbWF5IGF0dGVtcHQgdG8gcmVjb25uZWN0IGFuZCBoZW5jZSBjcmVhdGUgYSBuZXcgc29ja2V0LlxuICAgICAgICBpZiAodGhpcy5jb25uZWN0ZWQpIHtcbiAgICAgICAgICB0aGlzLmNvbm5lY3RlZCA9IGZhbHNlO1xuICAgICAgICAgIC8vIEV4ZWN1dGUgdGhlIGNvbm5lY3Rpb25Mb3N0Q2FsbGJhY2sgaWYgdGhlcmUgaXMgb25lLCBhbmQgd2Ugd2VyZSBjb25uZWN0ZWQuXG4gICAgICAgICAgaWYgKHRoaXMub25Db25uZWN0aW9uTG9zdCkge1xuICAgICAgICAgICAgdGhpcy5vbkNvbm5lY3Rpb25Mb3N0KHtcbiAgICAgICAgICAgICAgZXJyb3JDb2RlOiBlcnJvckNvZGUsXG4gICAgICAgICAgICAgIGVycm9yTWVzc2FnZTogZXJyb3JUZXh0LFxuICAgICAgICAgICAgICByZWNvbm5lY3Q6IHRoaXMuY29ubmVjdE9wdGlvbnMucmVjb25uZWN0LFxuICAgICAgICAgICAgICB1cmk6IHRoaXMuX3dzdXJpXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKGVycm9yQ29kZSAhPT0gRVJST1IuT0suY29kZSAmJiB0aGlzLmNvbm5lY3RPcHRpb25zLnJlY29ubmVjdCkge1xuICAgICAgICAgICAgLy8gU3RhcnQgYXV0b21hdGljIHJlY29ubmVjdCBwcm9jZXNzIGZvciB0aGUgdmVyeSBmaXJzdCB0aW1lIHNpbmNlIGxhc3Qgc3VjY2Vzc2Z1bCBjb25uZWN0LlxuICAgICAgICAgICAgdGhpcy5fcmVjb25uZWN0SW50ZXJ2YWwgPSAxO1xuICAgICAgICAgICAgdGhpcy5fcmVjb25uZWN0KCk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vIE90aGVyd2lzZSB3ZSBuZXZlciBoYWQgYSBjb25uZWN0aW9uLCBzbyBpbmRpY2F0ZSB0aGF0IHRoZSBjb25uZWN0IGhhcyBmYWlsZWQuXG4gICAgICAgICAgaWYgKFxuICAgICAgICAgICAgdGhpcy5jb25uZWN0T3B0aW9ucy5tcXR0VmVyc2lvbiA9PT0gNCAmJlxuICAgICAgICAgICAgdGhpcy5jb25uZWN0T3B0aW9ucy5tcXR0VmVyc2lvbkV4cGxpY2l0ID09PSBmYWxzZVxuICAgICAgICAgICkge1xuICAgICAgICAgICAgdGhpcy5fdHJhY2UoXCJGYWlsZWQgdG8gY29ubmVjdCBWNCwgZHJvcHBpbmcgYmFjayB0byBWM1wiKTtcbiAgICAgICAgICAgIHRoaXMuY29ubmVjdE9wdGlvbnMubXF0dFZlcnNpb24gPSAzO1xuICAgICAgICAgICAgaWYgKHRoaXMuY29ubmVjdE9wdGlvbnMudXJpcykge1xuICAgICAgICAgICAgICB0aGlzLmhvc3RJbmRleCA9IDA7XG4gICAgICAgICAgICAgIHRoaXMuX2RvQ29ubmVjdCh0aGlzLmNvbm5lY3RPcHRpb25zLnVyaXNbMF0pO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgdGhpcy5fZG9Db25uZWN0KHRoaXMudXJpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMuY29ubmVjdE9wdGlvbnMub25GYWlsdXJlKSB7XG4gICAgICAgICAgICB0aGlzLmNvbm5lY3RPcHRpb25zLm9uRmFpbHVyZSh7XG4gICAgICAgICAgICAgIGludm9jYXRpb25Db250ZXh0OiB0aGlzLmNvbm5lY3RPcHRpb25zLmludm9jYXRpb25Db250ZXh0LFxuICAgICAgICAgICAgICBlcnJvckNvZGU6IGVycm9yQ29kZSxcbiAgICAgICAgICAgICAgZXJyb3JNZXNzYWdlOiBlcnJvclRleHRcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH07XG5cbiAgICAvKiogQGlnbm9yZSAqL1xuICAgIENsaWVudEltcGwucHJvdG90eXBlLl90cmFjZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgLy8gUGFzcyB0cmFjZSBtZXNzYWdlIGJhY2sgdG8gY2xpZW50J3MgY2FsbGJhY2sgZnVuY3Rpb25cbiAgICAgIGlmICh0aGlzLnRyYWNlRnVuY3Rpb24pIHtcbiAgICAgICAgdmFyIGFyZ3MgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMpO1xuICAgICAgICBmb3IgKHZhciBpIGluIGFyZ3MpIHtcbiAgICAgICAgICBpZiAodHlwZW9mIGFyZ3NbaV0gIT09IFwidW5kZWZpbmVkXCIpXG4gICAgICAgICAgICBhcmdzLnNwbGljZShpLCAxLCBKU09OLnN0cmluZ2lmeShhcmdzW2ldKSk7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHJlY29yZCA9IGFyZ3Muam9pbihcIlwiKTtcbiAgICAgICAgdGhpcy50cmFjZUZ1bmN0aW9uKHsgc2V2ZXJpdHk6IFwiRGVidWdcIiwgbWVzc2FnZTogcmVjb3JkIH0pO1xuICAgICAgfVxuXG4gICAgICAvL2J1ZmZlciBzdHlsZSB0cmFjZVxuICAgICAgaWYgKHRoaXMuX3RyYWNlQnVmZmVyICE9PSBudWxsKSB7XG4gICAgICAgIGZvciAodmFyIGkgPSAwLCBtYXggPSBhcmd1bWVudHMubGVuZ3RoOyBpIDwgbWF4OyBpKyspIHtcbiAgICAgICAgICBpZiAodGhpcy5fdHJhY2VCdWZmZXIubGVuZ3RoID09IHRoaXMuX01BWF9UUkFDRV9FTlRSSUVTKSB7XG4gICAgICAgICAgICB0aGlzLl90cmFjZUJ1ZmZlci5zaGlmdCgpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoaSA9PT0gMCkgdGhpcy5fdHJhY2VCdWZmZXIucHVzaChhcmd1bWVudHNbaV0pO1xuICAgICAgICAgIGVsc2UgaWYgKHR5cGVvZiBhcmd1bWVudHNbaV0gPT09IFwidW5kZWZpbmVkXCIpXG4gICAgICAgICAgICB0aGlzLl90cmFjZUJ1ZmZlci5wdXNoKGFyZ3VtZW50c1tpXSk7XG4gICAgICAgICAgZWxzZSB0aGlzLl90cmFjZUJ1ZmZlci5wdXNoKFwiICBcIiArIEpTT04uc3RyaW5naWZ5KGFyZ3VtZW50c1tpXSkpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfTtcblxuICAgIC8qKiBAaWdub3JlICovXG4gICAgQ2xpZW50SW1wbC5wcm90b3R5cGUuX3RyYWNlTWFzayA9IGZ1bmN0aW9uKHRyYWNlT2JqZWN0LCBtYXNrZWQpIHtcbiAgICAgIHZhciB0cmFjZU9iamVjdE1hc2tlZCA9IHt9O1xuICAgICAgZm9yICh2YXIgYXR0ciBpbiB0cmFjZU9iamVjdCkge1xuICAgICAgICBpZiAodHJhY2VPYmplY3QuaGFzT3duUHJvcGVydHkoYXR0cikpIHtcbiAgICAgICAgICBpZiAoYXR0ciA9PSBtYXNrZWQpIHRyYWNlT2JqZWN0TWFza2VkW2F0dHJdID0gXCIqKioqKipcIjtcbiAgICAgICAgICBlbHNlIHRyYWNlT2JqZWN0TWFza2VkW2F0dHJdID0gdHJhY2VPYmplY3RbYXR0cl07XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiB0cmFjZU9iamVjdE1hc2tlZDtcbiAgICB9O1xuXG4gICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgLy8gUHVibGljIFByb2dyYW1taW5nIGludGVyZmFjZS5cbiAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuICAgIC8qKlxuICAgICAqIFRoZSBKYXZhU2NyaXB0IGFwcGxpY2F0aW9uIGNvbW11bmljYXRlcyB0byB0aGUgc2VydmVyIHVzaW5nIGEge0BsaW5rIFBhaG8uQ2xpZW50fSBvYmplY3QuXG4gICAgICogPHA+XG4gICAgICogTW9zdCBhcHBsaWNhdGlvbnMgd2lsbCBjcmVhdGUganVzdCBvbmUgQ2xpZW50IG9iamVjdCBhbmQgdGhlbiBjYWxsIGl0cyBjb25uZWN0KCkgbWV0aG9kLFxuICAgICAqIGhvd2V2ZXIgYXBwbGljYXRpb25zIGNhbiBjcmVhdGUgbW9yZSB0aGFuIG9uZSBDbGllbnQgb2JqZWN0IGlmIHRoZXkgd2lzaC5cbiAgICAgKiBJbiB0aGlzIGNhc2UgdGhlIGNvbWJpbmF0aW9uIG9mIGhvc3QsIHBvcnQgYW5kIGNsaWVudElkIGF0dHJpYnV0ZXMgbXVzdCBiZSBkaWZmZXJlbnQgZm9yIGVhY2ggQ2xpZW50IG9iamVjdC5cbiAgICAgKiA8cD5cbiAgICAgKiBUaGUgc2VuZCwgc3Vic2NyaWJlIGFuZCB1bnN1YnNjcmliZSBtZXRob2RzIGFyZSBpbXBsZW1lbnRlZCBhcyBhc3luY2hyb25vdXMgSmF2YVNjcmlwdCBtZXRob2RzXG4gICAgICogKGV2ZW4gdGhvdWdoIHRoZSB1bmRlcmx5aW5nIHByb3RvY29sIGV4Y2hhbmdlIG1pZ2h0IGJlIHN5bmNocm9ub3VzIGluIG5hdHVyZSkuXG4gICAgICogVGhpcyBtZWFucyB0aGV5IHNpZ25hbCB0aGVpciBjb21wbGV0aW9uIGJ5IGNhbGxpbmcgYmFjayB0byB0aGUgYXBwbGljYXRpb24sXG4gICAgICogdmlhIFN1Y2Nlc3Mgb3IgRmFpbHVyZSBjYWxsYmFjayBmdW5jdGlvbnMgcHJvdmlkZWQgYnkgdGhlIGFwcGxpY2F0aW9uIG9uIHRoZSBtZXRob2QgaW4gcXVlc3Rpb24uXG4gICAgICogU3VjaCBjYWxsYmFja3MgYXJlIGNhbGxlZCBhdCBtb3N0IG9uY2UgcGVyIG1ldGhvZCBpbnZvY2F0aW9uIGFuZCBkbyBub3QgcGVyc2lzdCBiZXlvbmQgdGhlIGxpZmV0aW1lXG4gICAgICogb2YgdGhlIHNjcmlwdCB0aGF0IG1hZGUgdGhlIGludm9jYXRpb24uXG4gICAgICogPHA+XG4gICAgICogSW4gY29udHJhc3QgdGhlcmUgYXJlIHNvbWUgY2FsbGJhY2sgZnVuY3Rpb25zLCBtb3N0IG5vdGFibHkgPGk+b25NZXNzYWdlQXJyaXZlZDwvaT4sXG4gICAgICogdGhhdCBhcmUgZGVmaW5lZCBvbiB0aGUge0BsaW5rIFBhaG8uQ2xpZW50fSBvYmplY3QuXG4gICAgICogVGhlc2UgbWF5IGdldCBjYWxsZWQgbXVsdGlwbGUgdGltZXMsIGFuZCBhcmVuJ3QgZGlyZWN0bHkgcmVsYXRlZCB0byBzcGVjaWZpYyBtZXRob2QgaW52b2NhdGlvbnMgbWFkZSBieSB0aGUgY2xpZW50LlxuICAgICAqXG4gICAgICogQG5hbWUgUGFoby5DbGllbnRcbiAgICAgKlxuICAgICAqIEBjb25zdHJ1Y3RvclxuICAgICAqXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGhvc3QgLSB0aGUgYWRkcmVzcyBvZiB0aGUgbWVzc2FnaW5nIHNlcnZlciwgYXMgYSBmdWxseSBxdWFsaWZpZWQgV2ViU29ja2V0IFVSSSwgYXMgYSBETlMgbmFtZSBvciBkb3R0ZWQgZGVjaW1hbCBJUCBhZGRyZXNzLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBwb3J0IC0gdGhlIHBvcnQgbnVtYmVyIHRvIGNvbm5lY3QgdG8gLSBvbmx5IHJlcXVpcmVkIGlmIGhvc3QgaXMgbm90IGEgVVJJXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHBhdGggLSB0aGUgcGF0aCBvbiB0aGUgaG9zdCB0byBjb25uZWN0IHRvIC0gb25seSB1c2VkIGlmIGhvc3QgaXMgbm90IGEgVVJJLiBEZWZhdWx0OiAnL21xdHQnLlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBjbGllbnRJZCAtIHRoZSBNZXNzYWdpbmcgY2xpZW50IGlkZW50aWZpZXIsIGJldHdlZW4gMSBhbmQgMjMgY2hhcmFjdGVycyBpbiBsZW5ndGguXG4gICAgICpcbiAgICAgKiBAcHJvcGVydHkge3N0cmluZ30gaG9zdCAtIDxpPnJlYWQgb25seTwvaT4gdGhlIHNlcnZlcidzIEROUyBob3N0bmFtZSBvciBkb3R0ZWQgZGVjaW1hbCBJUCBhZGRyZXNzLlxuICAgICAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBwb3J0IC0gPGk+cmVhZCBvbmx5PC9pPiB0aGUgc2VydmVyJ3MgcG9ydC5cbiAgICAgKiBAcHJvcGVydHkge3N0cmluZ30gcGF0aCAtIDxpPnJlYWQgb25seTwvaT4gdGhlIHNlcnZlcidzIHBhdGguXG4gICAgICogQHByb3BlcnR5IHtzdHJpbmd9IGNsaWVudElkIC0gPGk+cmVhZCBvbmx5PC9pPiB1c2VkIHdoZW4gY29ubmVjdGluZyB0byB0aGUgc2VydmVyLlxuICAgICAqIEBwcm9wZXJ0eSB7ZnVuY3Rpb259IG9uQ29ubmVjdGlvbkxvc3QgLSBjYWxsZWQgd2hlbiBhIGNvbm5lY3Rpb24gaGFzIGJlZW4gbG9zdC5cbiAgICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhZnRlciBhIGNvbm5lY3QoKSBtZXRob2QgaGFzIHN1Y2NlZWRlZC5cbiAgICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICBFc3RhYmxpc2ggdGhlIGNhbGwgYmFjayB1c2VkIHdoZW4gYSBjb25uZWN0aW9uIGhhcyBiZWVuIGxvc3QuIFRoZSBjb25uZWN0aW9uIG1heSBiZVxuICAgICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvc3QgYmVjYXVzZSB0aGUgY2xpZW50IGluaXRpYXRlcyBhIGRpc2Nvbm5lY3Qgb3IgYmVjYXVzZSB0aGUgc2VydmVyIG9yIG5ldHdvcmtcbiAgICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXVzZSB0aGUgY2xpZW50IHRvIGJlIGRpc2Nvbm5lY3RlZC4gVGhlIGRpc2Nvbm5lY3QgY2FsbCBiYWNrIG1heSBiZSBjYWxsZWQgd2l0aG91dFxuICAgICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoZSBjb25uZWN0aW9uQ29tcGxldGUgY2FsbCBiYWNrIGJlaW5nIGludm9rZWQgaWYsIGZvciBleGFtcGxlIHRoZSBjbGllbnQgZmFpbHMgdG9cbiAgICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25uZWN0LlxuICAgICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgIEEgc2luZ2xlIHJlc3BvbnNlIG9iamVjdCBwYXJhbWV0ZXIgaXMgcGFzc2VkIHRvIHRoZSBvbkNvbm5lY3Rpb25Mb3N0IGNhbGxiYWNrIGNvbnRhaW5pbmcgdGhlIGZvbGxvd2luZyBmaWVsZHM6XG4gICAgICogICAgICAgICAgICAgICAgICAgICAgICAgICAgPG9sPlxuICAgICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsaT5lcnJvckNvZGVcbiAgICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGk+ZXJyb3JNZXNzYWdlXG4gICAgICogICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9vbD5cbiAgICAgKiBAcHJvcGVydHkge2Z1bmN0aW9ufSBvbk1lc3NhZ2VEZWxpdmVyZWQgLSBjYWxsZWQgd2hlbiBhIG1lc3NhZ2UgaGFzIGJlZW4gZGVsaXZlcmVkLlxuICAgICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgIEFsbCBwcm9jZXNzaW5nIHRoYXQgdGhpcyBDbGllbnQgd2lsbCBldmVyIGRvIGhhcyBiZWVuIGNvbXBsZXRlZC4gU28sIGZvciBleGFtcGxlLFxuICAgICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluIHRoZSBjYXNlIG9mIGEgUW9zPTIgbWVzc2FnZSBzZW50IGJ5IHRoaXMgY2xpZW50LCB0aGUgUHViQ29tcCBmbG93IGhhcyBiZWVuIHJlY2VpdmVkIGZyb20gdGhlIHNlcnZlclxuICAgICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFuZCB0aGUgbWVzc2FnZSBoYXMgYmVlbiByZW1vdmVkIGZyb20gcGVyc2lzdGVudCBzdG9yYWdlIGJlZm9yZSB0aGlzIGNhbGxiYWNrIGlzIGludm9rZWQuXG4gICAgICogICAgICAgICAgICAgICAgICAgICAgICAgICAgUGFyYW1ldGVycyBwYXNzZWQgdG8gdGhlIG9uTWVzc2FnZURlbGl2ZXJlZCBjYWxsYmFjayBhcmU6XG4gICAgICogICAgICAgICAgICAgICAgICAgICAgICAgICAgPG9sPlxuICAgICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsaT57QGxpbmsgUGFoby5NZXNzYWdlfSB0aGF0IHdhcyBkZWxpdmVyZWQuXG4gICAgICogICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9vbD5cbiAgICAgKiBAcHJvcGVydHkge2Z1bmN0aW9ufSBvbk1lc3NhZ2VBcnJpdmVkIC0gY2FsbGVkIHdoZW4gYSBtZXNzYWdlIGhhcyBhcnJpdmVkIGluIHRoaXMgUGFoby5jbGllbnQuXG4gICAgICogICAgICAgICAgICAgICAgICAgICAgICAgICAgUGFyYW1ldGVycyBwYXNzZWQgdG8gdGhlIG9uTWVzc2FnZUFycml2ZWQgY2FsbGJhY2sgYXJlOlxuICAgICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxvbD5cbiAgICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGk+e0BsaW5rIFBhaG8uTWVzc2FnZX0gdGhhdCBoYXMgYXJyaXZlZC5cbiAgICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L29sPlxuICAgICAqIEBwcm9wZXJ0eSB7ZnVuY3Rpb259IG9uQ29ubmVjdGVkIC0gY2FsbGVkIHdoZW4gYSBjb25uZWN0aW9uIGlzIHN1Y2Nlc3NmdWxseSBtYWRlIHRvIHRoZSBzZXJ2ZXIuXG4gICAgICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWZ0ZXIgYSBjb25uZWN0KCkgbWV0aG9kLlxuICAgICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFBhcmFtZXRlcnMgcGFzc2VkIHRvIHRoZSBvbkNvbm5lY3RlZCBjYWxsYmFjayBhcmU6XG4gICAgICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPG9sPlxuICAgICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsaT5yZWNvbm5lY3QgKGJvb2xlYW4pIC0gSWYgdHJ1ZSwgdGhlIGNvbm5lY3Rpb24gd2FzIHRoZSByZXN1bHQgb2YgYSByZWNvbm5lY3QuPC9saT5cbiAgICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGk+VVJJIChzdHJpbmcpIC0gVGhlIFVSSSB1c2VkIHRvIGNvbm5lY3QgdG8gdGhlIHNlcnZlci48L2xpPlxuICAgICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvb2w+XG4gICAgICogQHByb3BlcnR5IHtib29sZWFufSBkaXNjb25uZWN0ZWRQdWJsaXNoaW5nIC0gaWYgc2V0LCB3aWxsIGVuYWJsZSBkaXNjb25uZWN0ZWQgcHVibGlzaGluZyBpblxuICAgICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbiB0aGUgZXZlbnQgdGhhdCB0aGUgY29ubmVjdGlvbiB0byB0aGUgc2VydmVyIGlzIGxvc3QuXG4gICAgICogQHByb3BlcnR5IHtudW1iZXJ9IGRpc2Nvbm5lY3RlZEJ1ZmZlclNpemUgLSBVc2VkIHRvIHNldCB0aGUgbWF4aW11bSBudW1iZXIgb2YgbWVzc2FnZXMgdGhhdCB0aGUgZGlzY29ubmVjdGVkXG4gICAgICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBidWZmZXIgd2lsbCBob2xkIGJlZm9yZSByZWplY3RpbmcgbmV3IG1lc3NhZ2VzLiBEZWZhdWx0IHNpemU6IDUwMDAgbWVzc2FnZXNcbiAgICAgKiBAcHJvcGVydHkge2Z1bmN0aW9ufSB0cmFjZSAtIGNhbGxlZCB3aGVuZXZlciB0cmFjZSBpcyBjYWxsZWQuIFRPRE9cbiAgICAgKi9cbiAgICB2YXIgQ2xpZW50ID0gZnVuY3Rpb24oaG9zdCwgcG9ydCwgcGF0aCwgY2xpZW50SWQpIHtcbiAgICAgIHZhciB1cmk7XG5cbiAgICAgIGlmICh0eXBlb2YgaG9zdCAhPT0gXCJzdHJpbmdcIilcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGZvcm1hdChFUlJPUi5JTlZBTElEX1RZUEUsIFt0eXBlb2YgaG9zdCwgXCJob3N0XCJdKSk7XG5cbiAgICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID09IDIpIHtcbiAgICAgICAgLy8gaG9zdDogbXVzdCBiZSBmdWxsIHdzOi8vIHVyaVxuICAgICAgICAvLyBwb3J0OiBjbGllbnRJZFxuICAgICAgICBjbGllbnRJZCA9IHBvcnQ7XG4gICAgICAgIHVyaSA9IGhvc3Q7XG4gICAgICAgIHZhciBtYXRjaCA9IHVyaS5tYXRjaChcbiAgICAgICAgICAvXih3c3M/KTpcXC9cXC8oKFxcWyguKylcXF0pfChbXlxcL10rPykpKDooXFxkKykpPyhcXC8uKikkL1xuICAgICAgICApO1xuICAgICAgICBpZiAobWF0Y2gpIHtcbiAgICAgICAgICBob3N0ID0gbWF0Y2hbNF0gfHwgbWF0Y2hbMl07XG4gICAgICAgICAgcG9ydCA9IHBhcnNlSW50KG1hdGNoWzddKTtcbiAgICAgICAgICBwYXRoID0gbWF0Y2hbOF07XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGZvcm1hdChFUlJPUi5JTlZBTElEX0FSR1VNRU5ULCBbaG9zdCwgXCJob3N0XCJdKSk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID09IDMpIHtcbiAgICAgICAgICBjbGllbnRJZCA9IHBhdGg7XG4gICAgICAgICAgcGF0aCA9IFwiL21xdHRcIjtcbiAgICAgICAgfVxuICAgICAgICBpZiAodHlwZW9mIHBvcnQgIT09IFwibnVtYmVyXCIgfHwgcG9ydCA8IDApXG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGZvcm1hdChFUlJPUi5JTlZBTElEX1RZUEUsIFt0eXBlb2YgcG9ydCwgXCJwb3J0XCJdKSk7XG4gICAgICAgIGlmICh0eXBlb2YgcGF0aCAhPT0gXCJzdHJpbmdcIilcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoZm9ybWF0KEVSUk9SLklOVkFMSURfVFlQRSwgW3R5cGVvZiBwYXRoLCBcInBhdGhcIl0pKTtcblxuICAgICAgICB2YXIgaXB2NkFkZFNCcmFja2V0ID1cbiAgICAgICAgICBob3N0LmluZGV4T2YoXCI6XCIpICE9PSAtMSAmJlxuICAgICAgICAgIGhvc3Quc2xpY2UoMCwgMSkgIT09IFwiW1wiICYmXG4gICAgICAgICAgaG9zdC5zbGljZSgtMSkgIT09IFwiXVwiO1xuICAgICAgICB1cmkgPVxuICAgICAgICAgIFwid3M6Ly9cIiArXG4gICAgICAgICAgKGlwdjZBZGRTQnJhY2tldCA/IFwiW1wiICsgaG9zdCArIFwiXVwiIDogaG9zdCkgK1xuICAgICAgICAgIFwiOlwiICtcbiAgICAgICAgICBwb3J0ICtcbiAgICAgICAgICBwYXRoO1xuICAgICAgfVxuXG4gICAgICB2YXIgY2xpZW50SWRMZW5ndGggPSAwO1xuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjbGllbnRJZC5sZW5ndGg7IGkrKykge1xuICAgICAgICB2YXIgY2hhckNvZGUgPSBjbGllbnRJZC5jaGFyQ29kZUF0KGkpO1xuICAgICAgICBpZiAoMHhkODAwIDw9IGNoYXJDb2RlICYmIGNoYXJDb2RlIDw9IDB4ZGJmZikge1xuICAgICAgICAgIGkrKzsgLy8gU3Vycm9nYXRlIHBhaXIuXG4gICAgICAgIH1cbiAgICAgICAgY2xpZW50SWRMZW5ndGgrKztcbiAgICAgIH1cbiAgICAgIGlmICh0eXBlb2YgY2xpZW50SWQgIT09IFwic3RyaW5nXCIgfHwgY2xpZW50SWRMZW5ndGggPiA2NTUzNSlcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGZvcm1hdChFUlJPUi5JTlZBTElEX0FSR1VNRU5ULCBbY2xpZW50SWQsIFwiY2xpZW50SWRcIl0pKTtcblxuICAgICAgdmFyIGNsaWVudCA9IG5ldyBDbGllbnRJbXBsKHVyaSwgaG9zdCwgcG9ydCwgcGF0aCwgY2xpZW50SWQpO1xuXG4gICAgICAvL1B1YmxpYyBQcm9wZXJ0aWVzXG4gICAgICBPYmplY3QuZGVmaW5lUHJvcGVydGllcyh0aGlzLCB7XG4gICAgICAgIGhvc3Q6IHtcbiAgICAgICAgICBnZXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgcmV0dXJuIGhvc3Q7XG4gICAgICAgICAgfSxcbiAgICAgICAgICBzZXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGZvcm1hdChFUlJPUi5VTlNVUFBPUlRFRF9PUEVSQVRJT04pKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIHBvcnQ6IHtcbiAgICAgICAgICBnZXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgcmV0dXJuIHBvcnQ7XG4gICAgICAgICAgfSxcbiAgICAgICAgICBzZXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGZvcm1hdChFUlJPUi5VTlNVUFBPUlRFRF9PUEVSQVRJT04pKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIHBhdGg6IHtcbiAgICAgICAgICBnZXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgcmV0dXJuIHBhdGg7XG4gICAgICAgICAgfSxcbiAgICAgICAgICBzZXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGZvcm1hdChFUlJPUi5VTlNVUFBPUlRFRF9PUEVSQVRJT04pKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIHVyaToge1xuICAgICAgICAgIGdldDogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICByZXR1cm4gdXJpO1xuICAgICAgICAgIH0sXG4gICAgICAgICAgc2V0OiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihmb3JtYXQoRVJST1IuVU5TVVBQT1JURURfT1BFUkFUSU9OKSk7XG4gICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBjbGllbnRJZDoge1xuICAgICAgICAgIGdldDogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICByZXR1cm4gY2xpZW50LmNsaWVudElkO1xuICAgICAgICAgIH0sXG4gICAgICAgICAgc2V0OiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihmb3JtYXQoRVJST1IuVU5TVVBQT1JURURfT1BFUkFUSU9OKSk7XG4gICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBvbkNvbm5lY3RlZDoge1xuICAgICAgICAgIGdldDogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICByZXR1cm4gY2xpZW50Lm9uQ29ubmVjdGVkO1xuICAgICAgICAgIH0sXG4gICAgICAgICAgc2V0OiBmdW5jdGlvbihuZXdPbkNvbm5lY3RlZCkge1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBuZXdPbkNvbm5lY3RlZCA9PT0gXCJmdW5jdGlvblwiKVxuICAgICAgICAgICAgICBjbGllbnQub25Db25uZWN0ZWQgPSBuZXdPbkNvbm5lY3RlZDtcbiAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICAgICAgICAgIGZvcm1hdChFUlJPUi5JTlZBTElEX1RZUEUsIFtcbiAgICAgICAgICAgICAgICAgIHR5cGVvZiBuZXdPbkNvbm5lY3RlZCxcbiAgICAgICAgICAgICAgICAgIFwib25Db25uZWN0ZWRcIlxuICAgICAgICAgICAgICAgIF0pXG4gICAgICAgICAgICAgICk7XG4gICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBkaXNjb25uZWN0ZWRQdWJsaXNoaW5nOiB7XG4gICAgICAgICAgZ2V0OiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHJldHVybiBjbGllbnQuZGlzY29ubmVjdGVkUHVibGlzaGluZztcbiAgICAgICAgICB9LFxuICAgICAgICAgIHNldDogZnVuY3Rpb24obmV3RGlzY29ubmVjdGVkUHVibGlzaGluZykge1xuICAgICAgICAgICAgY2xpZW50LmRpc2Nvbm5lY3RlZFB1Ymxpc2hpbmcgPSBuZXdEaXNjb25uZWN0ZWRQdWJsaXNoaW5nO1xuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgZGlzY29ubmVjdGVkQnVmZmVyU2l6ZToge1xuICAgICAgICAgIGdldDogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICByZXR1cm4gY2xpZW50LmRpc2Nvbm5lY3RlZEJ1ZmZlclNpemU7XG4gICAgICAgICAgfSxcbiAgICAgICAgICBzZXQ6IGZ1bmN0aW9uKG5ld0Rpc2Nvbm5lY3RlZEJ1ZmZlclNpemUpIHtcbiAgICAgICAgICAgIGNsaWVudC5kaXNjb25uZWN0ZWRCdWZmZXJTaXplID0gbmV3RGlzY29ubmVjdGVkQnVmZmVyU2l6ZTtcbiAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIG9uQ29ubmVjdGlvbkxvc3Q6IHtcbiAgICAgICAgICBnZXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgcmV0dXJuIGNsaWVudC5vbkNvbm5lY3Rpb25Mb3N0O1xuICAgICAgICAgIH0sXG4gICAgICAgICAgc2V0OiBmdW5jdGlvbihuZXdPbkNvbm5lY3Rpb25Mb3N0KSB7XG4gICAgICAgICAgICBpZiAodHlwZW9mIG5ld09uQ29ubmVjdGlvbkxvc3QgPT09IFwiZnVuY3Rpb25cIilcbiAgICAgICAgICAgICAgY2xpZW50Lm9uQ29ubmVjdGlvbkxvc3QgPSBuZXdPbkNvbm5lY3Rpb25Mb3N0O1xuICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgICAgICAgICAgZm9ybWF0KEVSUk9SLklOVkFMSURfVFlQRSwgW1xuICAgICAgICAgICAgICAgICAgdHlwZW9mIG5ld09uQ29ubmVjdGlvbkxvc3QsXG4gICAgICAgICAgICAgICAgICBcIm9uQ29ubmVjdGlvbkxvc3RcIlxuICAgICAgICAgICAgICAgIF0pXG4gICAgICAgICAgICAgICk7XG4gICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBvbk1lc3NhZ2VEZWxpdmVyZWQ6IHtcbiAgICAgICAgICBnZXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgcmV0dXJuIGNsaWVudC5vbk1lc3NhZ2VEZWxpdmVyZWQ7XG4gICAgICAgICAgfSxcbiAgICAgICAgICBzZXQ6IGZ1bmN0aW9uKG5ld09uTWVzc2FnZURlbGl2ZXJlZCkge1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBuZXdPbk1lc3NhZ2VEZWxpdmVyZWQgPT09IFwiZnVuY3Rpb25cIilcbiAgICAgICAgICAgICAgY2xpZW50Lm9uTWVzc2FnZURlbGl2ZXJlZCA9IG5ld09uTWVzc2FnZURlbGl2ZXJlZDtcbiAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICAgICAgICAgIGZvcm1hdChFUlJPUi5JTlZBTElEX1RZUEUsIFtcbiAgICAgICAgICAgICAgICAgIHR5cGVvZiBuZXdPbk1lc3NhZ2VEZWxpdmVyZWQsXG4gICAgICAgICAgICAgICAgICBcIm9uTWVzc2FnZURlbGl2ZXJlZFwiXG4gICAgICAgICAgICAgICAgXSlcbiAgICAgICAgICAgICAgKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIG9uTWVzc2FnZUFycml2ZWQ6IHtcbiAgICAgICAgICBnZXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgcmV0dXJuIGNsaWVudC5vbk1lc3NhZ2VBcnJpdmVkO1xuICAgICAgICAgIH0sXG4gICAgICAgICAgc2V0OiBmdW5jdGlvbihuZXdPbk1lc3NhZ2VBcnJpdmVkKSB7XG4gICAgICAgICAgICBpZiAodHlwZW9mIG5ld09uTWVzc2FnZUFycml2ZWQgPT09IFwiZnVuY3Rpb25cIilcbiAgICAgICAgICAgICAgY2xpZW50Lm9uTWVzc2FnZUFycml2ZWQgPSBuZXdPbk1lc3NhZ2VBcnJpdmVkO1xuICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgICAgICAgICAgZm9ybWF0KEVSUk9SLklOVkFMSURfVFlQRSwgW1xuICAgICAgICAgICAgICAgICAgdHlwZW9mIG5ld09uTWVzc2FnZUFycml2ZWQsXG4gICAgICAgICAgICAgICAgICBcIm9uTWVzc2FnZUFycml2ZWRcIlxuICAgICAgICAgICAgICAgIF0pXG4gICAgICAgICAgICAgICk7XG4gICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICB0cmFjZToge1xuICAgICAgICAgIGdldDogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICByZXR1cm4gY2xpZW50LnRyYWNlRnVuY3Rpb247XG4gICAgICAgICAgfSxcbiAgICAgICAgICBzZXQ6IGZ1bmN0aW9uKHRyYWNlKSB7XG4gICAgICAgICAgICBpZiAodHlwZW9mIHRyYWNlID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgICAgICAgY2xpZW50LnRyYWNlRnVuY3Rpb24gPSB0cmFjZTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgICAgICAgICBmb3JtYXQoRVJST1IuSU5WQUxJRF9UWVBFLCBbdHlwZW9mIHRyYWNlLCBcIm9uVHJhY2VcIl0pXG4gICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgLyoqXG4gICAgICAgKiBDb25uZWN0IHRoaXMgTWVzc2FnaW5nIGNsaWVudCB0byBpdHMgc2VydmVyLlxuICAgICAgICpcbiAgICAgICAqIEBuYW1lIFBhaG8uQ2xpZW50I2Nvbm5lY3RcbiAgICAgICAqIEBmdW5jdGlvblxuICAgICAgICogQHBhcmFtIHtvYmplY3R9IGNvbm5lY3RPcHRpb25zIC0gQXR0cmlidXRlcyB1c2VkIHdpdGggdGhlIGNvbm5lY3Rpb24uXG4gICAgICAgKiBAcGFyYW0ge251bWJlcn0gY29ubmVjdE9wdGlvbnMudGltZW91dCAtIElmIHRoZSBjb25uZWN0IGhhcyBub3Qgc3VjY2VlZGVkIHdpdGhpbiB0aGlzXG4gICAgICAgKiAgICAgICAgICAgICAgICAgICAgbnVtYmVyIG9mIHNlY29uZHMsIGl0IGlzIGRlZW1lZCB0byBoYXZlIGZhaWxlZC5cbiAgICAgICAqICAgICAgICAgICAgICAgICAgICBUaGUgZGVmYXVsdCBpcyAzMCBzZWNvbmRzLlxuICAgICAgICogQHBhcmFtIHtzdHJpbmd9IGNvbm5lY3RPcHRpb25zLnVzZXJOYW1lIC0gQXV0aGVudGljYXRpb24gdXNlcm5hbWUgZm9yIHRoaXMgY29ubmVjdGlvbi5cbiAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSBjb25uZWN0T3B0aW9ucy5wYXNzd29yZCAtIEF1dGhlbnRpY2F0aW9uIHBhc3N3b3JkIGZvciB0aGlzIGNvbm5lY3Rpb24uXG4gICAgICAgKiBAcGFyYW0ge1BhaG8uTWVzc2FnZX0gY29ubmVjdE9wdGlvbnMud2lsbE1lc3NhZ2UgLSBzZW50IGJ5IHRoZSBzZXJ2ZXIgd2hlbiB0aGUgY2xpZW50XG4gICAgICAgKiAgICAgICAgICAgICAgICAgICAgZGlzY29ubmVjdHMgYWJub3JtYWxseS5cbiAgICAgICAqIEBwYXJhbSB7bnVtYmVyfSBjb25uZWN0T3B0aW9ucy5rZWVwQWxpdmVJbnRlcnZhbCAtIHRoZSBzZXJ2ZXIgZGlzY29ubmVjdHMgdGhpcyBjbGllbnQgaWZcbiAgICAgICAqICAgICAgICAgICAgICAgICAgICB0aGVyZSBpcyBubyBhY3Rpdml0eSBmb3IgdGhpcyBudW1iZXIgb2Ygc2Vjb25kcy5cbiAgICAgICAqICAgICAgICAgICAgICAgICAgICBUaGUgZGVmYXVsdCB2YWx1ZSBvZiA2MCBzZWNvbmRzIGlzIGFzc3VtZWQgaWYgbm90IHNldC5cbiAgICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gY29ubmVjdE9wdGlvbnMuY2xlYW5TZXNzaW9uIC0gaWYgdHJ1ZShkZWZhdWx0KSB0aGUgY2xpZW50IGFuZCBzZXJ2ZXJcbiAgICAgICAqICAgICAgICAgICAgICAgICAgICBwZXJzaXN0ZW50IHN0YXRlIGlzIGRlbGV0ZWQgb24gc3VjY2Vzc2Z1bCBjb25uZWN0LlxuICAgICAgICogQHBhcmFtIHtib29sZWFufSBjb25uZWN0T3B0aW9ucy51c2VTU0wgLSBpZiBwcmVzZW50IGFuZCB0cnVlLCB1c2UgYW4gU1NMIFdlYnNvY2tldCBjb25uZWN0aW9uLlxuICAgICAgICogQHBhcmFtIHtvYmplY3R9IGNvbm5lY3RPcHRpb25zLmludm9jYXRpb25Db250ZXh0IC0gcGFzc2VkIHRvIHRoZSBvblN1Y2Nlc3MgY2FsbGJhY2sgb3Igb25GYWlsdXJlIGNhbGxiYWNrLlxuICAgICAgICogQHBhcmFtIHtmdW5jdGlvbn0gY29ubmVjdE9wdGlvbnMub25TdWNjZXNzIC0gY2FsbGVkIHdoZW4gdGhlIGNvbm5lY3QgYWNrbm93bGVkZ2VtZW50XG4gICAgICAgKiAgICAgICAgICAgICAgICAgICAgaGFzIGJlZW4gcmVjZWl2ZWQgZnJvbSB0aGUgc2VydmVyLlxuICAgICAgICogQSBzaW5nbGUgcmVzcG9uc2Ugb2JqZWN0IHBhcmFtZXRlciBpcyBwYXNzZWQgdG8gdGhlIG9uU3VjY2VzcyBjYWxsYmFjayBjb250YWluaW5nIHRoZSBmb2xsb3dpbmcgZmllbGRzOlxuICAgICAgICogPG9sPlxuICAgICAgICogPGxpPmludm9jYXRpb25Db250ZXh0IGFzIHBhc3NlZCBpbiB0byB0aGUgb25TdWNjZXNzIG1ldGhvZCBpbiB0aGUgY29ubmVjdE9wdGlvbnMuXG4gICAgICAgKiA8L29sPlxuICAgICAgICogQHBhcmFtIHtmdW5jdGlvbn0gY29ubmVjdE9wdGlvbnMub25GYWlsdXJlIC0gY2FsbGVkIHdoZW4gdGhlIGNvbm5lY3QgcmVxdWVzdCBoYXMgZmFpbGVkIG9yIHRpbWVkIG91dC5cbiAgICAgICAqIEEgc2luZ2xlIHJlc3BvbnNlIG9iamVjdCBwYXJhbWV0ZXIgaXMgcGFzc2VkIHRvIHRoZSBvbkZhaWx1cmUgY2FsbGJhY2sgY29udGFpbmluZyB0aGUgZm9sbG93aW5nIGZpZWxkczpcbiAgICAgICAqIDxvbD5cbiAgICAgICAqIDxsaT5pbnZvY2F0aW9uQ29udGV4dCBhcyBwYXNzZWQgaW4gdG8gdGhlIG9uRmFpbHVyZSBtZXRob2QgaW4gdGhlIGNvbm5lY3RPcHRpb25zLlxuICAgICAgICogPGxpPmVycm9yQ29kZSBhIG51bWJlciBpbmRpY2F0aW5nIHRoZSBuYXR1cmUgb2YgdGhlIGVycm9yLlxuICAgICAgICogPGxpPmVycm9yTWVzc2FnZSB0ZXh0IGRlc2NyaWJpbmcgdGhlIGVycm9yLlxuICAgICAgICogPC9vbD5cbiAgICAgICAqIEBwYXJhbSB7YXJyYXl9IGNvbm5lY3RPcHRpb25zLmhvc3RzIC0gSWYgcHJlc2VudCB0aGlzIGNvbnRhaW5zIGVpdGhlciBhIHNldCBvZiBob3N0bmFtZXMgb3IgZnVsbHkgcXVhbGlmaWVkXG4gICAgICAgKiBXZWJTb2NrZXQgVVJJcyAod3M6Ly9pb3QuZWNsaXBzZS5vcmc6ODAvd3MpLCB0aGF0IGFyZSB0cmllZCBpbiBvcmRlciBpbiBwbGFjZVxuICAgICAgICogb2YgdGhlIGhvc3QgYW5kIHBvcnQgcGFyYW1hdGVyIG9uIHRoZSBjb25zdHJ1dG9yLiBUaGUgaG9zdHMgYXJlIHRyaWVkIG9uZSBhdCBhdCB0aW1lIGluIG9yZGVyIHVudGlsXG4gICAgICAgKiBvbmUgb2YgdGhlbiBzdWNjZWVkcy5cbiAgICAgICAqIEBwYXJhbSB7YXJyYXl9IGNvbm5lY3RPcHRpb25zLnBvcnRzIC0gSWYgcHJlc2VudCB0aGUgc2V0IG9mIHBvcnRzIG1hdGNoaW5nIHRoZSBob3N0cy4gSWYgaG9zdHMgY29udGFpbnMgVVJJcywgdGhpcyBwcm9wZXJ0eVxuICAgICAgICogaXMgbm90IHVzZWQuXG4gICAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IGNvbm5lY3RPcHRpb25zLnJlY29ubmVjdCAtIFNldHMgd2hldGhlciB0aGUgY2xpZW50IHdpbGwgYXV0b21hdGljYWxseSBhdHRlbXB0IHRvIHJlY29ubmVjdFxuICAgICAgICogdG8gdGhlIHNlcnZlciBpZiB0aGUgY29ubmVjdGlvbiBpcyBsb3N0LlxuICAgICAgICo8dWw+XG4gICAgICAgKjxsaT5JZiBzZXQgdG8gZmFsc2UsIHRoZSBjbGllbnQgd2lsbCBub3QgYXR0ZW1wdCB0byBhdXRvbWF0aWNhbGx5IHJlY29ubmVjdCB0byB0aGUgc2VydmVyIGluIHRoZSBldmVudCB0aGF0IHRoZVxuICAgICAgICogY29ubmVjdGlvbiBpcyBsb3N0LjwvbGk+XG4gICAgICAgKjxsaT5JZiBzZXQgdG8gdHJ1ZSwgaW4gdGhlIGV2ZW50IHRoYXQgdGhlIGNvbm5lY3Rpb24gaXMgbG9zdCwgdGhlIGNsaWVudCB3aWxsIGF0dGVtcHQgdG8gcmVjb25uZWN0IHRvIHRoZSBzZXJ2ZXIuXG4gICAgICAgKiBJdCB3aWxsIGluaXRpYWxseSB3YWl0IDEgc2Vjb25kIGJlZm9yZSBpdCBhdHRlbXB0cyB0byByZWNvbm5lY3QsIGZvciBldmVyeSBmYWlsZWQgcmVjb25uZWN0IGF0dGVtcHQsIHRoZSBkZWxheVxuICAgICAgICogd2lsbCBkb3VibGUgdW50aWwgaXQgaXMgYXQgMiBtaW51dGVzIGF0IHdoaWNoIHBvaW50IHRoZSBkZWxheSB3aWxsIHN0YXkgYXQgMiBtaW51dGVzLjwvbGk+XG4gICAgICAgKjwvdWw+XG4gICAgICAgKiBAcGFyYW0ge251bWJlcn0gY29ubmVjdE9wdGlvbnMubXF0dFZlcnNpb24gLSBUaGUgdmVyc2lvbiBvZiBNUVRUIHRvIHVzZSB0byBjb25uZWN0IHRvIHRoZSBNUVRUIEJyb2tlci5cbiAgICAgICAqPHVsPlxuICAgICAgICo8bGk+MyAtIE1RVFQgVjMuMTwvbGk+XG4gICAgICAgKjxsaT40IC0gTVFUVCBWMy4xLjE8L2xpPlxuICAgICAgICo8L3VsPlxuICAgICAgICogQHBhcmFtIHtib29sZWFufSBjb25uZWN0T3B0aW9ucy5tcXR0VmVyc2lvbkV4cGxpY2l0IC0gSWYgc2V0IHRvIHRydWUsIHdpbGwgZm9yY2UgdGhlIGNvbm5lY3Rpb24gdG8gdXNlIHRoZVxuICAgICAgICogc2VsZWN0ZWQgTVFUVCBWZXJzaW9uIG9yIHdpbGwgZmFpbCB0byBjb25uZWN0LlxuICAgICAgICogQHBhcmFtIHthcnJheX0gY29ubmVjdE9wdGlvbnMudXJpcyAtIElmIHByZXNlbnQsIHNob3VsZCBjb250YWluIGEgbGlzdCBvZiBmdWxseSBxdWFsaWZpZWQgV2ViU29ja2V0IHVyaXNcbiAgICAgICAqIChlLmcuIHdzOi8vaW90LmVjbGlwc2Uub3JnOjgwL3dzKSwgdGhhdCBhcmUgdHJpZWQgaW4gb3JkZXIgaW4gcGxhY2Ugb2YgdGhlIGhvc3QgYW5kIHBvcnQgcGFyYW1ldGVyIG9mIHRoZSBjb25zdHJ1dG9yLlxuICAgICAgICogVGhlIHVyaXMgYXJlIHRyaWVkIG9uZSBhdCBhIHRpbWUgaW4gb3JkZXIgdW50aWwgb25lIG9mIHRoZW0gc3VjY2VlZHMuIERvIG5vdCB1c2UgdGhpcyBpbiBjb25qdW5jdGlvbiB3aXRoIGhvc3RzIGFzXG4gICAgICAgKiB0aGUgaG9zdHMgYXJyYXkgd2lsbCBiZSBjb252ZXJ0ZWQgdG8gdXJpcyBhbmQgd2lsbCBvdmVyd3JpdGUgdGhpcyBwcm9wZXJ0eS5cbiAgICAgICAqIEB0aHJvd3Mge0ludmFsaWRTdGF0ZX0gSWYgdGhlIGNsaWVudCBpcyBub3QgaW4gZGlzY29ubmVjdGVkIHN0YXRlLiBUaGUgY2xpZW50IG11c3QgaGF2ZSByZWNlaXZlZCBjb25uZWN0aW9uTG9zdFxuICAgICAgICogb3IgZGlzY29ubmVjdGVkIGJlZm9yZSBjYWxsaW5nIGNvbm5lY3QgZm9yIGEgc2Vjb25kIG9yIHN1YnNlcXVlbnQgdGltZS5cbiAgICAgICAqL1xuICAgICAgdGhpcy5jb25uZWN0ID0gZnVuY3Rpb24oY29ubmVjdE9wdGlvbnMpIHtcbiAgICAgICAgY29ubmVjdE9wdGlvbnMgPSBjb25uZWN0T3B0aW9ucyB8fCB7fTtcbiAgICAgICAgdmFsaWRhdGUoY29ubmVjdE9wdGlvbnMsIHtcbiAgICAgICAgICB0aW1lb3V0OiBcIm51bWJlclwiLFxuICAgICAgICAgIHVzZXJOYW1lOiBcInN0cmluZ1wiLFxuICAgICAgICAgIHBhc3N3b3JkOiBcInN0cmluZ1wiLFxuICAgICAgICAgIHdpbGxNZXNzYWdlOiBcIm9iamVjdFwiLFxuICAgICAgICAgIGtlZXBBbGl2ZUludGVydmFsOiBcIm51bWJlclwiLFxuICAgICAgICAgIGNsZWFuU2Vzc2lvbjogXCJib29sZWFuXCIsXG4gICAgICAgICAgdXNlU1NMOiBcImJvb2xlYW5cIixcbiAgICAgICAgICBpbnZvY2F0aW9uQ29udGV4dDogXCJvYmplY3RcIixcbiAgICAgICAgICBvblN1Y2Nlc3M6IFwiZnVuY3Rpb25cIixcbiAgICAgICAgICBvbkZhaWx1cmU6IFwiZnVuY3Rpb25cIixcbiAgICAgICAgICBob3N0czogXCJvYmplY3RcIixcbiAgICAgICAgICBwb3J0czogXCJvYmplY3RcIixcbiAgICAgICAgICByZWNvbm5lY3Q6IFwiYm9vbGVhblwiLFxuICAgICAgICAgIG1xdHRWZXJzaW9uOiBcIm51bWJlclwiLFxuICAgICAgICAgIG1xdHRWZXJzaW9uRXhwbGljaXQ6IFwiYm9vbGVhblwiLFxuICAgICAgICAgIHVyaXM6IFwib2JqZWN0XCJcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gSWYgbm8ga2VlcCBhbGl2ZSBpbnRlcnZhbCBpcyBzZXQsIGFzc3VtZSA2MCBzZWNvbmRzLlxuICAgICAgICBpZiAoY29ubmVjdE9wdGlvbnMua2VlcEFsaXZlSW50ZXJ2YWwgPT09IHVuZGVmaW5lZClcbiAgICAgICAgICBjb25uZWN0T3B0aW9ucy5rZWVwQWxpdmVJbnRlcnZhbCA9IDYwO1xuXG4gICAgICAgIGlmIChjb25uZWN0T3B0aW9ucy5tcXR0VmVyc2lvbiA+IDQgfHwgY29ubmVjdE9wdGlvbnMubXF0dFZlcnNpb24gPCAzKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICAgICAgZm9ybWF0KEVSUk9SLklOVkFMSURfQVJHVU1FTlQsIFtcbiAgICAgICAgICAgICAgY29ubmVjdE9wdGlvbnMubXF0dFZlcnNpb24sXG4gICAgICAgICAgICAgIFwiY29ubmVjdE9wdGlvbnMubXF0dFZlcnNpb25cIlxuICAgICAgICAgICAgXSlcbiAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGNvbm5lY3RPcHRpb25zLm1xdHRWZXJzaW9uID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICBjb25uZWN0T3B0aW9ucy5tcXR0VmVyc2lvbkV4cGxpY2l0ID0gZmFsc2U7XG4gICAgICAgICAgY29ubmVjdE9wdGlvbnMubXF0dFZlcnNpb24gPSA0O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNvbm5lY3RPcHRpb25zLm1xdHRWZXJzaW9uRXhwbGljaXQgPSB0cnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgLy9DaGVjayB0aGF0IGlmIHBhc3N3b3JkIGlzIHNldCwgc28gaXMgdXNlcm5hbWVcbiAgICAgICAgaWYgKFxuICAgICAgICAgIGNvbm5lY3RPcHRpb25zLnBhc3N3b3JkICE9PSB1bmRlZmluZWQgJiZcbiAgICAgICAgICBjb25uZWN0T3B0aW9ucy51c2VyTmFtZSA9PT0gdW5kZWZpbmVkXG4gICAgICAgIClcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgICAgICBmb3JtYXQoRVJST1IuSU5WQUxJRF9BUkdVTUVOVCwgW1xuICAgICAgICAgICAgICBjb25uZWN0T3B0aW9ucy5wYXNzd29yZCxcbiAgICAgICAgICAgICAgXCJjb25uZWN0T3B0aW9ucy5wYXNzd29yZFwiXG4gICAgICAgICAgICBdKVxuICAgICAgICAgICk7XG5cbiAgICAgICAgaWYgKGNvbm5lY3RPcHRpb25zLndpbGxNZXNzYWdlKSB7XG4gICAgICAgICAgaWYgKCEoY29ubmVjdE9wdGlvbnMud2lsbE1lc3NhZ2UgaW5zdGFuY2VvZiBNZXNzYWdlKSlcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgICAgICAgZm9ybWF0KEVSUk9SLklOVkFMSURfVFlQRSwgW1xuICAgICAgICAgICAgICAgIGNvbm5lY3RPcHRpb25zLndpbGxNZXNzYWdlLFxuICAgICAgICAgICAgICAgIFwiY29ubmVjdE9wdGlvbnMud2lsbE1lc3NhZ2VcIlxuICAgICAgICAgICAgICBdKVxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAvLyBUaGUgd2lsbCBtZXNzYWdlIG11c3QgaGF2ZSBhIHBheWxvYWQgdGhhdCBjYW4gYmUgcmVwcmVzZW50ZWQgYXMgYSBzdHJpbmcuXG4gICAgICAgICAgLy8gQ2F1c2UgdGhlIHdpbGxNZXNzYWdlIHRvIHRocm93IGFuIGV4Y2VwdGlvbiBpZiB0aGlzIGlzIG5vdCB0aGUgY2FzZS5cbiAgICAgICAgICBjb25uZWN0T3B0aW9ucy53aWxsTWVzc2FnZS5zdHJpbmdQYXlsb2FkID0gbnVsbDtcblxuICAgICAgICAgIGlmICh0eXBlb2YgY29ubmVjdE9wdGlvbnMud2lsbE1lc3NhZ2UuZGVzdGluYXRpb25OYW1lID09PSBcInVuZGVmaW5lZFwiKVxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICAgICAgICBmb3JtYXQoRVJST1IuSU5WQUxJRF9UWVBFLCBbXG4gICAgICAgICAgICAgICAgdHlwZW9mIGNvbm5lY3RPcHRpb25zLndpbGxNZXNzYWdlLmRlc3RpbmF0aW9uTmFtZSxcbiAgICAgICAgICAgICAgICBcImNvbm5lY3RPcHRpb25zLndpbGxNZXNzYWdlLmRlc3RpbmF0aW9uTmFtZVwiXG4gICAgICAgICAgICAgIF0pXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0eXBlb2YgY29ubmVjdE9wdGlvbnMuY2xlYW5TZXNzaW9uID09PSBcInVuZGVmaW5lZFwiKVxuICAgICAgICAgIGNvbm5lY3RPcHRpb25zLmNsZWFuU2Vzc2lvbiA9IHRydWU7XG4gICAgICAgIGlmIChjb25uZWN0T3B0aW9ucy5ob3N0cykge1xuICAgICAgICAgIGlmICghKGNvbm5lY3RPcHRpb25zLmhvc3RzIGluc3RhbmNlb2YgQXJyYXkpKVxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICAgICAgICBmb3JtYXQoRVJST1IuSU5WQUxJRF9BUkdVTUVOVCwgW1xuICAgICAgICAgICAgICAgIGNvbm5lY3RPcHRpb25zLmhvc3RzLFxuICAgICAgICAgICAgICAgIFwiY29ubmVjdE9wdGlvbnMuaG9zdHNcIlxuICAgICAgICAgICAgICBdKVxuICAgICAgICAgICAgKTtcbiAgICAgICAgICBpZiAoY29ubmVjdE9wdGlvbnMuaG9zdHMubGVuZ3RoIDwgMSlcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgICAgICAgZm9ybWF0KEVSUk9SLklOVkFMSURfQVJHVU1FTlQsIFtcbiAgICAgICAgICAgICAgICBjb25uZWN0T3B0aW9ucy5ob3N0cyxcbiAgICAgICAgICAgICAgICBcImNvbm5lY3RPcHRpb25zLmhvc3RzXCJcbiAgICAgICAgICAgICAgXSlcbiAgICAgICAgICAgICk7XG5cbiAgICAgICAgICB2YXIgdXNpbmdVUklzID0gZmFsc2U7XG4gICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjb25uZWN0T3B0aW9ucy5ob3N0cy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBjb25uZWN0T3B0aW9ucy5ob3N0c1tpXSAhPT0gXCJzdHJpbmdcIilcbiAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICAgICAgICAgIGZvcm1hdChFUlJPUi5JTlZBTElEX1RZUEUsIFtcbiAgICAgICAgICAgICAgICAgIHR5cGVvZiBjb25uZWN0T3B0aW9ucy5ob3N0c1tpXSxcbiAgICAgICAgICAgICAgICAgIFwiY29ubmVjdE9wdGlvbnMuaG9zdHNbXCIgKyBpICsgXCJdXCJcbiAgICAgICAgICAgICAgICBdKVxuICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAvXih3c3M/KTpcXC9cXC8oKFxcWyguKylcXF0pfChbXlxcL10rPykpKDooXFxkKykpPyhcXC8uKikkLy50ZXN0KFxuICAgICAgICAgICAgICAgIGNvbm5lY3RPcHRpb25zLmhvc3RzW2ldXG4gICAgICAgICAgICAgIClcbiAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICBpZiAoaSA9PT0gMCkge1xuICAgICAgICAgICAgICAgIHVzaW5nVVJJcyA9IHRydWU7XG4gICAgICAgICAgICAgIH0gZWxzZSBpZiAoIXVzaW5nVVJJcykge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgICAgICAgICAgIGZvcm1hdChFUlJPUi5JTlZBTElEX0FSR1VNRU5ULCBbXG4gICAgICAgICAgICAgICAgICAgIGNvbm5lY3RPcHRpb25zLmhvc3RzW2ldLFxuICAgICAgICAgICAgICAgICAgICBcImNvbm5lY3RPcHRpb25zLmhvc3RzW1wiICsgaSArIFwiXVwiXG4gICAgICAgICAgICAgICAgICBdKVxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSBpZiAodXNpbmdVUklzKSB7XG4gICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgICAgICAgICBmb3JtYXQoRVJST1IuSU5WQUxJRF9BUkdVTUVOVCwgW1xuICAgICAgICAgICAgICAgICAgY29ubmVjdE9wdGlvbnMuaG9zdHNbaV0sXG4gICAgICAgICAgICAgICAgICBcImNvbm5lY3RPcHRpb25zLmhvc3RzW1wiICsgaSArIFwiXVwiXG4gICAgICAgICAgICAgICAgXSlcbiAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAoIXVzaW5nVVJJcykge1xuICAgICAgICAgICAgaWYgKCFjb25uZWN0T3B0aW9ucy5wb3J0cylcbiAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICAgICAgICAgIGZvcm1hdChFUlJPUi5JTlZBTElEX0FSR1VNRU5ULCBbXG4gICAgICAgICAgICAgICAgICBjb25uZWN0T3B0aW9ucy5wb3J0cyxcbiAgICAgICAgICAgICAgICAgIFwiY29ubmVjdE9wdGlvbnMucG9ydHNcIlxuICAgICAgICAgICAgICAgIF0pXG4gICAgICAgICAgICAgICk7XG4gICAgICAgICAgICBpZiAoIShjb25uZWN0T3B0aW9ucy5wb3J0cyBpbnN0YW5jZW9mIEFycmF5KSlcbiAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICAgICAgICAgIGZvcm1hdChFUlJPUi5JTlZBTElEX0FSR1VNRU5ULCBbXG4gICAgICAgICAgICAgICAgICBjb25uZWN0T3B0aW9ucy5wb3J0cyxcbiAgICAgICAgICAgICAgICAgIFwiY29ubmVjdE9wdGlvbnMucG9ydHNcIlxuICAgICAgICAgICAgICAgIF0pXG4gICAgICAgICAgICAgICk7XG4gICAgICAgICAgICBpZiAoY29ubmVjdE9wdGlvbnMuaG9zdHMubGVuZ3RoICE9PSBjb25uZWN0T3B0aW9ucy5wb3J0cy5sZW5ndGgpXG4gICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgICAgICAgICBmb3JtYXQoRVJST1IuSU5WQUxJRF9BUkdVTUVOVCwgW1xuICAgICAgICAgICAgICAgICAgY29ubmVjdE9wdGlvbnMucG9ydHMsXG4gICAgICAgICAgICAgICAgICBcImNvbm5lY3RPcHRpb25zLnBvcnRzXCJcbiAgICAgICAgICAgICAgICBdKVxuICAgICAgICAgICAgICApO1xuXG4gICAgICAgICAgICBjb25uZWN0T3B0aW9ucy51cmlzID0gW107XG5cbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY29ubmVjdE9wdGlvbnMuaG9zdHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgIHR5cGVvZiBjb25uZWN0T3B0aW9ucy5wb3J0c1tpXSAhPT0gXCJudW1iZXJcIiB8fFxuICAgICAgICAgICAgICAgIGNvbm5lY3RPcHRpb25zLnBvcnRzW2ldIDwgMFxuICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICAgICAgICAgICAgZm9ybWF0KEVSUk9SLklOVkFMSURfVFlQRSwgW1xuICAgICAgICAgICAgICAgICAgICB0eXBlb2YgY29ubmVjdE9wdGlvbnMucG9ydHNbaV0sXG4gICAgICAgICAgICAgICAgICAgIFwiY29ubmVjdE9wdGlvbnMucG9ydHNbXCIgKyBpICsgXCJdXCJcbiAgICAgICAgICAgICAgICAgIF0pXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgdmFyIGhvc3QgPSBjb25uZWN0T3B0aW9ucy5ob3N0c1tpXTtcbiAgICAgICAgICAgICAgdmFyIHBvcnQgPSBjb25uZWN0T3B0aW9ucy5wb3J0c1tpXTtcblxuICAgICAgICAgICAgICB2YXIgaXB2NiA9IGhvc3QuaW5kZXhPZihcIjpcIikgIT09IC0xO1xuICAgICAgICAgICAgICB1cmkgPVxuICAgICAgICAgICAgICAgIFwid3M6Ly9cIiArIChpcHY2ID8gXCJbXCIgKyBob3N0ICsgXCJdXCIgOiBob3N0KSArIFwiOlwiICsgcG9ydCArIHBhdGg7XG4gICAgICAgICAgICAgIGNvbm5lY3RPcHRpb25zLnVyaXMucHVzaCh1cmkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjb25uZWN0T3B0aW9ucy51cmlzID0gY29ubmVjdE9wdGlvbnMuaG9zdHM7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgY2xpZW50LmNvbm5lY3QoY29ubmVjdE9wdGlvbnMpO1xuICAgICAgfTtcblxuICAgICAgLyoqXG4gICAgICAgKiBTdWJzY3JpYmUgZm9yIG1lc3NhZ2VzLCByZXF1ZXN0IHJlY2VpcHQgb2YgYSBjb3B5IG9mIG1lc3NhZ2VzIHNlbnQgdG8gdGhlIGRlc3RpbmF0aW9ucyBkZXNjcmliZWQgYnkgdGhlIGZpbHRlci5cbiAgICAgICAqXG4gICAgICAgKiBAbmFtZSBQYWhvLkNsaWVudCNzdWJzY3JpYmVcbiAgICAgICAqIEBmdW5jdGlvblxuICAgICAgICogQHBhcmFtIHtzdHJpbmd9IGZpbHRlciBkZXNjcmliaW5nIHRoZSBkZXN0aW5hdGlvbnMgdG8gcmVjZWl2ZSBtZXNzYWdlcyBmcm9tLlxuICAgICAgICogPGJyPlxuICAgICAgICogQHBhcmFtIHtvYmplY3R9IHN1YnNjcmliZU9wdGlvbnMgLSB1c2VkIHRvIGNvbnRyb2wgdGhlIHN1YnNjcmlwdGlvblxuICAgICAgICpcbiAgICAgICAqIEBwYXJhbSB7bnVtYmVyfSBzdWJzY3JpYmVPcHRpb25zLnFvcyAtIHRoZSBtYXhpbXVtIHFvcyBvZiBhbnkgcHVibGljYXRpb25zIHNlbnRcbiAgICAgICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFzIGEgcmVzdWx0IG9mIG1ha2luZyB0aGlzIHN1YnNjcmlwdGlvbi5cbiAgICAgICAqIEBwYXJhbSB7b2JqZWN0fSBzdWJzY3JpYmVPcHRpb25zLmludm9jYXRpb25Db250ZXh0IC0gcGFzc2VkIHRvIHRoZSBvblN1Y2Nlc3MgY2FsbGJhY2tcbiAgICAgICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9yIG9uRmFpbHVyZSBjYWxsYmFjay5cbiAgICAgICAqIEBwYXJhbSB7ZnVuY3Rpb259IHN1YnNjcmliZU9wdGlvbnMub25TdWNjZXNzIC0gY2FsbGVkIHdoZW4gdGhlIHN1YnNjcmliZSBhY2tub3dsZWRnZW1lbnRcbiAgICAgICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhhcyBiZWVuIHJlY2VpdmVkIGZyb20gdGhlIHNlcnZlci5cbiAgICAgICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEEgc2luZ2xlIHJlc3BvbnNlIG9iamVjdCBwYXJhbWV0ZXIgaXMgcGFzc2VkIHRvIHRoZSBvblN1Y2Nlc3MgY2FsbGJhY2sgY29udGFpbmluZyB0aGUgZm9sbG93aW5nIGZpZWxkczpcbiAgICAgICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxvbD5cbiAgICAgICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsaT5pbnZvY2F0aW9uQ29udGV4dCBpZiBzZXQgaW4gdGhlIHN1YnNjcmliZU9wdGlvbnMuXG4gICAgICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L29sPlxuICAgICAgICogQHBhcmFtIHtmdW5jdGlvbn0gc3Vic2NyaWJlT3B0aW9ucy5vbkZhaWx1cmUgLSBjYWxsZWQgd2hlbiB0aGUgc3Vic2NyaWJlIHJlcXVlc3QgaGFzIGZhaWxlZCBvciB0aW1lZCBvdXQuXG4gICAgICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBIHNpbmdsZSByZXNwb25zZSBvYmplY3QgcGFyYW1ldGVyIGlzIHBhc3NlZCB0byB0aGUgb25GYWlsdXJlIGNhbGxiYWNrIGNvbnRhaW5pbmcgdGhlIGZvbGxvd2luZyBmaWVsZHM6XG4gICAgICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8b2w+XG4gICAgICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGk+aW52b2NhdGlvbkNvbnRleHQgLSBpZiBzZXQgaW4gdGhlIHN1YnNjcmliZU9wdGlvbnMuXG4gICAgICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGk+ZXJyb3JDb2RlIC0gYSBudW1iZXIgaW5kaWNhdGluZyB0aGUgbmF0dXJlIG9mIHRoZSBlcnJvci5cbiAgICAgICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsaT5lcnJvck1lc3NhZ2UgLSB0ZXh0IGRlc2NyaWJpbmcgdGhlIGVycm9yLlxuICAgICAgICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9vbD5cbiAgICAgICAqIEBwYXJhbSB7bnVtYmVyfSBzdWJzY3JpYmVPcHRpb25zLnRpbWVvdXQgLSB3aGljaCwgaWYgcHJlc2VudCwgZGV0ZXJtaW5lcyB0aGUgbnVtYmVyIG9mXG4gICAgICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWNvbmRzIGFmdGVyIHdoaWNoIHRoZSBvbkZhaWx1cmUgY2FsYmFjayBpcyBjYWxsZWQuXG4gICAgICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBUaGUgcHJlc2VuY2Ugb2YgYSB0aW1lb3V0IGRvZXMgbm90IHByZXZlbnQgdGhlIG9uU3VjY2Vzc1xuICAgICAgICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2sgZnJvbSBiZWluZyBjYWxsZWQgd2hlbiB0aGUgc3Vic2NyaWJlIGNvbXBsZXRlcy5cbiAgICAgICAqIEB0aHJvd3Mge0ludmFsaWRTdGF0ZX0gaWYgdGhlIGNsaWVudCBpcyBub3QgaW4gY29ubmVjdGVkIHN0YXRlLlxuICAgICAgICovXG4gICAgICB0aGlzLnN1YnNjcmliZSA9IGZ1bmN0aW9uKGZpbHRlciwgc3Vic2NyaWJlT3B0aW9ucykge1xuICAgICAgICBpZiAodHlwZW9mIGZpbHRlciAhPT0gXCJzdHJpbmdcIiAmJiBmaWx0ZXIuY29uc3RydWN0b3IgIT09IEFycmF5KVxuICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkludmFsaWQgYXJndW1lbnQ6XCIgKyBmaWx0ZXIpO1xuICAgICAgICBzdWJzY3JpYmVPcHRpb25zID0gc3Vic2NyaWJlT3B0aW9ucyB8fCB7fTtcbiAgICAgICAgdmFsaWRhdGUoc3Vic2NyaWJlT3B0aW9ucywge1xuICAgICAgICAgIHFvczogXCJudW1iZXJcIixcbiAgICAgICAgICBpbnZvY2F0aW9uQ29udGV4dDogXCJvYmplY3RcIixcbiAgICAgICAgICBvblN1Y2Nlc3M6IFwiZnVuY3Rpb25cIixcbiAgICAgICAgICBvbkZhaWx1cmU6IFwiZnVuY3Rpb25cIixcbiAgICAgICAgICB0aW1lb3V0OiBcIm51bWJlclwiXG4gICAgICAgIH0pO1xuICAgICAgICBpZiAoc3Vic2NyaWJlT3B0aW9ucy50aW1lb3V0ICYmICFzdWJzY3JpYmVPcHRpb25zLm9uRmFpbHVyZSlcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgICAgICBcInN1YnNjcmliZU9wdGlvbnMudGltZW91dCBzcGVjaWZpZWQgd2l0aCBubyBvbkZhaWx1cmUgY2FsbGJhY2suXCJcbiAgICAgICAgICApO1xuICAgICAgICBpZiAoXG4gICAgICAgICAgdHlwZW9mIHN1YnNjcmliZU9wdGlvbnMucW9zICE9PSBcInVuZGVmaW5lZFwiICYmXG4gICAgICAgICAgIShcbiAgICAgICAgICAgIHN1YnNjcmliZU9wdGlvbnMucW9zID09PSAwIHx8XG4gICAgICAgICAgICBzdWJzY3JpYmVPcHRpb25zLnFvcyA9PT0gMSB8fFxuICAgICAgICAgICAgc3Vic2NyaWJlT3B0aW9ucy5xb3MgPT09IDJcbiAgICAgICAgICApXG4gICAgICAgIClcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgICAgICBmb3JtYXQoRVJST1IuSU5WQUxJRF9BUkdVTUVOVCwgW1xuICAgICAgICAgICAgICBzdWJzY3JpYmVPcHRpb25zLnFvcyxcbiAgICAgICAgICAgICAgXCJzdWJzY3JpYmVPcHRpb25zLnFvc1wiXG4gICAgICAgICAgICBdKVxuICAgICAgICAgICk7XG4gICAgICAgIGNsaWVudC5zdWJzY3JpYmUoZmlsdGVyLCBzdWJzY3JpYmVPcHRpb25zKTtcbiAgICAgIH07XG5cbiAgICAgIC8qKlxuXHRcdCAqIFVuc3Vic2NyaWJlIGZvciBtZXNzYWdlcywgc3RvcCByZWNlaXZpbmcgbWVzc2FnZXMgc2VudCB0byBkZXN0aW5hdGlvbnMgZGVzY3JpYmVkIGJ5IHRoZSBmaWx0ZXIuXG5cdFx0ICpcblx0XHQgKiBAbmFtZSBQYWhvLkNsaWVudCN1bnN1YnNjcmliZVxuXHRcdCAqIEBmdW5jdGlvblxuXHRcdCAqIEBwYXJhbSB7c3RyaW5nfSBmaWx0ZXIgLSBkZXNjcmliaW5nIHRoZSBkZXN0aW5hdGlvbnMgdG8gcmVjZWl2ZSBtZXNzYWdlcyBmcm9tLlxuXHRcdCAqIEBwYXJhbSB7b2JqZWN0fSB1bnN1YnNjcmliZU9wdGlvbnMgLSB1c2VkIHRvIGNvbnRyb2wgdGhlIHN1YnNjcmlwdGlvblxuXHRcdCAqIEBwYXJhbSB7b2JqZWN0fSB1bnN1YnNjcmliZU9wdGlvbnMuaW52b2NhdGlvbkNvbnRleHQgLSBwYXNzZWQgdG8gdGhlIG9uU3VjY2VzcyBjYWxsYmFja1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdCAgb3Igb25GYWlsdXJlIGNhbGxiYWNrLlxuXHRcdCAqIEBwYXJhbSB7ZnVuY3Rpb259IHVuc3Vic2NyaWJlT3B0aW9ucy5vblN1Y2Nlc3MgLSBjYWxsZWQgd2hlbiB0aGUgdW5zdWJzY3JpYmUgYWNrbm93bGVkZ2VtZW50IGhhcyBiZWVuIHJlY2VpdmVkIGZyb20gdGhlIHNlcnZlci5cblx0XHQgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEEgc2luZ2xlIHJlc3BvbnNlIG9iamVjdCBwYXJhbWV0ZXIgaXMgcGFzc2VkIHRvIHRoZVxuXHRcdCAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25TdWNjZXNzIGNhbGxiYWNrIGNvbnRhaW5pbmcgdGhlIGZvbGxvd2luZyBmaWVsZHM6XG5cdFx0ICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8b2w+XG5cdFx0ICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGk+aW52b2NhdGlvbkNvbnRleHQgLSBpZiBzZXQgaW4gdGhlIHVuc3Vic2NyaWJlT3B0aW9ucy5cblx0XHQgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvb2w+XG5cdFx0ICogQHBhcmFtIHtmdW5jdGlvbn0gdW5zdWJzY3JpYmVPcHRpb25zLm9uRmFpbHVyZSBjYWxsZWQgd2hlbiB0aGUgdW5zdWJzY3JpYmUgcmVxdWVzdCBoYXMgZmFpbGVkIG9yIHRpbWVkIG91dC5cblx0XHQgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEEgc2luZ2xlIHJlc3BvbnNlIG9iamVjdCBwYXJhbWV0ZXIgaXMgcGFzc2VkIHRvIHRoZSBvbkZhaWx1cmUgY2FsbGJhY2sgY29udGFpbmluZyB0aGUgZm9sbG93aW5nIGZpZWxkczpcblx0XHQgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxvbD5cblx0XHQgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsaT5pbnZvY2F0aW9uQ29udGV4dCAtIGlmIHNldCBpbiB0aGUgdW5zdWJzY3JpYmVPcHRpb25zLlxuXHRcdCAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxpPmVycm9yQ29kZSAtIGEgbnVtYmVyIGluZGljYXRpbmcgdGhlIG5hdHVyZSBvZiB0aGUgZXJyb3IuXG5cdFx0ICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGk+ZXJyb3JNZXNzYWdlIC0gdGV4dCBkZXNjcmliaW5nIHRoZSBlcnJvci5cblx0XHQgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvb2w+XG5cdFx0ICogQHBhcmFtIHtudW1iZXJ9IHVuc3Vic2NyaWJlT3B0aW9ucy50aW1lb3V0IC0gd2hpY2gsIGlmIHByZXNlbnQsIGRldGVybWluZXMgdGhlIG51bWJlciBvZiBzZWNvbmRzXG5cdFx0ICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhZnRlciB3aGljaCB0aGUgb25GYWlsdXJlIGNhbGxiYWNrIGlzIGNhbGxlZC4gVGhlIHByZXNlbmNlIG9mXG5cdFx0ICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhIHRpbWVvdXQgZG9lcyBub3QgcHJldmVudCB0aGUgb25TdWNjZXNzIGNhbGxiYWNrIGZyb20gYmVpbmdcblx0XHQgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhbGxlZCB3aGVuIHRoZSB1bnN1YnNjcmliZSBjb21wbGV0ZXNcblx0XHQgKiBAdGhyb3dzIHtJbnZhbGlkU3RhdGV9IGlmIHRoZSBjbGllbnQgaXMgbm90IGluIGNvbm5lY3RlZCBzdGF0ZS5cblx0XHQgKi9cbiAgICAgIHRoaXMudW5zdWJzY3JpYmUgPSBmdW5jdGlvbihmaWx0ZXIsIHVuc3Vic2NyaWJlT3B0aW9ucykge1xuICAgICAgICBpZiAodHlwZW9mIGZpbHRlciAhPT0gXCJzdHJpbmdcIiAmJiBmaWx0ZXIuY29uc3RydWN0b3IgIT09IEFycmF5KVxuICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkludmFsaWQgYXJndW1lbnQ6XCIgKyBmaWx0ZXIpO1xuICAgICAgICB1bnN1YnNjcmliZU9wdGlvbnMgPSB1bnN1YnNjcmliZU9wdGlvbnMgfHwge307XG4gICAgICAgIHZhbGlkYXRlKHVuc3Vic2NyaWJlT3B0aW9ucywge1xuICAgICAgICAgIGludm9jYXRpb25Db250ZXh0OiBcIm9iamVjdFwiLFxuICAgICAgICAgIG9uU3VjY2VzczogXCJmdW5jdGlvblwiLFxuICAgICAgICAgIG9uRmFpbHVyZTogXCJmdW5jdGlvblwiLFxuICAgICAgICAgIHRpbWVvdXQ6IFwibnVtYmVyXCJcbiAgICAgICAgfSk7XG4gICAgICAgIGlmICh1bnN1YnNjcmliZU9wdGlvbnMudGltZW91dCAmJiAhdW5zdWJzY3JpYmVPcHRpb25zLm9uRmFpbHVyZSlcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgICAgICBcInVuc3Vic2NyaWJlT3B0aW9ucy50aW1lb3V0IHNwZWNpZmllZCB3aXRoIG5vIG9uRmFpbHVyZSBjYWxsYmFjay5cIlxuICAgICAgICAgICk7XG4gICAgICAgIGNsaWVudC51bnN1YnNjcmliZShmaWx0ZXIsIHVuc3Vic2NyaWJlT3B0aW9ucyk7XG4gICAgICB9O1xuXG4gICAgICAvKipcbiAgICAgICAqIFNlbmQgYSBtZXNzYWdlIHRvIHRoZSBjb25zdW1lcnMgb2YgdGhlIGRlc3RpbmF0aW9uIGluIHRoZSBNZXNzYWdlLlxuICAgICAgICpcbiAgICAgICAqIEBuYW1lIFBhaG8uQ2xpZW50I3NlbmRcbiAgICAgICAqIEBmdW5jdGlvblxuICAgICAgICogQHBhcmFtIHtzdHJpbmd8UGFoby5NZXNzYWdlfSB0b3BpYyAtIDxiPm1hbmRhdG9yeTwvYj4gVGhlIG5hbWUgb2YgdGhlIGRlc3RpbmF0aW9uIHRvIHdoaWNoIHRoZSBtZXNzYWdlIGlzIHRvIGJlIHNlbnQuXG4gICAgICAgKiBcdFx0XHRcdFx0ICAgLSBJZiBpdCBpcyB0aGUgb25seSBwYXJhbWV0ZXIsIHVzZWQgYXMgUGFoby5NZXNzYWdlIG9iamVjdC5cbiAgICAgICAqIEBwYXJhbSB7U3RyaW5nfEFycmF5QnVmZmVyfSBwYXlsb2FkIC0gVGhlIG1lc3NhZ2UgZGF0YSB0byBiZSBzZW50LlxuICAgICAgICogQHBhcmFtIHtudW1iZXJ9IHFvcyBUaGUgUXVhbGl0eSBvZiBTZXJ2aWNlIHVzZWQgdG8gZGVsaXZlciB0aGUgbWVzc2FnZS5cbiAgICAgICAqIFx0XHQ8ZGw+XG4gICAgICAgKiBcdFx0XHQ8ZHQ+MCBCZXN0IGVmZm9ydCAoZGVmYXVsdCkuXG4gICAgICAgKiAgICAgXHRcdFx0PGR0PjEgQXQgbGVhc3Qgb25jZS5cbiAgICAgICAqICAgICBcdFx0XHQ8ZHQ+MiBFeGFjdGx5IG9uY2UuXG4gICAgICAgKiBcdFx0PC9kbD5cbiAgICAgICAqIEBwYXJhbSB7Qm9vbGVhbn0gcmV0YWluZWQgSWYgdHJ1ZSwgdGhlIG1lc3NhZ2UgaXMgdG8gYmUgcmV0YWluZWQgYnkgdGhlIHNlcnZlciBhbmQgZGVsaXZlcmVkXG4gICAgICAgKiAgICAgICAgICAgICAgICAgICAgIHRvIGJvdGggY3VycmVudCBhbmQgZnV0dXJlIHN1YnNjcmlwdGlvbnMuXG4gICAgICAgKiAgICAgICAgICAgICAgICAgICAgIElmIGZhbHNlIHRoZSBzZXJ2ZXIgb25seSBkZWxpdmVycyB0aGUgbWVzc2FnZSB0byBjdXJyZW50IHN1YnNjcmliZXJzLCB0aGlzIGlzIHRoZSBkZWZhdWx0IGZvciBuZXcgTWVzc2FnZXMuXG4gICAgICAgKiAgICAgICAgICAgICAgICAgICAgIEEgcmVjZWl2ZWQgbWVzc2FnZSBoYXMgdGhlIHJldGFpbmVkIGJvb2xlYW4gc2V0IHRvIHRydWUgaWYgdGhlIG1lc3NhZ2Ugd2FzIHB1Ymxpc2hlZFxuICAgICAgICogICAgICAgICAgICAgICAgICAgICB3aXRoIHRoZSByZXRhaW5lZCBib29sZWFuIHNldCB0byB0cnVlXG4gICAgICAgKiAgICAgICAgICAgICAgICAgICAgIGFuZCB0aGUgc3Vic2NycHRpb24gd2FzIG1hZGUgYWZ0ZXIgdGhlIG1lc3NhZ2UgaGFzIGJlZW4gcHVibGlzaGVkLlxuICAgICAgICogQHRocm93cyB7SW52YWxpZFN0YXRlfSBpZiB0aGUgY2xpZW50IGlzIG5vdCBjb25uZWN0ZWQuXG4gICAgICAgKi9cbiAgICAgIHRoaXMuc2VuZCA9IGZ1bmN0aW9uKHRvcGljLCBwYXlsb2FkLCBxb3MsIHJldGFpbmVkKSB7XG4gICAgICAgIHZhciBtZXNzYWdlO1xuXG4gICAgICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCBhcmd1bWVudC5cIiArIFwibGVuZ3RoXCIpO1xuICAgICAgICB9IGVsc2UgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT0gMSkge1xuICAgICAgICAgIGlmICghKHRvcGljIGluc3RhbmNlb2YgTWVzc2FnZSkgJiYgdHlwZW9mIHRvcGljICE9PSBcInN0cmluZ1wiKVxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCBhcmd1bWVudDpcIiArIHR5cGVvZiB0b3BpYyk7XG5cbiAgICAgICAgICBtZXNzYWdlID0gdG9waWM7XG4gICAgICAgICAgaWYgKHR5cGVvZiBtZXNzYWdlLmRlc3RpbmF0aW9uTmFtZSA9PT0gXCJ1bmRlZmluZWRcIilcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgICAgICAgZm9ybWF0KEVSUk9SLklOVkFMSURfQVJHVU1FTlQsIFtcbiAgICAgICAgICAgICAgICBtZXNzYWdlLmRlc3RpbmF0aW9uTmFtZSxcbiAgICAgICAgICAgICAgICBcIk1lc3NhZ2UuZGVzdGluYXRpb25OYW1lXCJcbiAgICAgICAgICAgICAgXSlcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgY2xpZW50LnNlbmQobWVzc2FnZSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLy9wYXJhbWV0ZXIgY2hlY2tpbmcgaW4gTWVzc2FnZSBvYmplY3RcbiAgICAgICAgICBtZXNzYWdlID0gbmV3IE1lc3NhZ2UocGF5bG9hZCk7XG4gICAgICAgICAgbWVzc2FnZS5kZXN0aW5hdGlvbk5hbWUgPSB0b3BpYztcbiAgICAgICAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA+PSAzKSBtZXNzYWdlLnFvcyA9IHFvcztcbiAgICAgICAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA+PSA0KSBtZXNzYWdlLnJldGFpbmVkID0gcmV0YWluZWQ7XG4gICAgICAgICAgY2xpZW50LnNlbmQobWVzc2FnZSk7XG4gICAgICAgIH1cbiAgICAgIH07XG5cbiAgICAgIC8qKlxuICAgICAgICogUHVibGlzaCBhIG1lc3NhZ2UgdG8gdGhlIGNvbnN1bWVycyBvZiB0aGUgZGVzdGluYXRpb24gaW4gdGhlIE1lc3NhZ2UuXG4gICAgICAgKiBTeW5vbnltIGZvciBQYWhvLk1xdHQuQ2xpZW50I3NlbmRcbiAgICAgICAqXG4gICAgICAgKiBAbmFtZSBQYWhvLkNsaWVudCNwdWJsaXNoXG4gICAgICAgKiBAZnVuY3Rpb25cbiAgICAgICAqIEBwYXJhbSB7c3RyaW5nfFBhaG8uTWVzc2FnZX0gdG9waWMgLSA8Yj5tYW5kYXRvcnk8L2I+IFRoZSBuYW1lIG9mIHRoZSB0b3BpYyB0byB3aGljaCB0aGUgbWVzc2FnZSBpcyB0byBiZSBwdWJsaXNoZWQuXG4gICAgICAgKiBcdFx0XHRcdFx0ICAgLSBJZiBpdCBpcyB0aGUgb25seSBwYXJhbWV0ZXIsIHVzZWQgYXMgUGFoby5NZXNzYWdlIG9iamVjdC5cbiAgICAgICAqIEBwYXJhbSB7U3RyaW5nfEFycmF5QnVmZmVyfSBwYXlsb2FkIC0gVGhlIG1lc3NhZ2UgZGF0YSB0byBiZSBwdWJsaXNoZWQuXG4gICAgICAgKiBAcGFyYW0ge251bWJlcn0gcW9zIFRoZSBRdWFsaXR5IG9mIFNlcnZpY2UgdXNlZCB0byBkZWxpdmVyIHRoZSBtZXNzYWdlLlxuICAgICAgICogXHRcdDxkbD5cbiAgICAgICAqIFx0XHRcdDxkdD4wIEJlc3QgZWZmb3J0IChkZWZhdWx0KS5cbiAgICAgICAqICAgICBcdFx0XHQ8ZHQ+MSBBdCBsZWFzdCBvbmNlLlxuICAgICAgICogICAgIFx0XHRcdDxkdD4yIEV4YWN0bHkgb25jZS5cbiAgICAgICAqIFx0XHQ8L2RsPlxuICAgICAgICogQHBhcmFtIHtCb29sZWFufSByZXRhaW5lZCBJZiB0cnVlLCB0aGUgbWVzc2FnZSBpcyB0byBiZSByZXRhaW5lZCBieSB0aGUgc2VydmVyIGFuZCBkZWxpdmVyZWRcbiAgICAgICAqICAgICAgICAgICAgICAgICAgICAgdG8gYm90aCBjdXJyZW50IGFuZCBmdXR1cmUgc3Vic2NyaXB0aW9ucy5cbiAgICAgICAqICAgICAgICAgICAgICAgICAgICAgSWYgZmFsc2UgdGhlIHNlcnZlciBvbmx5IGRlbGl2ZXJzIHRoZSBtZXNzYWdlIHRvIGN1cnJlbnQgc3Vic2NyaWJlcnMsIHRoaXMgaXMgdGhlIGRlZmF1bHQgZm9yIG5ldyBNZXNzYWdlcy5cbiAgICAgICAqICAgICAgICAgICAgICAgICAgICAgQSByZWNlaXZlZCBtZXNzYWdlIGhhcyB0aGUgcmV0YWluZWQgYm9vbGVhbiBzZXQgdG8gdHJ1ZSBpZiB0aGUgbWVzc2FnZSB3YXMgcHVibGlzaGVkXG4gICAgICAgKiAgICAgICAgICAgICAgICAgICAgIHdpdGggdGhlIHJldGFpbmVkIGJvb2xlYW4gc2V0IHRvIHRydWVcbiAgICAgICAqICAgICAgICAgICAgICAgICAgICAgYW5kIHRoZSBzdWJzY3JwdGlvbiB3YXMgbWFkZSBhZnRlciB0aGUgbWVzc2FnZSBoYXMgYmVlbiBwdWJsaXNoZWQuXG4gICAgICAgKiBAdGhyb3dzIHtJbnZhbGlkU3RhdGV9IGlmIHRoZSBjbGllbnQgaXMgbm90IGNvbm5lY3RlZC5cbiAgICAgICAqL1xuICAgICAgdGhpcy5wdWJsaXNoID0gZnVuY3Rpb24odG9waWMsIHBheWxvYWQsIHFvcywgcmV0YWluZWQpIHtcbiAgICAgICAgdmFyIG1lc3NhZ2U7XG5cbiAgICAgICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIGFyZ3VtZW50LlwiICsgXCJsZW5ndGhcIik7XG4gICAgICAgIH0gZWxzZSBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PSAxKSB7XG4gICAgICAgICAgaWYgKCEodG9waWMgaW5zdGFuY2VvZiBNZXNzYWdlKSAmJiB0eXBlb2YgdG9waWMgIT09IFwic3RyaW5nXCIpXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIGFyZ3VtZW50OlwiICsgdHlwZW9mIHRvcGljKTtcblxuICAgICAgICAgIG1lc3NhZ2UgPSB0b3BpYztcbiAgICAgICAgICBpZiAodHlwZW9mIG1lc3NhZ2UuZGVzdGluYXRpb25OYW1lID09PSBcInVuZGVmaW5lZFwiKVxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICAgICAgICBmb3JtYXQoRVJST1IuSU5WQUxJRF9BUkdVTUVOVCwgW1xuICAgICAgICAgICAgICAgIG1lc3NhZ2UuZGVzdGluYXRpb25OYW1lLFxuICAgICAgICAgICAgICAgIFwiTWVzc2FnZS5kZXN0aW5hdGlvbk5hbWVcIlxuICAgICAgICAgICAgICBdKVxuICAgICAgICAgICAgKTtcbiAgICAgICAgICBjbGllbnQuc2VuZChtZXNzYWdlKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvL3BhcmFtZXRlciBjaGVja2luZyBpbiBNZXNzYWdlIG9iamVjdFxuICAgICAgICAgIG1lc3NhZ2UgPSBuZXcgTWVzc2FnZShwYXlsb2FkKTtcbiAgICAgICAgICBtZXNzYWdlLmRlc3RpbmF0aW9uTmFtZSA9IHRvcGljO1xuICAgICAgICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID49IDMpIG1lc3NhZ2UucW9zID0gcW9zO1xuICAgICAgICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID49IDQpIG1lc3NhZ2UucmV0YWluZWQgPSByZXRhaW5lZDtcbiAgICAgICAgICBjbGllbnQuc2VuZChtZXNzYWdlKTtcbiAgICAgICAgfVxuICAgICAgfTtcblxuICAgICAgLyoqXG4gICAgICAgKiBOb3JtYWwgZGlzY29ubmVjdCBvZiB0aGlzIE1lc3NhZ2luZyBjbGllbnQgZnJvbSBpdHMgc2VydmVyLlxuICAgICAgICpcbiAgICAgICAqIEBuYW1lIFBhaG8uQ2xpZW50I2Rpc2Nvbm5lY3RcbiAgICAgICAqIEBmdW5jdGlvblxuICAgICAgICogQHRocm93cyB7SW52YWxpZFN0YXRlfSBpZiB0aGUgY2xpZW50IGlzIGFscmVhZHkgZGlzY29ubmVjdGVkLlxuICAgICAgICovXG4gICAgICB0aGlzLmRpc2Nvbm5lY3QgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgY2xpZW50LmRpc2Nvbm5lY3QoKTtcbiAgICAgIH07XG5cbiAgICAgIC8qKlxuICAgICAgICogR2V0IHRoZSBjb250ZW50cyBvZiB0aGUgdHJhY2UgbG9nLlxuICAgICAgICpcbiAgICAgICAqIEBuYW1lIFBhaG8uQ2xpZW50I2dldFRyYWNlTG9nXG4gICAgICAgKiBAZnVuY3Rpb25cbiAgICAgICAqIEByZXR1cm4ge09iamVjdFtdfSB0cmFjZWJ1ZmZlciBjb250YWluaW5nIHRoZSB0aW1lIG9yZGVyZWQgdHJhY2UgcmVjb3Jkcy5cbiAgICAgICAqL1xuICAgICAgdGhpcy5nZXRUcmFjZUxvZyA9IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gY2xpZW50LmdldFRyYWNlTG9nKCk7XG4gICAgICB9O1xuXG4gICAgICAvKipcbiAgICAgICAqIFN0YXJ0IHRyYWNpbmcuXG4gICAgICAgKlxuICAgICAgICogQG5hbWUgUGFoby5DbGllbnQjc3RhcnRUcmFjZVxuICAgICAgICogQGZ1bmN0aW9uXG4gICAgICAgKi9cbiAgICAgIHRoaXMuc3RhcnRUcmFjZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICBjbGllbnQuc3RhcnRUcmFjZSgpO1xuICAgICAgfTtcblxuICAgICAgLyoqXG4gICAgICAgKiBTdG9wIHRyYWNpbmcuXG4gICAgICAgKlxuICAgICAgICogQG5hbWUgUGFoby5DbGllbnQjc3RvcFRyYWNlXG4gICAgICAgKiBAZnVuY3Rpb25cbiAgICAgICAqL1xuICAgICAgdGhpcy5zdG9wVHJhY2UgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgY2xpZW50LnN0b3BUcmFjZSgpO1xuICAgICAgfTtcblxuICAgICAgdGhpcy5pc0Nvbm5lY3RlZCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gY2xpZW50LmNvbm5lY3RlZDtcbiAgICAgIH07XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIEFuIGFwcGxpY2F0aW9uIG1lc3NhZ2UsIHNlbnQgb3IgcmVjZWl2ZWQuXG4gICAgICogPHA+XG4gICAgICogQWxsIGF0dHJpYnV0ZXMgbWF5IGJlIG51bGwsIHdoaWNoIGltcGxpZXMgdGhlIGRlZmF1bHQgdmFsdWVzLlxuICAgICAqXG4gICAgICogQG5hbWUgUGFoby5NZXNzYWdlXG4gICAgICogQGNvbnN0cnVjdG9yXG4gICAgICogQHBhcmFtIHtTdHJpbmd8QXJyYXlCdWZmZXJ9IHBheWxvYWQgVGhlIG1lc3NhZ2UgZGF0YSB0byBiZSBzZW50LlxuICAgICAqIDxwPlxuICAgICAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBwYXlsb2FkU3RyaW5nIDxpPnJlYWQgb25seTwvaT4gVGhlIHBheWxvYWQgYXMgYSBzdHJpbmcgaWYgdGhlIHBheWxvYWQgY29uc2lzdHMgb2YgdmFsaWQgVVRGLTggY2hhcmFjdGVycy5cbiAgICAgKiBAcHJvcGVydHkge0FycmF5QnVmZmVyfSBwYXlsb2FkQnl0ZXMgPGk+cmVhZCBvbmx5PC9pPiBUaGUgcGF5bG9hZCBhcyBhbiBBcnJheUJ1ZmZlci5cbiAgICAgKiA8cD5cbiAgICAgKiBAcHJvcGVydHkge3N0cmluZ30gZGVzdGluYXRpb25OYW1lIDxiPm1hbmRhdG9yeTwvYj4gVGhlIG5hbWUgb2YgdGhlIGRlc3RpbmF0aW9uIHRvIHdoaWNoIHRoZSBtZXNzYWdlIGlzIHRvIGJlIHNlbnRcbiAgICAgKiAgICAgICAgICAgICAgICAgICAgKGZvciBtZXNzYWdlcyBhYm91dCB0byBiZSBzZW50KSBvciB0aGUgbmFtZSBvZiB0aGUgZGVzdGluYXRpb24gZnJvbSB3aGljaCB0aGUgbWVzc2FnZSBoYXMgYmVlbiByZWNlaXZlZC5cbiAgICAgKiAgICAgICAgICAgICAgICAgICAgKGZvciBtZXNzYWdlcyByZWNlaXZlZCBieSB0aGUgb25NZXNzYWdlIGZ1bmN0aW9uKS5cbiAgICAgKiA8cD5cbiAgICAgKiBAcHJvcGVydHkge251bWJlcn0gcW9zIFRoZSBRdWFsaXR5IG9mIFNlcnZpY2UgdXNlZCB0byBkZWxpdmVyIHRoZSBtZXNzYWdlLlxuICAgICAqIDxkbD5cbiAgICAgKiAgICAgPGR0PjAgQmVzdCBlZmZvcnQgKGRlZmF1bHQpLlxuICAgICAqICAgICA8ZHQ+MSBBdCBsZWFzdCBvbmNlLlxuICAgICAqICAgICA8ZHQ+MiBFeGFjdGx5IG9uY2UuXG4gICAgICogPC9kbD5cbiAgICAgKiA8cD5cbiAgICAgKiBAcHJvcGVydHkge0Jvb2xlYW59IHJldGFpbmVkIElmIHRydWUsIHRoZSBtZXNzYWdlIGlzIHRvIGJlIHJldGFpbmVkIGJ5IHRoZSBzZXJ2ZXIgYW5kIGRlbGl2ZXJlZFxuICAgICAqICAgICAgICAgICAgICAgICAgICAgdG8gYm90aCBjdXJyZW50IGFuZCBmdXR1cmUgc3Vic2NyaXB0aW9ucy5cbiAgICAgKiAgICAgICAgICAgICAgICAgICAgIElmIGZhbHNlIHRoZSBzZXJ2ZXIgb25seSBkZWxpdmVycyB0aGUgbWVzc2FnZSB0byBjdXJyZW50IHN1YnNjcmliZXJzLCB0aGlzIGlzIHRoZSBkZWZhdWx0IGZvciBuZXcgTWVzc2FnZXMuXG4gICAgICogICAgICAgICAgICAgICAgICAgICBBIHJlY2VpdmVkIG1lc3NhZ2UgaGFzIHRoZSByZXRhaW5lZCBib29sZWFuIHNldCB0byB0cnVlIGlmIHRoZSBtZXNzYWdlIHdhcyBwdWJsaXNoZWRcbiAgICAgKiAgICAgICAgICAgICAgICAgICAgIHdpdGggdGhlIHJldGFpbmVkIGJvb2xlYW4gc2V0IHRvIHRydWVcbiAgICAgKiAgICAgICAgICAgICAgICAgICAgIGFuZCB0aGUgc3Vic2NycHRpb24gd2FzIG1hZGUgYWZ0ZXIgdGhlIG1lc3NhZ2UgaGFzIGJlZW4gcHVibGlzaGVkLlxuICAgICAqIDxwPlxuICAgICAqIEBwcm9wZXJ0eSB7Qm9vbGVhbn0gZHVwbGljYXRlIDxpPnJlYWQgb25seTwvaT4gSWYgdHJ1ZSwgdGhpcyBtZXNzYWdlIG1pZ2h0IGJlIGEgZHVwbGljYXRlIG9mIG9uZSB3aGljaCBoYXMgYWxyZWFkeSBiZWVuIHJlY2VpdmVkLlxuICAgICAqICAgICAgICAgICAgICAgICAgICAgVGhpcyBpcyBvbmx5IHNldCBvbiBtZXNzYWdlcyByZWNlaXZlZCBmcm9tIHRoZSBzZXJ2ZXIuXG4gICAgICpcbiAgICAgKi9cbiAgICB2YXIgTWVzc2FnZSA9IGZ1bmN0aW9uKG5ld1BheWxvYWQpIHtcbiAgICAgIHZhciBwYXlsb2FkO1xuICAgICAgaWYgKFxuICAgICAgICB0eXBlb2YgbmV3UGF5bG9hZCA9PT0gXCJzdHJpbmdcIiB8fFxuICAgICAgICBuZXdQYXlsb2FkIGluc3RhbmNlb2YgQXJyYXlCdWZmZXIgfHxcbiAgICAgICAgKEFycmF5QnVmZmVyLmlzVmlldyhuZXdQYXlsb2FkKSAmJiAhKG5ld1BheWxvYWQgaW5zdGFuY2VvZiBEYXRhVmlldykpXG4gICAgICApIHtcbiAgICAgICAgcGF5bG9hZCA9IG5ld1BheWxvYWQ7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aHJvdyBmb3JtYXQoRVJST1IuSU5WQUxJRF9BUkdVTUVOVCwgW25ld1BheWxvYWQsIFwibmV3UGF5bG9hZFwiXSk7XG4gICAgICB9XG5cbiAgICAgIHZhciBkZXN0aW5hdGlvbk5hbWU7XG4gICAgICB2YXIgcW9zID0gMDtcbiAgICAgIHZhciByZXRhaW5lZCA9IGZhbHNlO1xuICAgICAgdmFyIGR1cGxpY2F0ZSA9IGZhbHNlO1xuXG4gICAgICBPYmplY3QuZGVmaW5lUHJvcGVydGllcyh0aGlzLCB7XG4gICAgICAgIHBheWxvYWRTdHJpbmc6IHtcbiAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgIGdldDogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBpZiAodHlwZW9mIHBheWxvYWQgPT09IFwic3RyaW5nXCIpIHJldHVybiBwYXlsb2FkO1xuICAgICAgICAgICAgZWxzZSByZXR1cm4gcGFyc2VVVEY4KHBheWxvYWQsIDAsIHBheWxvYWQubGVuZ3RoKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIHBheWxvYWRCeXRlczoge1xuICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgZ2V0OiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgcGF5bG9hZCA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgICAgICB2YXIgYnVmZmVyID0gbmV3IEFycmF5QnVmZmVyKFVURjhMZW5ndGgocGF5bG9hZCkpO1xuICAgICAgICAgICAgICB2YXIgYnl0ZVN0cmVhbSA9IG5ldyBVaW50OEFycmF5KGJ1ZmZlcik7XG4gICAgICAgICAgICAgIHN0cmluZ1RvVVRGOChwYXlsb2FkLCBieXRlU3RyZWFtLCAwKTtcblxuICAgICAgICAgICAgICByZXR1cm4gYnl0ZVN0cmVhbTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIHJldHVybiBwYXlsb2FkO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgZGVzdGluYXRpb25OYW1lOiB7XG4gICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICBnZXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgcmV0dXJuIGRlc3RpbmF0aW9uTmFtZTtcbiAgICAgICAgICB9LFxuICAgICAgICAgIHNldDogZnVuY3Rpb24obmV3RGVzdGluYXRpb25OYW1lKSB7XG4gICAgICAgICAgICBpZiAodHlwZW9mIG5ld0Rlc3RpbmF0aW9uTmFtZSA9PT0gXCJzdHJpbmdcIilcbiAgICAgICAgICAgICAgZGVzdGluYXRpb25OYW1lID0gbmV3RGVzdGluYXRpb25OYW1lO1xuICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgICAgICAgICAgZm9ybWF0KEVSUk9SLklOVkFMSURfQVJHVU1FTlQsIFtcbiAgICAgICAgICAgICAgICAgIG5ld0Rlc3RpbmF0aW9uTmFtZSxcbiAgICAgICAgICAgICAgICAgIFwibmV3RGVzdGluYXRpb25OYW1lXCJcbiAgICAgICAgICAgICAgICBdKVxuICAgICAgICAgICAgICApO1xuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgcW9zOiB7XG4gICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICBnZXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgcmV0dXJuIHFvcztcbiAgICAgICAgICB9LFxuICAgICAgICAgIHNldDogZnVuY3Rpb24obmV3UW9zKSB7XG4gICAgICAgICAgICBpZiAobmV3UW9zID09PSAwIHx8IG5ld1FvcyA9PT0gMSB8fCBuZXdRb3MgPT09IDIpIHFvcyA9IG5ld1FvcztcbiAgICAgICAgICAgIGVsc2UgdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCBhcmd1bWVudDpcIiArIG5ld1Fvcyk7XG4gICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICByZXRhaW5lZDoge1xuICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgZ2V0OiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHJldHVybiByZXRhaW5lZDtcbiAgICAgICAgICB9LFxuICAgICAgICAgIHNldDogZnVuY3Rpb24obmV3UmV0YWluZWQpIHtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgbmV3UmV0YWluZWQgPT09IFwiYm9vbGVhblwiKSByZXRhaW5lZCA9IG5ld1JldGFpbmVkO1xuICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgICAgICAgICAgZm9ybWF0KEVSUk9SLklOVkFMSURfQVJHVU1FTlQsIFtuZXdSZXRhaW5lZCwgXCJuZXdSZXRhaW5lZFwiXSlcbiAgICAgICAgICAgICAgKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIHRvcGljOiB7XG4gICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICBnZXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgcmV0dXJuIGRlc3RpbmF0aW9uTmFtZTtcbiAgICAgICAgICB9LFxuICAgICAgICAgIHNldDogZnVuY3Rpb24obmV3VG9waWMpIHtcbiAgICAgICAgICAgIGRlc3RpbmF0aW9uTmFtZSA9IG5ld1RvcGljO1xuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgZHVwbGljYXRlOiB7XG4gICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICBnZXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgcmV0dXJuIGR1cGxpY2F0ZTtcbiAgICAgICAgICB9LFxuICAgICAgICAgIHNldDogZnVuY3Rpb24obmV3RHVwbGljYXRlKSB7XG4gICAgICAgICAgICBkdXBsaWNhdGUgPSBuZXdEdXBsaWNhdGU7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9O1xuXG4gICAgLy8gTW9kdWxlIGNvbnRlbnRzLlxuICAgIHJldHVybiB7XG4gICAgICBDbGllbnQ6IENsaWVudCxcbiAgICAgIE1lc3NhZ2U6IE1lc3NhZ2VcbiAgICB9O1xuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1uZXN0ZWQtdGVybmFyeVxuICB9KShcbiAgICB0eXBlb2YgZ2xvYmFsICE9PSBcInVuZGVmaW5lZFwiXG4gICAgICA/IGdsb2JhbFxuICAgICAgOiB0eXBlb2Ygc2VsZiAhPT0gXCJ1bmRlZmluZWRcIlxuICAgICAgPyBzZWxmXG4gICAgICA6IHR5cGVvZiB3aW5kb3cgIT09IFwidW5kZWZpbmVkXCJcbiAgICAgID8gd2luZG93XG4gICAgICA6IHt9XG4gICk7XG4gIHJldHVybiBQYWhvTVFUVDtcbn0pO1xuIiwiLyplc2xpbnQgbm8tdW51c2VkLXZhcnM6IFwib2ZmXCIqL1xuaW1wb3J0IHsgQ2hhdFNlc3Npb25PYmplY3QgfSBmcm9tIFwiLi9jb3JlL2NoYXRTZXNzaW9uXCI7XG5cbmdsb2JhbC5jb25uZWN0ID0gZ2xvYmFsLmNvbm5lY3QgfHwge307XG5jb25uZWN0LkNoYXRTZXNzaW9uID0gQ2hhdFNlc3Npb25PYmplY3Q7XG5cbmV4cG9ydCBjb25zdCBDaGF0U2Vzc2lvbiA9IENoYXRTZXNzaW9uT2JqZWN0O1xuIiwibW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihtb2R1bGUpIHtcblx0aWYgKCFtb2R1bGUud2VicGFja1BvbHlmaWxsKSB7XG5cdFx0bW9kdWxlLmRlcHJlY2F0ZSA9IGZ1bmN0aW9uKCkge307XG5cdFx0bW9kdWxlLnBhdGhzID0gW107XG5cdFx0Ly8gbW9kdWxlLnBhcmVudCA9IHVuZGVmaW5lZCBieSBkZWZhdWx0XG5cdFx0aWYgKCFtb2R1bGUuY2hpbGRyZW4pIG1vZHVsZS5jaGlsZHJlbiA9IFtdO1xuXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShtb2R1bGUsIFwibG9hZGVkXCIsIHtcblx0XHRcdGVudW1lcmFibGU6IHRydWUsXG5cdFx0XHRnZXQ6IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRyZXR1cm4gbW9kdWxlLmw7XG5cdFx0XHR9XG5cdFx0fSk7XG5cdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KG1vZHVsZSwgXCJpZFwiLCB7XG5cdFx0XHRlbnVtZXJhYmxlOiB0cnVlLFxuXHRcdFx0Z2V0OiBmdW5jdGlvbigpIHtcblx0XHRcdFx0cmV0dXJuIG1vZHVsZS5pO1xuXHRcdFx0fVxuXHRcdH0pO1xuXHRcdG1vZHVsZS53ZWJwYWNrUG9seWZpbGwgPSAxO1xuXHR9XG5cdHJldHVybiBtb2R1bGU7XG59O1xuIl0sInNvdXJjZVJvb3QiOiIifQ==